const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_static/index-Dm-6xvZy.css","_static/index-CwBfVUSX.css"])))=>i.map(i=>d[i]);
import{jsx as E,Fragment as ne,jsxs as Q}from"https://www.gucci.com/deps/_static/react@18.3.0/jsx-runtime";import*as Y from"https://www.gucci.com/deps/_static/react@18.3.0";import ii,{createContext as dt,useContext as le,useState as We,useEffect as It,useMemo as wr,useId as qa,useRef as ct,useCallback as ur,forwardRef as Bs,isValidElement as Gs}from"https://www.gucci.com/deps/_static/react@18.3.0";import Hs from"https://www.gucci.com/deps/_static/react-dom@18.3.0/client";function js(e){switch(e.toLowerCase()){case"trace":return{severityText:"TRACE",severityNumber:1};case"debug":return{severityText:"DEBUG",severityNumber:5};case"info":return{severityText:"INFO",severityNumber:9};case"warn":return{severityText:"WARN",severityNumber:13};case"error":return{severityText:"ERROR",severityNumber:17};default:return{severityText:"FATAL",severityNumber:21}}}function Ks(e){const{level:t,span_id:r,trace_id:n,trace_flags:i,resource:a,Body:o,...s}=e,l=new Date().getTime(),f={trace_id:s["dd.trace_id"],span_id:s["dd.span_id"]},u=Object.values(f).some(v=>v!==void 0);return{Timestamp:l,ObservedTimestamp:l,TraceId:n,SpanId:r,TraceFlags:i,Resource:a||void 0,InstrumentationScope:s.instrumentationScope||void 0,dd:u?f:void 0,Body:o||void 0,Attributes:{...s,"dd.trace_id":void 0,"dd.span_id":void 0}}}var qs={timestamp:!1,messageKey:"Body",base:void 0,formatters:{level:e=>{const t=js(e);return{SeverityText:t.severityText,SeverityNumber:t.severityNumber}},bindings:e=>({bindings:e}),log:e=>Ks(e)}};function ai(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wt={exports:{}},en,Ai;function $s(){if(Ai)return en;Ai=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}en=t;function t(r,n,i){var a=i&&i.stringify||e,o=1;if(typeof r=="object"&&r!==null){var s=n.length+o;if(s===1)return r;var l=new Array(s);l[0]=a(r);for(var f=1;f<s;f++)l[f]=a(n[f]);return l.join(" ")}if(typeof r!="string")return r;var u=n.length;if(u===0)return r;for(var v="",c=1-o,d=-1,h=r&&r.length||0,p=0;p<h;){if(r.charCodeAt(p)===37&&p+1<h){switch(d=d>-1?d:0,r.charCodeAt(p+1)){case 100:case 102:if(c>=u||n[c]==null)break;d<p&&(v+=r.slice(d,p)),v+=Number(n[c]),d=p+2,p++;break;case 105:if(c>=u||n[c]==null)break;d<p&&(v+=r.slice(d,p)),v+=Math.floor(Number(n[c])),d=p+2,p++;break;case 79:case 111:case 106:if(c>=u||n[c]===void 0)break;d<p&&(v+=r.slice(d,p));var g=typeof n[c];if(g==="string"){v+="'"+n[c]+"'",d=p+2,p++;break}if(g==="function"){v+=n[c].name||"<anonymous>",d=p+2,p++;break}v+=a(n[c]),d=p+2,p++;break;case 115:if(c>=u)break;d<p&&(v+=r.slice(d,p)),v+=String(n[c]),d=p+2,p++;break;case 37:d<p&&(v+=r.slice(d,p)),v+="%",d=p+2,p++,c--;break}++c}++p}return d===-1?r:(d<h&&(v+=r.slice(d)),v)}return en}var Ti;function zs(){if(Ti)return Wt.exports;Ti=1;const e=$s();Wt.exports=u;const t=G().console||{},r={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:U,wrapResponseSerializer:U,wrapErrorSerializer:U,req:S,res:S,err:P,errWithCause:P};function n(y,D){return y==="silent"?1/0:D.levels.values[y]}const i=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function s(y,D){const C={logger:D,parent:y[a]};D[a]=C}function l(y,D,C){const F={};D.forEach(V=>{F[V]=C[V]?C[V]:t[V]||t[o[V]||"log"]||x}),y[i]=F}function f(y,D){return Array.isArray(y)?y.filter(function(F){return F!=="!stdSerializers.err"}):y===!0?Object.keys(D):!1}function u(y){y=y||{},y.browser=y.browser||{};const D=y.browser.transmit;if(D&&typeof D.send!="function")throw Error("pino: transmit option must have a send function");const C=y.browser.write||t;y.browser.write&&(y.browser.asObject=!0);const F=y.serializers||{},V=f(y.browser.serialize,F);let z=y.browser.serialize;Array.isArray(y.browser.serialize)&&y.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const te=Object.keys(y.customLevels||{}),q=["error","fatal","warn","info","debug","trace"].concat(te);typeof C=="function"&&q.forEach(function(fe){C[fe]=C}),(y.enabled===!1||y.browser.disabled)&&(y.level="silent");const ae=y.level||"info",k=Object.create(C);k.log||(k.log=x),l(k,q,C),s({},k),Object.defineProperty(k,"levelVal",{get:ce}),Object.defineProperty(k,"level",{get:Ce,set:Ve});const ie={transmit:D,serialize:V,asObject:y.browser.asObject,asObjectBindingsOnly:y.browser.asObjectBindingsOnly,formatters:y.browser.formatters,levels:q,timestamp:w(y),messageKey:y.messageKey||"msg",onChild:y.onChild||x};k.levels=v(y),k.level=ae,k.isLevelEnabled=function(fe){return this.levels.values[fe]?this.levels.values[fe]>=this.levels.values[this.level]:!1},k.setMaxListeners=k.getMaxListeners=k.emit=k.addListener=k.on=k.prependListener=k.once=k.prependOnceListener=k.removeListener=k.removeAllListeners=k.listeners=k.listenerCount=k.eventNames=k.write=k.flush=x,k.serializers=F,k._serialize=V,k._stdErrSerialize=z,k.child=function(...fe){return Ht.call(this,ie,...fe)},D&&(k._logEvent=R());function ce(){return n(this.level,this)}function Ce(){return this._level}function Ve(fe){if(fe!=="silent"&&!this.levels.values[fe])throw Error("unknown level "+fe);this._level=fe,h(this,ie,k,"error"),h(this,ie,k,"fatal"),h(this,ie,k,"warn"),h(this,ie,k,"info"),h(this,ie,k,"debug"),h(this,ie,k,"trace"),te.forEach(Ne=>{h(this,ie,k,Ne)})}function Ht(fe,Ne,Xe){if(!Ne)throw new Error("missing bindings for child Pino");Xe=Xe||{},V&&Ne.serializers&&(Xe.serializers=Ne.serializers);const jt=Xe.serializers;if(V&&jt){var pt=Object.assign({},F,jt),Kt=y.browser.serialize===!0?Object.keys(pt):V;delete Ne.serializers,b([Ne],Kt,pt,this._stdErrSerialize)}function qt(Je){this._childLevel=(Je._childLevel|0)+1,this.bindings=Ne,pt&&(this.serializers=pt,this._serialize=Kt),D&&(this._logEvent=R([].concat(Je._logEvent.bindings,Ne)))}qt.prototype=this;const vt=new qt(this);return s(this,vt),vt.child=function(...Je){return Ht.call(this,fe,...Je)},vt.level=Xe.level||this.level,fe.onChild(vt),vt}return k}function v(y){const D=y.customLevels||{},C=Object.assign({},u.levels.values,D),F=Object.assign({},u.levels.labels,c(D));return{values:C,labels:F}}function c(y){const D={};return Object.keys(y).forEach(function(C){D[y[C]]=C}),D}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},u.stdSerializers=r,u.stdTimeFunctions=Object.assign({},{nullTime:X,epochTime:_,unixTime:I,isoTime:L});function d(y){const D=[];y.bindings&&D.push(y.bindings);let C=y[a];for(;C.parent;)C=C.parent,C.logger.bindings&&D.push(C.logger.bindings);return D.reverse()}function h(y,D,C,F){if(Object.defineProperty(y,F,{value:n(y.level,C)>n(F,C)?x:C[i][F],writable:!0,enumerable:!0,configurable:!0}),y[F]===x){if(!D.transmit)return;const z=D.transmit.level||y.level,te=n(z,C);if(n(F,C)<te)return}y[F]=g(y,D,C,F);const V=d(y);V.length!==0&&(y[F]=p(V,y[F]))}function p(y,D){return function(){return D.apply(this,[...y,...arguments])}}function g(y,D,C,F){return(function(V){return function(){const te=D.timestamp(),q=new Array(arguments.length),ae=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var k=0;k<q.length;k++)q[k]=arguments[k];var ie=!1;if(D.serialize&&(b(q,this._serialize,this.serializers,this._stdErrSerialize),ie=!0),D.asObject||D.formatters?V.call(ae,...m(this,F,q,te,D)):V.apply(ae,q),D.transmit){const ce=D.transmit.level||y._level,Ce=n(ce,C),Ve=n(F,C);if(Ve<Ce)return;O(this,{ts:te,methodLevel:F,methodValue:Ve,transmitValue:C.levels.values[D.transmit.level||y._level],send:D.transmit.send,val:n(y._level,C)},q,ie)}}})(y[i][F])}function m(y,D,C,F,V){const{level:z,log:te=ce=>ce}=V.formatters||{},q=C.slice();let ae=q[0];const k={};let ie=(y._childLevel|0)+1;if(ie<1&&(ie=1),F&&(k.time=F),z){const ce=z(D,y.levels.values[D]);Object.assign(k,ce)}else k.level=y.levels.values[D];if(V.asObjectBindingsOnly){if(ae!==null&&typeof ae=="object")for(;ie--&&typeof q[0]=="object";)Object.assign(k,q.shift());return[te(k),...q]}else{if(ae!==null&&typeof ae=="object"){for(;ie--&&typeof q[0]=="object";)Object.assign(k,q.shift());ae=q.length?e(q.shift(),q):void 0}else typeof ae=="string"&&(ae=e(q.shift(),q));return ae!==void 0&&(k[V.messageKey]=ae),[te(k)]}}function b(y,D,C,F){for(const V in y)if(F&&y[V]instanceof Error)y[V]=u.stdSerializers.err(y[V]);else if(typeof y[V]=="object"&&!Array.isArray(y[V])&&D)for(const z in y[V])D.indexOf(z)>-1&&z in C&&(y[V][z]=C[z](y[V][z]))}function O(y,D,C,F=!1){const V=D.send,z=D.ts,te=D.methodLevel,q=D.methodValue,ae=D.val,k=y._logEvent.bindings;F||b(C,y._serialize||Object.keys(y.serializers),y.serializers,y._stdErrSerialize===void 0?!0:y._stdErrSerialize),y._logEvent.ts=z,y._logEvent.messages=C.filter(function(ie){return k.indexOf(ie)===-1}),y._logEvent.level.label=te,y._logEvent.level.value=q,V(te,y._logEvent,ae),y._logEvent=R(k)}function R(y){return{ts:0,messages:[],bindings:y||[],level:{label:"",value:0}}}function P(y){const D={type:y.constructor.name,msg:y.message,stack:y.stack};for(const C in y)D[C]===void 0&&(D[C]=y[C]);return D}function w(y){return typeof y.timestamp=="function"?y.timestamp:y.timestamp===!1?X:_}function S(){return{}}function U(y){return y}function x(){}function X(){return!1}function _(){return Date.now()}function I(){return Math.round(Date.now()/1e3)}function L(){return new Date(Date.now()).toISOString()}function G(){function y(D){return typeof D<"u"&&D}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return y(self)||y(window)||y(this)||{}}}return Wt.exports.default=u,Wt.exports.pino=u,Wt.exports}var Ys=zs();const Ws=ai(Ys);var Ni={};class Xs{applicationLogger;initFailed=!1;appInfo=null;globalDatadogLogger=null;setAppInfo(t){this.appInfo=t}async write(t,r){try{if(this.initFailed)return;await this.init(),this.initFailed||this.log(t,r)}catch(n){console.warn("Failed to write log",n)}}log(t,r){this.applicationLogger[t]&&this.applicationLogger[t](r)}async getGlobalDatadogLogger(){return this.globalDatadogLogger?this.globalDatadogLogger:new Promise((t,r)=>{if(window.DD_LOGS_REPLATFORMING){window.DD_LOGS_REPLATFORMING.onReady(()=>{this.globalDatadogLogger=window.DD_LOGS_REPLATFORMING,t(window.DD_LOGS_REPLATFORMING)});return}const n=setTimeout(()=>{r("Global datalog logger not set. Logging will not work.")},15e3),i=setInterval(()=>{window.DD_LOGS_REPLATFORMING&&(window.DD_LOGS_REPLATFORMING.onReady(()=>{t(window.DD_LOGS_REPLATFORMING)}),clearTimeout(n),clearInterval(i))},50)})}async getAppInfo(){return this.appInfo?this.appInfo:new Promise((t,r)=>{const n=setTimeout(()=>{r("App info not set. Logging will not work.")},15e3),i=setInterval(()=>{this.appInfo&&(t(this.appInfo),clearTimeout(n),clearInterval(i))},50)})}async init(){try{if(this.applicationLogger)return;const[t,r]=await Promise.all([this.getGlobalDatadogLogger(),this.getAppInfo()]);if(!t||!r)throw new Error("Failed to retrieve globalLogger or appInfo");this.initGlobalInstance(t),this.applicationLogger=t.createLogger(r.service,{context:{service:r.service,env:r.env}});return}catch(t){console.warn("Could not initialize DataDog logger ",t),this.initFailed=!0}}initGlobalInstance(t){t.getInitConfiguration()||t.init({clientToken:"pub06c9294a47138de514fbc6e73bba7b13",site:"datadoghq.com",forwardErrorsToLogs:!1,sessionSampleRate:100,useCrossSiteSessionCookie:!0,trackSessionAcrossSubdomains:!0,useSecureSessionCookie:!0,silentMultipleInit:!1})}}const Js=e=>{const t=typeof process<"u"&&Ni?Ni.LOG_LEVEL:void 0;return e?.level||t||"info"},Qt=new Xs;class oi{options;context;logger;errorSerializationRecursionLimit;constructor(t,r){this.options=t,this.context=r,this.errorSerializationRecursionLimit=t?.errorSerializationRecursionLimit||3,this.logger=Ws({...qs,level:Js(t),redact:t?.redact,browser:{write:{info:n=>{console.info(n),Qt.write("info",n)},warn:n=>{console.warn(n),Qt.write("warn",n)},error:n=>{console.error(n),Qt.write("error",n)},debug:n=>{console.debug(n),Qt.write("debug",n)}}}})}child(t,r){const n={...this.options||{},...r||{}},i={...this.context||{},...t};return new oi(n,i)}log(t,r){const n=r[r.length-1];if(r.length===1&&n instanceof Error){t({Body:`${n.name} ${n.message}`,...this.generateAttributes(n)});return}if(typeof n=="object"&&!Array.isArray(n)){const i=r.slice(0,-1);t({Body:this.generateBody(i),...this.generateAttributes(n)});return}t({Body:this.generateBody(r),...this.generateAttributes({})})}generateBody(t){return t.map(this.serializeErrorsRecursively.bind(this)).map(r=>typeof r=="string"?r:JSON.stringify(r)).join(" ")}generateAttributes=t=>({...this.context||{},...this.serializeErrorsRecursively(t)});serializeErrorsRecursively(t,r=0){if(r>this.errorSerializationRecursionLimit)return t;if(t instanceof Error){const n=Object.fromEntries(Object.getOwnPropertyNames(t).filter(i=>typeof t[i]!="function").map(i=>[i,t[i]]));return{name:t.name,message:t.message,stack:t.stack,...n}}return Array.isArray(t)?t.map(n=>this.serializeErrorsRecursively(n,r+1)):typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([n,i])=>[n,this.serializeErrorsRecursively(i,r+1)])):t}info(...t){this.log(this.logger.info.bind(this.logger),t)}fatal(...t){this.log(this.logger.fatal.bind(this.logger),t)}error(...t){this.log(this.logger.error.bind(this.logger),t)}warn(...t){this.log(this.logger.warn.bind(this.logger),t)}debug(...t){this.log(this.logger.debug.bind(this.logger),t)}trace(...t){this.log(this.logger.trace.bind(this.logger),t)}silent(...t){this.log(this.logger.silent.bind(this.logger),t)}}const Qs=e=>{if(typeof window>"u")return;const{service:t,env:r}=e||{};if(!t||!r){console.warn("[otel-node/logger] Service or environment not defined. Logger not set.");return}Qt.setAppInfo({service:t,env:r}),console.log("Logger set with Service:",t,"and Environment:",r)},Nt=e=>new oi(e);var Si={};let Di=!1;const wi=e=>`${e}-data-env`,Zs=({rootElementId:e})=>{let t;typeof window<"u"?(t=JSON.parse(atob(document.getElementById(wi(e))?.getAttribute("data-env")||"")),Di||(Qs({service:t.service,env:t.env}),Di=!0)):t={service:Si.DD_SERVICE||"",env:Si.DD_ENV||""};const r=btoa(JSON.stringify(t));return E("div",{hidden:!0,id:wi(e),"data-env":r})};let pr;const eu=new Uint8Array(16);function tu(){if(!pr&&(pr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pr(eu)}const ge=[];for(let e=0;e<256;++e)ge.push((e+256).toString(16).slice(1));function ru(e,t=0){return ge[e[t+0]]+ge[e[t+1]]+ge[e[t+2]]+ge[e[t+3]]+"-"+ge[e[t+4]]+ge[e[t+5]]+"-"+ge[e[t+6]]+ge[e[t+7]]+"-"+ge[e[t+8]]+ge[e[t+9]]+"-"+ge[e[t+10]]+ge[e[t+11]]+ge[e[t+12]]+ge[e[t+13]]+ge[e[t+14]]+ge[e[t+15]]}const nu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Li={randomUUID:nu};function iu(e,t,r){if(Li.randomUUID&&!e)return Li.randomUUID();e=e||{};const n=e.random||(e.rng||tu)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ru(n)}var Ar={exports:{}},au=Ar.exports,Ci;function ou(){return Ci||(Ci=1,(function(e){(function(t,r){e.exports?e.exports=r():t.jsonSchema=r()})(au,function(){var t=n;t.Integer={type:"integer"};var r={String,Boolean,Number,Object,Array,Date};t.validate=n;function n(i,a){return n(i,a,{changing:!1})}t.checkPropertyChange=function(i,a,o){return n(i,a,{changing:o||"property"})};var n=t._validate=function(i,a,o){o||(o={});var s=o.changing;function l(c){return c.type||r[c.name]==c&&c.name.toLowerCase()}var f=[];function u(c,d,h,p){var g;h+=h?typeof p=="number"?"["+p+"]":typeof p>"u"?"":"."+p:p;function m(U){f.push({property:h,message:U})}if((typeof d!="object"||d instanceof Array)&&(h||typeof d!="function")&&!(d&&l(d)))return typeof d=="function"?c instanceof d||m("is not an instance of the class/constructor "+d.name):d&&m("Invalid schema/property definition "+d),null;s&&d.readonly&&m("is a readonly field, it can not be changed"),d.extends&&u(c,d.extends,h,p);function b(U,x){if(U){if(typeof U=="string"&&U!="any"&&(U=="null"?x!==null:typeof x!=U)&&!(x instanceof Array&&U=="array")&&!(x instanceof Date&&U=="date")&&!(U=="integer"&&x%1===0))return[{property:h,message:x+" - "+typeof x+" value found, but a "+U+" is required"}];if(U instanceof Array){for(var X=[],_=0;_<U.length&&(X=b(U[_],x)).length;_++);if(X.length)return X}else if(typeof U=="object"){var I=f;f=[],u(x,U,h);var L=f;return f=I,L}}return[]}if(c===void 0)d.required&&m("is missing and it is required");else if(f=f.concat(b(l(d),c)),d.disallow&&!b(d.disallow,c).length&&m(" disallowed value was matched"),c!==null){if(c instanceof Array){if(d.items){var O=d.items instanceof Array,R=d.items;for(p=0,g=c.length;p<g;p+=1)O&&(R=d.items[p]),o.coerce&&(c[p]=o.coerce(c[p],R)),f.concat(u(c[p],R,h,p))}d.minItems&&c.length<d.minItems&&m("There must be a minimum of "+d.minItems+" in the array"),d.maxItems&&c.length>d.maxItems&&m("There must be a maximum of "+d.maxItems+" in the array")}else(d.properties||d.additionalProperties)&&f.concat(v(c,d.properties,h,d.additionalProperties));if(d.pattern&&typeof c=="string"&&!c.match(d.pattern)&&m("does not match the regex pattern "+d.pattern),d.maxLength&&typeof c=="string"&&c.length>d.maxLength&&m("may only be "+d.maxLength+" characters long"),d.minLength&&typeof c=="string"&&c.length<d.minLength&&m("must be at least "+d.minLength+" characters long"),typeof d.minimum<"u"&&typeof c==typeof d.minimum&&d.minimum>c&&m("must have a minimum value of "+d.minimum),typeof d.maximum<"u"&&typeof c==typeof d.maximum&&d.maximum<c&&m("must have a maximum value of "+d.maximum),d.enum){var P=d.enum;g=P.length;for(var w,S=0;S<g;S++)if(P[S]===c){w=1;break}w||m("does not have a value in the enumeration "+P.join(", "))}typeof d.maxDecimal=="number"&&c.toString().match(new RegExp("\\.[0-9]{"+(d.maxDecimal+1)+",}"))&&m("may only have "+d.maxDecimal+" digits of decimal places")}return null}function v(c,d,h,p){if(typeof d=="object"){(typeof c!="object"||c instanceof Array)&&f.push({property:h,message:"an object is required"});for(var g in d)if(d.hasOwnProperty(g)&&g!="__proto__"&&g!="constructor"){var m=c.hasOwnProperty(g)?c[g]:void 0;if(m===void 0&&o.existingOnly)continue;var b=d[g];m===void 0&&b.default&&(m=c[g]=b.default),o.coerce&&g in c&&(m=c[g]=o.coerce(m,b)),u(m,b,h,g)}}for(g in c){if(c.hasOwnProperty(g)&&!(g.charAt(0)=="_"&&g.charAt(1)=="_")&&d&&!d[g]&&p===!1)if(o.filter){delete c[g];continue}else f.push({property:h,message:"The property "+g+" is not defined in the schema and the schema does not allow additional properties"});var O=d&&d[g]&&d[g].requires;O&&!(O in c)&&f.push({property:h,message:"the presence of the property "+g+" requires that "+O+" also be present"}),m=c[g],p&&(!(d&&typeof d=="object")||!(g in d))&&(o.coerce&&(m=c[g]=o.coerce(m,p)),u(m,p,h,g)),!s&&m&&m.$schema&&(f=f.concat(u(m,m.$schema,h,g)))}return f}return a&&u(i,a,"",s||""),!s&&i&&i.$schema&&u(i,i.$schema,"",""),{valid:!f.length,errors:f}};return t.mustBeValid=function(i){if(!i.valid)throw new TypeError(i.errors.map(function(a){return"for property "+a.property+": "+a.message}).join(`, 
`))},t})})(Ar)),Ar.exports}var su=ou(),tn={exports:{}},Pi;function uu(){return Pi||(Pi=1,(function(e){(function(){const t=a=>new TextEncoder().encode(a);function r(a,o){typeof a=="string"&&(a=t(a));let s=a.length,l=o^s,f=0,u;for(;s>=4;)u=a[f]&255|(a[++f]&255)<<8|(a[++f]&255)<<16|(a[++f]&255)<<24,u=(u&65535)*1540483477+(((u>>>16)*1540483477&65535)<<16),u^=u>>>24,u=(u&65535)*1540483477+(((u>>>16)*1540483477&65535)<<16),l=(l&65535)*1540483477+(((l>>>16)*1540483477&65535)<<16)^u,s-=4,++f;switch(s){case 3:l^=(a[f+2]&255)<<16;case 2:l^=(a[f+1]&255)<<8;case 1:l^=a[f]&255,l=(l&65535)*1540483477+(((l>>>16)*1540483477&65535)<<16)}return l^=l>>>13,l=(l&65535)*1540483477+(((l>>>16)*1540483477&65535)<<16),l^=l>>>15,l>>>0}function n(a,o){typeof a=="string"&&(a=t(a));let s,l,f,u,v,c,d,h;for(s=a.length&3,l=a.length-s,f=o,v=3432918353,c=461845907,h=0;h<l;)d=a[h]&255|(a[++h]&255)<<8|(a[++h]&255)<<16|(a[++h]&255)<<24,++h,d=(d&65535)*v+(((d>>>16)*v&65535)<<16)&4294967295,d=d<<15|d>>>17,d=(d&65535)*c+(((d>>>16)*c&65535)<<16)&4294967295,f^=d,f=f<<13|f>>>19,u=(f&65535)*5+(((f>>>16)*5&65535)<<16)&4294967295,f=(u&65535)+27492+(((u>>>16)+58964&65535)<<16);switch(d=0,s){case 3:d^=(a[h+2]&255)<<16;case 2:d^=(a[h+1]&255)<<8;case 1:d^=a[h]&255,d=(d&65535)*v+(((d>>>16)*v&65535)<<16)&4294967295,d=d<<15|d>>>17,d=(d&65535)*c+(((d>>>16)*c&65535)<<16)&4294967295,f^=d}return f^=a.length,f^=f>>>16,f=(f&65535)*2246822507+(((f>>>16)*2246822507&65535)<<16)&4294967295,f^=f>>>13,f=(f&65535)*3266489909+(((f>>>16)*3266489909&65535)<<16)&4294967295,f^=f>>>16,f>>>0}const i=n;i.v2=r,i.v3=n,e.exports=i})()})(tn)),tn.exports}var lu=uu();const cu=ai(lu);var Zt={exports:{}},fu=Zt.exports,Ui;function du(){return Ui||(Ui=1,(function(e,t){(function(r,n){var i="1.0.41",a="",o="?",s="function",l="undefined",f="object",u="string",v="major",c="model",d="name",h="type",p="vendor",g="version",m="architecture",b="console",O="mobile",R="tablet",P="smarttv",w="wearable",S="embedded",U=500,x="Amazon",X="Apple",_="ASUS",I="BlackBerry",L="Browser",G="Chrome",y="Edge",D="Firefox",C="Google",F="Honor",V="Huawei",z="Lenovo",te="LG",q="Microsoft",ae="Motorola",k="Nvidia",ie="OnePlus",ce="Opera",Ce="OPPO",Ve="Samsung",Ht="Sharp",fe="Sony",Ne="Xiaomi",Xe="Zebra",jt="Facebook",pt="Chromium OS",Kt="Mac OS",qt=" Browser",vt=function(W,Z){var $={};for(var oe in W)Z[oe]&&Z[oe].length%2===0?$[oe]=Z[oe].concat(W[oe]):$[oe]=W[oe];return $},Je=function(W){for(var Z={},$=0;$<W.length;$++)Z[W[$].toUpperCase()]=W[$];return Z},Ii=function(W,Z){return typeof W===u?$t(Z).indexOf($t(W))!==-1:!1},$t=function(W){return W.toLowerCase()},ks=function(W){return typeof W===u?W.replace(/[^\d\.]/g,a).split(".")[0]:n},Qr=function(W,Z){if(typeof W===u)return W=W.replace(/^\s\s*/,a),typeof Z===l?W:W.substring(0,U)},zt=function(W,Z){for(var $=0,oe,Qe,ke,ee,j,Fe;$<Z.length&&!j;){var Zr=Z[$],Ri=Z[$+1];for(oe=Qe=0;oe<Zr.length&&!j&&Zr[oe];)if(j=Zr[oe++].exec(W),j)for(ke=0;ke<Ri.length;ke++)Fe=j[++Qe],ee=Ri[ke],typeof ee===f&&ee.length>0?ee.length===2?typeof ee[1]==s?this[ee[0]]=ee[1].call(this,Fe):this[ee[0]]=ee[1]:ee.length===3?typeof ee[1]===s&&!(ee[1].exec&&ee[1].test)?this[ee[0]]=Fe?ee[1].call(this,Fe,ee[2]):n:this[ee[0]]=Fe?Fe.replace(ee[1],ee[2]):n:ee.length===4&&(this[ee[0]]=Fe?ee[3].call(this,Fe.replace(ee[1],ee[2])):n):this[ee]=Fe||n;$+=2}},Yt=function(W,Z){for(var $ in Z)if(typeof Z[$]===f&&Z[$].length>0){for(var oe=0;oe<Z[$].length;oe++)if(Ii(Z[$][oe],W))return $===o?n:$}else if(Ii(Z[$],W))return $===o?n:$;return Z.hasOwnProperty("*")?Z["*"]:W},Fs={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},bi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Oi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,ce+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[g,[d,ce+" GX"]],[/\bopr\/([\w\.]+)/i],[g,[d,ce]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[d,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[g,[d,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/quark(?:pc)?\/([-\w\.]+)/i],[g,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[g,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[d,"Smart Lenovo "+L]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+L],g],[/\bfocus\/([\w\.]+)/i],[g,[d,D+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,ce+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,ce+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI"+qt]],[/fxios\/([\w\.-]+)/i],[g,[d,D]],[/\bqihoobrowser\/?([\w\.]*)/i],[g,[d,"360"]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],g],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+qt],g],[/samsungbrowser\/([\w\.]+)/i],[g,[d,Ve+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[g,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[d,g],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[g,d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,jt],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,G+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,G+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,Yt,Fs]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/(wolvic|librewolf)\/([\w\.]+)/i],[d,g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,D+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[d,[g,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[g,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[m,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[m,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[m,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[m,/ower/,a,$t]],[/ sun4\w[;\)]/i],[[m,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[m,$t]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[p,Ve],[h,R]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[c,[p,Ve],[h,O]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[p,X],[h,O]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[p,X],[h,R]],[/(macintosh);/i],[c,[p,X]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[p,Ht],[h,O]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[c,[p,F],[h,R]],[/honor([-\w ]+)[;\)]/i],[c,[p,F],[h,O]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[c,[p,V],[h,R]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[p,V],[h,O]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[c,/_/g," "],[p,Ne],[h,R]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[c,/_/g," "],[p,Ne],[h,O]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[p,Ce],[h,O]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[c,[p,Yt,{OnePlus:["304","403","203"],"*":Ce}],[h,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[p,"Vivo"],[h,O]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[p,"Realme"],[h,O]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[p,ae],[h,O]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[p,ae],[h,R]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[p,te],[h,R]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[p,te],[h,O]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[c,[p,z],[h,R]],[/(nokia) (t[12][01])/i],[p,c,[h,R]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[c,/_/g," "],[h,O],[p,"Nokia"]],[/(pixel (c|tablet))\b/i],[c,[p,C],[h,R]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[p,C],[h,O]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[p,fe],[h,O]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[p,fe],[h,R]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[p,ie],[h,O]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[p,x],[h,R]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[p,x],[h,O]],[/(playbook);[-\w\),; ]+(rim)/i],[c,p,[h,R]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[p,I],[h,O]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[p,_],[h,R]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[p,_],[h,O]],[/(nexus 9)/i],[c,[p,"HTC"],[h,R]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[c,/_/g," "],[h,O]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[c,[p,"TCL"],[h,R]],[/(itel) ((\w+))/i],[[p,$t],c,[h,Yt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[p,"Acer"],[h,R]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[p,"Meizu"],[h,O]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[p,"Ulefone"],[h,O]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[c,[p,"Energizer"],[h,O]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[c,[p,"Cat"],[h,O]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[c,[p,"Smartfren"],[h,O]],[/droid.+; (a(?:015|06[35]|142p?))/i],[c,[p,"Nothing"],[h,O]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[c,[p,"Archos"],[h,R]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[c,[p,"Archos"],[h,O]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[p,c,[h,R]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[p,c,[h,O]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,c,[h,R]],[/(surface duo)/i],[c,[p,q],[h,R]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[p,"Fairphone"],[h,O]],[/(u304aa)/i],[c,[p,"AT&T"],[h,O]],[/\bsie-(\w*)/i],[c,[p,"Siemens"],[h,O]],[/\b(rct\w+) b/i],[c,[p,"RCA"],[h,R]],[/\b(venue[\d ]{2,7}) b/i],[c,[p,"Dell"],[h,R]],[/\b(q(?:mv|ta)\w+) b/i],[c,[p,"Verizon"],[h,R]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[p,"Barnes & Noble"],[h,R]],[/\b(tm\d{3}\w+) b/i],[c,[p,"NuVision"],[h,R]],[/\b(k88) b/i],[c,[p,"ZTE"],[h,R]],[/\b(nx\d{3}j) b/i],[c,[p,"ZTE"],[h,O]],[/\b(gen\d{3}) b.+49h/i],[c,[p,"Swiss"],[h,O]],[/\b(zur\d{3}) b/i],[c,[p,"Swiss"],[h,R]],[/\b((zeki)?tb.*\b) b/i],[c,[p,"Zeki"],[h,R]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],c,[h,R]],[/\b(ns-?\w{0,9}) b/i],[c,[p,"Insignia"],[h,R]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[p,"NextBook"],[h,R]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],c,[h,O]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],c,[h,O]],[/\b(ph-1) /i],[c,[p,"Essential"],[h,O]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[p,"Envizen"],[h,R]],[/\b(trio[-\w\. ]+) b/i],[c,[p,"MachSpeed"],[h,R]],[/\btu_(1491) b/i],[c,[p,"Rotor"],[h,R]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[c,[p,k],[h,R]],[/(sprint) (\w+)/i],[p,c,[h,O]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[p,q],[h,O]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[p,Xe],[h,R]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[p,Xe],[h,O]],[/smart-tv.+(samsung)/i],[p,[h,P]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[p,Ve],[h,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,te],[h,P]],[/(apple) ?tv/i],[p,[c,X+" TV"],[h,P]],[/crkey/i],[[c,G+"cast"],[p,C],[h,P]],[/droid.+aft(\w+)( bui|\))/i],[c,[p,x],[h,P]],[/(shield \w+ tv)/i],[c,[p,k],[h,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[p,Ht],[h,P]],[/(bravia[\w ]+)( bui|\))/i],[c,[p,fe],[h,P]],[/(mi(tv|box)-?\w+) bui/i],[c,[p,Ne],[h,P]],[/Hbbtv.*(technisat) (.*);/i],[p,c,[h,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,Qr],[c,Qr],[h,P]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[c,[h,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,P]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,c,[h,b]],[/droid.+; (shield)( bui|\))/i],[c,[p,k],[h,b]],[/(playstation \w+)/i],[c,[p,fe],[h,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[p,q],[h,b]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[c,[p,Ve],[h,w]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[p,c,[h,w]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[c,[p,Ce],[h,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[p,X],[h,w]],[/(opwwe\d{3})/i],[c,[p,ie],[h,w]],[/(moto 360)/i],[c,[p,ae],[h,w]],[/(smartwatch 3)/i],[c,[p,fe],[h,w]],[/(g watch r)/i],[c,[p,te],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[c,[p,Xe],[h,w]],[/droid.+; (glass) \d/i],[c,[p,C],[h,w]],[/(pico) (4|neo3(?: link|pro)?)/i],[p,c,[h,w]],[/; (quest( \d| pro)?)/i],[c,[p,jt],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,S]],[/(aeobc)\b/i],[c,[p,x],[h,S]],[/(homepod).+mac os/i],[c,[p,X],[h,S]],[/windows iot/i],[[h,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[h,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[h,R]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,R]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,O]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[c,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,y+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[d,g],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,g],[/ladybird\//i],[[d,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[d,[g,Yt,bi]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,Yt,bi],[d,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,Kt],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(ubuntu) ([\w\.]+) like android/i],[[d,/(.+)/,"$1 Touch"],g],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[d,g],[/\(bb(10);/i],[g,[d,I]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,D+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[d,G+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,pt],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,g]]},xe=function(W,Z){if(typeof W===f&&(Z=W,W=n),!(this instanceof xe))return new xe(W,Z).getResult();var $=typeof r!==l&&r.navigator?r.navigator:n,oe=W||($&&$.userAgent?$.userAgent:a),Qe=$&&$.userAgentData?$.userAgentData:n,ke=Z?vt(Oi,Z):Oi,ee=$&&$.userAgent==oe;return this.getBrowser=function(){var j={};return j[d]=n,j[g]=n,zt.call(j,oe,ke.browser),j[v]=ks(j[g]),ee&&$&&$.brave&&typeof $.brave.isBrave==s&&(j[d]="Brave"),j},this.getCPU=function(){var j={};return j[m]=n,zt.call(j,oe,ke.cpu),j},this.getDevice=function(){var j={};return j[p]=n,j[c]=n,j[h]=n,zt.call(j,oe,ke.device),ee&&!j[h]&&Qe&&Qe.mobile&&(j[h]=O),ee&&j[c]=="Macintosh"&&$&&typeof $.standalone!==l&&$.maxTouchPoints&&$.maxTouchPoints>2&&(j[c]="iPad",j[h]=R),j},this.getEngine=function(){var j={};return j[d]=n,j[g]=n,zt.call(j,oe,ke.engine),j},this.getOS=function(){var j={};return j[d]=n,j[g]=n,zt.call(j,oe,ke.os),ee&&!j[d]&&Qe&&Qe.platform&&Qe.platform!="Unknown"&&(j[d]=Qe.platform.replace(/chrome os/i,pt).replace(/macos/i,Kt)),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return oe},this.setUA=function(j){return oe=typeof j===u&&j.length>U?Qr(j,U):j,this},this.setUA(oe),this};xe.VERSION=i,xe.BROWSER=Je([d,g,v]),xe.CPU=Je([m]),xe.DEVICE=Je([c,p,h,b,O,P,R,w,S]),xe.ENGINE=xe.OS=Je([d,g]),e.exports&&(t=e.exports=xe),t.UAParser=xe;var wt=typeof r!==l&&(r.jQuery||r.Zepto);if(wt&&!wt.ua){var dr=new xe;wt.ua=dr.getResult(),wt.ua.get=function(){return dr.getUA()},wt.ua.set=function(W){dr.setUA(W);var Z=dr.getResult();for(var $ in Z)wt.ua[$]=Z[$]}}})(typeof window=="object"?window:fu)})(Zt,Zt.exports)),Zt.exports}var pu=du(),Pn=function(e,t){return Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Pn(e,t)};function St(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pn(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var we=function(){return we=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},we.apply(this,arguments)};function de(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(u){try{f(n.next(u))}catch(v){o(v)}}function l(u){try{f(n.throw(u))}catch(v){o(v)}}function f(u){u.done?a(u.value):i(u.value).then(s,l)}f((n=n.apply(e,[])).next())})}function pe(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return l([f,u])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(u){f=[6,u],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Vt(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var vu=(function(){function e(){}return e.prototype.handleError=function(t){},e})(),$a=new vu;function hu(e){$a=e}function za(){return $a}var gu=Math.pow(2,53);function Re(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)return{};if(typeof Object.assign=="function")return Object.assign.apply(Object,Vt([e],t,!1));for(var n=Object(e),i=0;i<t.length;i++){var a=t[i];if(a!=null)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n}function Eu(){return Math.round(new Date().getTime())}function _u(e){return typeof e=="number"&&Math.abs(e)<=gu}function _e(e,t){return e?Xa(e,function(r){return r[t]}):{}}function mu(e){return typeof e=="number"}function Hr(){return iu()}function Ya(){return new Date().getTime()}function Lr(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r}function yu(e,t){var r={};return e.forEach(function(n){var i=t(n);r[i]=r[i]||[],r[i].push(n)}),Ye(r)}function Ye(e){return Object.keys(e).map(function(t){return e[t]})}function Wa(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function si(e,t){for(var r,n=0,i=e;n<i.length;n++){var a=i[n];if(t(a)){r=a;break}}return r}function Xa(e,t){var r={};return e.forEach(function(n){var i=t(n);r[i]=n}),r}function J(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,function(){var i=t[n++],a=typeof i;return a==="function"?i():a==="string"?i:String(i)})}function Ja(e,t){return e.length===t.length&&e.every(function(r,n){return r===t[n]})}var ue={assign:Re,checkArrayEquality:Ja,currentTimestamp:Eu,isSafeInteger:_u,keyBy:_e,uuid:Hr,isNumber:mu,getTimestamp:Ya,isValidEnum:Lr,groupBy:yu,objectValues:Ye,objectEntries:Wa,find:si,keyByUtil:Xa,sprintf:J},B;(function(e){e[e.NOTSET=0]="NOTSET",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR"})(B||(B={}));var Mi={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function ui(e){return typeof e!="string"||(e=e.toUpperCase(),e==="WARN"&&(e="WARNING"),!Mi[e])?e:Mi[e]}var Iu=(function(){function e(){this.defaultLoggerFacade=new xi,this.loggers={}}return e.prototype.getLogger=function(t){return t?(this.loggers[t]||(this.loggers[t]=new xi({messagePrefix:t})),this.loggers[t]):this.defaultLoggerFacade},e})(),bu=(function(){function e(t){t===void 0&&(t={}),this.logLevel=B.NOTSET,t.logLevel!==void 0&&Lr(B,t.logLevel)&&this.setLogLevel(t.logLevel),this.logToConsole=t.logToConsole!==void 0?!!t.logToConsole:!0,this.prefix=t.prefix!==void 0?t.prefix:"[OPTIMIZELY]"}return e.prototype.log=function(t,r){if(!(!this.shouldLog(t)||!this.logToConsole)){var n="".concat(this.prefix," - ").concat(this.getLogLevelName(t)," ").concat(this.getTime()," ").concat(r);this.consoleLog(t,[n])}},e.prototype.setLogLevel=function(t){t=ui(t),!Lr(B,t)||t===void 0?this.logLevel=B.ERROR:this.logLevel=t},e.prototype.getTime=function(){return new Date().toISOString()},e.prototype.shouldLog=function(t){return t>=this.logLevel},e.prototype.getLogLevelName=function(t){switch(t){case B.DEBUG:return"DEBUG";case B.INFO:return"INFO ";case B.WARNING:return"WARN ";case B.ERROR:return"ERROR";default:return"NOTSET"}},e.prototype.consoleLog=function(t,r){switch(t){case B.DEBUG:console.log.apply(console,r);break;case B.INFO:console.info.apply(console,r);break;case B.WARNING:console.warn.apply(console,r);break;case B.ERROR:console.error.apply(console,r);break;default:console.log.apply(console,r)}},e})(),Un=B.NOTSET,Mn=null,xi=(function(){function e(t){t===void 0&&(t={}),this.messagePrefix="",t.messagePrefix&&(this.messagePrefix=t.messagePrefix)}return e.prototype.log=function(t,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.internalLog(ui(t),{message:r,splat:n})},e.prototype.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(B.INFO,t,r)},e.prototype.debug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(B.DEBUG,t,r)},e.prototype.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(B.WARNING,t,r)},e.prototype.error=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(B.ERROR,t,r)},e.prototype.format=function(t){return"".concat(this.messagePrefix?this.messagePrefix+": ":"").concat(J.apply(void 0,Vt([t.message],t.splat,!1)))},e.prototype.internalLog=function(t,r){Mn&&(t<Un||(Mn.log(t,this.format(r)),r.error&&r.error instanceof Error&&za().handleError(r.error)))},e.prototype.namedLog=function(t,r,n){var i;if(r instanceof Error){i=r,r=i.message,this.internalLog(t,{error:i,message:r,splat:n});return}if(n.length===0){this.internalLog(t,{message:r,splat:n});return}var a=n[n.length-1];a instanceof Error&&(i=a,n.splice(-1)),this.internalLog(t,{message:r,error:i,splat:n})},e})(),Ou=new Iu;function ve(e){return Ou.getLogger(e)}function Qa(e){Mn=e}function Ru(e){e=ui(e),!Lr(B,e)||e===void 0?Un=B.ERROR:Un=e}var yt={setLogLevel:Ru,setLogHandler:Qa};function Au(e,t){var r=e.context,n=t.context;return r.accountId===n.accountId&&r.projectId===n.projectId&&r.clientName===n.clientName&&r.clientVersion===n.clientVersion&&r.revision===n.revision&&r.anonymizeIP===n.anonymizeIP&&r.botFiltering===n.botFiltering}var Tu=ve("EventProcessor"),Nu=(function(){function e(t){var r=t.timeout,n=t.callback;this.timeout=Math.max(r,0),this.callback=n}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e})(),Su=(function(){function e(t){var r=t.sink;this.sink=r}return e.prototype.start=function(){return Promise.resolve()},e.prototype.stop=function(){return Promise.resolve()},e.prototype.enqueue=function(t){this.sink([t])},e})(),Du=(function(){function e(t){var r=t.flushInterval,n=t.maxQueueSize,i=t.sink,a=t.closingSink,o=t.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(n,1),this.sink=i,this.closingSink=a,this.batchComparator=o,this.timer=new Nu({callback:this.flush.bind(this),timeout:r}),this.started=!1}return e.prototype.start=function(){return this.started=!0,Promise.resolve()},e.prototype.stop=function(){this.started=!1;var t=this.closingSink?this.closingSink(this.buffer):this.sink(this.buffer);return this.buffer=[],this.timer.stop(),t},e.prototype.enqueue=function(t){if(!this.started){Tu.warn("Queue is stopped, not accepting event");return}var r=this.buffer[0];r&&!this.batchComparator(r,t)&&this.flush(),this.buffer.length===0&&this.timer.refresh(),this.buffer.push(t),this.buffer.length>=this.maxQueueSize&&this.flush()},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e})(),A={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},M={BROWSER_ODP_MANAGER_INITIALIZATION_FAILED:"%s: Error initializing Browser ODP Manager.",CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",FETCH_SEGMENTS_FAILED_NETWORK_ERROR:"%s: Audience segments fetch failed. (network error)",FETCH_SEGMENTS_FAILED_DECODE_ERROR:"%s: Audience segments fetch failed. (decode error)",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",LOCAL_STORAGE_DOES_NOT_EXIST:"Error accessing window localStorage.",MISSING_INTEGRATION_KEY:"%s: Integration key missing from datafile. All integrations should include a key.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",ODP_CONFIG_NOT_AVAILABLE:"%s: ODP is not integrated to the project.",ODP_EVENT_FAILED:"ODP event send failed.",ODP_FETCH_QUALIFIED_SEGMENTS_SEGMENTS_MANAGER_MISSING:"%s: ODP unable to fetch qualified segments (Segments Manager not initialized).",ODP_IDENTIFY_FAILED_EVENT_MANAGER_MISSING:"%s: ODP identify event %s is not dispatched (Event Manager not instantiated).",ODP_INITIALIZATION_FAILED:"%s: ODP failed to initialize.",ODP_INVALID_DATA:"%s: ODP data is not valid",ODP_EVENT_FAILED_ODP_MANAGER_MISSING:"%s: ODP Event failed to send. (ODP Manager not initialized).",ODP_FETCH_QUALIFIED_SEGMENTS_FAILED_ODP_MANAGER_MISSING:"%s: ODP failed to Fetch Qualified Segments. (ODP Manager not initialized).",ODP_IDENTIFY_USER_FAILED_ODP_MANAGER_MISSING:"%s: ODP failed to Identify User. (ODP Manager not initialized).",ODP_IDENTIFY_USER_FAILED_USER_CONTEXT_INITIALIZATION:"%s: ODP failed to Identify User. (Failed during User Context Initialization).",ODP_MANAGER_UPDATE_SETTINGS_FAILED_EVENT_MANAGER_MISSING:"%s: ODP Manager failed to update OdpConfig settings for internal event manager. (Event Manager not initialized).",ODP_MANAGER_UPDATE_SETTINGS_FAILED_SEGMENTS_MANAGER_MISSING:"%s: ODP Manager failed to update OdpConfig settings for internal segments manager. (Segments Manager not initialized).",ODP_NOT_ENABLED:"ODP is not enabled",ODP_NOT_INTEGRATED:"%s: ODP is not integrated",ODP_SEND_EVENT_FAILED_EVENT_MANAGER_MISSING:"%s: ODP send event %s was not dispatched (Event Manager not instantiated).",ODP_SEND_EVENT_FAILED_UID_MISSING:"%s: ODP send event %s was not dispatched (No valid user identifier provided).",ODP_SEND_EVENT_FAILED_VUID_MISSING:"%s: ODP send event %s was not dispatched (Unable to fetch VUID).",ODP_VUID_INITIALIZATION_FAILED:"%s: ODP VUID initialization failed.",ODP_VUID_REGISTRATION_FAILED:"%s: ODP VUID failed to be registered.",ODP_VUID_REGISTRATION_FAILED_EVENT_MANAGER_MISSING:"%s: ODP register vuid failed. (Event Manager not instantiated).",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},T={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",ODP_DISABLED:"ODP Disabled.",ODP_IDENTIFY_FAILED_ODP_DISABLED:"%s: ODP identify event for user %s is not dispatched (ODP disabled).",ODP_IDENTIFY_FAILED_ODP_NOT_INTEGRATED:"%s: ODP identify event %s is not dispatched (ODP not integrated).",ODP_SEND_EVENT_IDENTIFIER_CONVERSION_FAILED:"%s: sendOdpEvent failed to parse through and convert fs_user_id aliases",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},ze={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},li="javascript-sdk",Za="node-sdk",wu="react-sdk",Lu="react-native-sdk",Cu="react-native-js-sdk",ci="5.4.0",gt={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},Ee={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},xn={RULE:"rule",EXPERIMENT:"experiment"},De={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},Tr={V2:"2",V3:"3",V4:"4"},Vn={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'},me;(function(e){e.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",e.DECISION="DECISION:type, userId, attributes, decisionInfo",e.LOG_EVENT="LOG_EVENT:logEvent",e.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",e.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(me||(me={}));var eo=60*1e3,to=10*1e3,ro=10*1e3,Ue;(function(e){e.VUID="vuid",e.FS_USER_ID="fs_user_id"})(Ue||(Ue={}));var no="fs-user-id",Cr="fullstack",or;(function(e){e.IDENTIFIED="identified",e.INITIALIZED="client_initialized"})(or||(or={}));var Pu=Object.freeze({__proto__:null,LOG_LEVEL:A,ERROR_MESSAGES:M,LOG_MESSAGES:T,CONTROL_ATTRIBUTES:ze,JAVASCRIPT_CLIENT_ENGINE:li,NODE_CLIENT_ENGINE:Za,REACT_CLIENT_ENGINE:wu,REACT_NATIVE_CLIENT_ENGINE:Lu,REACT_NATIVE_JS_CLIENT_ENGINE:Cu,CLIENT_VERSION:ci,DECISION_NOTIFICATION_TYPES:gt,DECISION_SOURCES:Ee,AUDIENCE_EVALUATION_TYPES:xn,FEATURE_VARIABLE_TYPES:De,DATAFILE_VERSIONS:Tr,DECISION_MESSAGES:Vn,get NOTIFICATION_TYPES(){return me},REQUEST_TIMEOUT_MS:eo,REQUEST_TIMEOUT_ODP_SEGMENTS_MS:to,REQUEST_TIMEOUT_ODP_EVENTS_MS:ro,get ODP_USER_KEY(){return Ue},FS_USER_ID_ALIAS:no,ODP_DEFAULT_EVENT_TYPE:Cr,get ODP_EVENT_ACTION(){return or}}),kn=3e4,Fn=10,io=ve("EventProcessor");function Uu(e){return e<=0&&(io.warn("Invalid flushInterval ".concat(e,", defaulting to ").concat(kn)),e=kn),e}function Mu(e){return e=Math.floor(e),e<1&&(io.warn("Invalid batchSize ".concat(e,", defaulting to ").concat(Fn)),e=Fn),e=Math.max(1,e),e}function xu(e,t,r,n,i){var a;return e>1?a=new Du({flushInterval:t,maxQueueSize:e,sink:n,closingSink:i,batchComparator:r}):a=new Su({sink:n}),a}function Vu(e,t){e&&e.sendNotifications(me.LOG_EVENT,t)}var Vi=ve("EventProcessor"),ku=(function(){function e(t){var r=t.key,n=t.maxValues,i=n===void 0?1e3:n;this.LS_KEY=r,this.maxValues=i}return e.prototype.get=function(t){return this.getMap()[t]||null},e.prototype.set=function(t,r){var n=this.getMap();n[t]=r,this.replace(n)},e.prototype.remove=function(t){var r=this.getMap();delete r[t],this.replace(r)},e.prototype.values=function(){return Ye(this.getMap())},e.prototype.clear=function(){this.replace({})},e.prototype.replace=function(t){try{typeof window<"u"?window&&window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(t)):localStorage.setItem(this.LS_KEY,JSON.stringify(t)),this.clean()}catch(r){Vi.error(String(r))}},e.prototype.clean=function(){var t=this.getMap(),r=Object.keys(t),n=r.length-this.maxValues;if(!(n<1)){var i=r.map(function(o){return{key:o,value:t[o]}});i.sort(function(o,s){return o.value.timestamp-s.value.timestamp});for(var a=0;a<n;a++)delete t[i[a].key];this.replace(t)}},e.prototype.getMap=function(){try{var t=typeof window<"u"?window&&window.localStorage&&localStorage.getItem(this.LS_KEY):localStorage.getItem(this.LS_KEY);if(t)return JSON.parse(t)||{}}catch(r){Vi.error(r)}return{}},e})(),ki=ve("EventProcessor"),Fu=(function(){function e(t){var r=t.eventDispatcher,n=t.store;this.dispatcher=r,this.store=n}return e.prototype.dispatchEvent=function(t,r){this.send({uuid:Hr(),timestamp:Ya(),request:t},r)},e.prototype.sendPendingEvents=function(){var t=this,r=this.store.values();ki.debug("Sending %s pending events from previous page",r.length),r.forEach(function(n){try{t.send(n,function(){})}catch(i){ki.debug(String(i))}})},e.prototype.send=function(t,r){var n=this;this.store.set(t.uuid,t),this.dispatcher.dispatchEvent(t.request,function(i){n.store.remove(t.uuid),r(i)})},e})(),ao=(function(e){St(t,e);function t(r){var n=r.eventDispatcher;return e.call(this,{eventDispatcher:n,store:new ku({maxValues:100,key:"fs_optly_pending_events"})})||this}return t})(Fu),Bu="campaign_activated",Gu="custom",Fi="$opt_bot_filtering";function Hu(e){var t=[],r=e[0];return e.forEach(function(n){if(n.type==="conversion"||n.type==="impression"){var i=qu(n);n.type==="impression"?i.snapshots.push(Ku(n)):n.type==="conversion"&&i.snapshots.push(ju(n)),t.push(i)}}),{client_name:r.context.clientName,client_version:r.context.clientVersion,account_id:r.context.accountId,project_id:r.context.projectId,revision:r.context.revision,anonymize_ip:r.context.anonymizeIP,enrich_decisions:!0,visitors:t}}function ju(e){var t=we({},e.tags);delete t.revenue,delete t.value;var r={entity_id:e.event.id,key:e.event.key,timestamp:e.timestamp,uuid:e.uuid};return e.tags&&(r.tags=e.tags),e.value!=null&&(r.value=e.value),e.revenue!=null&&(r.revenue=e.revenue),{events:[r]}}function Ku(e){var t,r,n=e.layer,i=e.experiment,a=e.variation,o=e.ruleKey,s=e.flagKey,l=e.ruleType,f=e.enabled,u=n?n.id:null,v=(t=i?.id)!==null&&t!==void 0?t:"",c=(r=a?.id)!==null&&r!==void 0?r:"",d=a?a.key:"";return{decisions:[{campaign_id:u,experiment_id:v,variation_id:c,metadata:{flag_key:s,rule_key:o,rule_type:l,variation_key:d,enabled:f}}],events:[{entity_id:u,timestamp:e.timestamp,key:Bu,uuid:e.uuid}]}}function qu(e){var t={snapshots:[],visitor_id:e.user.id,attributes:[]},r="custom";return e.user.attributes.forEach(function(n){t.attributes.push({entity_id:n.entityId,key:n.key,type:r,value:n.value})}),typeof e.context.botFiltering=="boolean"&&t.attributes.push({entity_id:Fi,key:Fi,type:Gu,value:e.context.botFiltering}),t}function $u(e){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:Hu(e)}}var zu=(function(){function e(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return e.prototype.trackRequest=function(t){var r=this;this.reqsInFlightCount++;var n=function(){r.reqsInFlightCount--,r.reqsInFlightCount===0&&(r.reqsCompleteResolvers.forEach(function(i){return i()}),r.reqsCompleteResolvers=[])};t.then(n,n)},e.prototype.onRequestsComplete=function(){var t=this;return new Promise(function(r){t.reqsInFlightCount===0?r():t.reqsCompleteResolvers.push(r)})},e})(),Bi=ve("LogTierV1EventProcessor"),Gi=(function(){function e(t){var r=t.dispatcher,n=t.closingDispatcher,i=t.flushInterval,a=i===void 0?kn:i,o=t.batchSize,s=o===void 0?Fn:o,l=t.notificationCenter;this.dispatcher=r,this.closingDispatcher=n,this.notificationCenter=l,this.requestTracker=new zu,a=Uu(a),s=Mu(s),this.queue=xu(s,a,Au,this.drainQueue.bind(this,!1),this.drainQueue.bind(this,!0))}return e.prototype.drainQueue=function(t,r){var n=this,i=new Promise(function(a){if(Bi.debug("draining queue with %s events",r.length),r.length===0){a();return}var o=$u(r),s=t&&n.closingDispatcher?n.closingDispatcher:n.dispatcher;s.dispatchEvent(o,function(){a()}),Vu(n.notificationCenter,o)});return this.requestTracker.trackRequest(i),i},e.prototype.process=function(t){this.queue.enqueue(t)},e.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(t){Bi.error('Error stopping EventProcessor: "%s"',Object(t).message,String(t))}return Promise.resolve()},e.prototype.start=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){switch(t.label){case 0:return[4,this.queue.start()];case 1:return t.sent(),[2]}})})},e})(),mt="CONFIG_VALIDATOR",Yu=[Tr.V2,Tr.V3,Tr.V4],Wu=function(e){if(typeof e=="object"&&e!==null){var t=e,r=t.errorHandler,n=t.eventDispatcher,i=t.logger;if(r&&typeof r.handleError!="function")throw new Error(J(M.INVALID_ERROR_HANDLER,mt));if(n&&typeof n.dispatchEvent!="function")throw new Error(J(M.INVALID_EVENT_DISPATCHER,mt));if(i&&typeof i.log!="function")throw new Error(J(M.INVALID_LOGGER,mt));return!0}throw new Error(J(M.INVALID_CONFIG,mt))},Xu=function(e){if(!e)throw new Error(J(M.NO_DATAFILE_SPECIFIED,mt));if(typeof e=="string")try{e=JSON.parse(e)}catch{throw new Error(J(M.INVALID_DATAFILE_MALFORMED,mt))}if(typeof e=="object"&&!Array.isArray(e)&&e!==null&&Yu.indexOf(e.version)===-1)throw new Error(J(M.INVALID_DATAFILE_VERSION,mt,e.version));return e},oo={validate:Wu,validateDatafile:Xu};function Ju(){}var Qu={handleError:Ju},Hi="POST",Zu="GET",ji=4,el=function(e,t){var r=e.params,n=e.url,i;e.httpVerb===Hi?(i=new XMLHttpRequest,i.open(Hi,n,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(i.readyState===ji&&t&&typeof t=="function")try{t({statusCode:i.status})}catch{}},i.send(JSON.stringify(r))):(n+="?wxhr=true",r&&(n+="&"+tl(r)),i=new XMLHttpRequest,i.open(Zu,n,!0),i.onreadystatechange=function(){if(i.readyState===ji&&t&&typeof t=="function")try{t({statusCode:i.status})}catch{}},i.send())},tl=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},so={dispatchEvent:el},rl=function(e,t){var r=e.params,n=e.url,i=new Blob([JSON.stringify(r)],{type:"application/json"}),a=navigator.sendBeacon(n,i);t({statusCode:a?200:500})},uo={dispatchEvent:rl},lo=(function(){function e(){}return e.prototype.log=function(){},e})();function fi(e){return new bu(e)}function nl(){return new lo}var il=Object.freeze({__proto__:null,NoOpLogger:lo,createLogger:fi,createNoOpLogger:nl}),al=function(e){return typeof e=="number"&&ue.isSafeInteger(e)?e>=1:!1},ol=function(e){return typeof e=="number"&&ue.isSafeInteger(e)?e>0:!1},Ki={validateEventBatchSize:al,validateEventFlushInterval:ol},sl="NOTIFICATION_CENTER",ul=(function(){function e(t){var r=this;this.logger=t.logger,this.errorHandler=t.errorHandler,this.notificationListeners={},Ye(me).forEach(function(n){r.notificationListeners[n]=[]}),this.listenerId=1}return e.prototype.addNotificationListener=function(t,r){try{var n=Ye(me),i=n.indexOf(t)>-1;if(!i)return-1;this.notificationListeners[t]||(this.notificationListeners[t]=[]);var a=!1;if((this.notificationListeners[t]||[]).forEach(function(s){if(s.callback===r){a=!0;return}}),a)return-1;this.notificationListeners[t].push({id:this.listenerId,callback:r});var o=this.listenerId;return this.listenerId+=1,o}catch(s){return this.logger.log(A.ERROR,s.message),this.errorHandler.handleError(s),-1}},e.prototype.removeNotificationListener=function(t){var r=this;try{var n,i;if(Object.keys(this.notificationListeners).some(function(a){var o=r.notificationListeners[a];return(o||[]).every(function(s,l){return s.id===t?(n=l,i=a,!1):!0}),n!==void 0&&i!==void 0}),n!==void 0&&i!==void 0)return this.notificationListeners[i].splice(n,1),!0}catch(a){this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a)}return!1},e.prototype.clearAllNotificationListeners=function(){var t=this;try{Ye(me).forEach(function(r){t.notificationListeners[r]=[]})}catch(r){this.logger.log(A.ERROR,r.message),this.errorHandler.handleError(r)}},e.prototype.clearNotificationListeners=function(t){try{this.notificationListeners[t]=[]}catch(r){this.logger.log(A.ERROR,r.message),this.errorHandler.handleError(r)}},e.prototype.sendNotifications=function(t,r){var n=this;try{(this.notificationListeners[t]||[]).forEach(function(i){var a=i.callback;try{a(r)}catch(o){n.logger.log(A.ERROR,T.NOTIFICATION_LISTENER_EXCEPTION,sl,t,o.message)}})}catch(i){this.logger.log(A.ERROR,i.message),this.errorHandler.handleError(i)}},e})();function co(e){return new ul(e)}function ll(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(Gi.bind.apply(Gi,Vt([void 0],e,!1)))}var cl={createEventProcessor:ll,LocalStoragePendingEventsDispatcher:ao},Pr;(function(e){e.IGNORE_CACHE="IGNORE_CACHE",e.RESET_CACHE="RESET_CACHE"})(Pr||(Pr={}));var qi;(function(e){e.BOOLEAN="boolean",e.DOUBLE="double",e.INTEGER="integer",e.STRING="string",e.JSON="json"})(qi||(qi={}));var Ke;(function(e){e.DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",e.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",e.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",e.INCLUDE_REASONS="INCLUDE_REASONS",e.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES"})(Ke||(Ke={}));var fl=5,dl=fl*60*1e3,fo=30,pl=fo*1e3,vl="Polling intervals below ".concat(fo," seconds are not recommended."),hl="https://cdn.optimizely.com/datafiles/%s.json",rn=[0,8,16,32,64,128,256,512],gl=60*1e3,El=ve("DatafileManager"),_l="GET",ml=4;function yl(e){var t=e.getAllResponseHeaders();if(t===null)return{};var r=t.split(`\r
`),n={};return r.forEach(function(i){var a=i.indexOf(": ");if(a>-1){var o=i.slice(0,a),s=i.slice(a+2);s.length>0&&(n[o]=s)}}),n}function Il(e,t){Object.keys(e).forEach(function(r){var n=e[r];t.setRequestHeader(r,n)})}function bl(e,t){var r=new XMLHttpRequest,n=new Promise(function(i,a){r.open(_l,e,!0),Il(t,r),r.onreadystatechange=function(){if(r.readyState===ml){var o=r.status;if(o===0){a(new Error("Request error"));return}var s=yl(r),l={statusCode:r.status,body:r.responseText,headers:s};i(l)}},r.timeout=gl,r.ontimeout=function(){El.error("Request timed out")},r.send()});return{responsePromise:n,abort:function(){r.abort()}}}var Ol=(function(){function e(){this.listeners={},this.listenerId=1}return e.prototype.on=function(t,r){var n=this;this.listeners[t]||(this.listeners[t]={});var i=String(this.listenerId);return this.listenerId++,this.listeners[t][i]=r,function(){n.listeners[t]&&delete n.listeners[t][i]}},e.prototype.emit=function(t,r){var n=this.listeners[t];n&&Object.keys(n).forEach(function(i){var a=n[i];a(r)})},e.prototype.removeAllListeners=function(){this.listeners={}},e})();function Rl(){return Math.round(Math.random()*1e3)}var Al=(function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){if(this.errorCount===0)return 0;var t=rn[Math.min(rn.length-1,this.errorCount)];return t*1e3+Rl()},e.prototype.countError=function(){this.errorCount<rn.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e})(),po=(function(){function e(){}return e.getNotificationCenter=function(t,r){if(r===void 0&&(r=ve()),!t){r.log(B.ERROR,"No SDK key provided to getNotificationCenter.");return}var n;return this._notificationCenters.has(t)?n=this._notificationCenters.get(t):(n=co({logger:r,errorHandler:{handleError:function(){}}}),this._notificationCenters.set(t,n)),n},e.removeNotificationCenter=function(t){if(t){var r=this._notificationCenters.get(t);r&&(r.clearAllNotificationListeners(),this._notificationCenters.delete(t))}},e._notificationCenters=new Map,e})(),be=ve("DatafileManager"),Tl="update";function $i(e){return e>=200&&e<400}var Nl={get:function(){return Promise.resolve(void 0)},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve(!1)}},Sl=(function(){function e(t){var r=this,n=we(we({},this.getConfigDefaults()),t),i=n.datafile,a=n.autoUpdate,o=a===void 0?!1:a,s=n.sdkKey,l=n.updateInterval,f=l===void 0?dl:l,u=n.urlTemplate,v=u===void 0?hl:u,c=n.cache,d=c===void 0?Nl:c,h=n.customHeaders;this.cache=d,this.cacheKey="opt-datafile-"+s,this.sdkKey=s,this.customHeaders=h,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise(function(p,g){r.readyPromiseResolver=p,r.readyPromiseRejecter=g}),i?(this.currentDatafile=i,s||this.resolveReadyPromise()):this.currentDatafile="",this.isStarted=!1,this.datafileUrl=J(v,s),this.emitter=new Ol,this.autoUpdate=o,this.updateInterval=f,this.updateInterval<pl&&be.warn(vl),this.currentTimeout=null,this.currentRequest=null,this.backoffController=new Al,this.syncOnCurrentRequestComplete=!1}return e.prototype.get=function(){return this.currentDatafile},e.prototype.start=function(){this.isStarted||(be.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},e.prototype.stop=function(){return be.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.onReady=function(){return this.readyPromise},e.prototype.on=function(t,r){return this.emitter.on(t,r)},e.prototype.onRequestRejected=function(t){this.isStarted&&(this.backoffController.countError(),t instanceof Error?be.error("Error fetching datafile: %s",t.message,t):typeof t=="string"?be.error("Error fetching datafile: %s",t):be.error("Error fetching datafile"))},e.prototype.onRequestResolved=function(t){var r;if(this.isStarted){typeof t.statusCode<"u"&&$i(t.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(t.headers);var n=this.getNextDatafileFromResponse(t);if(n!=="")if(be.info("Updating datafile from response"),this.currentDatafile=n,this.cache.set(this.cacheKey,n),!this.isReadyPromiseSettled)this.resolveReadyPromise();else{var i={datafile:n};(r=po.getNotificationCenter(this.sdkKey,be))===null||r===void 0||r.sendNotifications(me.OPTIMIZELY_CONFIG_UPDATE),this.emitter.emit(Tl,i)}}},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,!this.isReadyPromiseSettled&&!this.autoUpdate&&this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},e.prototype.syncDatafile=function(){var t=this,r={};this.customHeaders&&Re(r,this.customHeaders),this.lastResponseLastModified&&(r["if-modified-since"]=this.lastResponseLastModified),be.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,function(){return JSON.stringify(r)}),this.currentRequest=this.makeGetRequest(this.datafileUrl,r);var n=function(){t.onRequestComplete()},i=function(o){t.onRequestResolved(o)},a=function(o){t.onRequestRejected(o)};this.currentRequest.responsePromise.then(i,a).then(n,n),this.autoUpdate&&this.scheduleNextUpdate()},e.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},e.prototype.rejectReadyPromise=function(t){this.readyPromiseRejecter(t),this.isReadyPromiseSettled=!0},e.prototype.scheduleNextUpdate=function(){var t=this,r=this.backoffController.getDelay(),n=Math.max(r,this.updateInterval);be.debug("Scheduling sync in %s ms",n),this.currentTimeout=setTimeout(function(){t.currentRequest?t.syncOnCurrentRequestComplete=!0:t.syncDatafile()},n)},e.prototype.getNextDatafileFromResponse=function(t){return be.debug("Response status code: %s",t.statusCode),typeof t.statusCode>"u"||t.statusCode===304?"":$i(t.statusCode)?t.body:(be.error("Datafile fetch request failed with status: ".concat(t.statusCode)),"")},e.prototype.trySavingLastModified=function(t){var r=t["last-modified"]||t["Last-Modified"];typeof r<"u"&&(this.lastResponseLastModified=r,be.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},e.prototype.setDatafileFromCacheIfAvailable=function(){var t=this;this.cache.get(this.cacheKey).then(function(r){t.isStarted&&!t.isReadyPromiseSettled&&r&&(be.debug("Using datafile from cache"),t.currentDatafile=r,t.resolveReadyPromise())})},e})(),Dl=(function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeGetRequest=function(r,n){return bl(r,n)},t.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},t})(Sl),wl=(function(){function e(t,r,n,i){this.apiKey=t,this.apiHost=r,this.pixelUrl=n,this.segmentsToCheck=i}return e.prototype.equals=function(t){return this.apiHost===t.apiHost&&this.apiKey===t.apiKey&&this.pixelUrl===t.pixelUrl&&Ja(this.segmentsToCheck,t.segmentsToCheck)},e})(),Ll=function(e,t){return e.integrated!==t.integrated?!1:e.integrated&&t.integrated?e.odpConfig.equals(t.odpConfig):!0},vo="Running",zi="$opt_",he="PROJECT_CONFIG";function Cl(e){var t,r,n=Re({},e);return n.events=(e.events||[]).map(function(i){var a=Re({},i);return a.experimentsIds=i.experimentIds,a}),n.audiences=(e.audiences||[]).map(function(i){return Re({},i)}),n.experiments=(e.experiments||[]).map(function(i){return Re({},i)}),n.featureFlags=(e.featureFlags||[]).map(function(i){return Re({},i)}),n.groups=(e.groups||[]).map(function(i){var a=Re({},i);return a.experiments=(i.experiments||[]).map(function(o){return Re({},o)}),a}),n.rollouts=(e.rollouts||[]).map(function(i){var a=Re({},i);return a.experiments=(i.experiments||[]).map(function(o){return Re({},o)}),a}),n.environmentKey=(t=e.environmentKey)!==null&&t!==void 0?t:"",n.sdkKey=(r=e.sdkKey)!==null&&r!==void 0?r:"",n}var Pl=function(e,t){t===void 0&&(t=null);var r=Cl(e);r.__datafileStr=t===null?JSON.stringify(e):t,(r.audiences||[]).forEach(function(u){u.conditions=JSON.parse(u.conditions)}),r.audiencesById=_e(r.audiences,"id"),Re(r.audiencesById,_e(r.typedAudiences,"id")),r.attributeKeyMap=_e(r.attributes,"key"),r.eventKeyMap=_e(r.events,"key"),r.groupIdMap=_e(r.groups,"id");var n;Object.keys(r.groupIdMap||{}).forEach(function(u){n=r.groupIdMap[u].experiments,(n||[]).forEach(function(v){r.experiments.push(Re(v,{groupId:u}))})}),r.rolloutIdMap=_e(r.rollouts||[],"id"),Ye(r.rolloutIdMap||{}).forEach(function(u){(u.experiments||[]).forEach(function(v){v.isRollout=!0,r.experiments.push(v),v.variationKeyMap=_e(v.variations,"key")})});var i=new Set;Object.keys(r.audiencesById).map(function(u){return Ul(r.audiencesById[u])}).forEach(function(u){u.forEach(function(v){i.add(v)})});var a=Array.from(i),o=!1,s="",l="",f="";return r.integrations&&(r.integrationKeyMap=_e(r.integrations,"key"),r.integrations.forEach(function(u){if(!("key"in u))throw new Error(J(M.MISSING_INTEGRATION_KEY,he));u.key==="odp"&&(o=!0,l=l||u.publicKey||"",s=s||u.host||"",f=f||u.pixelUrl||"")})),o?r.odpIntegrationConfig={integrated:!0,odpConfig:new wl(l,s,f,a)}:r.odpIntegrationConfig={integrated:!1},r.experimentKeyMap=_e(r.experiments,"key"),r.experimentIdMap=_e(r.experiments,"id"),r.variationIdMap={},r.variationVariableUsageMap={},(r.experiments||[]).forEach(function(u){u.variationKeyMap=_e(u.variations,"key"),Re(r.variationIdMap,_e(u.variations,"id")),Ye(u.variationKeyMap||{}).forEach(function(v){v.variables&&(r.variationVariableUsageMap[v.id]=_e(v.variables,"id"))})}),r.experimentFeatureMap={},r.featureKeyMap=_e(r.featureFlags||[],"key"),Ye(r.featureKeyMap||{}).forEach(function(u){u.variables.forEach(function(v){v.type===De.STRING&&v.subType===De.JSON&&(v.type=De.JSON,delete v.subType)}),u.variableKeyMap=_e(u.variables,"key"),(u.experimentIds||[]).forEach(function(v){r.experimentFeatureMap[v]?r.experimentFeatureMap[v].push(u.id):r.experimentFeatureMap[v]=[u.id]})}),r.flagRulesMap={},(r.featureFlags||[]).forEach(function(u){var v=[];u.experimentIds.forEach(function(d){var h=r.experimentIdMap[d];h&&v.push(h)});var c=r.rolloutIdMap[u.rolloutId];c&&v.push.apply(v,c.experiments),r.flagRulesMap[u.key]=v}),r.flagVariationsMap={},Wa(r.flagRulesMap||{}).forEach(function(u){var v=u[0],c=u[1],d=[];c.forEach(function(h){h.variations.forEach(function(p){si(d,function(g){return g.id===p.id})||d.push(p)})}),r.flagVariationsMap[v]=d}),r},Ul=function(e){return e.conditions?ho(e.conditions):[]},ho=function(e){var t=[];return Ml(e)?[]:(Array.isArray(e)?e.forEach(function(r){return t.push.apply(t,ho(r))}):e.match==="qualified"&&t.push(e.value),t)};function Ml(e){return["and","or","not"].includes(e)}var go=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(J(M.INVALID_EXPERIMENT_ID,he,t));return r.layerId},Eo=function(e,t,r){var n=e.attributeKeyMap[t],i=t.indexOf(zi)===0;return n?(i&&r.log(A.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",t,zi),n.id):i?t:(r.log(A.DEBUG,M.UNRECOGNIZED_ATTRIBUTE,he,t),null)},_o=function(e,t){var r=e.eventKeyMap[t];return r?r.id:null},mo=function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(J(M.INVALID_EXPERIMENT_KEY,he,t));return r.status},xl=function(e,t){return mo(e,t)===vo},Vl=function(e,t){return mo(e,t)===vo},kl=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(J(M.INVALID_EXPERIMENT_ID,he,t));return r.audienceConditions||r.audienceIds},yo=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t].key:null},Fl=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t]:null},Bl=function(e,t,r){var n=e.experimentKeyMap[t];return n.variationKeyMap.hasOwnProperty(r)?n.variationKeyMap[r].id:null},Bn=function(e,t){if(e.experimentKeyMap.hasOwnProperty(t)){var r=e.experimentKeyMap[t];if(r)return r}throw new Error(J(M.EXPERIMENT_KEY_NOT_IN_DATAFILE,he,t))},Gl=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(J(M.INVALID_EXPERIMENT_ID,he,t));return r.trafficAllocation},Hl=function(e,t,r){if(e.experimentIdMap.hasOwnProperty(t)){var n=e.experimentIdMap[t];if(n)return n}return r.log(A.ERROR,M.INVALID_EXPERIMENT_ID,he,t),null},Yi=function(e,t,r){if(!e)return null;var n=e.flagVariationsMap[t],i=si(n,function(a){return a.key===r});return i||null},nn=function(e,t,r){if(e.featureKeyMap.hasOwnProperty(t)){var n=e.featureKeyMap[t];if(n)return n}return r.log(A.ERROR,M.FEATURE_NOT_IN_DATAFILE,he,t),null},jl=function(e,t,r,n){var i=e.featureKeyMap[t];if(!i)return n.log(A.ERROR,M.FEATURE_NOT_IN_DATAFILE,he,t),null;var a=i.variableKeyMap[r];return a||(n.log(A.ERROR,M.VARIABLE_KEY_NOT_IN_DATAFILE,he,r,t),null)},Kl=function(e,t,r,n){if(!t||!r)return null;if(!e.variationVariableUsageMap.hasOwnProperty(r.id))return n.log(A.ERROR,M.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,he,r.id),null;var i=e.variationVariableUsageMap[r.id],a=i[t.id];return a?a.value:null},ql=function(e,t,r){var n;switch(t){case De.BOOLEAN:e!=="true"&&e!=="false"?(r.log(A.ERROR,M.UNABLE_TO_CAST_VALUE,he,e,t),n=null):n=e==="true";break;case De.INTEGER:n=parseInt(e,10),isNaN(n)&&(r.log(A.ERROR,M.UNABLE_TO_CAST_VALUE,he,e,t),n=null);break;case De.DOUBLE:n=parseFloat(e),isNaN(n)&&(r.log(A.ERROR,M.UNABLE_TO_CAST_VALUE,he,e,t),n=null);break;case De.JSON:try{n=JSON.parse(e)}catch{r.log(A.ERROR,M.UNABLE_TO_CAST_VALUE,he,e,t),n=null}break;default:n=e;break}return n},$l=function(e){return e.audiencesById},zl=function(e,t){return e.eventKeyMap.hasOwnProperty(t)},Yl=function(e,t){return e.experimentFeatureMap.hasOwnProperty(t)},Io=function(e){return e.__datafileStr},bo=function(e){var t;try{t=oo.validateDatafile(e.datafile)}catch(i){return{configObj:null,error:i}}if(e.jsonSchemaValidator)try{e.jsonSchemaValidator.validate(t),e.logger.log(A.INFO,T.VALID_DATAFILE,he)}catch(i){return{configObj:null,error:i}}else e.logger.log(A.INFO,T.SKIPPING_JSON_VALIDATION,he);var r=[t];typeof e.datafile=="string"&&r.push(e.datafile);var n=Pl.apply(void 0,r);return{configObj:n,error:null}},Wi=function(e){return!!e.sendFlagDecisions};function Wl(e,t,r,n){var i={sdkKey:e};if((n===void 0||typeof n=="object"&&n!==null)&&ue.assign(i,n),r){var a=bo({datafile:r,jsonSchemaValidator:void 0,logger:t}),o=a.configObj,s=a.error;s&&t.error(s),o&&(i.datafile=Io(o))}return new Dl(i)}var Xi=(function(){function e(t,r){r===void 0&&(r=eo),this.logger=t,this.timeout=r}return e.prototype.makeRequest=function(t,r,n,i){var a=this,o=new XMLHttpRequest,s=new Promise(function(l,f){o.open(n,t,!0),a.setHeadersInXhr(r,o),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){var u=o.status;if(u===0){f(new Error("Request error"));return}var v=a.parseHeadersFromXhr(o),c={statusCode:o.status,body:o.responseText,headers:v};l(c)}},o.timeout=a.timeout,o.ontimeout=function(){a.logger.log(B.WARNING,"Request timed out")},o.send(i)});return{responsePromise:s,abort:function(){o.abort()}}},e.prototype.setHeadersInXhr=function(t,r){Object.keys(t).forEach(function(n){var i=t[n];typeof i=="string"&&r.setRequestHeader(n,i)})},e.prototype.parseHeadersFromXhr=function(t){var r=this,n=t.getAllResponseHeaders();if(n===null)return{};var i=n.split(`\r
`),a={};return i.forEach(function(o){try{var s=o.indexOf(": ");if(s>-1){var l=o.slice(0,s),f=o.slice(s+2);l&&f&&(a[l]=f)}}catch{r.logger.log(B.WARNING,"Unable to parse & skipped header item '".concat(o,"'"))}}),a},e})(),vr=function(e){var t=e.browserCallback,r=e.nonBrowserCallback;return typeof window<"u"?t(window?.localStorage):r()},Xl=(function(){function e(){this.logger=ve()}return e.prototype.contains=function(t){return de(this,void 0,void 0,function(){var r=this;return pe(this,function(n){return[2,vr({browserCallback:function(i){return i?.getItem(t)!==null},nonBrowserCallback:function(){return r.logger.error(M.LOCAL_STORAGE_DOES_NOT_EXIST),!1}})]})})},e.prototype.get=function(t){return de(this,void 0,void 0,function(){var r=this;return pe(this,function(n){return[2,vr({browserCallback:function(i){return i?.getItem(t)||void 0},nonBrowserCallback:function(){r.logger.error(M.LOCAL_STORAGE_DOES_NOT_EXIST)}})]})})},e.prototype.remove=function(t){return de(this,void 0,void 0,function(){var r=this;return pe(this,function(n){switch(n.label){case 0:return[4,this.contains(t)];case 1:return n.sent()?(vr({browserCallback:function(i){i?.removeItem(t)},nonBrowserCallback:function(){r.logger.error(M.LOCAL_STORAGE_DOES_NOT_EXIST)}}),[2,!0]):[2,!1]}})})},e.prototype.set=function(t,r){return de(this,void 0,void 0,function(){var n=this;return pe(this,function(i){return[2,vr({browserCallback:function(a){a?.setItem(t,r)},nonBrowserCallback:function(){n.logger.error(M.LOCAL_STORAGE_DOES_NOT_EXIST)}})]})})},e})(),Jl=(function(){function e(t){t===void 0&&(t=null),this._value=t,this._time=Date.now()}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},enumerable:!1,configurable:!0}),e.prototype.is_stale=function(t){return t<=0?!1:Date.now()-this._time>=t},e})(),Oo=(function(){function e(t){var r=t.maxSize,n=t.timeout;this._map=new Map;var i=ve();i.debug("Provisioning cache with maxSize of ".concat(r)),i.debug("Provisioning cache with timeout of ".concat(n)),this._maxSize=r,this._timeout=n}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._timeout},enumerable:!1,configurable:!0}),e.prototype.lookup=function(t){if(this._maxSize<=0)return null;var r=this._map.get(t);return r?r.is_stale(this._timeout)?(this._map.delete(t),null):(this._map.delete(t),this._map.set(t,r),r.value):null},e.prototype.save=function(t){var r=t.key,n=t.value;if(!(this._maxSize<=0)){var i=this._map.get(r);if(i&&this._map.delete(r),this._map.set(r,new Jl(n)),this._map.size>this._maxSize){var a=this._map.keys().next().value;this._map.delete(a)}}},e.prototype.reset=function(){this._maxSize<=0||this._map.clear()},e.prototype.peek=function(t){var r;if(this._maxSize<=0)return null;var n=this._map.get(t);return(r=n?.value)!==null&&r!==void 0?r:null},e})(),Ji={DEFAULT_CAPACITY:100,DEFAULT_TIMEOUT_SECS:600},Ql=(function(e){St(t,e);function t(r){var n,i;return e.call(this,{maxSize:(n=r?.maxSize)!==null&&n!==void 0?n:Ji.DEFAULT_CAPACITY,timeout:(i=r?.timeout)!==null&&i!==void 0?i:Ji.DEFAULT_TIMEOUT_SECS*1e3})||this}return t})(Oo),Qi={DEFAULT_CAPACITY:1e4,DEFAULT_TIMEOUT_SECS:600};(function(e){St(t,e);function t(r){var n,i;return e.call(this,{maxSize:(n=r?.maxSize)!==null&&n!==void 0?n:Qi.DEFAULT_CAPACITY,timeout:(i=r?.timeout)!==null&&i!==void 0?i:Qi.DEFAULT_TIMEOUT_SECS*1e3})||this}return t})(Oo);var nr=(function(){function e(){this._keyForVuid="optimizely-vuid",this._vuid=""}return Object.defineProperty(e.prototype,"vuid",{get:function(){return this._vuid},enumerable:!1,configurable:!0}),e.instance=function(t){return de(this,void 0,void 0,function(){return pe(this,function(r){switch(r.label){case 0:return this._instance||(this._instance=new e),this._instance._vuid?[3,2]:[4,this._instance.load(t)];case 1:r.sent(),r.label=2;case 2:return[2,this._instance]}})})},e.prototype.load=function(t){return de(this,void 0,void 0,function(){var r;return pe(this,function(n){switch(n.label){case 0:return[4,t.get(this._keyForVuid)];case 1:return r=n.sent(),r&&e.isVuid(r)?(this._vuid=r,[3,4]):[3,2];case 2:return this._vuid=this.makeVuid(),[4,this.save(this._vuid,t)];case 3:n.sent(),n.label=4;case 4:return[2,this._vuid]}})})},e.prototype.makeVuid=function(){var t=32,r=Hr(),n=r.replace(/-/g,"").toLowerCase(),i="".concat(e.vuid_prefix).concat(n);return i.length<=t?i:i.substring(0,t)},e.prototype.save=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){switch(n.label){case 0:return[4,r.set(this._keyForVuid,t)];case 1:return n.sent(),[2]}})})},e._reset=function(){this._instance._vuid=""},e.vuid_prefix="vuid_",e.isVuid=function(t){return t?.startsWith(e.vuid_prefix)||!1},e})();function Ro(e){var t=["string","number","boolean"],r=!1;return e.forEach(function(n){!t.includes(typeof n)&&n!==null&&(r=!0)}),r}var Ur=(function(){function e(t,r,n,i){this.type=t,this.action=r,this.identifiers=n??new Map,this.data=i??new Map}return e})(),Zi=function(){};function Zl(){var e=Zi,t=Zi,r=new Promise(function(n,i){e=n,t=i});return{promise:r,resolve:e,reject:t,then:r.then.bind(r)}}var Ze;(function(e){e[e.Running=0]="Running",e[e.Stopped=1]="Stopped"})(Ze||(Ze={}));var ec=(function(){function e(t){var r=t.odpIntegrationConfig,n=t.segmentManager,i=t.eventManager,a=t.logger,o=this;this.ready=!1,this.status=Ze.Stopped,this.segmentManager=n,this.eventManager=i,this.logger=a,this.configPromise=Zl();var s=[this.configPromise];this.isVuidEnabled()&&s.push(this.initializeVuid()),this.initPromise=Promise.all(s),this.onReady().then(function(){o.ready=!0,o.isVuidEnabled()&&o.status===Ze.Running&&o.registerVuid()}),r&&this.updateSettings(r)}return e.prototype.getStatus=function(){return this.status},e.prototype.start=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){return this.status===Ze.Running?[2]:this.odpIntegrationConfig?this.odpIntegrationConfig.integrated?(this.status=Ze.Running,this.segmentManager.updateSettings(this.odpIntegrationConfig.odpConfig),this.eventManager.updateSettings(this.odpIntegrationConfig.odpConfig),this.eventManager.start(),[2,Promise.resolve()]):[2,Promise.reject(new Error("start() called when ODP is not integrated"))]:[2,Promise.reject(new Error("cannot start without ODP config"))]})})},e.prototype.stop=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){switch(t.label){case 0:return this.status===Ze.Stopped?[2]:(this.status=Ze.Stopped,[4,this.eventManager.stop()]);case 1:return t.sent(),[2]}})})},e.prototype.onReady=function(){return this.initPromise},e.prototype.isReady=function(){return this.ready},e.prototype.updateSettings=function(t){return this.configPromise.resolve(),this.odpIntegrationConfig&&Ll(this.odpIntegrationConfig,t)?!1:(this.odpIntegrationConfig=t,t.integrated?this.status===Ze.Running?(this.segmentManager.updateSettings(t.odpConfig),this.eventManager.updateSettings(t.odpConfig)):this.start():this.stop(),!0)},e.prototype.fetchQualifiedSegments=function(t,r){return r===void 0&&(r=[]),de(this,void 0,void 0,function(){return pe(this,function(n){return this.odpIntegrationConfig?this.odpIntegrationConfig.integrated?nr.isVuid(t)?[2,this.segmentManager.fetchQualifiedSegments(Ue.VUID,t,r)]:[2,this.segmentManager.fetchQualifiedSegments(Ue.FS_USER_ID,t,r)]:(this.logger.log(B.ERROR,M.ODP_NOT_INTEGRATED),[2,null]):(this.logger.log(B.ERROR,M.ODP_CONFIG_NOT_AVAILABLE),[2,null])})})},e.prototype.identifyUser=function(t,r){if(!this.odpIntegrationConfig){this.logger.log(B.ERROR,M.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(B.INFO,M.ODP_NOT_INTEGRATED);return}if(t&&nr.isVuid(t)){this.eventManager.identifyUser(void 0,t);return}this.eventManager.identifyUser(t,r)},e.prototype.sendEvent=function(t){var r=t.type,n=t.action,i=t.identifiers,a=t.data,o=r;if((typeof o!="string"||o==="")&&(o="fullstack"),!this.odpIntegrationConfig){this.logger.log(B.ERROR,M.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(B.ERROR,M.ODP_NOT_INTEGRATED);return}if(Ro(a))throw new Error(M.ODP_INVALID_DATA);if(typeof n!="string"||n==="")throw new Error("ODP action is not valid (cannot be empty).");this.eventManager.sendEvent(new Ur(o,n,i,a))},e.prototype.initializeVuid=function(){return Promise.resolve()},e.prototype.registerVuid=function(){if(!this.odpIntegrationConfig){this.logger.log(B.ERROR,M.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(B.INFO,M.ODP_NOT_INTEGRATED);return}var t=this.getVuid();if(t)try{this.eventManager.registerVuid(t)}catch{this.logger.log(B.ERROR,M.ODP_VUID_REGISTRATION_FAILED)}},e})(),an="ODP event send failed",tc=(function(){function e(t,r){this.requestHandler=t,this.logger=r}return e.prototype.getLogger=function(){return this.logger},e.prototype.sendEvents=function(t,r){var n;return de(this,void 0,void 0,function(){var i,a,o,s,l,f,u,v,c,d,h;return pe(this,function(p){switch(p.label){case 0:if(i=!1,r.length===0)return this.logger.log(B.ERROR,"".concat(an," (no events)")),[2,i];if(!this.shouldSendEvents(r))return[2,i];a=this.generateRequestData(t,r),o=a.method,s=a.endpoint,l=a.headers,f=a.data,u=0,p.label=1;case 1:return p.trys.push([1,3,,4]),v=this.requestHandler.makeRequest(s,l,o,f),[4,v.responsePromise];case 2:return c=p.sent(),u=(n=c.statusCode)!==null&&n!==void 0?n:u,[3,4];case 3:return d=p.sent(),h="network error",d instanceof Error&&(h=d.message),this.logger.log(B.ERROR,"".concat(an," (").concat(h,")")),i=!0,[3,4];case 4:return u>=400&&this.logger.log(B.ERROR,"".concat(an," (").concat(u,")")),u>=500&&(i=!0),[2,i]}})})},e})(),rc="ODP event send failed",nc="v2/zaius.gif",ic=(function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.shouldSendEvents=function(r){return r.length<=1?!0:(this.getLogger().log(B.ERROR,"".concat(rc," (browser only supports batch size 1)")),!1)},t.prototype.getPixelApiEndpoint=function(r){var n=r.pixelUrl,i=new URL(nc,n).href;return i},t.prototype.generateRequestData=function(r,n){var i=this.getPixelApiEndpoint(r),a=r.apiKey,o="GET",s=n[0],l=new URL(i);s.identifiers.forEach(function(u,v){l.searchParams.append(v,u)}),s.data.forEach(function(u,v){l.searchParams.append(v,u)}),l.searchParams.append("tracker_id",a),l.searchParams.append("event_type",s.type),l.searchParams.append("vdl_action",s.action);var f=l.toString();return{method:o,endpoint:f,headers:{},data:""}},t})(tc),Ao=function(e){typeof queueMicrotask=="function"?queueMicrotask(e):setTimeout(e)},ac=3,at;(function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running"})(at||(at={}));var oc=(function(){function e(t){var r=t.odpConfig,n=t.apiManager,i=t.logger,a=t.clientEngine,o=t.clientVersion,s=t.queueSize,l=t.batchSize,f=t.flushInterval,u=t.userAgentParser,v=t.retries;if(this.status=at.Stopped,this.queue=new Array,this.apiManager=n,this.logger=i,this.clientEngine=a,this.clientVersion=o,this.initParams(l,s,f),this.status=at.Stopped,this.userAgentParser=u,this.retries=v||ac,u){var c=u.parseUserAgentInfo(),d=c.os,h=c.device,p={os:d.name,os_version:d.version,device_type:h.type,model:h.model};this.userAgentData=new Map(Object.entries(p).filter(function(g){g[0];var m=g[1];return m!=null&&m!=null}))}r&&this.updateSettings(r)}return e.prototype.updateSettings=function(t){this.odpConfig&&this.odpConfig.equals(t)||(this.flush(),this.odpConfig=t)},e.prototype.flush=function(){this.processQueue(!0)},e.prototype.start=function(){if(!this.odpConfig){this.logger.log(B.ERROR,M.ODP_CONFIG_NOT_AVAILABLE);return}this.status=at.Running,this.batchSize>1&&this.setNewTimeout()},e.prototype.stop=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){return this.logger.log(B.DEBUG,"Stop requested."),this.flush(),this.clearCurrentTimeout(),this.status=at.Stopped,this.logger.log(B.DEBUG,"Stopped. Queue Count: %s",this.queue.length),[2]})})},e.prototype.registerVuid=function(t){var r=new Map;r.set(Ue.VUID,t);var n=new Ur(Cr,or.INITIALIZED,r);this.sendEvent(n)},e.prototype.identifyUser=function(t,r){var n=new Map;if(!t&&!r){this.logger.log(B.ERROR,M.ODP_SEND_EVENT_FAILED_UID_MISSING);return}r&&n.set(Ue.VUID,r),t&&n.set(Ue.FS_USER_ID,t);var i=new Ur(Cr,or.IDENTIFIED,n);this.sendEvent(i)},e.prototype.sendEvent=function(t){Ro(t.data)?this.logger.log(B.ERROR,"Event data found to be invalid."):(t.data=this.augmentCommonData(t.data),this.enqueue(t))},e.prototype.enqueue=function(t){if(this.status===at.Stopped){this.logger.log(B.WARNING,"Failed to Process ODP Event. ODPEventManager is not running.");return}if(!this.hasNecessaryIdentifiers(t)){this.logger.log(B.ERROR,"ODP events should have at least one key-value pair in identifiers.");return}if(this.queue.length>=this.queueSize){this.logger.log(B.WARNING,"Failed to Process ODP Event. Event Queue full. queueSize = %s.",this.queue.length);return}this.queue.push(t),this.processQueue()},e.prototype.processQueue=function(t){if(t===void 0&&(t=!1),this.status===at.Running){if(t)for(this.clearCurrentTimeout();this.queueContainsItems();)this.makeAndSend1Batch();else if(this.queueHasBatches())for(this.clearCurrentTimeout();this.queueHasBatches();)this.makeAndSend1Batch();this.batchSize>1&&this.setNewTimeout()}},e.prototype.clearCurrentTimeout=function(){clearTimeout(this.timeoutId),this.timeoutId=void 0},e.prototype.setNewTimeout=function(){var t=this;this.timeoutId===void 0&&(this.timeoutId=setTimeout(function(){return t.processQueue(!0)},this.flushInterval))},e.prototype.makeAndSend1Batch=function(){var t=this;if(this.odpConfig){var r=this.queue.splice(0,this.batchSize),n=this.odpConfig;r.length>0&&Ao(function(){return de(t,void 0,void 0,function(){var i,a;return pe(this,function(o){switch(o.label){case 0:a=0,o.label=1;case 1:return[4,this.apiManager.sendEvents(n,r)];case 2:i=o.sent(),a+=1,o.label=3;case 3:if(i&&a<this.retries)return[3,1];o.label=4;case 4:return[2]}})})})}},e.prototype.queueHasBatches=function(){return this.queueContainsItems()&&this.queue.length%this.batchSize===0},e.prototype.queueContainsItems=function(){return this.queue.length>0},e.prototype.augmentCommonData=function(t){var r=new Map(this.userAgentData);return r.set("idempotence_id",Hr()),r.set("data_source_type","sdk"),r.set("data_source",this.clientEngine),r.set("data_source_version",this.clientVersion),t.forEach(function(n,i){return r.set(i,n)}),r},e.prototype.getLogger=function(){return this.logger},e.prototype.getQueue=function(){return this.queue},e})(),sc=100,uc=(function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasNecessaryIdentifiers=function(n){return n.identifiers.size>=0},r}return t.prototype.initParams=function(r,n,i){this.queueSize=n||sc,this.batchSize=1,this.flushInterval=0,typeof r<"u"&&r!==1&&this.getLogger().log(B.WARNING,"ODP event batch size must be 1 in the browser."),typeof i<"u"&&i!==0&&this.getLogger().log(B.WARNING,"ODP event flush interval must be 0 in the browser.")},t.prototype.discardEventsIfNeeded=function(){this.getLogger().log(B.DEBUG,"ODPConfig not ready. Leaving events in queue.")},t})(oc),lc=(function(){function e(t,r,n,i){this.odpConfig=i,this._segmentsCache=t,this.odpSegmentApiManager=r,this.logger=n||ve("OdpSegmentManager")}return Object.defineProperty(e.prototype,"segmentsCache",{get:function(){return this._segmentsCache},enumerable:!1,configurable:!0}),e.prototype.fetchQualifiedSegments=function(t,r,n){return de(this,void 0,void 0,function(){var i,a,o,s,l,f;return pe(this,function(u){switch(u.label){case 0:if(!this.odpConfig)return this.logger.log(B.WARNING,M.ODP_CONFIG_NOT_AVAILABLE),[2,null];if(i=this.odpConfig.segmentsToCheck,!i||i.length<=0)return this.logger.log(B.DEBUG,"No segments are used in the project. Returning an empty list."),[2,[]];if(a=this.makeCacheKey(t,r),o=n.includes(Pr.IGNORE_CACHE),s=n.includes(Pr.RESET_CACHE),s&&this.reset(),!o&&!s){if(l=this._segmentsCache.lookup(a),l)return this.logger.log(B.DEBUG,'ODP cache hit. Returning segments from cache "%s".',a),[2,l];this.logger.log(B.DEBUG,"ODP cache miss.")}return this.logger.log(B.DEBUG,"Making a call to ODP server."),[4,this.odpSegmentApiManager.fetchSegments(this.odpConfig.apiKey,this.odpConfig.apiHost,t,r,i)];case 1:return f=u.sent(),f&&!o&&this._segmentsCache.save({key:a,value:f}),[2,f]}})})},e.prototype.reset=function(){this._segmentsCache.reset()},e.prototype.makeCacheKey=function(t,r){return"".concat(t,"-$-").concat(r)},e.prototype.updateSettings=function(t){this.odpConfig=t,this.reset()},e})(),cc={$schema:"http://json-schema.org/draft-04/schema#",title:"Project Config JSON Schema",type:"object",properties:{projectId:{type:"string",required:!0},accountId:{type:"string",required:!0},groups:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},policy:{type:"string",required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0},events:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},experimentIds:{type:"array",items:{type:"string",required:!0}},id:{type:"string",required:!0}}},required:!0},audiences:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},name:{type:"string",required:!0},conditions:{type:"string",required:!0}}},required:!0},attributes:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},version:{type:"string",required:!0},revision:{type:"string",required:!0},integrations:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},host:{type:"string"},publicKey:{type:"string"},pixelUrl:{type:"string"}}}}}},fc=cc,dc="JSON_SCHEMA_VALIDATOR";function pc(e,t,r){t===void 0&&(t=fc);var n="".concat(dc," (").concat(t.title,")");if(typeof e!="object"||e===null)throw new Error(J(M.NO_JSON_PROVIDED,n));var i=su.validate(e,t);return!!i.valid}var vc={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://example.com/example.json",title:"ODP Response Schema",type:"object",required:["data"],properties:{data:{title:"The data Schema",type:"object",required:["customer"],properties:{customer:{title:"The customer Schema",type:"object",required:[],properties:{audiences:{title:"The audiences Schema",type:"object",required:["edges"],properties:{edges:{title:"The edges Schema",type:"array",items:{title:"A Schema",type:"object",required:["node"],properties:{node:{title:"The node Schema",type:"object",required:["name","state"],properties:{name:{title:"The name Schema",type:"string",examples:["has_email","has_email_opted_in"]},state:{title:"The state Schema",type:"string",examples:["qualified"]}},examples:[]}},examples:[]},examples:[]}},examples:[]}},examples:[]}},examples:[]},errors:{title:"The errors Schema",type:"array",default:[],items:{title:"A Schema",type:"object",required:["message","locations","extensions"],properties:{message:{title:"The message Schema",type:"string",examples:["Exception while fetching data (/customer) : java.lang.RuntimeException: could not resolve _fs_user_id = asdsdaddddd"]},locations:{title:"The locations Schema",type:"array",items:{title:"A Schema",type:"object",required:["line","column"],properties:{line:{title:"The line Schema",type:"integer",examples:[2]},column:{title:"The column Schema",type:"integer",examples:[3]}},examples:[]},examples:[]},path:{title:"The path Schema",type:"array",items:{title:"A Schema",type:"string",examples:["customer"]},examples:[]},extensions:{title:"The extensions Schema",type:"object",required:["classification"],properties:{classification:{title:"The classification Schema",type:"string",examples:["InvalidIdentifierException"]}},examples:[]}},examples:[]},examples:[]}},examples:[]},hc="qualified",gc=[],ea=null,Lt="Audience segments fetch failed",Ec=(function(){function e(t,r){this.toGraphQLJson=function(n,i,a){return Vt(Vt(['{"query" : "query {customer',"(".concat(n,' : \\"').concat(i,'\\") '),"{audiences","(subset: ["],a?.map(function(o,s){return'\\"'.concat(o,'\\"').concat(s<a.length-1?",":"")})||"",!0),[']) {edges {node {name state}}}}}"}'],!1).join("")},this.requestHandler=t,this.logger=r}return e.prototype.fetchSegments=function(t,r,n,i,a){var o,s,l,f;return de(this,void 0,void 0,function(){var u,v,c,d,h,p,g,m;return pe(this,function(b){switch(b.label){case 0:return!t||!r?(this.logger.log(B.ERROR,"".concat(Lt," (Parameters apiKey or apiHost invalid)")),[2,null]):a?.length===0?[2,gc]:(u="".concat(r,"/v3/graphql"),v=this.toGraphQLJson(n,i,a),[4,this.querySegments(t,u,n,i,v)]);case 1:return c=b.sent(),c?(d=this.parseSegmentsResponseJson(c),d?((o=d.errors)===null||o===void 0?void 0:o.length)>0?(h=d.errors[0].extensions,p=h.code,g=h.classification,p=="INVALID_IDENTIFIER_EXCEPTION"?this.logger.log(B.ERROR,"".concat(Lt," (invalid identifier)")):this.logger.log(B.ERROR,"".concat(Lt," (").concat(g,")")),[2,null]):(m=(f=(l=(s=d?.data)===null||s===void 0?void 0:s.customer)===null||l===void 0?void 0:l.audiences)===null||f===void 0?void 0:f.edges,m?[2,m.filter(function(O){return O.node.state==hc}).map(function(O){return O.node.name})]:(this.logger.log(B.ERROR,"".concat(Lt," (decode error)")),[2,null])):(this.logger.log(B.ERROR,"".concat(Lt," (decode error)")),[2,null])):(this.logger.log(B.ERROR,"".concat(Lt," (network error)")),[2,null])}})})},e.prototype.querySegments=function(t,r,n,i,a){return de(this,void 0,void 0,function(){var o,s,l,f,u;return pe(this,function(v){switch(v.label){case 0:o="POST",s=r,l={"Content-Type":"application/json","x-api-key":t},v.label=1;case 1:return v.trys.push([1,3,,4]),u=this.requestHandler.makeRequest(s,l,o,a),[4,u.responsePromise];case 2:return f=v.sent(),[3,4];case 3:return v.sent(),[2,null];case 4:return[2,f.body]}})})},e.prototype.parseSegmentsResponseJson=function(t){var r={};try{r=JSON.parse(t)}catch{return ea}return pc(r,vc)?r:ea},e})(),_c=(function(e){St(t,e);function t(r){return e.call(this,r)||this}return t.createInstance=function(r){var n=r.logger,i=r.odpOptions,a=r.odpIntegrationConfig,o=r.clientEngine,s=r.clientVersion;n=n||ve(),o=o||li,s=s||ci;var l=void 0;a?.integrated&&(l=a.odpConfig);var f;i?.segmentsRequestHandler?f=i.segmentsRequestHandler:f=new Xi(n,i?.segmentsApiTimeout||to);var u;i?.segmentManager?u=i.segmentManager:u=new lc(i?.segmentsCache||new Ql({maxSize:i?.segmentsCacheSize,timeout:i?.segmentsCacheTimeout}),new Ec(f,n),n,l);var v;i?.eventRequestHandler?v=i.eventRequestHandler:v=new Xi(n,i?.eventApiTimeout||ro);var c;return i?.eventManager?c=i.eventManager:c=new uc({odpConfig:l,apiManager:new ic(v,n),logger:n,clientEngine:o,clientVersion:s,flushInterval:i?.eventFlushInterval,batchSize:i?.eventBatchSize,queueSize:i?.eventQueueSize,userAgentParser:i?.userAgentParser}),new t({odpIntegrationConfig:a,segmentManager:u,eventManager:c,logger:n})},t.prototype.initializeVuid=function(){return de(this,void 0,void 0,function(){var r;return pe(this,function(n){switch(n.label){case 0:return[4,nr.instance(t.cache)];case 1:return r=n.sent(),this.vuid=r.vuid,[2]}})})},t.prototype.identifyUser=function(r,n){if(r&&nr.isVuid(r)){e.prototype.identifyUser.call(this,void 0,r);return}if(r&&n&&nr.isVuid(n)){e.prototype.identifyUser.call(this,r,n);return}e.prototype.identifyUser.call(this,r,n||this.vuid)},t.prototype.sendEvent=function(r){var n=r.type,i=r.action,a=r.identifiers,o=r.data,s=new Map(a);if(!a.has(Ue.VUID))if(this.vuid)s.set(Ue.VUID,this.vuid);else throw new Error(M.ODP_SEND_EVENT_FAILED_VUID_MISSING);e.prototype.sendEvent.call(this,{type:n,action:i,identifiers:s,data:o})},t.prototype.isVuidEnabled=function(){return!0},t.prototype.getVuid=function(){return this.vuid},t.cache=new Xl,t})(ec);function ta(e,t,r){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:e,userContext:t,reasons:r}}var ra=(function(){function e(t){var r=t.optimizely,n=t.userId,i=t.attributes,a=t.shouldIdentifyUser,o=a===void 0?!0:a,s=this,l;this._qualifiedSegments=null,this.optimizely=r,this.userId=n,this.attributes=(l=we({},i))!==null&&l!==void 0?l:{},this.forcedDecisionsMap={},o&&r.readyPromise.then(function(f){var u=f.success;u&&r.isOdpIntegrated()&&s.identifyUser()})}return e.prototype.identifyUser=function(){this.optimizely.identifyUser(this.userId)},e.prototype.setAttribute=function(t,r){this.attributes[t]=r},e.prototype.getUserId=function(){return this.userId},e.prototype.getAttributes=function(){return we({},this.attributes)},e.prototype.getOptimizely=function(){return this.optimizely},Object.defineProperty(e.prototype,"qualifiedSegments",{get:function(){return this._qualifiedSegments},set:function(t){this._qualifiedSegments=t},enumerable:!1,configurable:!0}),e.prototype.decide=function(t,r){return r===void 0&&(r=[]),this.optimizely.decide(this.cloneUserContext(),t,r)},e.prototype.decideForKeys=function(t,r){return r===void 0&&(r=[]),this.optimizely.decideForKeys(this.cloneUserContext(),t,r)},e.prototype.decideAll=function(t){return t===void 0&&(t=[]),this.optimizely.decideAll(this.cloneUserContext(),t)},e.prototype.trackEvent=function(t,r){this.optimizely.track(t,this.userId,this.attributes,r)},e.prototype.setForcedDecision=function(t,r){var n,i=t.flagKey,a=(n=t.ruleKey)!==null&&n!==void 0?n:ze.FORCED_DECISION_NULL_RULE_KEY,o=r.variationKey,s={variationKey:o};return this.forcedDecisionsMap[i]||(this.forcedDecisionsMap[i]={}),this.forcedDecisionsMap[i][a]=s,!0},e.prototype.getForcedDecision=function(t){return this.findForcedDecision(t)},e.prototype.removeForcedDecision=function(t){var r,n=(r=t.ruleKey)!==null&&r!==void 0?r:ze.FORCED_DECISION_NULL_RULE_KEY,i=t.flagKey,a=!1;if(this.forcedDecisionsMap.hasOwnProperty(i)){var o=this.forcedDecisionsMap[i];o.hasOwnProperty(n)&&(delete this.forcedDecisionsMap[i][n],a=!0),Object.keys(this.forcedDecisionsMap[i]).length===0&&delete this.forcedDecisionsMap[i]}return a},e.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},e.prototype.findForcedDecision=function(t){var r,n,i=(r=t.ruleKey)!==null&&r!==void 0?r:ze.FORCED_DECISION_NULL_RULE_KEY,a=t.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(t.flagKey)){var o=this.forcedDecisionsMap[a];if(o.hasOwnProperty(i))return n=o[i].variationKey,{variationKey:n}}return null},e.prototype.cloneUserContext=function(){var t=new e({shouldIdentifyUser:!1,optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(t.forcedDecisionsMap=we({},this.forcedDecisionsMap)),t._qualifiedSegments=this._qualifiedSegments,t},e.prototype.fetchQualifiedSegments=function(t){return de(this,void 0,void 0,function(){var r;return pe(this,function(n){switch(n.label){case 0:return[4,this.optimizely.fetchQualifiedSegments(this.userId,t)];case 1:return r=n.sent(),this.qualifiedSegments=r,[2,r!==null]}})})},e.prototype.isQualifiedFor=function(t){return this._qualifiedSegments?this._qualifiedSegments.indexOf(t)>-1:!1},e})(),To="and",No="or",So="not",Do=[To,No,So];function sr(e,t){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch(typeof r=="string"&&Do.indexOf(r)===-1&&(r=No,n=e),r){case To:return mc(n,t);case So:return yc(n,t);default:return Ic(n,t)}}var i=e;return t(i)}function mc(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=sr(e[n],t);if(i===!1)return!1;i===null&&(r=!0)}return r?null:!0}return null}function yc(e,t){if(Array.isArray(e)&&e.length>0){var r=sr(e[0],t);return r===null?null:!r}return null}function Ic(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=sr(e[n],t);if(i===!0)return!0;i===null&&(r=!0)}return r?null:!1}return null}var bc=(function(){function e(t,r,n){var i,a;this.sdkKey=(i=t.sdkKey)!==null&&i!==void 0?i:"",this.environmentKey=(a=t.environmentKey)!==null&&a!==void 0?a:"",this.attributes=t.attributes,this.audiences=e.getAudiences(t),this.events=t.events,this.revision=t.revision;var o=(t.featureFlags||[]).reduce(function(v,c){return v[c.id]=c.variables,v},{}),s=e.getVariableIdMap(t),l=e.getExperimentsMap(t,o,s,n),f=l.experimentsMapById,u=l.experimentsMapByKey;this.experimentsMap=u,this.featuresMap=e.getFeaturesMap(t,o,f,s),this.datafile=r}return e.prototype.getDatafile=function(){return this.datafile},e.getAudiences=function(t){var r=[],n=[];return(t.typedAudiences||[]).forEach(function(i){r.push({id:i.id,conditions:JSON.stringify(i.conditions),name:i.name}),n.push(i.id)}),(t.audiences||[]).forEach(function(i){n.indexOf(i.id)===-1&&i.id!="$opt_dummy_audience"&&r.push({id:i.id,conditions:JSON.stringify(i.conditions),name:i.name})}),r},e.getSerializedAudiences=function(t,r){var n="";if(t){var i="";t.forEach(function(a){var o="";if(a instanceof Array)o=e.getSerializedAudiences(a,r),o="(".concat(o,")");else if(Do.indexOf(a)>-1)i=a.toUpperCase();else{var s=r[a]?r[a].name:a;n||i==="NOT"?(i=i===""?"OR":i,n===""?n="".concat(i,' "').concat(r[a].name,'"'):n=n.concat(" ".concat(i,' "').concat(s,'"'))):n='"'.concat(s,'"')}o!==""&&(n!==""||i==="NOT"?(i=i===""?"OR":i,n===""?n="".concat(i," ").concat(o):n=n.concat(" ".concat(i," ").concat(o))):n=n.concat(o))})}return n},e.getExperimentAudiences=function(t,r){return t.audienceConditions?e.getSerializedAudiences(t.audienceConditions,r.audiencesById):""},e.mergeFeatureVariables=function(t,r,n,i,a){var o=(t[n]||[]).reduce(function(s,l){return s[l.key]={id:l.id,key:l.key,type:l.type,value:l.defaultValue},s},{});return(i||[]).forEach(function(s){var l=r[s.id],f={id:s.id,key:l.key,type:l.type,value:a?s.value:l.defaultValue};o[l.key]=f}),o},e.getVariationsMap=function(t,r,n,i){var a={};return a=t.reduce(function(o,s){var l=e.mergeFeatureVariables(r,n,i,s.variables,s.featureEnabled);return o[s.key]={id:s.id,key:s.key,featureEnabled:s.featureEnabled,variablesMap:l},o},{}),a},e.getVariableIdMap=function(t){var r={};return r=(t.featureFlags||[]).reduce(function(n,i){return i.variables.forEach(function(a){n[a.id]=a}),n},{}),r},e.getDeliveryRules=function(t,r,n,i,a){return i.map(function(o){return{id:o.id,key:o.key,audiences:e.getExperimentAudiences(o,t),variationsMap:e.getVariationsMap(o.variations,r,a,n)}})},e.getRolloutExperimentIds=function(t){var r=[];return(t||[]).forEach(function(n){n.experiments.forEach(function(i){r.push(i.id)})}),r},e.getExperimentsMap=function(t,r,n,i){var a=this.getRolloutExperimentIds(t.rollouts),o={},s={},l=t.experiments||[];return l.forEach(function(f){if(a.indexOf(f.id)===-1){var u=t.experimentFeatureMap[f.id],v="";u&&u.length>0&&(v=u[0]);var c=e.getVariationsMap(f.variations,r,n,v.toString()),d={id:f.id,key:f.key,audiences:e.getExperimentAudiences(f,t),variationsMap:c};o[f.id]=d,s[f.key]&&i&&i.warn("Duplicate experiment keys found in datafile: ".concat(f.key)),s[f.key]=d}}),{experimentsMapById:o,experimentsMapByKey:s}},e.getExperimentsKeyMap=function(t){var r={};for(var n in t){var i=t[n];r[i.key]=i}return r},e.getFeaturesMap=function(t,r,n,i){var a={};return t.featureFlags.forEach(function(o){var s={},l=[];o.experimentIds.forEach(function(c){var d=n[c];d&&(s[d.key]=d),l.push(n[c])});var f=(o.variables||[]).reduce(function(c,d){return c[d.key]={id:d.id,key:d.key,type:d.type,value:d.defaultValue},c},{}),u=[],v=t.rolloutIdMap[o.rolloutId];v&&(u=e.getDeliveryRules(t,r,o.id,v.experiments,i)),a[o.key]={id:o.id,key:o.key,experimentRules:l,deliveryRules:u,experimentsMap:s,variablesMap:f}}),a},e})();function Oc(e,t,r){return new bc(e,t,r)}var Xt=ve(),Rc="PROJECT_CONFIG_MANAGER";function Ct(e,t){return e instanceof Error?e.message:t||"Unknown error"}var Ac=(function(){function e(t){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=t.jsonSchemaValidator,!t.datafile&&!t.sdkKey){var r=new Error(J(M.DATAFILE_AND_SDK_KEY_MISSING,Rc));this.readyPromise=Promise.resolve({success:!1,reason:Ct(r)}),Xt.error(r);return}var n=null;t.datafile&&(n=this.handleNewDatafile(t.datafile)),t.sdkKey&&t.datafileManager?(this.datafileManager=t.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:Ct(n,"Invalid datafile")})}catch(i){Xt.error(i),this.readyPromise=Promise.resolve({success:!1,reason:Ct(i,"Error in initialize")})}}return e.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var t=this.handleNewDatafile(this.datafileManager.get());return t?{success:!1,reason:Ct(t)}:{success:!0}}return{success:!1,reason:Ct(null,"Datafile manager is not provided")}},e.prototype.onDatafileManagerReadyReject=function(t){return{success:!1,reason:Ct(t,"Failed to become ready")}},e.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},e.prototype.handleNewDatafile=function(t){var r=this,n=bo({datafile:t,jsonSchemaValidator:this.jsonSchemaValidator,logger:Xt}),i=n.configObj,a=n.error;if(a)Xt.error(a);else{var o=this.configObj?this.configObj.revision:"null";i&&o!==i.revision&&(this.configObj=i,this.optimizelyConfigObj=null,Ao(function(){r.updateListeners.forEach(function(s){return s(i)})}))}return a},e.prototype.getConfig=function(){return this.configObj},e.prototype.getOptimizelyConfig=function(){return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=Oc(this.configObj,Io(this.configObj),Xt)),this.optimizelyConfigObj},e.prototype.onReady=function(){return this.readyPromise},e.prototype.onUpdate=function(t){var r=this;return this.updateListeners.push(t),function(){var n=r.updateListeners.indexOf(t);n>-1&&r.updateListeners.splice(n,1)}},e.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},e})();function Tc(e){return new Ac(e)}var Nc=1,Sc=Math.pow(2,32),Dc=1e4,Se="BUCKETER",wc="random",na=function(e){var t=[],r=e.experimentIdMap[e.experimentId],n=r.groupId;if(n){var i=e.groupIdMap[n];if(!i)throw new Error(J(M.INVALID_GROUP_ID,Se,n));if(i.policy===wc){var a=Lc(i,e.bucketingId,e.userId,e.logger);if(a===null)return e.logger.log(A.INFO,T.USER_NOT_IN_ANY_EXPERIMENT,Se,e.userId,n),t.push([T.USER_NOT_IN_ANY_EXPERIMENT,Se,e.userId,n]),{result:null,reasons:t};if(a!==e.experimentId)return e.logger.log(A.INFO,T.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Se,e.userId,e.experimentKey,n),t.push([T.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Se,e.userId,e.experimentKey,n]),{result:null,reasons:t};e.logger.log(A.INFO,T.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Se,e.userId,e.experimentKey,n),t.push([T.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Se,e.userId,e.experimentKey,n])}}var o="".concat(e.bucketingId).concat(e.experimentId),s=Lo(o);e.logger.log(A.DEBUG,T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Se,s,e.userId),t.push([T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Se,s,e.userId]);var l=wo(s,e.trafficAllocationConfig);return l!==null&&!e.variationIdMap[l]?(l&&(e.logger.log(A.WARNING,T.INVALID_VARIATION_ID,Se),t.push([T.INVALID_VARIATION_ID,Se])),{result:null,reasons:t}):{result:l,reasons:t}},Lc=function(e,t,r,n){var i="".concat(t).concat(e.id),a=Lo(i);n.log(A.DEBUG,T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Se,a,r);var o=e.trafficAllocation,s=wo(a,o);return s},wo=function(e,t){for(var r=0;r<t.length;r++)if(e<t[r].endOfRange)return t[r].entityId;return null},Lo=function(e){try{var t=cu.v3(e,Nc),r=t/Sc;return Math.floor(r*Dc)}catch(n){throw new Error(J(M.INVALID_BUCKETING_ID,Se,e,n.message))}},hr="SEMANTIC VERSION",gr=ve();function Co(e){return/^\d+$/.test(e)}function it(e){var t=e.indexOf("-"),r=e.indexOf("+");return t<0?!1:r<0?!0:t<r}function Po(e){var t=e.indexOf("-"),r=e.indexOf("+");return r<0?!1:t<0?!0:r<t}function Cc(e){return/\s/.test(e)}function ia(e){var t=e,r="";if(Cc(e))return gr.warn(T.UNKNOWN_MATCH_TYPE,hr,e),null;if(it(e)?(t=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1)):Po(e)&&(t=e.substring(0,e.indexOf("+")),r=e.substring(e.indexOf("+")+1)),typeof t!="string"||typeof r!="string")return null;var n=t.split(".").length-1;if(n>2)return gr.warn(T.UNKNOWN_MATCH_TYPE,hr,e),null;var i=t.split(".");if(i.length!=n+1)return gr.warn(T.UNKNOWN_MATCH_TYPE,hr,e),null;for(var a=0,o=i;a<o.length;a++){var s=o[a];if(!Co(s))return gr.warn(T.UNKNOWN_MATCH_TYPE,hr,e),null}return r&&i.push(r),i}function Pc(e,t){var r=ia(t),n=ia(e);if(!r||!n)return null;for(var i=r.length,a=0;a<n.length;a++){if(i<=a)return it(e)||Po(e)?1:-1;if(Co(r[a])){var o=parseInt(r[a]),s=parseInt(n[a]);if(o>s)return 1;if(o<s)return-1}else{if(r[a]<n[a])return it(e)&&!it(t)?1:-1;if(r[a]>n[a])return!it(e)&&it(t)?-1:1}}return it(t)&&!it(e)?-1:0}var ye="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",Ie=ve(),Uo="exact",di="exists",Mo="ge",xo="gt",Vo="le",ko="lt",Fo="semver_eq",Bo="semver_ge",Go="semver_gt",Ho="semver_le",jo="semver_lt",Ko="substring",Uc=[Uo,di,xo,Mo,ko,Vo,Ko,Fo,jo,Ho,Go,Bo],Le={};Le[Uo]=Gn;Le[di]=xc;Le[xo]=Vc;Le[Mo]=kc;Le[ko]=Fc;Le[Vo]=Bc;Le[Ko]=Gc;Le[Fo]=Hc;Le[Go]=jc;Le[Bo]=qc;Le[jo]=Kc;Le[Ho]=$c;function Mc(e,t){var r=t.getAttributes(),n=e.match;if(typeof n<"u"&&Uc.indexOf(n)===-1)return Ie.warn(T.UNKNOWN_MATCH_TYPE,ye,JSON.stringify(e)),null;var i=e.name;if(!r.hasOwnProperty(i)&&n!=di)return Ie.debug(T.MISSING_ATTRIBUTE_VALUE,ye,JSON.stringify(e),i),null;var a;return n?a=Le[n]||Gn:a=Gn,a(e,t)}function aa(e){return typeof e=="string"||typeof e=="boolean"||ue.isNumber(e)}function Gn(e,t){var r=t.getAttributes(),n=e.value,i=typeof n,a=e.name,o=r[a],s=typeof o;return!aa(n)||ue.isNumber(n)&&!ue.isSafeInteger(n)?(Ie.warn(T.UNEXPECTED_CONDITION_VALUE,ye,JSON.stringify(e)),null):o===null?(Ie.debug(T.UNEXPECTED_TYPE_NULL,ye,JSON.stringify(e),a),null):!aa(o)||i!==s?(Ie.warn(T.UNEXPECTED_TYPE,ye,JSON.stringify(e),s,a),null):ue.isNumber(o)&&!ue.isSafeInteger(o)?(Ie.warn(T.OUT_OF_BOUNDS,ye,JSON.stringify(e),a),null):n===o}function xc(e,t){var r=t.getAttributes(),n=r[e.name];return typeof n<"u"&&n!==null}function jr(e,t){var r=t.getAttributes(),n=e.name,i=r[n],a=typeof i,o=e.value;return o===null||!ue.isSafeInteger(o)?(Ie.warn(T.UNEXPECTED_CONDITION_VALUE,ye,JSON.stringify(e)),!1):i===null?(Ie.debug(T.UNEXPECTED_TYPE_NULL,ye,JSON.stringify(e),n),!1):ue.isNumber(i)?ue.isSafeInteger(i)?!0:(Ie.warn(T.OUT_OF_BOUNDS,ye,JSON.stringify(e),n),!1):(Ie.warn(T.UNEXPECTED_TYPE,ye,JSON.stringify(e),a,n),!1)}function Vc(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!jr(e,t)||i===null?null:n>i}function kc(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!jr(e,t)||i===null?null:n>=i}function Fc(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!jr(e,t)||i===null?null:n<i}function Bc(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!jr(e,t)||i===null?null:n<=i}function Gc(e,t){var r=t.getAttributes(),n=e.name,i=r[e.name],a=typeof i,o=e.value;return typeof o!="string"?(Ie.warn(T.UNEXPECTED_CONDITION_VALUE,ye,JSON.stringify(e)),null):i===null?(Ie.debug(T.UNEXPECTED_TYPE_NULL,ye,JSON.stringify(e),n),null):typeof i!="string"?(Ie.warn(T.UNEXPECTED_TYPE,ye,JSON.stringify(e),a,n),null):i.indexOf(o)!==-1}function lr(e,t){var r=t.getAttributes(),n=e.name,i=r[n],a=typeof i,o=e.value;return typeof o!="string"?(Ie.warn(T.UNEXPECTED_CONDITION_VALUE,ye,JSON.stringify(e)),null):i===null?(Ie.debug(T.UNEXPECTED_TYPE_NULL,ye,JSON.stringify(e),n),null):typeof i!="string"?(Ie.warn(T.UNEXPECTED_TYPE,ye,JSON.stringify(e),a,n),null):Pc(o,i)}function Hc(e,t){var r=lr(e,t);return r===null?null:r===0}function jc(e,t){var r=lr(e,t);return r===null?null:r>0}function Kc(e,t){var r=lr(e,t);return r===null?null:r<0}function qc(e,t){var r=lr(e,t);return r===null?null:r>=0}function $c(e,t){var r=lr(e,t);return r===null?null:r<=0}var zc=Object.freeze({__proto__:null,evaluate:Mc}),Yc="ODP_SEGMENT_CONDITION_EVALUATOR",Wc=ve(),qo="qualified",Xc=[qo],$o={};$o[qo]=Hn;function Jc(e,t){var r=e.match;if(typeof r<"u"&&Xc.indexOf(r)===-1)return Wc.warn(T.UNKNOWN_MATCH_TYPE,Yc,JSON.stringify(e)),null;var n;return r?n=$o[r]||Hn:n=Hn,n(e,t)}function Hn(e,t){return t.isQualifiedFor(e.value)}var Qc=Object.freeze({__proto__:null,evaluate:Jc}),Er=ve(),_r="AUDIENCE_EVALUATOR",Zc=(function(){function e(t){this.typeToEvaluatorMap=ue.assign({},t,{custom_attribute:zc,third_party_dimension:Qc})}return e.prototype.evaluate=function(t,r,n){var i=this;if(!t||t.length===0)return!0;var a=function(o){var s=r[o];if(s){Er.log(A.DEBUG,T.EVALUATING_AUDIENCE,_r,o,JSON.stringify(s.conditions));var l=sr(s.conditions,i.evaluateConditionWithUserAttributes.bind(i,n)),f=l===null?"UNKNOWN":l.toString().toUpperCase();return Er.log(A.DEBUG,T.AUDIENCE_EVALUATION_RESULT,_r,o,f),l}return null};return!!sr(t,a)},e.prototype.evaluateConditionWithUserAttributes=function(t,r){var n=this.typeToEvaluatorMap[r.type];if(!n)return Er.log(A.WARNING,T.UNKNOWN_CONDITION_TYPE,_r,JSON.stringify(r)),null;try{return n.evaluate(r,t)}catch(i){Er.log(A.ERROR,M.CONDITION_EVALUATOR_ERROR,_r,r.type,i.message)}return null},e})(),ef=function(e){return new Zc(e)};function zo(e){return typeof e=="string"&&e!==""}var H="DECISION_SERVICE",tf=(function(){function e(t){this.audienceEvaluator=ef(t.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=t.logger,this.userProfileService=t.userProfileService||null}return e.prototype.getVariation=function(t,r,n,i){i===void 0&&(i={});var a=n.getUserId(),o=n.getAttributes(),s=this.getBucketingId(a,o),l=[],f=r.key;if(!this.checkIfExperimentIsActive(t,f))return this.logger.log(A.INFO,T.EXPERIMENT_NOT_RUNNING,H,f),l.push([T.EXPERIMENT_NOT_RUNNING,H,f]),{result:null,reasons:l};var u=this.getForcedVariation(t,f,a);l.push.apply(l,u.reasons);var v=u.result;if(v)return{result:v,reasons:l};var c=this.getWhitelistedVariation(r,a);l.push.apply(l,c.reasons);var d=c.result;if(d)return{result:d.key,reasons:l};var h=i[Ke.IGNORE_USER_PROFILE_SERVICE],p=this.resolveExperimentBucketMap(a,o);if(!h&&(d=this.getStoredVariation(t,r,a,p),d))return this.logger.log(A.INFO,T.RETURNING_STORED_VARIATION,H,d.key,f,a),l.push([T.RETURNING_STORED_VARIATION,H,d.key,f,a]),{result:d.key,reasons:l};var g=this.checkIfUserIsInAudience(t,r,xn.EXPERIMENT,n,"");if(l.push.apply(l,g.reasons),!g.result)return this.logger.log(A.INFO,T.USER_NOT_IN_EXPERIMENT,H,a,f),l.push([T.USER_NOT_IN_EXPERIMENT,H,a,f]),{result:null,reasons:l};var m=this.buildBucketerParams(t,r,s,a),b=na(m);l.push.apply(l,b.reasons);var O=b.result;return O&&(d=t.variationIdMap[O]),d?(this.logger.log(A.INFO,T.USER_HAS_VARIATION,H,a,d.key,f),l.push([T.USER_HAS_VARIATION,H,a,d.key,f]),h||this.saveUserProfile(r,d,a,p),{result:d.key,reasons:l}):(this.logger.log(A.DEBUG,T.USER_HAS_NO_VARIATION,H,a,f),l.push([T.USER_HAS_NO_VARIATION,H,a,f]),{result:null,reasons:l})},e.prototype.resolveExperimentBucketMap=function(t,r){r=r||{};var n=this.getUserProfile(t)||{},i=r[ze.STICKY_BUCKETING_KEY];return ue.assign({},n.experiment_bucket_map,i)},e.prototype.checkIfExperimentIsActive=function(t,r){return xl(t,r)},e.prototype.getWhitelistedVariation=function(t,r){var n=[];if(t.forcedVariations&&t.forcedVariations.hasOwnProperty(r)){var i=t.forcedVariations[r];return t.variationKeyMap.hasOwnProperty(i)?(this.logger.log(A.INFO,T.USER_FORCED_IN_VARIATION,H,r,i),n.push([T.USER_FORCED_IN_VARIATION,H,r,i]),{result:t.variationKeyMap[i],reasons:n}):(this.logger.log(A.ERROR,T.FORCED_BUCKETING_FAILED,H,i,r),n.push([T.FORCED_BUCKETING_FAILED,H,i,r]),{result:null,reasons:n})}return{result:null,reasons:n}},e.prototype.checkIfUserIsInAudience=function(t,r,n,i,a){var o=[],s=kl(t,r.id),l=$l(t);this.logger.log(A.DEBUG,T.EVALUATING_AUDIENCES_COMBINED,H,n,a||r.key,JSON.stringify(s)),o.push([T.EVALUATING_AUDIENCES_COMBINED,H,n,a||r.key,JSON.stringify(s)]);var f=this.audienceEvaluator.evaluate(s,l,i);return this.logger.log(A.INFO,T.AUDIENCE_EVALUATION_RESULT_COMBINED,H,n,a||r.key,f.toString().toUpperCase()),o.push([T.AUDIENCE_EVALUATION_RESULT_COMBINED,H,n,a||r.key,f.toString().toUpperCase()]),{result:f,reasons:o}},e.prototype.buildBucketerParams=function(t,r,n,i){return{bucketingId:n,experimentId:r.id,experimentKey:r.key,experimentIdMap:t.experimentIdMap,experimentKeyMap:t.experimentKeyMap,groupIdMap:t.groupIdMap,logger:this.logger,trafficAllocationConfig:Gl(t,r.id),userId:i,variationIdMap:t.variationIdMap}},e.prototype.getStoredVariation=function(t,r,n,i){if(i.hasOwnProperty(r.id)){var a=i[r.id],o=a.variation_id;if(t.variationIdMap.hasOwnProperty(o))return t.variationIdMap[a.variation_id];this.logger.log(A.INFO,T.SAVED_VARIATION_NOT_FOUND,H,n,o,r.key)}return null},e.prototype.getUserProfile=function(t){var r={user_id:t,experiment_bucket_map:{}};if(!this.userProfileService)return r;try{return this.userProfileService.lookup(t)}catch(n){this.logger.log(A.ERROR,M.USER_PROFILE_LOOKUP_ERROR,H,t,n.message)}return null},e.prototype.saveUserProfile=function(t,r,n,i){if(this.userProfileService)try{i[t.id]={variation_id:r.id},this.userProfileService.save({user_id:n,experiment_bucket_map:i}),this.logger.log(A.INFO,T.SAVED_VARIATION,H,r.key,t.key,n)}catch(a){this.logger.log(A.ERROR,M.USER_PROFILE_SAVE_ERROR,H,n,a.message)}},e.prototype.getVariationForFeature=function(t,r,n,i){i===void 0&&(i={});var a=[],o=this.getVariationForFeatureExperiment(t,r,n,i);a.push.apply(a,o.reasons);var s=o.result;if(s.variation!==null)return{result:s,reasons:a};var l=this.getVariationForRollout(t,r,n);a.push.apply(a,l.reasons);var f=l.result,u=n.getUserId();return f.variation?(this.logger.log(A.DEBUG,T.USER_IN_ROLLOUT,H,u,r.key),a.push([T.USER_IN_ROLLOUT,H,u,r.key]),{result:f,reasons:a}):(this.logger.log(A.DEBUG,T.USER_NOT_IN_ROLLOUT,H,u,r.key),a.push([T.USER_NOT_IN_ROLLOUT,H,u,r.key]),{result:f,reasons:a})},e.prototype.getVariationForFeatureExperiment=function(t,r,n,i){i===void 0&&(i={});var a=[],o=null,s,l,f;if(r.experimentIds.length>0)for(l=0;l<r.experimentIds.length;l++){var u=Hl(t,r.experimentIds[l],this.logger);if(u&&(s=this.getVariationFromExperimentRule(t,r.key,u,n,i),a.push.apply(a,s.reasons),o=s.result,o)){var v=null;return v=u.variationKeyMap[o],v||(v=Yi(t,r.key,o)),f={experiment:u,variation:v,decisionSource:Ee.FEATURE_TEST},{result:f,reasons:a}}}else this.logger.log(A.DEBUG,T.FEATURE_HAS_NO_EXPERIMENTS,H,r.key),a.push([T.FEATURE_HAS_NO_EXPERIMENTS,H,r.key]);return f={experiment:null,variation:null,decisionSource:Ee.FEATURE_TEST},{result:f,reasons:a}},e.prototype.getVariationForRollout=function(t,r,n){var i=[],a;if(!r.rolloutId)return this.logger.log(A.DEBUG,T.NO_ROLLOUT_EXISTS,H,r.key),i.push([T.NO_ROLLOUT_EXISTS,H,r.key]),a={experiment:null,variation:null,decisionSource:Ee.ROLLOUT},{result:a,reasons:i};var o=t.rolloutIdMap[r.rolloutId];if(!o)return this.logger.log(A.ERROR,M.INVALID_ROLLOUT_ID,H,r.rolloutId,r.key),i.push([M.INVALID_ROLLOUT_ID,H,r.rolloutId,r.key]),a={experiment:null,variation:null,decisionSource:Ee.ROLLOUT},{result:a,reasons:i};var s=o.experiments;if(s.length===0)return this.logger.log(A.ERROR,T.ROLLOUT_HAS_NO_EXPERIMENTS,H,r.rolloutId),i.push([T.ROLLOUT_HAS_NO_EXPERIMENTS,H,r.rolloutId]),a={experiment:null,variation:null,decisionSource:Ee.ROLLOUT},{result:a,reasons:i};for(var l,f,u,v,c=0;c<s.length;){if(l=this.getVariationFromDeliveryRule(t,r.key,s,c,n),i.push.apply(i,l.reasons),u=l.result,f=l.skipToEveryoneElse,u)return v=t.experimentIdMap[s[c].id],a={experiment:v,variation:u,decisionSource:Ee.ROLLOUT},{result:a,reasons:i};c=f?s.length-1:c+1}return a={experiment:null,variation:null,decisionSource:Ee.ROLLOUT},{result:a,reasons:i}},e.prototype.getBucketingId=function(t,r){var n=t;return r!=null&&typeof r=="object"&&r.hasOwnProperty(ze.BUCKETING_ID)&&(typeof r[ze.BUCKETING_ID]=="string"?(n=String(r[ze.BUCKETING_ID]),this.logger.log(A.DEBUG,T.VALID_BUCKETING_ID,H,n)):this.logger.log(A.WARNING,T.BUCKETING_ID_NOT_STRING,H)),n},e.prototype.findValidatedForcedDecision=function(t,r,n,i){var a=[],o=r.getForcedDecision({flagKey:n,ruleKey:i}),s=null,l,f=r.getUserId();return t&&o&&(l=o.variationKey,s=Yi(t,n,l),s?i?(this.logger.log(A.INFO,T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,l,n,i,f),a.push([T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,l,n,i,f])):(this.logger.log(A.INFO,T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,l,n,f),a.push([T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,l,n,f])):i?(this.logger.log(A.INFO,T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,i,f),a.push([T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,i,f])):(this.logger.log(A.INFO,T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,f),a.push([T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,f]))),{result:s,reasons:a}},e.prototype.removeForcedVariation=function(t,r,n){if(!t)throw new Error(J(M.INVALID_USER_ID,H));if(this.forcedVariationMap.hasOwnProperty(t))delete this.forcedVariationMap[t][r],this.logger.log(A.DEBUG,T.VARIATION_REMOVED_FOR_USER,H,n,t);else throw new Error(J(M.USER_NOT_IN_FORCED_VARIATION,H,t))},e.prototype.setInForcedVariationMap=function(t,r,n){this.forcedVariationMap.hasOwnProperty(t)?this.forcedVariationMap[t][r]=n:(this.forcedVariationMap[t]={},this.forcedVariationMap[t][r]=n),this.logger.log(A.DEBUG,T.USER_MAPPED_TO_FORCED_VARIATION,H,n,r,t)},e.prototype.getForcedVariation=function(t,r,n){var i=[],a=this.forcedVariationMap[n];if(!a)return this.logger.log(A.DEBUG,T.USER_HAS_NO_FORCED_VARIATION,H,n),{result:null,reasons:i};var o;try{var s=Bn(t,r);if(s.hasOwnProperty("id"))o=s.id;else return this.logger.log(A.ERROR,M.IMPROPERLY_FORMATTED_EXPERIMENT,H,r),i.push([M.IMPROPERLY_FORMATTED_EXPERIMENT,H,r]),{result:null,reasons:i}}catch(u){return this.logger.log(A.ERROR,u.message),i.push(u.message),{result:null,reasons:i}}var l=a[o];if(!l)return this.logger.log(A.DEBUG,T.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,H,r,n),{result:null,reasons:i};var f=yo(t,l);return f?(this.logger.log(A.DEBUG,T.USER_HAS_FORCED_VARIATION,H,f,r,n),i.push([T.USER_HAS_FORCED_VARIATION,H,f,r,n])):this.logger.log(A.DEBUG,T.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,H,r,n),{result:f,reasons:i}},e.prototype.setForcedVariation=function(t,r,n,i){if(i!=null&&!zo(i))return this.logger.log(A.ERROR,M.INVALID_VARIATION_KEY,H),!1;var a;try{var o=Bn(t,r);if(o.hasOwnProperty("id"))a=o.id;else return this.logger.log(A.ERROR,M.IMPROPERLY_FORMATTED_EXPERIMENT,H,r),!1}catch(l){return this.logger.log(A.ERROR,l.message),!1}if(i==null)try{return this.removeForcedVariation(n,a,r),!0}catch(l){return this.logger.log(A.ERROR,l.message),!1}var s=Bl(t,r,i);if(!s)return this.logger.log(A.ERROR,M.NO_VARIATION_FOR_EXPERIMENT_KEY,H,i,r),!1;try{return this.setInForcedVariationMap(n,a,s),!0}catch(l){return this.logger.log(A.ERROR,l.message),!1}},e.prototype.getVariationFromExperimentRule=function(t,r,n,i,a){a===void 0&&(a={});var o=[],s=this.findValidatedForcedDecision(t,i,r,n.key);o.push.apply(o,s.reasons);var l=s.result;if(l)return{result:l.key,reasons:o};var f=this.getVariation(t,n,i,a);o.push.apply(o,f.reasons);var u=f.result;return{result:u,reasons:o}},e.prototype.getVariationFromDeliveryRule=function(t,r,n,i,a){var o=[],s=!1,l=n[i],f=this.findValidatedForcedDecision(t,a,r,l.key);o.push.apply(o,f.reasons);var u=f.result;if(u)return{result:u,reasons:o,skipToEveryoneElse:s};var v=a.getUserId(),c=a.getAttributes(),d=this.getBucketingId(v,c),h=i===n.length-1,p=h?"Everyone Else":i+1,g=null,m,b,O,R=this.checkIfUserIsInAudience(t,l,xn.RULE,a,p);return o.push.apply(o,R.reasons),R.result?(this.logger.log(A.DEBUG,T.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,H,v,p),o.push([T.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,H,v,p]),b=this.buildBucketerParams(t,l,d,v),O=na(b),o.push.apply(o,O.reasons),m=O.result,m&&(g=Fl(t,m)),g?(this.logger.log(A.DEBUG,T.USER_BUCKETED_INTO_TARGETING_RULE,H,v,p),o.push([T.USER_BUCKETED_INTO_TARGETING_RULE,H,v,p])):h||(this.logger.log(A.DEBUG,T.USER_NOT_BUCKETED_INTO_TARGETING_RULE,H,v,p),o.push([T.USER_NOT_BUCKETED_INTO_TARGETING_RULE,H,v,p]),s=!0)):(this.logger.log(A.DEBUG,T.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,H,v,p),o.push([T.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,H,v,p])),{result:g,reasons:o,skipToEveryoneElse:s}},e})();function rf(e){return new tf(e)}var Mr="EVENT_TAG_UTILS",nf="revenue",af="value";function Yo(e,t){var r=e[nf];if(r==null)return null;var n=typeof r=="string"?parseInt(r):Math.trunc(r);return isFinite(n)?(t.log(A.INFO,T.PARSED_REVENUE_VALUE,Mr,n),n):(t.log(A.INFO,T.FAILED_TO_PARSE_REVENUE,Mr,r),null)}function Wo(e,t){var r=e[af];if(r==null)return null;var n=typeof r=="string"?parseFloat(r):r;return isFinite(n)?(t.log(A.INFO,T.PARSED_NUMERIC_VALUE,Mr,n),n):(t.log(A.INFO,T.FAILED_TO_PARSE_VALUE,Mr,r),null)}var oa="ATTRIBUTES_VALIDATOR";function of(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return Object.keys(e).forEach(function(t){if(typeof e[t]>"u")throw new Error(J(M.UNDEFINED_ATTRIBUTE,oa,t))}),!0;throw new Error(J(M.INVALID_ATTRIBUTES,oa))}function Xo(e,t){return typeof e=="string"&&(typeof t=="string"||typeof t=="boolean"||ue.isNumber(t)&&ue.isSafeInteger(t))}var sf="campaign_activated",sa="custom",Jo="https://logx.optimizely.com/v1/events",Qo="POST";function Zo(e){var t=e.attributes,r=e.userId,n=e.clientEngine,i=e.clientVersion,a=e.configObj,o=e.logger,s=a.anonymizeIP?a.anonymizeIP:!1,l=a.botFiltering,f={snapshots:[],visitor_id:r,attributes:[]},u={account_id:a.accountId,project_id:a.projectId,visitors:[f],revision:a.revision,client_name:n,client_version:i,anonymize_ip:s,enrich_decisions:!0};return t&&Object.keys(t||{}).forEach(function(v){var c=t[v];if(Xo(v,c)){var d=Eo(a,v,o);d&&u.visitors[0].attributes.push({entity_id:d,key:v,type:sa,value:c})}}),typeof l=="boolean"&&u.visitors[0].attributes.push({entity_id:ze.BOT_FILTERING,key:ze.BOT_FILTERING,type:sa,value:l}),u}function uf(e,t,r,n,i,a,o){var s=t?go(e,t):null,l=r?yo(e,r):null;l=l||"";var f={decisions:[{campaign_id:s,experiment_id:t,variation_id:r,metadata:{flag_key:a,rule_key:n,rule_type:i,variation_key:l,enabled:o}}],events:[{entity_id:s,timestamp:ue.currentTimestamp(),key:sf,uuid:ue.uuid()}]};return f}function lf(e,t,r,n){var i={events:[]},a={entity_id:_o(e,t),timestamp:ue.currentTimestamp(),uuid:ue.uuid(),key:t};if(n){var o=Yo(n,r);o!==null&&(a.revenue=o);var s=Wo(n,r);s!==null&&(a.value=s),a.tags=n}return i.events.push(a),i}function cf(e){var t=Zo(e),r=uf(e.configObj,e.experimentId,e.variationId,e.ruleKey,e.ruleType,e.flagKey,e.enabled);t.visitors[0].snapshots.push(r);var n={httpVerb:Qo,url:Jo,params:t};return n}function ff(e){var t=Zo(e),r=lf(e.configObj,e.eventKey,e.logger,e.eventTags);t.visitors[0].snapshots=[r];var n={httpVerb:Qo,url:Jo,params:t};return n}function jn(e){var t,r;return(r=(t=e.experiment)===null||t===void 0?void 0:t.key)!==null&&r!==void 0?r:""}function Kn(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.key)!==null&&r!==void 0?r:""}function mr(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.featureEnabled)!==null&&r!==void 0?r:!1}function es(e){var t,r;return(r=(t=e.experiment)===null||t===void 0?void 0:t.id)!==null&&r!==void 0?r:null}function ts(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.id)!==null&&r!==void 0?r:null}var qn=ve("EVENT_BUILDER"),df=function(e){var t=e.configObj,r=e.decisionObj,n=e.userId,i=e.flagKey,a=e.enabled,o=e.userAttributes,s=e.clientEngine,l=e.clientVersion,f=r.decisionSource,u=jn(r),v=es(r),c=Kn(r),d=ts(r),h=v!==null?go(t,v):null;return{type:"impression",timestamp:ue.currentTimestamp(),uuid:ue.uuid(),user:{id:n,attributes:rs(t,o)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:s,clientVersion:l,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},layer:{id:h},experiment:{id:v,key:u},variation:{id:d,key:c},ruleKey:u,flagKey:i,ruleType:f,enabled:a}},pf=function(e){var t=e.configObj,r=e.userId,n=e.userAttributes,i=e.clientEngine,a=e.clientVersion,o=e.eventKey,s=e.eventTags,l=_o(t,o),f=s?Yo(s,qn):null,u=s?Wo(s,qn):null;return{type:"conversion",timestamp:ue.currentTimestamp(),uuid:ue.uuid(),user:{id:r,attributes:rs(t,n)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:i,clientVersion:a,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},event:{id:l,key:o},revenue:f,value:u,tags:s}};function rs(e,t){var r=[];return t&&Object.keys(t||{}).forEach(function(n){var i=t[n];if(Xo(n,i)){var a=Eo(e,n,qn);a&&r.push({entityId:a,key:n,value:i})}}),r}var vf="EVENT_TAGS_VALIDATOR";function hf(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return!0;throw new Error(J(M.INVALID_EVENT_TAGS,vf))}var on="USER_PROFILE_SERVICE_VALIDATOR";function gf(e){if(typeof e=="object"&&e!==null){if(typeof e.lookup!="function")throw new Error(J(M.INVALID_USER_PROFILE_SERVICE,on,"Missing function 'lookup'"));if(typeof e.save!="function")throw new Error(J(M.INVALID_USER_PROFILE_SERVICE,on,"Missing function 'save'"));return!0}throw new Error(J(M.INVALID_USER_PROFILE_SERVICE,on))}var K="OPTIMIZELY",Ef=3e4,_f=(function(){function e(t){var r=this,n,i=t.clientEngine;i||(t.logger.log(A.INFO,T.INVALID_CLIENT_ENGINE,K,i),i=Za),this.clientEngine=i,this.clientVersion=t.clientVersion||ci,this.errorHandler=t.errorHandler,this.isOptimizelyConfigValid=t.isValidInstance,this.logger=t.logger,this.odpManager=t.odpManager;var a=(n=t.defaultDecideOptions)!==null&&n!==void 0?n:[];Array.isArray(a)||(this.logger.log(A.DEBUG,T.INVALID_DEFAULT_DECIDE_OPTIONS,K),a=[]);var o={};a.forEach(function(u){Ke[u]?o[u]=!0:r.logger.log(A.WARNING,T.UNRECOGNIZED_DECIDE_OPTION,K,u)}),this.defaultDecideOptions=o,this.projectConfigManager=Tc({datafile:t.datafile,jsonSchemaValidator:t.jsonSchemaValidator,sdkKey:t.sdkKey,datafileManager:t.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate(function(u){r.logger.log(A.INFO,T.UPDATED_OPTIMIZELY_CONFIG,K,u.revision,u.projectId),r.notificationCenter.sendNotifications(me.OPTIMIZELY_CONFIG_UPDATE),r.updateOdpSettings()});var s=this.projectConfigManager.onReady(),l=null;if(t.userProfileService)try{gf(t.userProfileService)&&(l=t.userProfileService,this.logger.log(A.INFO,T.VALID_USER_PROFILE_SERVICE,K))}catch(u){this.logger.log(A.WARNING,u.message)}this.decisionService=rf({userProfileService:l,logger:this.logger,UNSTABLE_conditionEvaluators:t.UNSTABLE_conditionEvaluators}),this.notificationCenter=t.notificationCenter,this.eventProcessor=t.eventProcessor;var f=this.eventProcessor.start();this.readyPromise=Promise.all([s,f,t.odpManager?t.odpManager.onReady():Promise.resolve()]).then(function(u){return u[0]}),this.readyTimeouts={},this.nextReadyTimeoutId=0}return e.prototype.getProjectConfig=function(){return this.projectConfigManager.getConfig()},e.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},e.prototype.activate=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"activate"),null;if(!this.validateInputs({experiment_key:t,user_id:r},n))return this.notActivatingExperiment(t,r);var i=this.projectConfigManager.getConfig();if(!i)return null;try{var a=this.getVariation(t,r,n);if(a===null)return this.notActivatingExperiment(t,r);if(!Vl(i,t))return this.logger.log(A.DEBUG,T.SHOULD_NOT_DISPATCH_ACTIVATE,K,t),a;var o=Bn(i,t),s=o.variationKeyMap[a],l={experiment:o,variation:s,decisionSource:Ee.EXPERIMENT};return this.sendImpressionEvent(l,"",r,!0,n),a}catch(f){return this.logger.log(A.ERROR,f.message),this.logger.log(A.INFO,T.NOT_ACTIVATING_USER,K,r,t),this.errorHandler.handleError(f),null}}catch(f){return this.logger.log(A.ERROR,f.message),this.errorHandler.handleError(f),null}},e.prototype.sendImpressionEvent=function(t,r,n,i,a){var o=this.projectConfigManager.getConfig();if(o){var s=df({decisionObj:t,flagKey:r,enabled:i,userId:n,userAttributes:a,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o});this.eventProcessor.process(s),this.emitNotificationCenterActivate(t,r,n,i,a)}},e.prototype.emitNotificationCenterActivate=function(t,r,n,i,a){var o=this.projectConfigManager.getConfig();if(o){var s=t.decisionSource,l=jn(t),f=es(t),u=Kn(t),v=ts(t),c;f!==null&&u!==""&&(c=o.experimentIdMap[f]);var d={attributes:a,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,experimentId:f,ruleKey:l,flagKey:r,ruleType:s,userId:n,enabled:i,variationId:v,logger:this.logger},h=cf(d),p;c&&c.variationKeyMap&&u!==""&&(p=c.variationKeyMap[u]),this.notificationCenter.sendNotifications(me.ACTIVATE,{experiment:c,userId:n,attributes:a,variation:p,logEvent:h})}},e.prototype.track=function(t,r,n,i){try{if(!this.isValidInstance()){this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"track");return}if(!this.validateInputs({user_id:r,event_key:t},n,i))return;var a=this.projectConfigManager.getConfig();if(!a)return;if(!zl(a,t)){this.logger.log(A.WARNING,T.EVENT_KEY_NOT_FOUND,K,t),this.logger.log(A.WARNING,T.NOT_TRACKING_USER,K,r);return}i=this.filterEmptyValues(i);var o=pf({eventKey:t,eventTags:i,userId:r,userAttributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:a});this.logger.log(A.INFO,T.TRACK_EVENT,K,t,r),this.eventProcessor.process(o),this.emitNotificationCenterTrack(t,r,n,i)}catch(s){this.logger.log(A.ERROR,s.message),this.errorHandler.handleError(s),this.logger.log(A.ERROR,T.NOT_TRACKING_USER,K,r)}},e.prototype.emitNotificationCenterTrack=function(t,r,n,i){try{var a=this.projectConfigManager.getConfig();if(!a)return;var o={attributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:a,eventKey:t,eventTags:i,logger:this.logger,userId:r},s=ff(o);this.notificationCenter.sendNotifications(me.TRACK,{eventKey:t,userId:r,attributes:n,eventTags:i,logEvent:s})}catch(l){this.logger.log(A.ERROR,l.message),this.errorHandler.handleError(l)}},e.prototype.getVariation=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getVariation"),null;try{if(!this.validateInputs({experiment_key:t,user_id:r},n))return null;var i=this.projectConfigManager.getConfig();if(!i)return null;var a=i.experimentKeyMap[t];if(!a||a.isRollout)return this.logger.log(A.DEBUG,M.INVALID_EXPERIMENT_KEY,K,t),null;var o=this.decisionService.getVariation(i,a,this.createInternalUserContext(r,n)).result,s=Yl(i,a.id)?gt.FEATURE_TEST:gt.AB_TEST;return this.notificationCenter.sendNotifications(me.DECISION,{type:s,userId:r,attributes:n||{},decisionInfo:{experimentKey:t,variationKey:o}}),o}catch(l){return this.logger.log(A.ERROR,l.message),this.errorHandler.handleError(l),null}}catch(l){return this.logger.log(A.ERROR,l.message),this.errorHandler.handleError(l),null}},e.prototype.setForcedVariation=function(t,r,n){if(!this.validateInputs({experiment_key:t,user_id:r}))return!1;var i=this.projectConfigManager.getConfig();if(!i)return!1;try{return this.decisionService.setForcedVariation(i,t,r,n)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),!1}},e.prototype.getForcedVariation=function(t,r){if(!this.validateInputs({experiment_key:t,user_id:r}))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;try{return this.decisionService.getForcedVariation(n,t,r).result}catch(i){return this.logger.log(A.ERROR,i.message),this.errorHandler.handleError(i),null}},e.prototype.validateInputs=function(t,r,n){try{if(t.hasOwnProperty("user_id")){var i=t.user_id;if(typeof i!="string"||i===null||i==="undefined")throw new Error(J(M.INVALID_INPUT_FORMAT,K,"user_id"));delete t.user_id}return Object.keys(t).forEach(function(a){if(!zo(t[a]))throw new Error(J(M.INVALID_INPUT_FORMAT,K,a))}),r&&of(r),n&&hf(n),!0}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),!1}},e.prototype.notActivatingExperiment=function(t,r){return this.logger.log(A.INFO,T.NOT_ACTIVATING_USER,K,r,t),null},e.prototype.filterEmptyValues=function(t){for(var r in t)t.hasOwnProperty(r)&&(t[r]===null||t[r]===void 0)&&delete t[r];return t},e.prototype.isFeatureEnabled=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:t,user_id:r},n))return!1;var i=this.projectConfigManager.getConfig();if(!i)return!1;var a=nn(i,t,this.logger);if(!a)return!1;var o={},s=this.createInternalUserContext(r,n),l=this.decisionService.getVariationForFeature(i,a,s).result,f=l.decisionSource,u=jn(l),v=Kn(l),c=mr(l);f===Ee.FEATURE_TEST&&(o={experimentKey:u,variationKey:v}),(f===Ee.FEATURE_TEST||f===Ee.ROLLOUT&&Wi(i))&&this.sendImpressionEvent(l,a.key,r,c,n),c===!0?this.logger.log(A.INFO,T.FEATURE_ENABLED_FOR_USER,K,t,r):(this.logger.log(A.INFO,T.FEATURE_NOT_ENABLED_FOR_USER,K,t,r),c=!1);var d={featureKey:t,featureEnabled:c,source:l.decisionSource,sourceInfo:o};return this.notificationCenter.sendNotifications(me.DECISION,{type:gt.FEATURE,userId:r,attributes:n||{},decisionInfo:d}),c}catch(h){return this.logger.log(A.ERROR,h.message),this.errorHandler.handleError(h),!1}},e.prototype.getEnabledFeatures=function(t,r){var n=this;try{var i=[];if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getEnabledFeatures"),i;if(!this.validateInputs({user_id:t}))return i;var a=this.projectConfigManager.getConfig();return a&&Ye(a.featureKeyMap).forEach(function(o){n.isFeatureEnabled(o.key,t,r)&&i.push(o.key)}),i}catch(o){return this.logger.log(A.ERROR,o.message),this.errorHandler.handleError(o),[]}},e.prototype.getFeatureVariable=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,null,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariable"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getFeatureVariableForType=function(t,r,n,i,a){if(!this.validateInputs({feature_key:t,variable_key:r,user_id:i},a))return null;var o=this.projectConfigManager.getConfig();if(!o)return null;var s=nn(o,t,this.logger);if(!s)return null;var l=jl(o,t,r,this.logger);if(!l)return null;if(n&&l.type!==n)return this.logger.log(A.WARNING,T.VARIABLE_REQUESTED_WITH_WRONG_TYPE,K,n,l.type),null;var f=this.createInternalUserContext(i,a),u=this.decisionService.getVariationForFeature(o,s,f).result,v=mr(u),c=this.getFeatureVariableValueFromVariation(t,v,u.variation,l,i),d={};return u.decisionSource===Ee.FEATURE_TEST&&u.experiment!==null&&u.variation!==null&&(d={experimentKey:u.experiment.key,variationKey:u.variation.key}),this.notificationCenter.sendNotifications(me.DECISION,{type:gt.FEATURE_VARIABLE,userId:i,attributes:a||{},decisionInfo:{featureKey:t,featureEnabled:v,source:u.decisionSource,variableKey:r,variableValue:c,variableType:l.type,sourceInfo:d}}),c},e.prototype.getFeatureVariableValueFromVariation=function(t,r,n,i,a){var o=this.projectConfigManager.getConfig();if(!o)return null;var s=i.defaultValue;if(n!==null){var l=Kl(o,i,n,this.logger);l!==null?r?(s=l,this.logger.log(A.INFO,T.USER_RECEIVED_VARIABLE_VALUE,K,s,i.key,t)):this.logger.log(A.INFO,T.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,K,t,a,s):this.logger.log(A.INFO,T.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,K,i.key,n.key)}else this.logger.log(A.INFO,T.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,K,a,i.key,t);return ql(s,i.type,this.logger)},e.prototype.getFeatureVariableBoolean=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,De.BOOLEAN,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariableBoolean"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getFeatureVariableDouble=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,De.DOUBLE,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariableDouble"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getFeatureVariableInteger=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,De.INTEGER,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariableInteger"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getFeatureVariableString=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,De.STRING,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariableString"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getFeatureVariableJSON=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,De.JSON,n,i):(this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getFeatureVariableJSON"),null)}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),null}},e.prototype.getAllFeatureVariables=function(t,r,n){var i=this;try{if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:t,user_id:r},n))return null;var a=this.projectConfigManager.getConfig();if(!a)return null;var o=nn(a,t,this.logger);if(!o)return null;var s=this.createInternalUserContext(r,n),l=this.decisionService.getVariationForFeature(a,o,s).result,f=mr(l),u={};o.variables.forEach(function(c){u[c.key]=i.getFeatureVariableValueFromVariation(t,f,l.variation,c,r)});var v={};return l.decisionSource===Ee.FEATURE_TEST&&l.experiment!==null&&l.variation!==null&&(v={experimentKey:l.experiment.key,variationKey:l.variation.key}),this.notificationCenter.sendNotifications(me.DECISION,{type:gt.ALL_FEATURE_VARIABLES,userId:r,attributes:n||{},decisionInfo:{featureKey:t,featureEnabled:f,source:l.decisionSource,variableValues:u,sourceInfo:v}}),u}catch(c){return this.logger.log(A.ERROR,c.message),this.errorHandler.handleError(c),null}},e.prototype.getOptimizelyConfig=function(){try{var t=this.projectConfigManager.getConfig();return t?this.projectConfigManager.getOptimizelyConfig():null}catch(r){return this.logger.log(A.ERROR,r.message),this.errorHandler.handleError(r),null}},e.prototype.close=function(){var t=this,r;try{this.odpManager&&this.odpManager.stop(),this.notificationCenter.clearAllNotificationListeners();var n=(r=this.projectConfigManager.getConfig())===null||r===void 0?void 0:r.sdkKey;n&&po.removeNotificationCenter(n);var i=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach(function(a){var o=t.readyTimeouts[a];clearTimeout(o.readyTimeout),o.onClose()}),this.readyTimeouts={},i.then(function(){return{success:!0}},function(a){return{success:!1,reason:String(a)}})}catch(a){return this.logger.log(A.ERROR,a.message),this.errorHandler.handleError(a),Promise.resolve({success:!1,reason:String(a)})}},e.prototype.onReady=function(t){var r=this,n;typeof t=="object"&&t!==null&&t.timeout!==void 0&&(n=t.timeout),ue.isSafeInteger(n)||(n=Ef);var i,a=new Promise(function(u){i=u}),o=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var s=function(){delete r.readyTimeouts[o],i({success:!1,reason:J("onReady timeout expired after %s ms",n)})},l=setTimeout(s,n),f=function(){i({success:!1,reason:"Instance closed"})};return this.readyTimeouts[o]={readyTimeout:l,onClose:f},this.readyPromise.then(function(){clearTimeout(l),delete r.readyTimeouts[o],i({success:!0})}),Promise.race([this.readyPromise,a])},e.prototype.createUserContext=function(t,r){var n,i=t??((n=this.odpManager)===null||n===void 0?void 0:n.getVuid());return i===void 0||!this.validateInputs({user_id:i},r)?null:new ra({optimizely:this,userId:i,attributes:r,shouldIdentifyUser:!0})},e.prototype.createInternalUserContext=function(t,r){return new ra({optimizely:this,userId:t,attributes:r,shouldIdentifyUser:!1})},e.prototype.decide=function(t,r,n){var i=this,a,o,s,l;n===void 0&&(n=[]);var f=t.getUserId(),u=t.getAttributes(),v=this.projectConfigManager.getConfig(),c=[],d;if(!this.isValidInstance()||!v)return this.logger.log(A.INFO,T.INVALID_OBJECT,K,"decide"),ta(r,t,[Vn.SDK_NOT_READY]);var h=v.featureKeyMap[r];if(!h)return this.logger.log(A.ERROR,M.FEATURE_NOT_IN_DATAFILE,K,r),ta(r,t,[J(Vn.FLAG_KEY_INVALID,r)]);var p=this.getAllDecideOptions(n),g=this.decisionService.findValidatedForcedDecision(v,t,r);c.push.apply(c,g.reasons);var m=g.result;if(m)d={experiment:null,variation:m,decisionSource:Ee.FEATURE_TEST};else{var b=this.decisionService.getVariationForFeature(v,h,t,p);c.push.apply(c,b.reasons),d=b.result}var O=d.decisionSource,R=(o=(a=d.experiment)===null||a===void 0?void 0:a.key)!==null&&o!==void 0?o:null,P=(l=(s=d.variation)===null||s===void 0?void 0:s.key)!==null&&l!==void 0?l:null,w=mr(d);w===!0?this.logger.log(A.INFO,T.FEATURE_ENABLED_FOR_USER,K,r,f):this.logger.log(A.INFO,T.FEATURE_NOT_ENABLED_FOR_USER,K,r,f);var S={},U=!1;p[Ke.EXCLUDE_VARIABLES]||h.variables.forEach(function(I){S[I.key]=i.getFeatureVariableValueFromVariation(r,w,d.variation,I,f)}),!p[Ke.DISABLE_DECISION_EVENT]&&(O===Ee.FEATURE_TEST||O===Ee.ROLLOUT&&Wi(v))&&(this.sendImpressionEvent(d,r,f,w,u),U=!0);var x=p[Ke.INCLUDE_REASONS],X=[];x&&(X=c.map(function(I){return J.apply(void 0,Vt([I[0]],I.slice(1),!1))}));var _={flagKey:r,enabled:w,variationKey:P,ruleKey:R,variables:S,reasons:X,decisionEventDispatched:U};return this.notificationCenter.sendNotifications(me.DECISION,{type:gt.FLAG,userId:f,attributes:u,decisionInfo:_}),{variationKey:P,enabled:w,variables:S,ruleKey:R,flagKey:r,userContext:t,reasons:X}},e.prototype.getAllDecideOptions=function(t){var r=this,n=we({},this.defaultDecideOptions);return Array.isArray(t)?t.forEach(function(i){Ke[i]?n[i]=!0:r.logger.log(A.WARNING,T.UNRECOGNIZED_DECIDE_OPTION,K,i)}):this.logger.log(A.DEBUG,T.INVALID_DECIDE_OPTIONS,K),n},e.prototype.decideForKeys=function(t,r,n){var i=this;n===void 0&&(n=[]);var a={};if(!this.isValidInstance())return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"decideForKeys"),a;if(r.length===0)return a;var o=this.getAllDecideOptions(n);return r.forEach(function(s){var l=i.decide(t,s,n);(!o[Ke.ENABLED_FLAGS_ONLY]||l.enabled)&&(a[s]=l)}),a},e.prototype.decideAll=function(t,r){r===void 0&&(r=[]);var n=this.projectConfigManager.getConfig(),i={};if(!this.isValidInstance()||!n)return this.logger.log(A.ERROR,T.INVALID_OBJECT,K,"decideAll"),i;var a=Object.keys(n.featureKeyMap);return this.decideForKeys(t,a,r)},e.prototype.updateOdpSettings=function(){var t=this.projectConfigManager.getConfig();t&&this.odpManager&&this.odpManager.updateSettings(t.odpIntegrationConfig)},e.prototype.sendOdpEvent=function(t,r,n,i){if(!this.odpManager){this.logger.error(M.ODP_EVENT_FAILED_ODP_MANAGER_MISSING);return}var a=r??Cr,o=new Map(n);if(n&&n.size>0)try{n.forEach(function(l,f){(no===f.toLowerCase()||Ue.FS_USER_ID===f.toLowerCase())&&(o.delete(f),o.set(Ue.FS_USER_ID,l))})}catch{this.logger.warn(T.ODP_SEND_EVENT_IDENTIFIER_CONVERSION_FAILED)}try{var s=new Ur(a,t,o,i);this.odpManager.sendEvent(s)}catch(l){this.logger.error(M.ODP_EVENT_FAILED,l)}},e.prototype.isOdpIntegrated=function(){var t,r,n;return(n=(r=(t=this.projectConfigManager.getConfig())===null||t===void 0?void 0:t.odpIntegrationConfig)===null||r===void 0?void 0:r.integrated)!==null&&n!==void 0?n:!1},e.prototype.identifyUser=function(t){this.odpManager&&this.isOdpIntegrated()&&this.odpManager.identifyUser(t)},e.prototype.fetchQualifiedSegments=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){switch(n.label){case 0:return this.odpManager?[4,this.odpManager.fetchQualifiedSegments(t,r)]:[2,null];case 1:return[2,n.sent()]}})})},e.prototype.getVuid=function(){var t;if(!this.odpManager){(t=this.logger)===null||t===void 0||t.error("Unable to get VUID - ODP Manager is not instantiated yet.");return}if(!this.odpManager.isVuidEnabled()){this.logger.log(A.WARNING,"getVuid() unavailable for this platform",K);return}return this.odpManager.getVuid()},e})(),mf={parseUserAgentInfo:function(){var e=new pu.UAParser,t=e.getResult(),r=t.os,n=t.device;return{os:r,device:n}}};function yf(){return mf}var If=Object.freeze({__proto__:null,get LogLevel(){return B},getLogger:ve,setLogHandler:Qa,LOG_LEVEL:A,createLogger:fi}),Be=ve();yt.setLogHandler(fi());yt.setLogLevel(B.INFO);var bf="INDEX_BROWSER",ua=10,la=1e3,Of=1e4,$n=!1,Rf=function(e){var t;try{var r=!1;e.errorHandler&&hu(e.errorHandler),e.logger&&(yt.setLogHandler(e.logger),yt.setLogLevel(B.NOTSET)),e.logLevel!==void 0&&yt.setLogLevel(e.logLevel);try{oo.validate(e),r=!0}catch(g){Be.error(g)}var n=void 0;e.eventDispatcher==null?(n=new ao({eventDispatcher:so}),$n||(n.sendPendingEvents(),$n=!0)):n=e.eventDispatcher;var i=e.closingEventDispatcher;!e.eventDispatcher&&!i&&window.navigator&&"sendBeacon"in window.navigator&&(i=uo);var a=e.eventBatchSize,o=e.eventFlushInterval;Ki.validateEventBatchSize(e.eventBatchSize)||(Be.warn("Invalid eventBatchSize %s, defaulting to %s",e.eventBatchSize,ua),a=ua),Ki.validateEventFlushInterval(e.eventFlushInterval)||(Be.warn("Invalid eventFlushInterval %s, defaulting to %s",e.eventFlushInterval,la),o=la);var s=za(),l=co({logger:Be,errorHandler:s}),f={dispatcher:n,closingDispatcher:i,flushInterval:o,batchSize:a,maxQueueSize:e.eventMaxQueueSize||Of,notificationCenter:l},u=((t=e.odpOptions)===null||t===void 0?void 0:t.disabled)===!0;u&&Be.info(T.ODP_DISABLED);var v=e.clientEngine,c=e.clientVersion,d=we(we({clientEngine:li},e),{eventProcessor:cl.createEventProcessor(f),logger:Be,errorHandler:s,datafileManager:e.sdkKey?Wl(e.sdkKey,Be,e.datafile,e.datafileOptions):void 0,notificationCenter:l,isValidInstance:r,odpManager:u?void 0:_c.createInstance({logger:Be,odpOptions:e.odpOptions,clientEngine:v,clientVersion:c})}),h=new _f(d);try{if(typeof window.addEventListener=="function"){var p="onpagehide"in window?"pagehide":"unload";window.addEventListener(p,function(){h.close()},!1)}}catch(g){Be.error(T.UNABLE_TO_ATTACH_UNLOAD,bf,g.message)}return h}catch(g){return Be.error(g),null}},Af=function(){$n=!1},Tf=yt.setLogHandler,Nf=yt.setLogLevel;we(we({},If),{logging:il,errorHandler:Qu,eventDispatcher:so,sendBeaconEventDispatcher:uo,enums:Pu,setLogger:Tf,setLogLevel:Nf,createInstance:Rf,__internalResetRetryState:Af,OptimizelyDecideOption:Ke,getUserAgentParser:yf});class Sf{}class Kr extends Sf{push(t){window.dataLayer||(window.dataLayer=[]),window.dataLayer.push(t)}}const Df=Nt(),qr=dt(()=>Df.warn("Analytics not configured"));function wf({children:e,using:t}){return E(qr.Provider,{value:t,children:e})}const rt=dt(void 0);function pi(){const e=le(rt);if(!e)throw new Error("useNavigation must be used with a navigation context");return e}function Lf({children:e,navigationParameters:t}){return E(rt.Provider,{value:t,children:e})}const Cf=(function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"})(),Pf=function(e){return"/purchase-services-and-gifting/"+e},ca={},zn=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(u=>Promise.resolve(u).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=o?.nonce||o?.getAttribute("nonce");i=l(r.map(f=>{if(f=Pf(f),f in ca)return;ca[f]=!0;const u=f.endsWith(".css"),v=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Cf,u||(c.as="script"),c.crossOrigin="",c.href=f,s&&c.setAttribute("nonce",s),document.head.appendChild(c),u)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Uf(e){const t=e.split("_");return t.length==2?t[0]+"-"+t[1].toUpperCase():t[0]}const ns=()=>pi().isPreview,Mf=({country:e,language:t})=>{const r=ns(),[n,i]=We(E(ne,{}));return It(()=>{r&&(async()=>{const s=(await zn(()=>import("../index-D7L_UEcl.js"),__vite__mapDeps([0]))).LivePreviewInit,f=(await zn(()=>import("../index-CCp8iUfE.js"),__vite__mapDeps([1]))).PreviewBar,u=Uf(t);i(Q(ne,{children:[E(f,{country:e,locale:u}),E(s,{locale:u})]}))})()},[]),r?E(ne,{children:n}):E(ne,{})};function vi(e,...t){const[r,n]=t;return r!==void 0?fa(e,r,n):function(a,o){return fa(e,a,o)}}function fa(e,t,r){let n=e[`${t}.${e["@minuet/country"]}`]||e[t]||t;return r&&Object.keys(r).forEach(i=>{const a=new RegExp(`{{${i}}}`,"g");n=n.replace(a,r[i].toString())}),n}const xf={},Vf=(e,t=!1)=>{const[r,n]=We(!1);return It(()=>{if(!(e!=null&&e.current))return;const i=new IntersectionObserver(([a])=>{t&&a.isIntersecting?(n(a.isIntersecting),i.disconnect()):n(a.isIntersecting)});return i.observe(e.current),()=>{i.disconnect()}},[e,t]),r},kf=({variant:e="16",inversed:t=!1,className:r="",enableRtl:n=!1})=>{const i=`${t?"is-inversed":""}${n?" is-rtl-enabled":""} ${r}`;switch(e){case"24":return E("svg",{className:i,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",children:E("path",{d:"M8.5 12.5C8.5 12.29 8.58 12.1 8.73 11.96L14.46 6.5L15.5 7.59L10.34 12.5L15.5 17.41L14.46 18.5L8.73 13.04C8.58 12.9 8.5 12.7 8.5 12.5Z",fill:"var(--_g-icon-fill-color)"})});case"16":return E("svg",{className:i,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:E("path",{d:"M10 4L6 8L10 12",stroke:"var(--_g-icon-fill-color)",strokeWidth:"1.5",strokeLinejoin:"round"})});case"12":return E("svg",{className:i,"aria-hidden":"true",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E("path",{d:"M3.5 6C3.5 5.79 3.59 5.59 3.74 5.45L7.48 2L8.5 3.1L5.36 6L8.5 8.9L7.48 10L3.74 6.55C3.59 6.41 3.5 6.21 3.5 6Z",fill:"var(--_g-icon-fill-color)"})})}},Ff=({variant:e="16",inversed:t=!1,enableRtl:r=!1,className:n=""})=>{const i=`${t?"is-inversed":""}${r?" is-rtl-enabled":""} ${n}`;switch(e){case"24":return E("svg",{className:i,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",children:E("path",{d:"M15.5 12.5C15.5 12.71 15.42 12.9 15.27 13.04L9.54 18.5L8.5 17.41L13.66 12.5L8.5 7.59L9.54 6.5L15.27 11.96C15.42 12.1 15.5 12.3 15.5 12.5Z",fill:"var(--_g-icon-fill-color)"})});case"16":return E("svg",{className:i,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:E("path",{d:"M6 12L10 8L6 4",stroke:"var(--_g-icon-fill-color)",strokeWidth:"1.5",strokeLinejoin:"round"})});case"12":return E("svg",{className:i,"aria-hidden":"true",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E("path",{d:"M8.5 6C8.5 6.21 8.41 6.41 8.26 6.55L4.52 10L3.5 8.9L6.64 6L3.5 3.1L4.52 2L8.26 5.45C8.41 5.59 8.5 5.79 8.5 6Z",fill:"var(--_g-icon-fill-color)"})})}},lt={"floating-button":"_floating-button_jnt2d_1","is-primary":"_is-primary_jnt2d_1","is-inversed":"_is-inversed_jnt2d_11","is-translucent":"_is-translucent_jnt2d_25","is-secondary":"_is-secondary_jnt2d_54","is-small":"_is-small_jnt2d_93","is-medium":"_is-medium_jnt2d_97","is-large":"_is-large_jnt2d_101"},Bf={primary:lt["is-primary"],secondary:lt["is-secondary"]},Gf={48:lt["is-large"],32:lt["is-medium"],24:lt["is-small"]},Hf=({variant:e="primary",size:t="48",inversed:r=!1,translucent:n=!1,disabled:i,children:a,...o})=>E("button",{...o,className:`
${o.className}
${lt["floating-button"]}
${Bf[e]}
${Gf[t]}
${r?lt["is-inversed"]:""}
${n?lt["is-translucent"]:""}
            `,disabled:i??!1,children:a}),jf=({variant:e="16",className:t="",inversed:r=!1})=>{const n=`${r?"is-inversed":""} ${t}`;switch(e){case"24":return E("svg",{className:n,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:E("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4951 11.5557L5.02539 17.0254L6.08605 18.086L11.5557 12.6164L17.0254 18.0861L18.086 17.0254L12.6164 11.5557L18.086 6.08605L17.0254 5.02539L11.5557 10.4951L6.08605 5.0254L5.02539 6.08606L10.4951 11.5557Z",fill:"var(--_g-icon-stroke-color)"})});case"16":return E("svg",{className:n,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:E("path",{d:"M12 5.06L10.94 4L8 6.94L5.06 4L4 5.06L6.94 8L4 10.94L5.06 12L8 9.06L10.94 12L12 10.94L9.06 8L12 5.06Z",fill:"var(--_g-icon-stroke-color)"})})}};var Kf={},qf={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const $f=e=>zf(e)||Yf(e),zf=e=>{try{const t=qf||void 0;return t===void 0?void 0:t[e]}catch{return}},Yf=e=>{try{const t=Kf||void 0;return t===void 0?void 0:t[e]}catch{return}},Wf=()=>typeof navigator<"u"&&/^((?!chrome|android|crios).)*safari/i.test(navigator.userAgent);function is(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var as={exports:{}};var os=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],xr=os.join(","),ss=typeof Element>"u",bt=ss?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Vr=!ss&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},kr=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),a=i===""||i==="true",o=a||r&&t&&e(t.parentNode);return o},Xf=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},us=function(e,t,r){if(kr(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(xr));return t&&bt.call(e,xr)&&n.unshift(e),n=n.filter(r),n},ls=function e(t,r,n){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if(!kr(o,!1))if(o.tagName==="SLOT"){var s=o.assignedElements(),l=s.length?s:o.children,f=e(l,!0,n);n.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else{var u=bt.call(o,xr);u&&n.filter(o)&&(r||!t.includes(o))&&i.push(o);var v=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),c=!kr(v,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(v&&c){var d=e(v===!0?o.children:v.children,!0,n);n.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else a.unshift.apply(a,o.children)}}return i},cs=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ot=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Xf(e))&&!cs(e)?0:e.tabIndex},Jf=function(e,t){var r=ot(e);return r<0&&t&&!cs(e)?0:r},Qf=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},fs=function(e){return e.tagName==="INPUT"},Zf=function(e){return fs(e)&&e.type==="hidden"},ed=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},td=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},rd=function(e){if(!e.name)return!0;var t=e.form||Vr(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var i=td(n,e.form);return!i||i===e},nd=function(e){return fs(e)&&e.type==="radio"},id=function(e){return nd(e)&&!rd(e)},ad=function(e){var t,r=e&&Vr(e),n=(t=r)===null||t===void 0?void 0:t.host,i=!1;if(r&&r!==e){var a,o,s;for(i=!!((a=n)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(s=e.ownerDocument)!==null&&s!==void 0&&s.contains(e));!i&&n;){var l,f,u;r=Vr(n),n=(l=r)===null||l===void 0?void 0:l.host,i=!!((f=n)!==null&&f!==void 0&&(u=f.ownerDocument)!==null&&u!==void 0&&u.contains(n))}}return i},da=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return r===0&&n===0},od=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=bt.call(e,"details>summary:first-of-type"),a=i?e.parentElement:e;if(bt.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var o=e;e;){var s=e.parentElement,l=Vr(e);if(s&&!s.shadowRoot&&n(s)===!0)return da(e);e.assignedSlot?e=e.assignedSlot:!s&&l!==e.ownerDocument?e=l.host:e=s}e=o}if(ad(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return da(e);return!1},sd=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if(n.tagName==="LEGEND")return bt.call(t,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}t=t.parentElement}return!1},Fr=function(e,t){return!(t.disabled||kr(t)||Zf(t)||od(t,e)||ed(t)||sd(t))},Yn=function(e,t){return!(id(t)||ot(t)<0||!Fr(e,t))},ud=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},ld=function e(t){var r=[],n=[];return t.forEach(function(i,a){var o=!!i.scopeParent,s=o?i.scopeParent:i,l=Jf(s,o),f=o?e(i.candidates):s;l===0?o?r.push.apply(r,f):r.push(s):n.push({documentOrder:a,tabIndex:l,item:i,isScope:o,content:f})}),n.sort(Qf).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(r)},ds=function(e,t){t=t||{};var r;return t.getShadowRoot?r=ls([e],t.includeContainer,{filter:Yn.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ud}):r=us(e,t.includeContainer,Yn.bind(null,t)),ld(r)},ps=function(e,t){t=t||{};var r;return t.getShadowRoot?r=ls([e],t.includeContainer,{filter:Fr.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=us(e,t.includeContainer,Fr.bind(null,t)),r},Et=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return bt.call(e,xr)===!1?!1:Yn(t,e)},cd=os.concat("iframe").join(","),Nr=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return bt.call(e,cd)===!1?!1:Fr(t,e)};const fd=Object.freeze(Object.defineProperty({__proto__:null,focusable:ps,getTabIndex:ot,isFocusable:Nr,isTabbable:Et,tabbable:ds},Symbol.toStringTag,{value:"Module"}));function Wn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dd(e){if(Array.isArray(e))return Wn(e)}function pd(e,t,r){return(t=_d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pa(Object(r),!0).forEach(function(n){pd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gd(e){return dd(e)||vd(e)||md(e)||hd()}function Ed(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _d(e){var t=Ed(e,"string");return typeof t=="symbol"?t:t+""}function md(e,t){if(e){if(typeof e=="string")return Wn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(e,t):void 0}}var ha={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r._setPausedState(!0)}var n=e.indexOf(t);n===-1||e.splice(n,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},yd=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Id=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},ir=function(e){return e?.key==="Tab"||e?.keyCode===9},bd=function(e){return ir(e)&&!e.shiftKey},Od=function(e){return ir(e)&&e.shiftKey},ga=function(e){return setTimeout(e,0)},Jt=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},yr=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Rd=[],Ad=function(e,t){var r=t?.document||document,n=t?.trapStack||Rd,i=va({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:bd,isKeyBackward:Od},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,s=function(_,I,L){return _&&_[I]!==void 0?_[I]:i[L||I]},l=function(_,I){var L=typeof I?.composedPath=="function"?I.composedPath():void 0;return a.containerGroups.findIndex(function(G){var y=G.container,D=G.tabbableNodes;return y.contains(_)||L?.includes(y)||D.find(function(C){return C===_})})},f=function(_){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=I.hasFallback,G=L===void 0?!1:L,y=I.params,D=y===void 0?[]:y,C=i[_];if(typeof C=="function"&&(C=C.apply(void 0,gd(D))),C===!0&&(C=void 0),!C){if(C===void 0||C===!1)return C;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var F=C;if(typeof C=="string"){try{F=r.querySelector(C)}catch(V){throw new Error("`".concat(_,'` appears to be an invalid selector; error="').concat(V.message,'"'))}if(!F&&!G)throw new Error("`".concat(_,"` as selector refers to no known node"))}return F},u=function(){var _=f("initialFocus",{hasFallback:!0});if(_===!1)return!1;if(_===void 0||_&&!Nr(_,i.tabbableOptions))if(l(r.activeElement)>=0)_=r.activeElement;else{var I=a.tabbableGroups[0],L=I&&I.firstTabbableNode;_=L||f("fallbackFocus")}else _===null&&(_=f("fallbackFocus"));if(!_)throw new Error("Your focus-trap needs to have at least one focusable element");return _},v=function(){if(a.containerGroups=a.containers.map(function(_){var I=ds(_,i.tabbableOptions),L=ps(_,i.tabbableOptions),G=I.length>0?I[0]:void 0,y=I.length>0?I[I.length-1]:void 0,D=L.find(function(V){return Et(V)}),C=L.slice().reverse().find(function(V){return Et(V)}),F=!!I.find(function(V){return ot(V)>0});return{container:_,tabbableNodes:I,focusableNodes:L,posTabIndexesFound:F,firstTabbableNode:G,lastTabbableNode:y,firstDomTabbableNode:D,lastDomTabbableNode:C,nextTabbableNode:function(V){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,te=I.indexOf(V);return te<0?z?L.slice(L.indexOf(V)+1).find(function(q){return Et(q)}):L.slice(0,L.indexOf(V)).reverse().find(function(q){return Et(q)}):I[te+(z?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(_){return _.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(_){return _.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},c=function(_){var I=_.activeElement;if(I)return I.shadowRoot&&I.shadowRoot.activeElement!==null?c(I.shadowRoot):I},d=function(_){if(_!==!1&&_!==c(document)){if(!_||!_.focus){d(u());return}_.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=_,yd(_)&&_.select()}},h=function(_){var I=f("setReturnFocus",{params:[_]});return I||(I===!1?!1:_)},p=function(_){var I=_.target,L=_.event,G=_.isBackward,y=G===void 0?!1:G;I=I||yr(L),v();var D=null;if(a.tabbableGroups.length>0){var C=l(I,L),F=C>=0?a.containerGroups[C]:void 0;if(C<0)y?D=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:D=a.tabbableGroups[0].firstTabbableNode;else if(y){var V=a.tabbableGroups.findIndex(function(ie){var ce=ie.firstTabbableNode;return I===ce});if(V<0&&(F.container===I||Nr(I,i.tabbableOptions)&&!Et(I,i.tabbableOptions)&&!F.nextTabbableNode(I,!1))&&(V=C),V>=0){var z=V===0?a.tabbableGroups.length-1:V-1,te=a.tabbableGroups[z];D=ot(I)>=0?te.lastTabbableNode:te.lastDomTabbableNode}else ir(L)||(D=F.nextTabbableNode(I,!1))}else{var q=a.tabbableGroups.findIndex(function(ie){var ce=ie.lastTabbableNode;return I===ce});if(q<0&&(F.container===I||Nr(I,i.tabbableOptions)&&!Et(I,i.tabbableOptions)&&!F.nextTabbableNode(I))&&(q=C),q>=0){var ae=q===a.tabbableGroups.length-1?0:q+1,k=a.tabbableGroups[ae];D=ot(I)>=0?k.firstTabbableNode:k.firstDomTabbableNode}else ir(L)||(D=F.nextTabbableNode(I))}}else D=f("fallbackFocus");return D},g=function(_){var I=yr(_);if(!(l(I,_)>=0)){if(Jt(i.clickOutsideDeactivates,_)){o.deactivate({returnFocus:i.returnFocusOnDeactivate});return}Jt(i.allowOutsideClick,_)||_.preventDefault()}},m=function(_){var I=yr(_),L=l(I,_)>=0;if(L||I instanceof Document)L&&(a.mostRecentlyFocusedNode=I);else{_.stopImmediatePropagation();var G,y=!0;if(a.mostRecentlyFocusedNode)if(ot(a.mostRecentlyFocusedNode)>0){var D=l(a.mostRecentlyFocusedNode),C=a.containerGroups[D].tabbableNodes;if(C.length>0){var F=C.findIndex(function(V){return V===a.mostRecentlyFocusedNode});F>=0&&(i.isKeyForward(a.recentNavEvent)?F+1<C.length&&(G=C[F+1],y=!1):F-1>=0&&(G=C[F-1],y=!1))}}else a.containerGroups.some(function(V){return V.tabbableNodes.some(function(z){return ot(z)>0})})||(y=!1);else y=!1;y&&(G=p({target:a.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(a.recentNavEvent)})),d(G||a.mostRecentlyFocusedNode||u())}a.recentNavEvent=void 0},b=function(_){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=_;var L=p({event:_,isBackward:I});L&&(ir(_)&&_.preventDefault(),d(L))},O=function(_){(i.isKeyForward(_)||i.isKeyBackward(_))&&b(_,i.isKeyBackward(_))},R=function(_){Id(_)&&Jt(i.escapeDeactivates,_)!==!1&&(_.preventDefault(),o.deactivate())},P=function(_){var I=yr(_);l(I,_)>=0||Jt(i.clickOutsideDeactivates,_)||Jt(i.allowOutsideClick,_)||(_.preventDefault(),_.stopImmediatePropagation())},w=function(){if(a.active)return ha.activateTrap(n,o),a.delayInitialFocusTimer=i.delayInitialFocus?ga(function(){d(u())}):d(u()),r.addEventListener("focusin",m,!0),r.addEventListener("mousedown",g,{capture:!0,passive:!1}),r.addEventListener("touchstart",g,{capture:!0,passive:!1}),r.addEventListener("click",P,{capture:!0,passive:!1}),r.addEventListener("keydown",O,{capture:!0,passive:!1}),r.addEventListener("keydown",R),o},S=function(){if(a.active)return r.removeEventListener("focusin",m,!0),r.removeEventListener("mousedown",g,!0),r.removeEventListener("touchstart",g,!0),r.removeEventListener("click",P,!0),r.removeEventListener("keydown",O,!0),r.removeEventListener("keydown",R),o},U=function(_){var I=_.some(function(L){var G=Array.from(L.removedNodes);return G.some(function(y){return y===a.mostRecentlyFocusedNode})});I&&d(u())},x=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(U):void 0,X=function(){x&&(x.disconnect(),a.active&&!a.paused&&a.containers.map(function(_){x.observe(_,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(_){if(a.active)return this;var I=s(_,"onActivate"),L=s(_,"onPostActivate"),G=s(_,"checkCanFocusTrap");G||v(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,I?.();var y=function(){G&&v(),w(),X(),L?.()};return G?(G(a.containers.concat()).then(y,y),this):(y(),this)},deactivate:function(_){if(!a.active)return this;var I=va({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},_);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,S(),a.active=!1,a.paused=!1,X(),ha.deactivateTrap(n,o);var L=s(I,"onDeactivate"),G=s(I,"onPostDeactivate"),y=s(I,"checkCanReturnFocus"),D=s(I,"returnFocus","returnFocusOnDeactivate");L?.();var C=function(){ga(function(){D&&d(h(a.nodeFocusedBeforeActivation)),G?.()})};return D&&y?(y(h(a.nodeFocusedBeforeActivation)).then(C,C),this):(C(),this)},pause:function(_){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,_)):this},unpause:function(_){return a.active?(a.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,_)):this},updateContainerElements:function(_){var I=[].concat(_).filter(Boolean);return a.containers=I.map(function(L){return typeof L=="string"?r.querySelector(L):L}),a.active&&v(),X(),this}},Object.defineProperties(o,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(_,I){if(a.paused===_)return this;if(a.paused=_,_){var L=s(I,"onPause"),G=s(I,"onPostPause");L?.(),S(),X(),G?.()}else{var y=s(I,"onUnpause"),D=s(I,"onPostUnpause");y?.(),v(),w(),X(),D?.()}return this}}}),o.updateContainerElements(e),o};const Td=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Ad},Symbol.toStringTag,{value:"Module"})),Nd=is(Td),Sd=is(fd);function kt(e){"@babel/helpers - typeof";return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(e)}var sn,un;function Dd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hs(n.key),n)}}function Ld(e,t,r){return t&&wd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cd(e,t,r){return t=Br(t),Pd(e,vs()?Reflect.construct(t,r||[],Br(e).constructor):t.apply(e,r))}function Pd(e,t){if(t&&(kt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ud(e)}function Ud(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vs=function(){return!!e})()}function Br(e){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(e)}function Md(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xn(e,t)}function Xn(e,t){return Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Xn(e,t)}function xd(e,t,r){return(t=hs(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hs(e){var t=Vd(e,"string");return kt(t)=="symbol"?t:t+""}function Vd(e,t){if(kt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var er=ii,kd=Nd,Fd=kd.createFocusTrap,Bd=Sd,Gd=Bd.isFocusable,Hd=parseInt((sn=(un=/^(\d+)\./.exec(er.version))===null||un===void 0?void 0:un[1])!==null&&sn!==void 0?sn:0,10),hi=(function(e){function t(r){var n;Dd(this,t),n=Cd(this,t,[r]),xd(n,"getNodeForOption",function(o){var s,l=(s=this.internalOptions[o])!==null&&s!==void 0?s:this.originalOptions[o];if(typeof l=="function"){for(var f=arguments.length,u=new Array(f>1?f-1:0),v=1;v<f;v++)u[v-1]=arguments[v];l=l.apply(void 0,u)}if(l===!0&&(l=void 0),!l){if(l===void 0||l===!1)return l;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var c=l;if(typeof l=="string"){var d;if(c=(d=this.getDocument())===null||d===void 0?void 0:d.querySelector(l),!c)throw new Error("`".concat(o,"` as selector refers to no known node"))}return c}),n.handleDeactivate=n.handleDeactivate.bind(n),n.handlePostDeactivate=n.handlePostDeactivate.bind(n),n.handleClickOutsideDeactivates=n.handleClickOutsideDeactivates.bind(n),n.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:n.handleDeactivate,onPostDeactivate:n.handlePostDeactivate,clickOutsideDeactivates:n.handleClickOutsideDeactivates},n.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var i=r.focusTrapOptions;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){if(a==="returnFocusOnDeactivate"||a==="onDeactivate"||a==="onPostDeactivate"||a==="checkCanReturnFocus"||a==="clickOutsideDeactivates"){n.originalOptions[a]=i[a];continue}n.internalOptions[a]=i[a]}return n.outsideClick=null,n.focusTrapElements=r.containerElements||[],n.updatePreviousElement(),n}return Md(t,e),Ld(t,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var r=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return r||(r===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var r=this.getDocument();r&&(this.previouslyFocusedElement=r.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(r){var n=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,r):this.originalOptions.clickOutsideDeactivates;return n&&(this.outsideClick={target:r.target,allowDeactivation:n}),n}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var r=this,n=function(){var i=r.getReturnFocusNode(),a=!!(r.originalOptions.returnFocusOnDeactivate&&i!==null&&i!==void 0&&i.focus&&(!r.outsideClick||r.outsideClick.allowDeactivation&&!Gd(r.outsideClick.target,r.internalOptions.tabbableOptions))),o=r.internalOptions.preventScroll,s=o===void 0?!1:o;a&&i.focus({preventScroll:s}),r.originalOptions.onPostDeactivate&&r.originalOptions.onPostDeactivate.call(null),r.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(n,n):n()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var r=this.focusTrapElements.some(Boolean);r&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(r){if(this.focusTrap){r.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var n=!r.active&&this.props.active,i=r.active&&!this.props.active,a=!r.paused&&this.props.paused,o=r.paused&&!this.props.paused;if(n&&(this.updatePreviousElement(),this.focusTrap.activate()),i){this.deactivateTrap();return}a&&this.focusTrap.pause(),o&&this.focusTrap.unpause()}else r.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var r=this,n=this.props.children?er.Children.only(this.props.children):void 0;if(n){if(n.type&&n.type===er.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var i=function(o){var s=r.props.containerElements;n&&(Hd>=19?typeof n.props.ref=="function"?n.props.ref(o):n.props.ref&&(n.props.ref.current=o):typeof n.ref=="function"?n.ref(o):n.ref&&(n.ref.current=o)),r.focusTrapElements=s||[o]},a=er.cloneElement(n,{ref:i});return a}return null}}])})(er.Component);hi.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Fd};as.exports=hi;var jd=as.exports.FocusTrap=hi;const Kd=({active:e,children:t,focusTrapOptions:r={}})=>{const n=wr(()=>Wf(),[]),i=$f("NODE_ENV")==="test",a=qa(),o=wr(()=>({...r,initialFocus:n?()=>!1:void 0,fallbackFocus:`[data-focus-trap-fallback="${a}"]`,tabbableOptions:{displayCheck:i?"none":"full"}}),[r,a,i,n]);return E(jd,{active:e,focusTrapOptions:o,children:E("div",{tabIndex:-1,"data-focus-trap-fallback":a,children:t})})};var qe=function(){return qe=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},qe.apply(this,arguments)};function gs(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function qd(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var Sr="right-scroll-bar-position",Dr="width-before-scroll-bar",$d="with-scroll-bars-hidden",zd="--removed-body-scroll-bar-size";function ln(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Yd(e,t){var r=We(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var Wd=typeof window<"u"?Y.useLayoutEffect:Y.useEffect,Ea=new WeakMap;function Xd(e,t){var r=Yd(null,function(n){return e.forEach(function(i){return ln(i,n)})});return Wd(function(){var n=Ea.get(r);if(n){var i=new Set(n),a=new Set(e),o=r.current;i.forEach(function(s){a.has(s)||ln(s,null)}),a.forEach(function(s){i.has(s)||ln(s,o)})}Ea.set(r,e)},[e]),r}function Jd(e){return e}function Qd(e,t){t===void 0&&(t=Jd);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(s){return s!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(s){return a(s)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var s=r;r=[],s.forEach(a),o=r}var l=function(){var u=o;o=[],u.forEach(a)},f=function(){return Promise.resolve().then(l)};f(),r={push:function(u){o.push(u),f()},filter:function(u){return o=o.filter(u),r}}}};return i}function Zd(e){e===void 0&&(e={});var t=Qd(null);return t.options=qe({async:!0,ssr:!1},e),t}var Es=function(e){var t=e.sideCar,r=gs(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return Y.createElement(n,qe({},r))};Es.isSideCarExport=!0;function ep(e,t){return e.useMedium(t),Es}var _s=Zd(),cn=function(){},$r=Y.forwardRef(function(e,t){var r=Y.useRef(null),n=Y.useState({onScrollCapture:cn,onWheelCapture:cn,onTouchMoveCapture:cn}),i=n[0],a=n[1],o=e.forwardProps,s=e.children,l=e.className,f=e.removeScrollBar,u=e.enabled,v=e.shards,c=e.sideCar,d=e.noRelative,h=e.noIsolation,p=e.inert,g=e.allowPinchZoom,m=e.as,b=m===void 0?"div":m,O=e.gapMode,R=gs(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=c,w=Xd([r,t]),S=qe(qe({},R),i);return Y.createElement(Y.Fragment,null,u&&Y.createElement(P,{sideCar:_s,removeScrollBar:f,shards:v,noRelative:d,noIsolation:h,inert:p,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:O}),o?Y.cloneElement(Y.Children.only(s),qe(qe({},S),{ref:w})):Y.createElement(b,qe({},S,{className:l,ref:w}),s))});$r.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$r.classNames={fullWidth:Dr,zeroRight:Sr};var tp=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rp(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tp();return t&&e.setAttribute("nonce",t),e}function np(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ip(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ap=function(){var e=0,t=null;return{add:function(r){e==0&&(t=rp())&&(np(t,r),ip(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},op=function(){var e=ap();return function(t,r){Y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ms=function(){var e=op(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},sp={left:0,top:0,right:0,gap:0},fn=function(e){return parseInt(e||"",10)||0},up=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[fn(r),fn(n),fn(i)]},lp=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sp;var t=up(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},cp=ms(),Mt="data-scroll-locked",fp=function(e,t,r,n){var i=e.left,a=e.top,o=e.right,s=e.gap;return r===void 0&&(r="margin"),`
  .`.concat($d,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(Mt,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sr,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Dr,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Sr," .").concat(Sr,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Dr," .").concat(Dr,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Mt,`] {
    `).concat(zd,": ").concat(s,`px;
  }
`)},_a=function(){var e=parseInt(document.body.getAttribute(Mt)||"0",10);return isFinite(e)?e:0},dp=function(){Y.useEffect(function(){return document.body.setAttribute(Mt,(_a()+1).toString()),function(){var e=_a()-1;e<=0?document.body.removeAttribute(Mt):document.body.setAttribute(Mt,e.toString())}},[])},pp=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;dp();var a=Y.useMemo(function(){return lp(i)},[i]);return Y.createElement(cp,{styles:fp(a,!t,i,r?"":"!important")})},Jn=!1;if(typeof window<"u")try{var Ir=Object.defineProperty({},"passive",{get:function(){return Jn=!0,!0}});window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Jn=!1}var Pt=Jn?{passive:!1}:!1,vp=function(e){return e.tagName==="TEXTAREA"},ys=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!vp(e)&&r[t]==="visible")},hp=function(e){return ys(e,"overflowY")},gp=function(e){return ys(e,"overflowX")},ma=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=Is(e,n);if(i){var a=bs(e,n),o=a[1],s=a[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Ep=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},_p=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Is=function(e,t){return e==="v"?hp(t):gp(t)},bs=function(e,t){return e==="v"?Ep(t):_p(t)},mp=function(e,t){return e==="h"&&t==="rtl"?-1:1},yp=function(e,t,r,n,i){var a=mp(e,window.getComputedStyle(t).direction),o=a*n,s=r.target,l=t.contains(s),f=!1,u=o>0,v=0,c=0;do{if(!s)break;var d=bs(e,s),h=d[0],p=d[1],g=d[2],m=p-g-a*h;(h||m)&&Is(e,s)&&(v+=m,c+=h);var b=s.parentNode;s=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(u&&Math.abs(v)<1||!u&&Math.abs(c)<1)&&(f=!0),f},br=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ya=function(e){return[e.deltaX,e.deltaY]},Ia=function(e){return e&&"current"in e?e.current:e},Ip=function(e,t){return e[0]===t[0]&&e[1]===t[1]},bp=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Op=0,Ut=[];function Rp(e){var t=Y.useRef([]),r=Y.useRef([0,0]),n=Y.useRef(),i=Y.useState(Op++)[0],a=Y.useState(ms)[0],o=Y.useRef(e);Y.useEffect(function(){o.current=e},[e]),Y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=qd([e.lockRef.current],(e.shards||[]).map(Ia),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var s=Y.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var m=br(p),b=r.current,O="deltaX"in p?p.deltaX:b[0]-m[0],R="deltaY"in p?p.deltaY:b[1]-m[1],P,w=p.target,S=Math.abs(O)>Math.abs(R)?"h":"v";if("touches"in p&&S==="h"&&w.type==="range")return!1;var U=ma(S,w);if(!U)return!0;if(U?P=S:(P=S==="v"?"h":"v",U=ma(S,w)),!U)return!1;if(!n.current&&"changedTouches"in p&&(O||R)&&(n.current=P),!P)return!0;var x=n.current||P;return yp(x,g,p,x==="h"?O:R)},[]),l=Y.useCallback(function(p){var g=p;if(!(!Ut.length||Ut[Ut.length-1]!==a)){var m="deltaY"in g?ya(g):br(g),b=t.current.filter(function(P){return P.name===g.type&&(P.target===g.target||g.target===P.shadowParent)&&Ip(P.delta,m)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var O=(o.current.shards||[]).map(Ia).filter(Boolean).filter(function(P){return P.contains(g.target)}),R=O.length>0?s(g,O[0]):!o.current.noIsolation;R&&g.cancelable&&g.preventDefault()}}},[]),f=Y.useCallback(function(p,g,m,b){var O={name:p,delta:g,target:m,should:b,shadowParent:Ap(m)};t.current.push(O),setTimeout(function(){t.current=t.current.filter(function(R){return R!==O})},1)},[]),u=Y.useCallback(function(p){r.current=br(p),n.current=void 0},[]),v=Y.useCallback(function(p){f(p.type,ya(p),p.target,s(p,e.lockRef.current))},[]),c=Y.useCallback(function(p){f(p.type,br(p),p.target,s(p,e.lockRef.current))},[]);Y.useEffect(function(){return Ut.push(a),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:c}),document.addEventListener("wheel",l,Pt),document.addEventListener("touchmove",l,Pt),document.addEventListener("touchstart",u,Pt),function(){Ut=Ut.filter(function(p){return p!==a}),document.removeEventListener("wheel",l,Pt),document.removeEventListener("touchmove",l,Pt),document.removeEventListener("touchstart",u,Pt)}},[]);var d=e.removeScrollBar,h=e.inert;return Y.createElement(Y.Fragment,null,h?Y.createElement(a,{styles:bp(i)}):null,d?Y.createElement(pp,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ap(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Tp=ep(_s,Rp);var Os=Y.forwardRef(function(e,t){return Y.createElement($r,qe({},e,{ref:t,sideCar:Tp}))});Os.classNames=$r.classNames;const Np="_drawer_1qfo3_1",Sp="_bottom_sheet_1qfo3_17",Dp="_backdrop_1qfo3_36",wp="_top_1qfo3_125",Lp="_bottom_1qfo3_17",Ge={drawer:Np,bottom_sheet:Sp,backdrop:Dp,"is-open":"_is-open_1qfo3_45","has-hero-media":"_has-hero-media_1qfo3_93","drawer-container":"_drawer-container_1qfo3_93","button-container":"_button-container_1qfo3_102",top:wp,bottom:Lp,"drawer-content":"_drawer-content_1qfo3_169","drawer-hero-media-container":"_drawer-hero-media-container_1qfo3_182"},Cp=({is:e="closed",closeButtonMobilePosition:t="bottom",accessibility:r={closeButtonAriaLabel:"Close",isContainerFocusable:!1,disableFocusTrap:!1},onCloseRequest:n,children:i,heroMedia:a,containerId:o,variant:s="drawer",onAnimationEnd:l})=>{const f=e==="open",u=ct(null),[v,c]=We(f),d=g=>{f&&(g.code==="Enter"||g.key==="Space")&&n(g)},h=ur(g=>{f&&g.key==="Escape"&&n(g)},[f,n]);It(()=>(window.addEventListener("keyup",h,!0),()=>{window.removeEventListener("keyup",h,!0)}),[h]);const p=wr(()=>g=>{var m;g.target!==g.currentTarget||g.propertyName!=="transform"||(c(f),l?.(f?"open":"closed"),f||(m=u.current)==null||m.scroll(0,0))},[f,l]);return E(Os,{enabled:f,children:Q(Kd,{active:f&&v&&!r.disableFocusTrap,focusTrapOptions:{allowOutsideClick:!0},children:[Q("div",{...!v&&{inert:1,"aria-hidden":!0},className:`
              ${Ge.drawer}
              ${f?Ge["is-open"]:""}
              ${a?Ge["has-hero-media"]:""}
              ${s==="bottom_sheet"?Ge.bottom_sheet:""}
            `,role:"dialog","aria-modal":!0,"aria-label":r.drawerAriaLabel,tabIndex:r.isContainerFocusable?0:-1,onTransitionEnd:p,children:[Q("div",{ref:u,id:o,className:Ge["drawer-container"],children:[a&&E("div",{className:Ge["drawer-hero-media-container"],children:a}),E("div",{className:Ge["drawer-content"],children:i})]}),E("div",{className:`${Ge["button-container"]} ${Ge[s!=="bottom_sheet"?t:"bottom_sheet"]}`,children:E(Hf,{"data-testid":"close-button",inversed:s==="bottom_sheet",translucent:s==="bottom_sheet",onClick:n,onKeyUp:d,"aria-label":r.closeButtonAriaLabel,children:E(jf,{variant:"24"})})})]}),E("div",{"data-testid":"backdrop",className:Ge.backdrop,onClick:n})]})})},Pp=e=>E(Cp,{...e,variant:"bottom_sheet",children:e.children}),Up=()=>{const[e,t]=We("/"),r=ur(n=>({isOpen:e.startsWith(n),isActive:e===n}),[e]);return{activeRoute:e,setActiveRoute:t,routeEvaluator:r}},Mp="_navigationpanels_aimui_1",ar={navigationpanels:Mp,"navigationpanels-container":"_navigationpanels-container_aimui_6","navigationpanels-panel":"_navigationpanels-panel_aimui_13","is-open":"_is-open_aimui_22","is-active":"_is-active_aimui_25"};function zr(e,t){const r=le(e);if(r===void 0)throw new Error(t);return r}const xp=dt(void 0),Vp=({activeRoute:e,children:t})=>E(xp.Provider,{value:e,children:t}),Rs=dt(void 0),As=()=>zr(Rs,"useNavigationPanelRouter must be used within a NavigationDrawer"),kp=({setActiveRoute:e,children:t})=>E(Rs.Provider,{value:e,children:t}),Ts=dt(void 0),Fp=e=>zr(Ts,"useRouteState must be used within a NavigationDrawer")(e),Bp=({children:e,routeEvaluator:t})=>E(Ts.Provider,{value:t,children:e}),Ns=dt({}),Gp=()=>zr(Ns,"useNavigationPanelsCustomizations must be used within NavigationContainer"),Hp=({children:e,customizations:t={}})=>E(Ns.Provider,{value:t||{},children:e}),Ss=dt(void 0),jp=()=>zr(Ss,"usePanelState must be used within NavigationContainer"),Kp=({children:e,setActivePanel:t})=>E(Ss.Provider,{value:t,children:e}),qp=({children:e,setActivePanel:t,activeRoute:r,setActiveRoute:n,routeEvaluator:i,customizations:a})=>E(Kp,{setActivePanel:t,children:E(Vp,{activeRoute:r,children:E(kp,{setActiveRoute:n,children:E(Bp,{routeEvaluator:i,children:E(Hp,{customizations:a,children:e})})})})}),ba=()=>{};function $p(e,t){const r=ct(t),n=ct(ba);return r.current=t,wr(()=>({get current(){return e.current},set current(i){n.current(),e.current=i,n.current=r.current(i)||ba}}),[e])}const zp=()=>typeof window>"u",Yp={disconnect:()=>{},observe:()=>{},unobserve:()=>{}};function Wp(e){const t=ct(e);t.current=e;const r=ct(null);if(r.current)return r.current;if(zp())return r.current=Yp,r.current;const n=i=>{for(const a in i)t.current(i[a].target)};return r.current=new ResizeObserver(n),r.current}function Xp(e,t){const r=Wp(t);return $p(e,n=>{if(r.disconnect(),!!n)try{r.observe(n),t(n)}catch{}})}function Jp(e){const t=e.getBoundingClientRect();return{width:Math.ceil(t.width),height:Math.ceil(t.height)}}function Qp(){const[e,t]=We(-1),[r,n]=We(-1),i=ct(null),a=Xp(i,s=>{const{width:l,height:f}=Jp(s);t(l),n(f)}),o=ur(s=>{a.current=s,s||(t(-1),n(-1))},[a]);return{style:e>0&&r>0?{width:e,height:r}:{},setActivePanel:o,panelRef:i}}const Zp=({children:e,activeRoute:t,setActiveRoute:r,routeEvaluator:n,customizations:i})=>{const{style:a,setActivePanel:o}=Qp();return E(qp,{setActivePanel:o,activeRoute:t,setActiveRoute:r,routeEvaluator:n,customizations:i,children:E("div",{className:`${ar.navigationpanels} ${ar["navigationpanels-container"]} ${i?.containerClassName||""}`,style:a,"aria-live":"polite",children:e})})};function tr({children:e,content:t,id:r}){const n=ct(null),i=jp(),{isOpen:a,isActive:o}=Fp(r),{panelClassName:s,openPanelClassName:l,activePanelClassName:f}=Gp();It(()=>{o&&n.current&&i(n.current)},[o,i]);const u=o?`${ar["is-active"]} ${f||""}`:"",v=a?`${ar["is-open"]} ${l||""}`:"",c=ur(d=>{var h;if(o&&d.target===n.current&&d.propertyName==="transform"){const p=(h=n.current)==null?void 0:h.querySelector("*[tabIndex], input, button, a");p&&p.focus()}},[o]);return Q(ne,{children:[E("div",{className:`${ar["navigationpanels-panel"]} ${u} ${v} ${s||""}`,ref:n,onTransitionEnd:c,children:t}),e]})}const ev={"navigation-bottomsheet-panel":"_navigation-bottomsheet-panel_vp4tk_1"},tv=e=>{const{onCloseRequest:t,children:r,content:n,...i}=e,{activeRoute:a,setActiveRoute:o,routeEvaluator:s}=Up(),l=ur(f=>{f==="closed"&&o("/")},[o]);return E(Pp,{onCloseRequest:f=>{const u=Object.create(f,{ctx:{value:{activeRoute:a}}});t(u)},...i,onAnimationEnd:l,children:E(Zp,{activeRoute:a,setActiveRoute:o,routeEvaluator:s,customizations:{panelClassName:ev["navigation-bottomsheet-panel"]},children:E(tr,{id:"/",content:n,children:r})})})},rv="_loading_11iuc_1",nv={loading:rv},iv=({variant:e="16",inversed:t=!1,className:r=""})=>{const n=`${nv.loading} ${t?"is-inversed":""} ${r}`;switch(e){case"24":return E("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:E("path",{d:"M12.1302 20C7.64456 20 4 16.41 4 12C4 7.59 7.64456 4 12.1302 4C15.8348 4 19.0788 6.47 20 10L18.5482 10.38C17.7972 7.51 15.1539 5.5 12.1302 5.5C8.47559 5.5 5.50188 8.42 5.50188 12C5.50188 15.58 8.47559 18.5 12.1302 18.5C14.8436 18.5 17.2566 16.9 18.2778 14.43L19.6696 15C18.418 18.04 15.4643 20 12.1402 20H12.1302Z",fill:"var(--_g-icon-fill-color)"})});case"16":return E("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",children:E("path",{d:"M8.1 14C4.74 14 2 11.31 2 8C2 4.69 4.74 2 8.1 2C10.88 2 13.31 3.85 14 6.5L12.55 6.88C12.03 4.89 10.2 3.5 8.1 3.5C5.56 3.5 3.5 5.52 3.5 8C3.5 10.48 5.56 12.5 8.09 12.5C9.97 12.5 11.65 11.39 12.35 9.68L13.74 10.25C12.8 12.53 10.58 14 8.09 14H8.1Z",fill:"var(--_g-icon-fill-color)"})})}},av=({variant:e="16",className:t="",inversed:r=!1})=>{const n=`${r?"is-inversed":""} ${t}`;switch(e){case"24":return E("svg",{className:n,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:E("path",{d:"M18 11.25H12.75V6H11.25V11.25H6V12.75H11.25V18H12.75V12.75H18V11.25Z",fill:"var(--_g-icon-fill-color)"})});case"16":return E("svg",{className:n,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:E("path",{d:"M12 8.75H8.75V12H7.25V8.75H4V7.25H7.25V4H8.75V7.25H12V8.75Z",fill:"var(--_g-icon-fill-color)"})})}},ov="_cta_19rcc_1",sv="_loader_19rcc_25",je={cta:ov,"is-inversed":"_is-inversed_19rcc_5",loader:sv,"is-primary":"_is-primary_19rcc_45","is-secondary":"_is-secondary_19rcc_45","is-text-main":"_is-text-main_19rcc_53","is-text-overlay":"_is-text-overlay_19rcc_53","is-fluid":"_is-fluid_19rcc_82","fit-on-mobile-content":"_fit-on-mobile-content_19rcc_86","text-main-slide-in":"_text-main-slide-in_19rcc_1","text-main-slide-out":"_text-main-slide-out_19rcc_1","is-disabled":"_is-disabled_19rcc_198","rotate-90":"_rotate-90_19rcc_212","is-active":"_is-active_19rcc_216","is-loading":"_is-loading_19rcc_263","text-main-slide-in-rtl":"_text-main-slide-in-rtl_19rcc_1","text-main-slide-out-rtl":"_text-main-slide-out-rtl_19rcc_1"},uv=({variant:e,inversed:t,iconBefore:r,iconAfter:n,children:i})=>Q(ne,{children:[E(lv,{iconBefore:r,variant:e,inversed:t}),E("span",{children:i}),n,E("span",{className:je.loader,children:E(iv,{variant:"16"})})]}),lv=({variant:e,iconBefore:t,inversed:r})=>e==="text-overlay"&&t==null?E(av,{inversed:r,className:je["rotate-90"]}):t||null,cv=Bs(({variant:e="primary",inversed:t=!1,disabled:r=!1,fluid:n=!1,fitOnMobile:i="parent",active:a=!1,loading:o=!1,iconAfter:s,iconBefore:l,children:f,...u},v)=>E("button",{...u,ref:v,disabled:r,className:`${je.cta} ${je[`is-${e}`]} ${r?je["is-disabled"]:""} ${t?je["is-inversed"]:""} ${n?je["is-fluid"]:""} ${a?je["is-active"]:""} ${i==="content"?je["fit-on-mobile-content"]:""} ${u.className?u.className:""}
        ${o?je["is-loading"]:""}
    `,children:E(uv,{variant:e,inversed:t,iconAfter:s,iconBefore:l,children:f})})),gi=({variant:e="16",className:t="",inversed:r=!1})=>{const n=`${r?"is-inversed":""} ${t}`;switch(e){case"24":return E("svg",{className:n,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:E("path",{d:"M12 5.5C15.58 5.5 18.5 8.42 18.5 12C18.5 15.58 15.58 18.5 12 18.5C8.42 18.5 5.5 15.58 5.5 12C5.5 8.42 8.42 5.5 12 5.5ZM12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4ZM12.75 8.44H11.25V13.06H12.75V8.44ZM12.75 14.19H11.25V15.57H12.75V14.19Z",fill:"var(--_g-icon-fill-color)"})});case"16":return E("svg",{className:n,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:E("path",{d:"M8 14C4.69 14 2 11.31 2 8C2 4.69 4.69 2 8 2C11.31 2 14 4.69 14 8C14 11.31 11.31 14 8 14ZM8 3.5C5.52 3.5 3.5 5.52 3.5 8C3.5 10.48 5.52 12.5 8 12.5C10.48 12.5 12.5 10.48 12.5 8C12.5 5.52 10.48 3.5 8 3.5ZM8.75 5H7.25V8.5H8.75V5ZM8.75 9.48H7.25V11H8.75V9.48Z",fill:"var(--_g-icon-fill-color)"})})}},Te=({name:e,variant:t="16",img:r})=>E("img",{alt:e,src:`https://www.gucci.com/design-system-assets/_public/icons/payments/png/${r||e.replace(/ /g,"")}.png`,height:t,loading:"lazy",className:"icon-payments"}),fv=({variant:e})=>E(Te,{variant:e,name:"Affirm"}),dv=({variant:e})=>E(Te,{variant:e,name:"Amazon Pay"}),pv=({variant:e})=>E(Te,{variant:e,name:"American Express"}),vv=({variant:e})=>E(Te,{variant:e,name:"Apple Pay"}),hv=({variant:e})=>E(Te,{variant:e,name:"Diners"}),gv=({variant:e})=>E(Te,{variant:e,name:"Discover"}),Ev=({variant:e})=>E(Te,{variant:e,name:"JCB"}),_v=({variant:e})=>E(Te,{variant:e,name:"Kakao Pay"}),mv=({variant:e})=>E(Te,{variant:e,name:"Klarna"}),yv=({variant:e})=>E(Te,{variant:e,name:"Mastercard"}),Iv=({variant:e})=>E(Te,{variant:e,name:"Orico"}),bv=({variant:e})=>E(Te,{variant:e,name:"Paypal"}),Ov=({variant:e})=>E(Te,{variant:e,name:"UnionPay",img:"Unionpay"}),Rv=({variant:e})=>E(Te,{variant:e,name:"Visa"}),Av="_label_16kbx_41",Tv="_description_16kbx_160",tt={"nav-button":"_nav-button_16kbx_1","is-inversed":"_is-inversed_16kbx_7","chevron-icon":"_chevron-icon_16kbx_36","is-second-level":"_is-second-level_16kbx_41",label:Av,"is-third-level":"_is-third-level_16kbx_61","title-row":"_title-row_16kbx_61","text-main-slide-in":"_text-main-slide-in_16kbx_1","text-main-slide-out":"_text-main-slide-out_16kbx_1",description:Tv,"chevron-container":"_chevron-container_16kbx_182","is-disabled":"_is-disabled_16kbx_206","text-main-slide-in-rtl":"_text-main-slide-in-rtl_16kbx_1","text-main-slide-out-rtl":"_text-main-slide-out-rtl_16kbx_1"},Nv=({id:e,level:t,text:r,description:n,shouldShowChevron:i,inversed:a,icon:o})=>Q(ne,{children:[Q("span",{className:tt["title-row"],children:[(t==="first"||t==="third")&&o,E("span",{className:tt.label,id:`label_${e}`,children:r}),i&&E("span",{className:tt["chevron-container"],children:E("span",{className:tt["chevron-icon"],children:E(Ff,{inversed:a})})})]}),n&&E("span",{className:tt.description,id:`description_${e}`,children:n})]}),Sv=({text:e,level:t="first",inversed:r=!1,disabled:n=!1,description:i,icon:a,...o})=>{const s=qa();return E("button",{...o,disabled:n,className:`
        ${tt["nav-button"]}
        ${tt[`is-${t}-level`]}
        ${n?tt["is-disabled"]:""}
        ${r?tt["is-inversed"]:""}`,"aria-labelledby":`label_${s}`,...i&&{"aria-describedby":`description_${s}`},children:E(Nv,{id:s,level:t,text:e,description:i,shouldShowChevron:t==="first"||t==="second",inversed:r,icon:a})})},Dv="_image_133mm_1",wv="_noImageAvailable_133mm_44",dn={image:Dv,"is-portrait-standard":"_is-portrait-standard_133mm_22","is-portrait-cinematic":"_is-portrait-cinematic_133mm_25","is-portrait-xl":"_is-portrait-xl_133mm_28","is-landscape-standard":"_is-landscape-standard_133mm_31","is-landscape-xl":"_is-landscape-xl_133mm_34","is-landscape-cinematic":"_is-landscape-cinematic_133mm_37","is-square":"_is-square_133mm_40",noImageAvailable:wv},Lv=({width:e=300,aspectRatio:t="portrait-standard",isNotAvailable:r=!1,isNotAvailableText:n="No Image Available",hasAnimation:i=!0,runAnimationOnlyOnce:a=!1,...o})=>{const s=ct(null),l=Vf(s,a);return E("div",{ref:s,style:{width:e},className:[dn.image,dn["is-"+t]].join(" "),"data-testid":"imageContainer",children:r?E("span",{role:"img",className:dn.noImageAvailable,children:n}):E("img",{...o,src:o.src,alt:o.alt,"data-has-animation":i,"data-animated":l})})},Cv=Nt();class $e{static root(){return new Pv}static shipping(){return new Uv}static exchanges(){return new Mv}static packaging(){return new xv}static payments(){return new Vv}sendTo(t){if(!(t instanceof Kr)){Cv.warn("Gucci Service dispensed: only tracking on GA4 is supported");return}this.sendToGA4(t)}}class Pv extends $e{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"exit",label:"main - Gucci Services"})}toString(){return"GucciServiceDismissed.Root"}}class Uv extends $e{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"exit",label:"L1 - Complimentary Shipping"})}toString(){return"GucciServiceDismissed.ComplimentaryShipping"}}class Mv extends $e{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"exit",label:"L1 - Complimentary Exchanges and Returns"})}toString(){return"GucciServiceDismissed.ComplimentaryExchangesAndReturns"}}let xv=class extends $e{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"exit",label:"L1 - Signature Packaging"})}toString(){return"GucciServiceDismissed.Packaging"}},Vv=class extends $e{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"exit",label:"L1 - Secure Payments"})}toString(){return"GucciServiceDismissed.Payments"}};const kv=Nt();class st{static shipping(){return new Fv}static exchanges(){return new Bv}static packaging(){return new Gv}static payments(){return new Hv}sendTo(t){if(!(t instanceof Kr)){kv.warn("Gucci Service requested: only tracking on GA4 is supported");return}this.sendToGA4(t)}}let Fv=class extends st{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"L1 - Complimentary Shipping",label:"main - Gucci Services"})}toString(){return"GucciServiceRequested.ComplimentaryShipping"}},Bv=class extends st{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"L1 - Complimentary Exchanges and Returns",label:"main - Gucci Services"})}toString(){return"GucciServiceRequested.ComplimentaryExchangesAndReturns"}},Gv=class extends st{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"L1 - Signature Packaging",label:"main - Gucci Services"})}toString(){return"GucciServiceRequested.Packaging"}},Hv=class extends st{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"L1 - Secure Payments",label:"main - Gucci Services"})}toString(){return"GucciServiceRequested.Payments"}};const Me=dt(vi(xf));function jv({children:e,microcopy:t}){return E(Me.Provider,{value:vi(t),children:e})}function Kv(){const e=le(Me);return E("p",{className:"col-12 is-text-light",children:e("common.generic-error")})}var pn={},vn={},hn={},Oa;function cr(){return Oa||(Oa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BLOCKS",{enumerable:!0,get:function(){return t}});var t=(function(r){return r.DOCUMENT="document",r.PARAGRAPH="paragraph",r.HEADING_1="heading-1",r.HEADING_2="heading-2",r.HEADING_3="heading-3",r.HEADING_4="heading-4",r.HEADING_5="heading-5",r.HEADING_6="heading-6",r.OL_LIST="ordered-list",r.UL_LIST="unordered-list",r.LIST_ITEM="list-item",r.HR="hr",r.QUOTE="blockquote",r.EMBEDDED_ENTRY="embedded-entry-block",r.EMBEDDED_ASSET="embedded-asset-block",r.EMBEDDED_RESOURCE="embedded-resource-block",r.TABLE="table",r.TABLE_ROW="table-row",r.TABLE_CELL="table-cell",r.TABLE_HEADER_CELL="table-header-cell",r})({})})(hn)),hn}var gn={},Ra;function Yr(){return Ra||(Ra=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"INLINES",{enumerable:!0,get:function(){return t}});var t=(function(r){return r.ASSET_HYPERLINK="asset-hyperlink",r.EMBEDDED_ENTRY="embedded-entry-inline",r.EMBEDDED_RESOURCE="embedded-resource-inline",r.ENTRY_HYPERLINK="entry-hyperlink",r.HYPERLINK="hyperlink",r.RESOURCE_HYPERLINK="resource-hyperlink",r})({})})(gn)),gn}var En={},Aa;function Ds(){return Aa||(Aa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"MARKS",{enumerable:!0,get:function(){return t}});var t=(function(r){return r.BOLD="bold",r.ITALIC="italic",r.UNDERLINE="underline",r.CODE="code",r.SUPERSCRIPT="superscript",r.SUBSCRIPT="subscript",r.STRIKETHROUGH="strikethrough",r})({})})(En)),En}var _n={},Ta;function ws(){return Ta||(Ta=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(w,S){for(var U in S)Object.defineProperty(w,U,{enumerable:!0,get:Object.getOwnPropertyDescriptor(S,U).get})}t(e,{get CONTAINERS(){return m},get HEADINGS(){return b},get LIST_ITEM_BLOCKS(){return d},get TABLE_BLOCKS(){return h},get TEXT_CONTAINERS(){return O},get TOP_LEVEL_BLOCKS(){return c},get V1_MARKS(){return P},get V1_NODE_TYPES(){return R},get VOID_BLOCKS(){return p}});var r=cr(),n=Yr(),i=Ds();function a(w,S){(S==null||S>w.length)&&(S=w.length);for(var U=0,x=new Array(S);U<S;U++)x[U]=w[U];return x}function o(w){if(Array.isArray(w))return a(w)}function s(w,S,U){return S in w?Object.defineProperty(w,S,{value:U,enumerable:!0,configurable:!0,writable:!0}):w[S]=U,w}function l(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(w){return o(w)||l(w)||v(w)||f()}function v(w,S){if(w){if(typeof w=="string")return a(w,S);var U=Object.prototype.toString.call(w).slice(8,-1);if(U==="Object"&&w.constructor&&(U=w.constructor.name),U==="Map"||U==="Set")return Array.from(U);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return a(w,S)}}var c=[r.BLOCKS.PARAGRAPH,r.BLOCKS.HEADING_1,r.BLOCKS.HEADING_2,r.BLOCKS.HEADING_3,r.BLOCKS.HEADING_4,r.BLOCKS.HEADING_5,r.BLOCKS.HEADING_6,r.BLOCKS.OL_LIST,r.BLOCKS.UL_LIST,r.BLOCKS.HR,r.BLOCKS.QUOTE,r.BLOCKS.EMBEDDED_ENTRY,r.BLOCKS.EMBEDDED_ASSET,r.BLOCKS.EMBEDDED_RESOURCE,r.BLOCKS.TABLE],d=[r.BLOCKS.PARAGRAPH,r.BLOCKS.HEADING_1,r.BLOCKS.HEADING_2,r.BLOCKS.HEADING_3,r.BLOCKS.HEADING_4,r.BLOCKS.HEADING_5,r.BLOCKS.HEADING_6,r.BLOCKS.OL_LIST,r.BLOCKS.UL_LIST,r.BLOCKS.HR,r.BLOCKS.QUOTE,r.BLOCKS.EMBEDDED_ENTRY,r.BLOCKS.EMBEDDED_ASSET,r.BLOCKS.EMBEDDED_RESOURCE],h=[r.BLOCKS.TABLE,r.BLOCKS.TABLE_ROW,r.BLOCKS.TABLE_CELL,r.BLOCKS.TABLE_HEADER_CELL],p=[r.BLOCKS.HR,r.BLOCKS.EMBEDDED_ENTRY,r.BLOCKS.EMBEDDED_ASSET,r.BLOCKS.EMBEDDED_RESOURCE],g,m=(g={},s(g,r.BLOCKS.OL_LIST,[r.BLOCKS.LIST_ITEM]),s(g,r.BLOCKS.UL_LIST,[r.BLOCKS.LIST_ITEM]),s(g,r.BLOCKS.LIST_ITEM,d),s(g,r.BLOCKS.QUOTE,[r.BLOCKS.PARAGRAPH]),s(g,r.BLOCKS.TABLE,[r.BLOCKS.TABLE_ROW]),s(g,r.BLOCKS.TABLE_ROW,[r.BLOCKS.TABLE_CELL,r.BLOCKS.TABLE_HEADER_CELL]),s(g,r.BLOCKS.TABLE_CELL,[r.BLOCKS.PARAGRAPH,r.BLOCKS.UL_LIST,r.BLOCKS.OL_LIST]),s(g,r.BLOCKS.TABLE_HEADER_CELL,[r.BLOCKS.PARAGRAPH]),g),b=[r.BLOCKS.HEADING_1,r.BLOCKS.HEADING_2,r.BLOCKS.HEADING_3,r.BLOCKS.HEADING_4,r.BLOCKS.HEADING_5,r.BLOCKS.HEADING_6],O=[r.BLOCKS.PARAGRAPH].concat(u(b)),R=[r.BLOCKS.DOCUMENT,r.BLOCKS.PARAGRAPH,r.BLOCKS.HEADING_1,r.BLOCKS.HEADING_2,r.BLOCKS.HEADING_3,r.BLOCKS.HEADING_4,r.BLOCKS.HEADING_5,r.BLOCKS.HEADING_6,r.BLOCKS.OL_LIST,r.BLOCKS.UL_LIST,r.BLOCKS.LIST_ITEM,r.BLOCKS.HR,r.BLOCKS.QUOTE,r.BLOCKS.EMBEDDED_ENTRY,r.BLOCKS.EMBEDDED_ASSET,n.INLINES.HYPERLINK,n.INLINES.ENTRY_HYPERLINK,n.INLINES.ASSET_HYPERLINK,n.INLINES.EMBEDDED_ENTRY,"text"],P=[i.MARKS.BOLD,i.MARKS.CODE,i.MARKS.ITALIC,i.MARKS.UNDERLINE]})(_n)),_n}var mn={},Na;function qv(){return Na||(Na=1,Object.defineProperty(mn,"__esModule",{value:!0})),mn}var yn={},Sa;function $v(){return Sa||(Sa=1,Object.defineProperty(yn,"__esModule",{value:!0})),yn}var In={},Da;function zv(){return Da||(Da=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"EMPTY_DOCUMENT",{enumerable:!0,get:function(){return r}});var t=cr(),r={nodeType:t.BLOCKS.DOCUMENT,data:{},content:[{nodeType:t.BLOCKS.PARAGRAPH,data:{},content:[{nodeType:"text",value:"",marks:[],data:{}}]}]}})(In)),In}var bn={},wa;function Yv(){return wa||(wa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,b){for(var O in b)Object.defineProperty(m,O,{enumerable:!0,get:Object.getOwnPropertyDescriptor(b,O).get})}t(e,{get isBlock(){return v},get isEmptyParagraph(){return d},get isInline(){return u},get isText(){return c},get stripEmptyTrailingParagraphFromDocument(){return g}});var r=cr(),n=Yr();function i(m,b,O){return b in m?Object.defineProperty(m,b,{value:O,enumerable:!0,configurable:!0,writable:!0}):m[b]=O,m}function a(m){for(var b=1;b<arguments.length;b++){var O=arguments[b]!=null?arguments[b]:{},R=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(O).filter(function(P){return Object.getOwnPropertyDescriptor(O,P).enumerable}))),R.forEach(function(P){i(m,P,O[P])})}return m}function o(m,b){var O=Object.keys(m);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(m);O.push.apply(O,R)}return O}function s(m,b){return b=b??{},Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(b)):o(Object(b)).forEach(function(O){Object.defineProperty(m,O,Object.getOwnPropertyDescriptor(b,O))}),m}function l(m){"@swc/helpers - typeof";return m&&typeof Symbol<"u"&&m.constructor===Symbol?"symbol":typeof m}function f(m,b){var O=!0,R=!1,P=void 0;try{for(var w=Object.keys(m)[Symbol.iterator](),S;!(O=(S=w.next()).done);O=!0){var U=S.value;if(b===m[U])return!0}}catch(x){R=!0,P=x}finally{try{!O&&w.return!=null&&w.return()}finally{if(R)throw P}}return!1}function u(m){return f(n.INLINES,m.nodeType)}function v(m){return f(r.BLOCKS,m.nodeType)}function c(m){return m.nodeType==="text"}function d(m){if(m.nodeType!==r.BLOCKS.PARAGRAPH||m.content.length!==1)return!1;var b=m.content[0];return b.nodeType==="text"&&b.value===""}function h(m){return m!=null&&(typeof m>"u"?"undefined":l(m))==="object"&&"content"in m&&Array.isArray(m.content)}var p=2;function g(m){if(!h(m)||m.content.length<p)return m;var b=m.content[m.content.length-1];return d(b)?s(a({},m),{content:m.content.slice(0,-1)}):m}})(bn)),bn}var On={},Rn={},An,La;function Ls(){return La||(La=1,An=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}),An}var Tn={},Ca;function Wv(){return Ca||(Ca=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,p){for(var g in p)Object.defineProperty(h,g,{enumerable:!0,get:Object.getOwnPropertyDescriptor(p,g).get})}t(e,{get enumError(){return v},get maxSizeError(){return u},get minSizeError(){return f},get requiredPropertyError(){return d},get typeMismatchError(){return l},get unknownPropertyError(){return c}});function r(h,p){(p==null||p>h.length)&&(p=h.length);for(var g=0,m=new Array(p);g<p;g++)m[g]=h[g];return m}function n(h){if(Array.isArray(h))return r(h)}function i(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(h){return n(h)||i(h)||s(h)||a()}function s(h,p){if(h){if(typeof h=="string")return r(h,p);var g=Object.prototype.toString.call(h).slice(8,-1);if(g==="Object"&&h.constructor&&(g=h.constructor.name),g==="Map"||g==="Set")return Array.from(g);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return r(h,p)}}var l=function(h){var p=h.path,g=h.property,m=h.typeName,b=h.value;return{details:'The type of "'.concat(g,'" is incorrect, expected type: ').concat(m),name:"type",path:p.toArray(),type:m,value:b}},f=function(h){var p=h.min,g=h.value,m=h.path;return{name:"size",min:p,path:m.toArray(),details:"Size must be at least ".concat(p),value:g}},u=function(h){var p=h.max,g=h.value,m=h.path;return{name:"size",max:p,path:m.toArray(),details:"Size must be at most ".concat(p),value:g}},v=function(h){var p=h.expected,g=h.value,m=h.path;return{details:"Value must be one of expected values",name:"in",expected:o(p).sort(),path:m.toArray(),value:g}},c=function(h){var p=h.property,g=h.path;return{details:'The property "'.concat(p,'" is not expected'),name:"unexpected",path:g.toArray()}},d=function(h){var p=h.property,g=h.path;return{details:'The property "'.concat(p,'" is required here'),name:"required",path:g.toArray()}}})(Tn)),Tn}var Pa;function Ei(){return Pa||(Pa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ObjectAssertion",{enumerable:!0,get:function(){return h}});var t=f(Ls()),r=Wv();function n(p,g){(g==null||g>p.length)&&(g=p.length);for(var m=0,b=new Array(g);m<g;m++)b[m]=p[m];return b}function i(p){if(Array.isArray(p))return n(p)}function a(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function o(p,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function s(p,g,m){return g&&o(p.prototype,g),p}function l(p,g,m){return g in p?Object.defineProperty(p,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[g]=m,p}function f(p){return p&&p.__esModule?p:{default:p}}function u(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(p){return i(p)||u(p)||d(p)||v()}function d(p,g){if(p){if(typeof p=="string")return n(p,g);var m=Object.prototype.toString.call(p).slice(8,-1);if(m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set")return Array.from(m);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return n(p,g)}}var h=(function(){function p(g,m){var b=this,O=this;a(this,p),l(this,"obj",void 0),l(this,"path",void 0),l(this,"_errors",void 0),l(this,"catch",void 0),l(this,"exists",void 0),l(this,"object",void 0),l(this,"string",void 0),l(this,"number",void 0),l(this,"array",void 0),l(this,"enum",void 0),l(this,"empty",void 0),l(this,"minLength",void 0),l(this,"noAdditionalProperties",void 0),l(this,"each",void 0),this.obj=g,this.path=m,this._errors=[],this.catch=function(){for(var R=arguments.length,P=new Array(R),w=0;w<R;w++)P[w]=arguments[w];var S;(S=O._errors).push.apply(S,c(P))},this.exists=function(R){return R in b.obj?!0:(b.catch((0,r.requiredPropertyError)({property:R,path:b.path.of(R)})),!1)},this.object=function(R){var P=R?b.obj[R]:b.obj;if(R&&!b.exists(R))return!1;if((0,t.default)(P))return!0;var w=R?b.path.of(R):b.path,S,U=(S=R??b.path.last())!==null&&S!==void 0?S:"value";return b.catch((0,r.typeMismatchError)({typeName:"Object",property:U,path:w,value:P})),!1},this.string=function(R){var P=b.obj[R];return R&&!b.exists(R)?!1:typeof P=="string"?!0:(b.catch((0,r.typeMismatchError)({typeName:"String",property:R,path:b.path.of(R),value:P})),!1)},this.number=function(R,P){var w=b.obj[R];return P&&!(R in b.obj)?!0:b.exists(R)?typeof w=="number"&&!Number.isNaN(w)?!0:(b.catch((0,r.typeMismatchError)({typeName:"Number",property:R,path:b.path.of(R),value:w})),!1):!1},this.array=function(R){var P=b.obj[R];return R&&!b.exists(R)?!1:Array.isArray(P)?!0:(b.catch((0,r.typeMismatchError)({typeName:"Array",property:R,path:b.path.of(R),value:P})),!1)},this.enum=function(R,P){var w=b.obj[R];return typeof w=="string"&&P.includes(w)?!0:(b.catch((0,r.enumError)({expected:P,value:w,path:b.path.of(R)})),!1)},this.empty=function(R){if(!b.array(R))return!1;var P=b.obj[R];return P.length===0?!0:(b.catch((0,r.maxSizeError)({max:0,value:P,path:b.path.of(R)})),!1)},this.minLength=function(R,P){if(!b.array(R))return!1;var w=b.obj[R];return w.length>=P?!0:(b.catch((0,r.minSizeError)({min:P,value:w,path:b.path.of(R)})),!1)},this.noAdditionalProperties=function(R){var P=Object.keys(b.obj).sort().filter(function(w){return!R.includes(w)});return P.forEach(function(w){return b.catch((0,r.unknownPropertyError)({property:w,path:b.path.of(w)}))}),P.length===0},this.each=function(R,P){if(b.array(R)){var w=b.obj[R],S=!1;w.forEach(function(U,x){if(!S){var X=P(U,b.path.of(R).of(x));X.length>0&&(S=!0),b.catch.apply(b,c(X))}})}}}return s(p,[{key:"errors",get:function(){var m=this,b=function(O){return JSON.stringify({details:O.details,path:O.path})};return this._errors.filter(function(O,R){return m._errors.findIndex(function(P){return b(O)===b(P)})===R})}}]),p})()})(Rn)),Rn}var Nn={},Ua;function Xv(){return Ua||(Ua=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,I){for(var L in I)Object.defineProperty(_,L,{enumerable:!0,get:Object.getOwnPropertyDescriptor(I,L).get})}t(e,{get EntityLinkAssertion(){return S},get HyperLinkAssertion(){return U},get NodeAssertion(){return w},get VOID_CONTENT(){return P},get assert(){return x},get assertLink(){return X}});var r=Ei();function n(_,I){(I==null||I>_.length)&&(I=_.length);for(var L=0,G=new Array(I);L<I;L++)G[L]=_[L];return G}function i(_){if(Array.isArray(_))return n(_)}function a(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function o(_,I,L){return I=v(I),p(_,R()?Reflect.construct(I,L||[],v(_).constructor):I.apply(_,L))}function s(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")}function l(_,I){for(var L=0;L<I.length;L++){var G=I[L];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(_,G.key,G)}}function f(_,I,L){return I&&l(_.prototype,I),_}function u(_,I,L){return I in _?Object.defineProperty(_,I,{value:L,enumerable:!0,configurable:!0,writable:!0}):_[I]=L,_}function v(_){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},v(_)}function c(_,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(I&&I.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),I&&g(_,I)}function d(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(_,I){return I&&(b(I)==="object"||typeof I=="function")?I:a(_)}function g(_,I){return g=Object.setPrototypeOf||function(G,y){return G.__proto__=y,G},g(_,I)}function m(_){return i(_)||d(_)||O(_)||h()}function b(_){"@swc/helpers - typeof";return _&&typeof Symbol<"u"&&_.constructor===Symbol?"symbol":typeof _}function O(_,I){if(_){if(typeof _=="string")return n(_,I);var L=Object.prototype.toString.call(_).slice(8,-1);if(L==="Object"&&_.constructor&&(L=_.constructor.name),L==="Map"||L==="Set")return Array.from(L);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return n(_,I)}}function R(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R=function(){return!!_})()}var P=[],w=(function(){function _(I,L){s(this,_),u(this,"contentRule",void 0),u(this,"validateData",void 0),this.contentRule=I,this.validateData=L}return f(_,[{key:"assert",value:function(L,G){var y=new r.ObjectAssertion(L,G);if(!y.object())return y.errors;y.noAdditionalProperties(["nodeType","data","content"]);var D=Array.isArray(this.contentRule)?{nodeTypes:this.contentRule}:this.contentRule(L,G),C=D.nodeTypes,F=D.min,V=F===void 0?0:F;if(C.length===0&&V>0)throw new Error("Invalid content rule. Cannot have enforce a 'min' of ".concat(V," with no nodeTypes"));if(y.minLength("content",V),C.length===0?y.empty("content"):y.each("content",function(ie,ce){var Ce=new r.ObjectAssertion(ie,ce);return Ce.object()&&Ce.enum("nodeType",C),Ce.errors}),y.object("data")){var z,te,q,ae,k=(ae=(te=(q=this).validateData)===null||te===void 0?void 0:te.call(q,L.data,G.of("data")))!==null&&ae!==void 0?ae:[];(z=y).catch.apply(z,m(k))}return y.errors}}]),_})(),S=(function(_){c(I,_);function I(L,G){s(this,I);var y;return y=o(this,I,[G,function(D,C){return a(y).assertLink(D,C)}]),u(y,"linkType",void 0),u(y,"type",void 0),u(y,"assertLink",void 0),y.linkType=L,y.assertLink=function(D,C){var F=new r.ObjectAssertion(D,C);if(F.object("target")){var V,z=new r.ObjectAssertion(D.target.sys,C.of("target").of("sys"));z.object()&&(z.enum("type",[y.type]),z.enum("linkType",[y.linkType]),y.type==="Link"?(z.string("id"),z.noAdditionalProperties(["type","linkType","id"])):y.type==="ResourceLink"&&(z.string("urn"),z.noAdditionalProperties(["type","linkType","urn"]))),(V=F).catch.apply(V,m(z.errors))}return F.noAdditionalProperties(["target"]),F.errors},y.type=y.linkType.startsWith("Contentful:")?"ResourceLink":"Link",y}return I})(w),U=(function(_){c(I,_);function I(){s(this,I);var L;return L=o(this,I,[["text"],function(G,y){return a(L).assertLink(G,y)}]),u(L,"assertLink",function(G,y){var D=new r.ObjectAssertion(G,y);return D.string("uri"),D.noAdditionalProperties(["uri"]),D.errors}),L}return I})(w),x=function(_,I){return new w(_,I)},X=function(_,I){return new S(_,I)}})(Nn)),Nn}var Sn={},Ma;function Jv(){return Ma||(Ma=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return f}});function t(u,v){(v==null||v>u.length)&&(v=u.length);for(var c=0,d=new Array(v);c<v;c++)d[c]=u[c];return d}function r(u){if(Array.isArray(u))return t(u)}function n(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}function i(u,v,c){return v in u?Object.defineProperty(u,v,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[v]=c,u}function a(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(u){return r(u)||a(u)||l(u)||o()}function l(u,v){if(u){if(typeof u=="string")return t(u,v);var c=Object.prototype.toString.call(u).slice(8,-1);if(c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set")return Array.from(c);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return t(u,v)}}var f=function u(){var v=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n(this,u),i(this,"path",void 0),i(this,"of",void 0),i(this,"isRoot",void 0),i(this,"last",void 0),i(this,"toArray",void 0),this.path=c,this.of=function(d){return new u(s(v.path).concat([d]))},this.isRoot=function(){return v.path.length===0},this.last=function(){return v.path[v.path.length-1]},this.toArray=function(){return v.path}}})(Sn)),Sn}var Dn={},xa;function Qv(){return xa||(xa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"assertText",{enumerable:!0,get:function(){return r}});var t=Ei();function r(n,i){var a=new t.ObjectAssertion(n,i);return a.object()&&(a.noAdditionalProperties(["nodeType","data","value","marks"]),a.object("data"),a.each("marks",function(o,s){var l=new t.ObjectAssertion(o,s);return l.object()&&l.string("type"),l.errors}),a.string("value")),a.errors}})(Dn)),Dn}var Va;function Zv(){return Va||(Va=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"validateRichTextDocument",{enumerable:!0,get:function(){return w}});var t=cr(),r=Yr(),n=ws(),i=Ei(),a=Xv(),o=Jv(),s=Qv();function l(S,U){(U==null||U>S.length)&&(U=S.length);for(var x=0,X=new Array(U);x<U;x++)X[x]=S[x];return X}function f(S){if(Array.isArray(S))return l(S)}function u(S,U,x){return U in S?Object.defineProperty(S,U,{value:x,enumerable:!0,configurable:!0,writable:!0}):S[U]=x,S}function v(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(S){return f(S)||v(S)||h(S)||c()}function h(S,U){if(S){if(typeof S=="string")return l(S,U);var x=Object.prototype.toString.call(S).slice(8,-1);if(x==="Object"&&S.constructor&&(x=S.constructor.name),x==="Map"||x==="Set")return Array.from(x);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return l(S,U)}}var p=(0,a.assert)(d(Object.values(r.INLINES)).concat(["text"]).sort()),g=(0,a.assert)([t.BLOCKS.LIST_ITEM]),m=(0,a.assertLink)("Entry",a.VOID_CONTENT),b=(0,a.assert)(function(){return{nodeTypes:[t.BLOCKS.PARAGRAPH],min:1}},function(S,U){var x=new i.ObjectAssertion(S,U);return x.noAdditionalProperties(["colspan","rowspan"]),x.number("colspan",!0),x.number("rowspan",!0),x.errors}),O,R=(O={},u(O,t.BLOCKS.DOCUMENT,(0,a.assert)(n.TOP_LEVEL_BLOCKS)),u(O,t.BLOCKS.PARAGRAPH,p),u(O,t.BLOCKS.HEADING_1,p),u(O,t.BLOCKS.HEADING_2,p),u(O,t.BLOCKS.HEADING_3,p),u(O,t.BLOCKS.HEADING_4,p),u(O,t.BLOCKS.HEADING_5,p),u(O,t.BLOCKS.HEADING_6,p),u(O,t.BLOCKS.QUOTE,(0,a.assert)(n.CONTAINERS[t.BLOCKS.QUOTE])),u(O,t.BLOCKS.EMBEDDED_ENTRY,m),u(O,t.BLOCKS.EMBEDDED_ASSET,(0,a.assertLink)("Asset",a.VOID_CONTENT)),u(O,t.BLOCKS.EMBEDDED_RESOURCE,(0,a.assertLink)("Contentful:Entry",a.VOID_CONTENT)),u(O,t.BLOCKS.HR,(0,a.assert)(a.VOID_CONTENT)),u(O,t.BLOCKS.OL_LIST,g),u(O,t.BLOCKS.UL_LIST,g),u(O,t.BLOCKS.LIST_ITEM,(0,a.assert)(d(n.LIST_ITEM_BLOCKS).sort())),u(O,t.BLOCKS.TABLE,(0,a.assert)(function(){return{nodeTypes:[t.BLOCKS.TABLE_ROW],min:1}})),u(O,t.BLOCKS.TABLE_ROW,(0,a.assert)(function(){return{nodeTypes:[t.BLOCKS.TABLE_CELL,t.BLOCKS.TABLE_HEADER_CELL],min:1}})),u(O,t.BLOCKS.TABLE_CELL,b),u(O,t.BLOCKS.TABLE_HEADER_CELL,b),u(O,r.INLINES.HYPERLINK,new a.HyperLinkAssertion),u(O,r.INLINES.EMBEDDED_ENTRY,m),u(O,r.INLINES.EMBEDDED_RESOURCE,(0,a.assertLink)("Contentful:Entry",a.VOID_CONTENT)),u(O,r.INLINES.ENTRY_HYPERLINK,(0,a.assertLink)("Entry",["text"])),u(O,r.INLINES.ASSET_HYPERLINK,(0,a.assertLink)("Asset",["text"])),u(O,r.INLINES.RESOURCE_HYPERLINK,(0,a.assertLink)("Contentful:Entry",["text"])),O);function P(S,U){if(S.nodeType==="text")return(0,s.assertText)(S,U);var x=R[S.nodeType].assert(S,U);if(x.length>0)return x;var X=new i.ObjectAssertion(S,U);return X.each("content",function(_,I){return P(_,I)}),X.errors}var w=function(S){var U=new o.Path,x=new i.ObjectAssertion(S,U);return x.object()&&x.enum("nodeType",[t.BLOCKS.DOCUMENT]),x.errors.length>0?x.errors:P(S,U)}})(On)),On}var ka;function eh(){return ka||(ka=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,c){for(var d in c)Object.defineProperty(v,d,{enumerable:!0,get:Object.getOwnPropertyDescriptor(c,d).get})}t(e,{get BLOCKS(){return r.BLOCKS},get EMPTY_DOCUMENT(){return a.EMPTY_DOCUMENT},get INLINES(){return n.INLINES},get MARKS(){return i.MARKS},get helpers(){return o},get validateRichTextDocument(){return s.validateRichTextDocument}});var r=cr(),n=Yr(),i=Ds();l(ws(),e),l(qv(),e),l($v(),e);var a=zv(),o=u(Yv()),s=Zv();function l(v,c){return Object.keys(v).forEach(function(d){d!=="default"&&!Object.prototype.hasOwnProperty.call(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:function(){return v[d]}})}),v}function f(v){if(typeof WeakMap!="function")return null;var c=new WeakMap,d=new WeakMap;return(f=function(h){return h?d:c})(v)}function u(v,c){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var d=f(c);if(d&&d.has(v))return d.get(v);var h={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in v)if(g!=="default"&&Object.prototype.hasOwnProperty.call(v,g)){var m=p?Object.getOwnPropertyDescriptor(v,g):null;m&&(m.get||m.set)?Object.defineProperty(h,g,m):h[g]=v[g]}return h.default=v,d&&d.set(v,h),h}})(vn)),vn}var Fa;function th(){if(Fa)return pn;Fa=1;var e=ii,t=eh();function r(u,v){return e.isValidElement(u)&&u.key===null?e.cloneElement(u,{key:v}):u}function n(u,v){return u.map((c,d)=>r(i(c,v),d))}function i(u,v){const{renderNode:c,renderMark:d,renderText:h,preserveWhitespace:p}=v;if(t.helpers.isText(u)){let g=h?h(u.value):u.value;if(p&&!h){g=g.replace(/ {2,}/g,O=>"".repeat(O.length));const m=g.split(`
`),b=[];m.forEach((O,R)=>{b.push(O),R!==m.length-1&&b.push(e.createElement("br",null))}),g=b}return u.marks.reduce((m,b)=>d[b.type]?d[b.type](m):m,g)}else{const g=n(u.content,v);return!u.nodeType||!c[u.nodeType]?e.createElement(e.Fragment,null,g):c[u.nodeType](u,g)}}const a={[t.BLOCKS.DOCUMENT]:(u,v)=>v,[t.BLOCKS.PARAGRAPH]:(u,v)=>e.createElement("p",null,v),[t.BLOCKS.HEADING_1]:(u,v)=>e.createElement("h1",null,v),[t.BLOCKS.HEADING_2]:(u,v)=>e.createElement("h2",null,v),[t.BLOCKS.HEADING_3]:(u,v)=>e.createElement("h3",null,v),[t.BLOCKS.HEADING_4]:(u,v)=>e.createElement("h4",null,v),[t.BLOCKS.HEADING_5]:(u,v)=>e.createElement("h5",null,v),[t.BLOCKS.HEADING_6]:(u,v)=>e.createElement("h6",null,v),[t.BLOCKS.EMBEDDED_ENTRY]:(u,v)=>e.createElement("div",null,v),[t.BLOCKS.EMBEDDED_RESOURCE]:(u,v)=>e.createElement("div",null,v),[t.BLOCKS.UL_LIST]:(u,v)=>e.createElement("ul",null,v),[t.BLOCKS.OL_LIST]:(u,v)=>e.createElement("ol",null,v),[t.BLOCKS.LIST_ITEM]:(u,v)=>e.createElement("li",null,v),[t.BLOCKS.QUOTE]:(u,v)=>e.createElement("blockquote",null,v),[t.BLOCKS.HR]:()=>e.createElement("hr",null),[t.BLOCKS.TABLE]:(u,v)=>e.createElement("table",null,e.createElement("tbody",null,v)),[t.BLOCKS.TABLE_ROW]:(u,v)=>e.createElement("tr",null,v),[t.BLOCKS.TABLE_HEADER_CELL]:(u,v)=>e.createElement("th",null,v),[t.BLOCKS.TABLE_CELL]:(u,v)=>e.createElement("td",null,v),[t.INLINES.ASSET_HYPERLINK]:u=>s(t.INLINES.ASSET_HYPERLINK,u),[t.INLINES.ENTRY_HYPERLINK]:u=>s(t.INLINES.ENTRY_HYPERLINK,u),[t.INLINES.RESOURCE_HYPERLINK]:u=>l(t.INLINES.RESOURCE_HYPERLINK,u),[t.INLINES.EMBEDDED_ENTRY]:u=>s(t.INLINES.EMBEDDED_ENTRY,u),[t.INLINES.EMBEDDED_RESOURCE]:(u,v)=>l(t.INLINES.EMBEDDED_RESOURCE,u),[t.INLINES.HYPERLINK]:(u,v)=>e.createElement("a",{href:u.data.uri},v)},o={[t.MARKS.BOLD]:u=>e.createElement("b",null,u),[t.MARKS.ITALIC]:u=>e.createElement("i",null,u),[t.MARKS.UNDERLINE]:u=>e.createElement("u",null,u),[t.MARKS.CODE]:u=>e.createElement("code",null,u),[t.MARKS.SUPERSCRIPT]:u=>e.createElement("sup",null,u),[t.MARKS.SUBSCRIPT]:u=>e.createElement("sub",null,u),[t.MARKS.STRIKETHROUGH]:u=>e.createElement("s",null,u)};function s(u,v){return e.createElement("span",{key:v.data.target.sys.id},"type: ",v.nodeType," id: ",v.data.target.sys.id)}function l(u,v){return e.createElement("span",{key:v.data.target.sys.urn},"type: ",v.nodeType," urn: ",v.data.target.sys.urn)}function f(u,v={}){if(!u)return null;let c=u;return v.stripEmptyTrailingParagraph&&(c=t.helpers.stripEmptyTrailingParagraphFromDocument(u)),i(c,{renderNode:{...a,...v.renderNode},renderMark:{...o,...v.renderMark},renderText:v.renderText,preserveWhitespace:v.preserveWhitespace})}return pn.documentToReactComponents=f,pn}var Bt=th(),N=(function(e){return e.DOCUMENT="document",e.PARAGRAPH="paragraph",e.HEADING_1="heading-1",e.HEADING_2="heading-2",e.HEADING_3="heading-3",e.HEADING_4="heading-4",e.HEADING_5="heading-5",e.HEADING_6="heading-6",e.OL_LIST="ordered-list",e.UL_LIST="unordered-list",e.LIST_ITEM="list-item",e.HR="hr",e.QUOTE="blockquote",e.EMBEDDED_ENTRY="embedded-entry-block",e.EMBEDDED_ASSET="embedded-asset-block",e.EMBEDDED_RESOURCE="embedded-resource-block",e.TABLE="table",e.TABLE_ROW="table-row",e.TABLE_CELL="table-cell",e.TABLE_HEADER_CELL="table-header-cell",e})({}),Pe=(function(e){return e.ASSET_HYPERLINK="asset-hyperlink",e.EMBEDDED_ENTRY="embedded-entry-inline",e.EMBEDDED_RESOURCE="embedded-resource-inline",e.ENTRY_HYPERLINK="entry-hyperlink",e.HYPERLINK="hyperlink",e.RESOURCE_HYPERLINK="resource-hyperlink",e})({});function Qn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rh(e){if(Array.isArray(e))return Qn(e)}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ih(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ah(e){return rh(e)||nh(e)||oh(e)||ih()}function oh(e,t){if(e){if(typeof e=="string")return Qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qn(e,t)}}var sh=[N.PARAGRAPH,N.HEADING_1,N.HEADING_2,N.HEADING_3,N.HEADING_4,N.HEADING_5,N.HEADING_6,N.OL_LIST,N.UL_LIST,N.HR,N.QUOTE,N.EMBEDDED_ENTRY,N.EMBEDDED_ASSET,N.EMBEDDED_RESOURCE,N.TABLE],Cs=[N.PARAGRAPH,N.HEADING_1,N.HEADING_2,N.HEADING_3,N.HEADING_4,N.HEADING_5,N.HEADING_6,N.OL_LIST,N.UL_LIST,N.HR,N.QUOTE,N.EMBEDDED_ENTRY,N.EMBEDDED_ASSET,N.EMBEDDED_RESOURCE];N.TABLE,N.TABLE_ROW,N.TABLE_CELL,N.TABLE_HEADER_CELL;N.HR,N.EMBEDDED_ENTRY,N.EMBEDDED_ASSET,N.EMBEDDED_RESOURCE;var He,uh=(He={},nt(He,N.OL_LIST,[N.LIST_ITEM]),nt(He,N.UL_LIST,[N.LIST_ITEM]),nt(He,N.LIST_ITEM,Cs),nt(He,N.QUOTE,[N.PARAGRAPH]),nt(He,N.TABLE,[N.TABLE_ROW]),nt(He,N.TABLE_ROW,[N.TABLE_CELL,N.TABLE_HEADER_CELL]),nt(He,N.TABLE_CELL,[N.PARAGRAPH,N.UL_LIST,N.OL_LIST]),nt(He,N.TABLE_HEADER_CELL,[N.PARAGRAPH]),He),lh=[N.HEADING_1,N.HEADING_2,N.HEADING_3,N.HEADING_4,N.HEADING_5,N.HEADING_6];[N.PARAGRAPH].concat(ah(lh));N.DOCUMENT,N.PARAGRAPH,N.HEADING_1,N.HEADING_2,N.HEADING_3,N.HEADING_4,N.HEADING_5,N.HEADING_6,N.OL_LIST,N.UL_LIST,N.LIST_ITEM,N.HR,N.QUOTE,N.EMBEDDED_ENTRY,N.EMBEDDED_ASSET,Pe.HYPERLINK,Pe.ENTRY_HYPERLINK,Pe.ASSET_HYPERLINK,Pe.EMBEDDED_ENTRY;N.DOCUMENT,N.PARAGRAPH;var ch=Ls();const fh=ai(ch);function Zn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dh(e){if(Array.isArray(e))return Zn(e)}function ph(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vh(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hh(e){return dh(e)||ph(e)||gh(e)||vh()}function gh(e,t){if(e){if(typeof e=="string")return Zn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zn(e,t)}}var Or=function(e){var t=e.path,r=e.property,n=e.typeName,i=e.value;return{details:'The type of "'.concat(r,'" is incorrect, expected type: ').concat(n),name:"type",path:t.toArray(),type:n,value:i}},Eh=function(e){var t=e.min,r=e.value,n=e.path;return{name:"size",min:t,path:n.toArray(),details:"Size must be at least ".concat(t),value:r}},_h=function(e){var t=e.max,r=e.value,n=e.path;return{name:"size",max:t,path:n.toArray(),details:"Size must be at most ".concat(t),value:r}},mh=function(e){var t=e.expected,r=e.value,n=e.path;return{details:"Value must be one of expected values",name:"in",expected:hh(t).sort(),path:n.toArray(),value:r}},yh=function(e){var t=e.property,r=e.path;return{details:'The property "'.concat(t,'" is not expected'),name:"unexpected",path:r.toArray()}},Ih=function(e){var t=e.property,r=e.path;return{details:'The property "'.concat(t,'" is required here'),name:"required",path:r.toArray()}};function ei(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bh(e){if(Array.isArray(e))return ei(e)}function Oh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ah(e,t,r){return t&&Rh(e.prototype,t),e}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Th(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nh(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ba(e){return bh(e)||Th(e)||Sh(e)||Nh()}function Sh(e,t){if(e){if(typeof e=="string")return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}}var Ft=(function(){function e(t,r){var n=this,i=this;Oh(this,e),Oe(this,"obj",void 0),Oe(this,"path",void 0),Oe(this,"_errors",void 0),Oe(this,"catch",void 0),Oe(this,"exists",void 0),Oe(this,"object",void 0),Oe(this,"string",void 0),Oe(this,"number",void 0),Oe(this,"array",void 0),Oe(this,"enum",void 0),Oe(this,"empty",void 0),Oe(this,"minLength",void 0),Oe(this,"noAdditionalProperties",void 0),Oe(this,"each",void 0),this.obj=t,this.path=r,this._errors=[],this.catch=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l;(l=i._errors).push.apply(l,Ba(o))},this.exists=function(a){return a in n.obj?!0:(n.catch(Ih({property:a,path:n.path.of(a)})),!1)},this.object=function(a){var o=a?n.obj[a]:n.obj;if(a&&!n.exists(a))return!1;if(fh(o))return!0;var s=a?n.path.of(a):n.path,l,f=(l=a??n.path.last())!==null&&l!==void 0?l:"value";return n.catch(Or({typeName:"Object",property:f,path:s,value:o})),!1},this.string=function(a){var o=n.obj[a];return a&&!n.exists(a)?!1:typeof o=="string"?!0:(n.catch(Or({typeName:"String",property:a,path:n.path.of(a),value:o})),!1)},this.number=function(a,o){var s=n.obj[a];return o&&!(a in n.obj)?!0:n.exists(a)?typeof s=="number"&&!Number.isNaN(s)?!0:(n.catch(Or({typeName:"Number",property:a,path:n.path.of(a),value:s})),!1):!1},this.array=function(a){var o=n.obj[a];return a&&!n.exists(a)?!1:Array.isArray(o)?!0:(n.catch(Or({typeName:"Array",property:a,path:n.path.of(a),value:o})),!1)},this.enum=function(a,o){var s=n.obj[a];return typeof s=="string"&&o.includes(s)?!0:(n.catch(mh({expected:o,value:s,path:n.path.of(a)})),!1)},this.empty=function(a){if(!n.array(a))return!1;var o=n.obj[a];return o.length===0?!0:(n.catch(_h({max:0,value:o,path:n.path.of(a)})),!1)},this.minLength=function(a,o){if(!n.array(a))return!1;var s=n.obj[a];return s.length>=o?!0:(n.catch(Eh({min:o,value:s,path:n.path.of(a)})),!1)},this.noAdditionalProperties=function(a){var o=Object.keys(n.obj).sort().filter(function(s){return!a.includes(s)});return o.forEach(function(s){return n.catch(yh({property:s,path:n.path.of(s)}))}),o.length===0},this.each=function(a,o){if(n.array(a)){var s=n.obj[a],l=!1;s.forEach(function(f,u){if(!l){var v=o(f,n.path.of(a).of(u));v.length>0&&(l=!0),n.catch.apply(n,Ba(v))}})}}}return Ah(e,[{key:"errors",get:function(){var r=this,n=function(i){return JSON.stringify({details:i.details,path:i.path})};return this._errors.filter(function(i,a){return r._errors.findIndex(function(o){return n(i)===n(o)})===a})}}]),e})();function ti(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dh(e){if(Array.isArray(e))return ti(e)}function _i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ps(e,t,r){return t=Gr(t),Uh(e,xs()?Reflect.construct(t,r||[],Gr(e).constructor):t.apply(e,r))}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lh(e,t,r){return t&&wh(e.prototype,t),e}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gr(e){return Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Gr(e)}function Us(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}function Ch(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ph(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uh(e,t){return t&&(Mh(t)==="object"||typeof t=="function")?t:_i(e)}function ri(e,t){return ri=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ri(e,t)}function Ms(e){return Dh(e)||Ch(e)||xh(e)||Ph()}function Mh(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function xh(e,t){if(e){if(typeof e=="string")return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}}function xs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xs=function(){return!!e})()}var rr=[],yi=(function(){function e(t,r){mi(this,e),xt(this,"contentRule",void 0),xt(this,"validateData",void 0),this.contentRule=t,this.validateData=r}return Lh(e,[{key:"assert",value:function(r,n){var i=new Ft(r,n);if(!i.object())return i.errors;i.noAdditionalProperties(["nodeType","data","content"]);var a=Array.isArray(this.contentRule)?{nodeTypes:this.contentRule}:this.contentRule(r,n),o=a.nodeTypes,s=a.min,l=s===void 0?0:s;if(o.length===0&&l>0)throw new Error("Invalid content rule. Cannot have enforce a 'min' of ".concat(l," with no nodeTypes"));if(i.minLength("content",l),o.length===0?i.empty("content"):i.each("content",function(h,p){var g=new Ft(h,p);return g.object()&&g.enum("nodeType",o),g.errors}),i.object("data")){var f,u,v,c,d=(c=(u=(v=this).validateData)===null||u===void 0?void 0:u.call(v,r.data,n.of("data")))!==null&&c!==void 0?c:[];(f=i).catch.apply(f,Ms(d))}return i.errors}}]),e})(),Vh=(function(e){Us(t,e);function t(r,n){mi(this,t);var i;return i=Ps(this,t,[n,function(a,o){return _i(i).assertLink(a,o)}]),xt(i,"linkType",void 0),xt(i,"type",void 0),xt(i,"assertLink",void 0),i.linkType=r,i.assertLink=function(a,o){var s=new Ft(a,o);if(s.object("target")){var l,f=new Ft(a.target.sys,o.of("target").of("sys"));f.object()&&(f.enum("type",[i.type]),f.enum("linkType",[i.linkType]),i.type==="Link"?(f.string("id"),f.noAdditionalProperties(["type","linkType","id"])):i.type==="ResourceLink"&&(f.string("urn"),f.noAdditionalProperties(["type","linkType","urn"]))),(l=s).catch.apply(l,Ms(f.errors))}return s.noAdditionalProperties(["target"]),s.errors},i.type=i.linkType.startsWith("Contentful:")?"ResourceLink":"Link",i}return t})(yi),kh=(function(e){Us(t,e);function t(){mi(this,t);var r;return r=Ps(this,t,[["text"],function(n,i){return _i(r).assertLink(n,i)}]),xt(r,"assertLink",function(n,i){var a=new Ft(n,i);return a.string("uri"),a.noAdditionalProperties(["uri"]),a.errors}),r}return t})(yi),et=function(e,t){return new yi(e,t)},_t=function(e,t){return new Vh(e,t)};function ni(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fh(e){if(Array.isArray(e))return ni(e)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gh(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vs(e){return Fh(e)||Bh(e)||Hh(e)||Gh()}function Hh(e,t){if(e){if(typeof e=="string")return ni(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ni(e,t)}}var ht=et(Vs(Object.values(Pe)).concat(["text"]).sort()),Ga=et([N.LIST_ITEM]),Ha=_t("Entry",rr),ja=et(function(){return{nodeTypes:[N.PARAGRAPH],min:1}},function(e,t){var r=new Ft(e,t);return r.noAdditionalProperties(["colspan","rowspan"]),r.number("colspan",!0),r.number("rowspan",!0),r.errors}),re;re={},se(re,N.DOCUMENT,et(sh)),se(re,N.PARAGRAPH,ht),se(re,N.HEADING_1,ht),se(re,N.HEADING_2,ht),se(re,N.HEADING_3,ht),se(re,N.HEADING_4,ht),se(re,N.HEADING_5,ht),se(re,N.HEADING_6,ht),se(re,N.QUOTE,et(uh[N.QUOTE])),se(re,N.EMBEDDED_ENTRY,Ha),se(re,N.EMBEDDED_ASSET,_t("Asset",rr)),se(re,N.EMBEDDED_RESOURCE,_t("Contentful:Entry",rr)),se(re,N.HR,et(rr)),se(re,N.OL_LIST,Ga),se(re,N.UL_LIST,Ga),se(re,N.LIST_ITEM,et(Vs(Cs).sort())),se(re,N.TABLE,et(function(){return{nodeTypes:[N.TABLE_ROW],min:1}})),se(re,N.TABLE_ROW,et(function(){return{nodeTypes:[N.TABLE_CELL,N.TABLE_HEADER_CELL],min:1}})),se(re,N.TABLE_CELL,ja),se(re,N.TABLE_HEADER_CELL,ja),se(re,Pe.HYPERLINK,new kh),se(re,Pe.EMBEDDED_ENTRY,Ha),se(re,Pe.EMBEDDED_RESOURCE,_t("Contentful:Entry",rr)),se(re,Pe.ENTRY_HYPERLINK,_t("Entry",["text"])),se(re,Pe.ASSET_HYPERLINK,_t("Asset",["text"])),se(re,Pe.RESOURCE_HYPERLINK,_t("Contentful:Entry",["text"]));const jh=(e,t)=>{const r=e.startsWith("http"),n=e.startsWith("/");if(!t||r||!n)return e;const{country:i,language:a}=t;return`/${i}/${a}${e}`},Gt=(e,t)=>({renderNode:{[N.PARAGRAPH]:(r,n)=>r?E("p",{className:"has-m-0",children:n}):E(ne,{}),[N.UL_LIST]:(r,n)=>r?E("ul",{className:"has-m-0 has-pl-m has-pr-m",children:n}):E(ne,{}),[Pe.HYPERLINK]:(r,n)=>E("a",{href:jh(r.data.uri,t),target:"_blank","aria-label":`${n?.toString()} (${e("common.aria-label.blank")})`,children:n})}}),Dt="/",Ot=Dt+"shipping",Rt=Dt+"packaging",At=Dt+"payments",Tt=Dt+"exchanges",Wr="services-and-gifting__",Xr="-menu-item",Kh=Wr+"shipping"+Xr,qh=Wr+"packaging"+Xr,$h=Wr+"payments"+Xr,zh=Wr+"exchanges"+Xr;function Yh(e){return[Dt,Ot,Tt,Rt,At].includes(e)}const Wh=Nt();class ut{static shipping(){return new Xh}static exchanges(){return new Jh}static packaging(){return new Qh}static payments(){return new Zh}sendTo(t){if(!(t instanceof Kr)){Wh.warn("Gucci Service navigated back: only tracking on GA4 is supported");return}this.sendToGA4(t)}}let Xh=class extends ut{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"main - Gucci Services",label:"L1 - Complimentary Shipping"})}toString(){return"GucciServiceNavigatedBack.Shipping"}};class Jh extends ut{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"main - Gucci Services",label:"L1 - Complimentary Exchanges and Returns"})}toString(){return"GucciServiceNavigatedBack.ComplimentaryExchangesAndReturns"}}let Qh=class extends ut{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"main - Gucci Services",label:"L1 - Signature Packaging"})}toString(){return"GucciServiceNavigatedBack.Packaging"}},Zh=class extends ut{sendToGA4(t){t.push({event:"genericEvent",category:"services drawer",action:"main - Gucci Services",label:"L1 - Secure Payments"})}toString(){return"GucciServiceNavigatedBack.Payments"}};function eg({navId:e}){const t=le(Me),r=le(qr),n=As();return E(cv,{variant:"text-main",onClick:()=>{r(tg(e)),n(Dt)},iconBefore:E(kf,{enableRtl:!0}),"aria-label":t("services-and-gifting.aria-label.back-to-services"),"data-testid":"panel-back-button",children:t("common.cta.back")})}function tg(e){switch(e){case Ot:return ut.shipping();case Tt:return ut.exchanges();case Rt:return ut.packaging();case At:return ut.payments();default:throw new Error(`Gucci Service navigated back: unknown ${e}`)}}const rg="_maxWidth_1o3bv_9",ng="_verticalFlex_1o3bv_13",ig="_horizontalFlex_1o3bv_18",ag="_plainList_1o3bv_23",ft={maxWidth:rg,verticalFlex:ng,horizontalFlex:ig,plainList:ag};function Jr({children:e,panelTitle:t,navId:r,testId:n}){return Q("div",{"data-testid":n,className:`grid row-gap-32 ${ft.maxWidth}`,children:[E("nav",{className:"col-12",children:E(eg,{navId:r})}),Q("article",{className:`col-12 ${ft.verticalFlex} has-gap-40`,children:[E("header",{children:E("h2",{className:"is-text-xl-light",children:t})}),e]})]})}const Ae=({entryId:e,fieldId:t,children:r})=>{const n=ns(),i=le(rt),[a,o]=We(E(ne,{}));return It(()=>{n&&(async()=>{const f=(await zn(()=>import("../index-D7L_UEcl.js"),__vite__mapDeps([0]))).LivePreviewElement;if(r.constructor===Array){const u=r[0],v=r.slice(1);o(Q(ne,{children:[E(f,{entryId:e,fieldId:t,language:i.language,children:u}),v]}));return}Gs(r)?o(E(ne,{children:E(f,{entryId:e,fieldId:t,language:i.language,children:r})})):o(E(ne,{children:r}))})()},[]),!n||!e?r:E(ne,{children:a})};function wn(e,t){const r=le(rt);return e?Bt.documentToReactComponents(e.json,Gt(t,r)):E(ne,{})}function og({viewModel:e}){const t=le(Me),r=wn(e.returnPolicy,t),n=wn(e.howToReturn,t),i=wn(e.cisReturns,t);return Q(Jr,{panelTitle:t("services-and-gifting.complimentary-exchanges-and-returns.title"),testId:"exchanges-and-returns",navId:Tt,children:[Q("section",{className:"grid row-gap-16","data-testid":"return-policy-section",children:[E("h3",{className:"is-title-s col-12",children:t("services-and-gifting.return-exchange.policy")}),E(Ae,{entryId:e.sysId,fieldId:"returnPolicyDescription",children:E("div",{className:"is-text-light col-12",children:r})})]}),Q("section",{className:"grid row-gap-16","data-testid":"how-to-return-section",children:[E("h3",{className:"is-title-s col-12",children:t("services-and-gifting.return-exchange.how-to")}),E(Ae,{entryId:e.sysId,fieldId:"howToReturnDescription",children:E("div",{className:"is-text-light col-12",children:n})})]}),e.cisReturns&&Q("section",{className:"grid row-gap-16","data-testid":"cis-returns-section",children:[E("h3",{className:"is-title-s col-12",children:t("services-and-gifting.return-exchange.collect-in-store")}),E(Ae,{entryId:e.sysId,fieldId:"cisReturnsDescription",children:E("div",{className:"is-text-light col-12",children:i})})]})]})}function sg({viewModel:e}){const t=le(Me),r=pi(),n=[{aspectRatio:3/4,name:"portrait-standard"},{aspectRatio:2/3,name:"portrait-xl"},{aspectRatio:3/2,name:"landscape-standard"},{aspectRatio:4/3,name:"landscape-xl"},{aspectRatio:16/9,name:"landscape-cinematic"},{aspectRatio:9/16,name:"portrait-cinematic"},{aspectRatio:1/1,name:"square"}],i=e.image?e.image.width/e.image.height:1,a=n.filter(s=>Math.round(s.aspectRatio*10)===Math.round(i*10)),o=e.description?Bt.documentToReactComponents(e.description.json,Gt(t,r)):E(ne,{});return Q(Jr,{panelTitle:t("services-and-gifting.signature-packaging.title"),navId:Rt,testId:"signature-packaging",children:[E(Ae,{entryId:e.sysId,fieldId:"description",children:E("div",{className:"is-text-light","data-testid":"signature-packaging-intro",children:o})}),E(Ae,{entryId:e.sysId,fieldId:"image",children:E(Lv,{alt:e.image?.description||"",aspectRatio:a.length===1?a[0]?.name:"square",hasAnimation:!0,src:`${e.image?.url}?fm=webp&w=880`,width:"100%",loading:"lazy"})})]})}function fr({title:e,children:t,...r}){return Q("section",{className:`${ft.verticalFlex} has-gap-16`,...r,children:[E("header",{children:E("h3",{className:"is-title-s",children:e})}),t]})}function ug({viewModel:e}){const t=le(Me);return Q(Jr,{panelTitle:t("services-and-gifting.secure-payments.title"),navId:At,testId:"secure-payments",children:[E(fg,{viewModel:e}),E(pg,{viewModel:e}),E(dg,{viewModel:e})]})}function lg(e,t,r){if(!e.notes)return E(ne,{});const n=Bt.documentToReactComponents(e.notes.json,Gt(t,r));return E(Ae,{entryId:e.sysId,fieldId:"notes",children:n},e.sysId)}function cg(e){const t=le(Me),r=pi();return e.filter(n=>!!n.notes).map(n=>lg(n,t,r))}function fg({viewModel:e}){const t=le(Me);return Q(fr,{title:t("services-and-gifting.secure-payments.accepted-payments"),children:[E(Ae,{entryId:e.editorial.sysId,fieldId:"introductionText",children:E("p",{className:"is-text-light has-m-0",children:e.editorial.introductionText})}),E(Ln,{category:"card",title:t("services-and-gifting.secure-payments.accepted-payments.card"),paymentMethods:e.paymentMethods.card}),E(Ln,{category:"digital",title:t("services-and-gifting.secure-payments.accepted-payments.digital"),paymentMethods:e.paymentMethods.digital}),E(Ln,{category:"installment",title:t("services-and-gifting.secure-payments.accepted-payments.installment"),paymentMethods:e.paymentMethods.installment})]})}function dg({viewModel:e}){if(!e.editorial.paymentProcessDetails)return E(ne,{});const t=le(Me),r=le(rt),n=Bt.documentToReactComponents(e.editorial.paymentProcessDetails.json,Gt(t,r));return E(fr,{title:t("services-and-gifting.secure-payments.process-details"),"data-testid":"payment-process-section",children:E(Ae,{entryId:e.editorial.sysId,fieldId:"paymentProcessDetails",children:E("div",{className:"is-text-light",children:n})})})}function pg({viewModel:e}){if(!e.editorial.additionalPayments)return E(ne,{});const t=le(Me),r=le(rt),n=Bt.documentToReactComponents(e.editorial.additionalPayments.json,Gt(t,r));return E(fr,{title:t("services-and-gifting.secure-payments.additional-options"),"data-testid":"additional-payments-section",children:E(Ae,{entryId:e.editorial.sysId,fieldId:"additionalPayments",children:E("div",{className:"is-text-light",children:n})})})}const vg={AFFIRM:E(fv,{}),AMAZONPAY:E(dv,{}),AMERICANEXPRESS:E(pv,{}),APPLEPAY:E(vv,{}),DINERS:E(hv,{}),DISCOVER:E(gv,{}),JCB:E(Ev,{}),KAKAO:E(_v,{}),KLARNA:E(mv,{}),MASTERCARD:E(yv,{}),ORICO:E(Iv,{}),PAYPAL:E(bv,{}),UNIONPAY:E(Ov,{}),VISA:E(Rv,{})};function hg(e){function t(r){return vg[r]}return E(ne,{children:e.map(r=>{const n=t(r.key);return E("li",{style:r.error?{background:"#ffe7e7"}:{},children:Q("div",{className:`${ft.horizontalFlex} has-gap-8`,children:[n,r.error&&E(gi,{variant:"24",inversed:!0,className:"has-background-color-error"}),E(Ae,{entryId:r.sysId,fieldId:"displayName",children:E("span",{className:`is-text-s-book ${r.error?"has-color-error has-pt-xxs has-pb-xxs":""}`,children:r.name})})]})},r.key)})})}function Ln({title:e,paymentMethods:t,category:r}){if(t.length===0)return E(ne,{});const n=t.some(i=>!!i.notes);return Q(ne,{children:[E("header",{"data-testid":r+"-payment-methods-title",children:E("h4",{className:"is-text-medium",children:e})}),E("ul",{className:`${ft.plainList} ${ft.verticalFlex} has-gap-8`,"data-testid":r+"-payment-method-list",children:hg(t)}),n?E("div",{className:"has-m-0 is-text-details",children:cg(t)}):E(ne,{})]})}const gg="_missingContentAlert_1mome_1",Eg={missingContentAlert:gg};function _g({shippingViewModel:e,paymentsViewModel:t}){if(!le(rt).isPreview)return null;const i=Object.values(e).flat().filter(o=>o.error).length,a=Object.values(t.paymentMethods).flat().filter(o=>o.error).length;return(i>0||a>0)&&E("section",{className:`${Eg.missingContentAlert} has-color-error has-mt-xl has-p-xs`,role:"region","aria-label":"Missing Content Alert",children:Q("div",{children:[Q("h5",{className:"has-background-color-error has-color-background",style:{display:"flex",alignItems:"center"},children:[E(gi,{variant:"24"}),"Missing Content:"]}),Q("p",{className:"is-text-s-book",children:["Some available Shipping or Payment options wont display unless content has been added. Please add missing content for all available configurations.",E("br",{}),E("strong",{children:"This alert is visible only on preview mode."})]})]})})}function mg({tl:e,...t}){return Q("section",{className:`${ft.verticalFlex} has-gap-4 `,...t,children:[E(Ae,{entryId:e.sysId,fieldId:"title",children:Q("h4",{className:`is-text-medium ${e.error?"has-color-error":""}`,style:e.error?{background:"#ffe7e7",display:"inline-flex"}:{},children:[e.error&&E(gi,{variant:"24",inversed:!0,className:"has-background-color-error has-mr-xxs"}),e.title]})}),E(Ae,{entryId:e.sysId,fieldId:"description",children:E("p",{className:"is-text-s-book has-m-0",children:e.description})}),e.details&&E(Ae,{entryId:e.sysId,fieldId:"details",children:E("p",{className:"is-text-details has-m-0",children:e.details})})]})}function yg({title:e,description:t,sysId:r}){const n=le(Me),i=le(rt),a=t?Bt.documentToReactComponents(t.json,Gt(n,i)):E(ne,{});return E(fr,{title:e,"data-testid":"shipping-details-section",children:E(Ae,{entryId:r,fieldId:"description",children:E("div",{className:"is-text-light",children:a})})})}function Ka({title:e,timelines:t}){return E(fr,{title:e,"data-testid":"delivery-timelines-section",children:t.map((r,n)=>E(mg,{tl:r,"data-testid":"delivery-timeline"},n))})}function Ig({viewModel:e}){const t=le(Me);return Q(Jr,{panelTitle:t("services-and-gifting.complimentary-shipping.title"),navId:Ot,testId:"complimentary-shipping",children:[E(yg,{title:t("services-and-gifting.complimentary-shipping.shipping-details"),description:e.shippingDetails.description,sysId:e.shippingDetails.sysId}),e.complimentaryShippingTypes.length>0&&E(Ka,{title:t("services-and-gifting.complimentary-shipping.complimentary-timelines"),timelines:e.complimentaryShippingTypes}),e.premiumShippingTypes.length>0&&E(Ka,{title:t("services-and-gifting.complimentary-shipping.premium-timelines"),timelines:e.premiumShippingTypes})]})}function bg({is:e="closed",microcopy:t,viewModels:r,autoOpen:n}){const[i,a]=We(e),[o,s]=We(!1),l=Nt(),f=vi(t),u=le(qr),v=le(rt);return It(()=>{s(!0),n&&a("open"),document.addEventListener("services-and-gifting:open",function(){l.info("Opening Services and Gifting bottom sheet",{context:{navigationParams:v,viewModelMissing:!r}}),a("open")})},[]),It(()=>{i==="closed"&&document.dispatchEvent(new CustomEvent("services-and-gifting:closed"))},[i]),!o&&!n?E(ne,{}):E(jv,{microcopy:t,children:E(tv,{content:Q(ne,{children:[E("h2",{id:"gucci-services-title",className:"is-title-m has-mb-40",children:f("services-and-gifting.title")}),!r&&E(Kv,{}),r&&Q(ne,{children:[E("nav",{"aria-labelledby":"gucci-services-title",children:Q("ul",{className:`grid row-gap-24 ${ft.plainList}`,children:[E("li",{"data-testid":Kh,className:"col-12",children:E(Rr,{navId:Ot,label:f("services-and-gifting.complimentary-shipping.title")})}),E("li",{"data-testid":zh,className:"col-12",children:E(Rr,{navId:Tt,label:f("services-and-gifting.complimentary-exchanges-and-returns.title")})}),E("li",{"data-testid":$h,className:"col-12",children:E(Rr,{navId:At,label:f("services-and-gifting.secure-payments.title")})}),!r.packagingViewModel.error&&E("li",{"data-testid":qh,className:"col-12",children:E(Rr,{navId:Rt,label:f("services-and-gifting.signature-packaging.title")})})]})}),E(_g,{shippingViewModel:r.shippingViewModel,paymentsViewModel:r.paymentsViewModel})]})]}),accessibility:{closeButtonAriaLabel:f("common.aria-label.close"),isContainerFocusable:!1},is:i,onCloseRequest:({ctx:c})=>{if(n)return!1;Yh(c.activeRoute)&&u(Rg(c.activeRoute)),a("closed")},onAnimationEnd:()=>{},children:r&&Q(ne,{children:[!r.packagingViewModel.error&&E(tr,{id:Rt,content:E(sg,{viewModel:r.packagingViewModel})}),E(tr,{id:Tt,content:E(og,{viewModel:r.exchangesAndReturnsViewModel})}),E(tr,{id:Ot,content:E(Ig,{viewModel:r.shippingViewModel})}),E(tr,{id:At,content:E(ug,{viewModel:r.paymentsViewModel})})]})})})}function Rr({navId:e,label:t}){const r=As(),n=le(qr);return E("div",{children:E(Sv,{"data-testid":e.replace("/",""),text:t,level:"second",onClick:()=>{n(Og(e)),r(e)}})})}function Og(e){switch(e){case Ot:return st.shipping();case Tt:return st.exchanges();case Rt:return st.packaging();case At:return st.payments();default:throw new Error(`Gucci Service requested: Unknown panel ${e}`)}}function Rg(e){switch(e){case Dt:return $e.root();case Ot:return $e.shipping();case Tt:return $e.exchanges();case Rt:return $e.packaging();case At:return $e.payments();default:throw new Error(`Gucci Service dismissed: Unknown panel ${e}`)}}function Ag({params:e,data:t}){const r=new Kr;return E(wf,{using:i=>i.sendTo(r),children:Q(Lf,{navigationParameters:e,children:[E(Mf,{country:e.country,language:e.language}),E("aside",{children:E("section",{"data-testid":"services-and-gifting__section",children:E(bg,{microcopy:t.microcopy,viewModels:t.viewModels,autoOpen:e.autoOpen,isPreview:e.isPreview})})})]})})}function Tg(e){const t=Sg(e),r=new ArrayBuffer(t.length),n=new DataView(r);for(let i=0;i<r.byteLength;i++)n.setUint8(i,t.charCodeAt(i));return r}const Ng="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Sg(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,n=0;for(let i=0;i<e.length;i++)r<<=6,r|=Ng.indexOf(e[i]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}const Dg=-1,wg=-2,Lg=-3,Cg=-4,Pg=-5,Ug=-6;function Mg(e,t){return xg(JSON.parse(e))}function xg(e,t){if(typeof e=="number")return i(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,n=Array(r.length);function i(a,o=!1){if(a===Dg)return;if(a===Lg)return NaN;if(a===Cg)return 1/0;if(a===Pg)return-1/0;if(a===Ug)return-0;if(o||typeof a!="number")throw new Error("Invalid input");if(a in n)return n[a];const s=r[a];if(!s||typeof s!="object")n[a]=s;else if(Array.isArray(s))if(typeof s[0]=="string"){const l=s[0];switch(l){case"Date":n[a]=new Date(s[1]);break;case"Set":const f=new Set;n[a]=f;for(let c=1;c<s.length;c+=1)f.add(i(s[c]));break;case"Map":const u=new Map;n[a]=u;for(let c=1;c<s.length;c+=2)u.set(i(s[c]),i(s[c+1]));break;case"RegExp":n[a]=new RegExp(s[1],s[2]);break;case"Object":n[a]=Object(s[1]);break;case"BigInt":n[a]=BigInt(s[1]);break;case"null":const v=Object.create(null);n[a]=v;for(let c=1;c<s.length;c+=2)v[s[c]]=i(s[c+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const c=globalThis[l],d=new c(i(s[1]));n[a]=s[2]!==void 0?d.subarray(s[2],s[3]):d;break}case"ArrayBuffer":{const c=s[1],d=Tg(c);n[a]=d;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const c=l.slice(9);n[a]=Temporal[c].from(s[1]);break}case"URL":{const c=new URL(s[1]);n[a]=c;break}case"URLSearchParams":{const c=new URLSearchParams(s[1]);n[a]=c;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(s.length);n[a]=l;for(let f=0;f<s.length;f+=1){const u=s[f];u!==wg&&(l[f]=i(u))}}else{const l={};n[a]=l;for(const f in s){if(f==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const u=s[f];l[f]=i(u)}}return n[a]}return i(0)}Nt();const Vg="__SERVICES_AND_GIFTING_PROPS__",kg=Nt();function Fg(){try{const e=document.getElementById(Vg)?.textContent;return Mg(e)}catch(e){throw kg.error("Failed to hydrate props",{error:e}),e}}const Bg=Fg(),Cn="services-and-gifting";Hs.hydrateRoot(document.getElementById(Cn),Q(ii.StrictMode,{children:[E(Zs,{rootElementId:Cn}),E(Ag,{...Bg})]}),{identifierPrefix:Cn});export{rt as N,Uf as l,ns as u};
