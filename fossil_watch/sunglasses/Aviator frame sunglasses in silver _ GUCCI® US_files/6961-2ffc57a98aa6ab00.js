"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6961],{52005:e=>{function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var s=i&&i.stringify||t;if("object"==typeof e&&null!==e){var n=r.length+1;if(1===n)return e;var o=Array(n);o[0]=s(e);for(var l=1;l<n;l++)o[l]=s(r[l]);return o.join(" ")}if("string"!=typeof e)return e;var a=r.length;if(0===a)return e;for(var c="",g=0,u=-1,f=e&&e.length||0,d=0;d<f;){if(37===e.charCodeAt(d)&&d+1<f){switch(u=u>-1?u:0,e.charCodeAt(d+1)){case 100:case 102:if(g>=a||null==r[g])break;u<d&&(c+=e.slice(u,d)),c+=Number(r[g]),u=d+2,d++;break;case 105:if(g>=a||null==r[g])break;u<d&&(c+=e.slice(u,d)),c+=Math.floor(Number(r[g])),u=d+2,d++;break;case 79:case 111:case 106:if(g>=a||void 0===r[g])break;u<d&&(c+=e.slice(u,d));var h=typeof r[g];if("string"===h){c+="'"+r[g]+"'",u=d+2,d++;break}if("function"===h){c+=r[g].name||"<anonymous>",u=d+2,d++;break}c+=s(r[g]),u=d+2,d++;break;case 115:if(g>=a)break;u<d&&(c+=e.slice(u,d)),c+=String(r[g]),u=d+2,d++;break;case 37:u<d&&(c+=e.slice(u,d)),c+="%",u=d+2,d++,g--}++g}++d}return -1===u?e:(u<f&&(c+=e.slice(u)),c)}},96961:(e,t,r)=>{r.d(t,{tZ:()=>u,Br:()=>g});var i={timestamp:!1,messageKey:"Body",base:void 0,formatters:{level:e=>{let t=function(e){switch(e.toLowerCase()){case"trace":return{severityText:"TRACE",severityNumber:1};case"debug":return{severityText:"DEBUG",severityNumber:5};case"info":return{severityText:"INFO",severityNumber:9};case"warn":return{severityText:"WARN",severityNumber:13};case"error":return{severityText:"ERROR",severityNumber:17};default:return{severityText:"FATAL",severityNumber:21}}}(e);return{SeverityText:t.severityText,SeverityNumber:t.severityNumber}},bindings:e=>({bindings:e}),log:e=>(function(e){let{level:t,span_id:r,trace_id:i,trace_flags:s,resource:n,Body:o,...l}=e,a=new Date().getTime(),c={trace_id:l["dd.trace_id"],span_id:l["dd.span_id"]},g=Object.values(c).some(e=>void 0!==e);return{Timestamp:a,ObservedTimestamp:a,TraceId:i,SpanId:r,TraceFlags:s,Resource:n||void 0,InstrumentationScope:l.instrumentationScope||void 0,dd:g?c:void 0,Body:o||void 0,Attributes:{...l,"dd.trace_id":void 0,"dd.span_id":void 0}}})(e)}},s=r(98403),n=r(68080);class o{applicationLogger;initFailed=!1;appInfo=null;globalDatadogLogger=null;setAppInfo(e){this.appInfo=e}async write(e,t){try{if(this.initFailed)return;await this.init(),this.initFailed||this.log(e,t)}catch(e){console.warn("Failed to write log",e)}}log(e,t){this.applicationLogger[e]&&this.applicationLogger[e](t)}async getGlobalDatadogLogger(){return this.globalDatadogLogger?this.globalDatadogLogger:new Promise((e,t)=>{if(window.DD_LOGS_REPLATFORMING)return void window.DD_LOGS_REPLATFORMING.onReady(()=>{this.globalDatadogLogger=window.DD_LOGS_REPLATFORMING,e(window.DD_LOGS_REPLATFORMING)});let r=setTimeout(()=>{t("Global datalog logger not set. Logging will not work.")},15e3),i=setInterval(()=>{window.DD_LOGS_REPLATFORMING&&(window.DD_LOGS_REPLATFORMING.onReady(()=>{e(window.DD_LOGS_REPLATFORMING)}),clearTimeout(r),clearInterval(i))},50)})}async getAppInfo(){return this.appInfo?this.appInfo:new Promise((e,t)=>{let r=setTimeout(()=>{t("App info not set. Logging will not work.")},15e3),i=setInterval(()=>{this.appInfo&&(e(this.appInfo),clearTimeout(r),clearInterval(i))},50)})}async init(){try{if(this.applicationLogger)return;let[e,t]=await Promise.all([this.getGlobalDatadogLogger(),this.getAppInfo()]);if(!e||!t)throw Error("Failed to retrieve globalLogger or appInfo");this.initGlobalInstance(e),this.applicationLogger=e.createLogger(t.service,{context:{service:t.service,env:t.env}});return}catch(e){console.warn("Could not initialize DataDog logger ",e),this.initFailed=!0}}initGlobalInstance(e){e.getInitConfiguration()||e.init({clientToken:"pub06c9294a47138de514fbc6e73bba7b13",site:"datadoghq.com",forwardErrorsToLogs:!1,sessionSampleRate:100,useCrossSiteSessionCookie:!0,trackSessionAcrossSubdomains:!0,useSecureSessionCookie:!0,silentMultipleInit:!1})}}let l=e=>{let t=void 0!==n&&n.env?n.env.LOG_LEVEL:void 0;return e?.level||t||"info"},a=new o;class c{options;context;logger;errorSerializationRecursionLimit;constructor(e,t){this.options=e,this.context=t,this.errorSerializationRecursionLimit=e?.errorSerializationRecursionLimit||3,this.logger=s({...i,level:l(e),redact:e?.redact,browser:{write:{info:e=>{console.info(e),a.write("info",e)},warn:e=>{console.warn(e),a.write("warn",e)},error:e=>{console.error(e),a.write("error",e)},debug:e=>{console.debug(e),a.write("debug",e)}}}})}child(e,t){return new c({...this.options||{},...t||{}},{...this.context||{},...e})}log(e,t){let r=t[t.length-1];if(1===t.length&&r instanceof Error)return void e({Body:`${r.name} ${r.message}`,...this.generateAttributes(r)});if("object"==typeof r&&!Array.isArray(r)){let i=t.slice(0,-1);e({Body:this.generateBody(i),...this.generateAttributes(r)});return}e({Body:this.generateBody(t),...this.generateAttributes({})})}generateBody(e){return e.map(this.serializeErrorsRecursively.bind(this)).map(e=>"string"==typeof e?e:JSON.stringify(e)).join(" ")}generateAttributes=e=>({...this.context||{},...this.serializeErrorsRecursively(e)});serializeErrorsRecursively(e,t=0){if(t>this.errorSerializationRecursionLimit)return e;if(e instanceof Error){let t=Object.fromEntries(Object.getOwnPropertyNames(e).filter(t=>"function"!=typeof e[t]).map(t=>[t,e[t]]));return{name:e.name,message:e.message,stack:e.stack,...t}}return Array.isArray(e)?e.map(e=>this.serializeErrorsRecursively(e,t+1)):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map(([e,r])=>[e,this.serializeErrorsRecursively(r,t+1)])):e}info(...e){this.log(this.logger.info.bind(this.logger),e)}fatal(...e){this.log(this.logger.fatal.bind(this.logger),e)}error(...e){this.log(this.logger.error.bind(this.logger),e)}warn(...e){this.log(this.logger.warn.bind(this.logger),e)}debug(...e){this.log(this.logger.debug.bind(this.logger),e)}trace(...e){this.log(this.logger.trace.bind(this.logger),e)}silent(...e){this.log(this.logger.silent.bind(this.logger),e)}}let g=e=>{if("undefined"==typeof window)return;let{service:t,env:r}=e||{};if(!t||!r)return void console.warn("[otel-node/logger] Service or environment not defined. Logger not set.");a.setAppInfo({service:t,env:r}),console.log("Logger set with Service:",t,"and Environment:",r)},u=e=>new c(e)},98403:(e,t,r)=>{let i=r(52005);e.exports=g;let s=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function n(e,t){return"silent"===e?1/0:t.levels.values[e]}let o=Symbol("pino.logFuncs"),l=Symbol("pino.hierarchy"),a={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[l]};t[l]=r}function g(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let l=e.browser.write||s;e.browser.write&&(e.browser.asObject=!0);let h=e.serializers||{},b=(t=e.browser.serialize,Array.isArray(t)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(h)),v=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(v=!1);let w=Object.keys(e.customLevels||{}),O=["error","fatal","warn","info","debug","trace"].concat(w);"function"==typeof l&&O.forEach(function(e){l[e]=l}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let L=e.level||"info",_=Object.create(l);_.log||(_.log=p);let E={};O.forEach(e=>{E[e]=l[e]?l[e]:s[e]||s[a[e]||"log"]||p}),_[o]=E,c({},_),Object.defineProperty(_,"levelVal",{get:function(){return n(this.level,this)}}),Object.defineProperty(_,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,u(this,S,_,"error"),u(this,S,_,"fatal"),u(this,S,_,"warn"),u(this,S,_,"info"),u(this,S,_,"debug"),u(this,S,_,"trace"),w.forEach(e=>{u(this,S,_,e)})}});let S={transmit:i,serialize:b,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:O,timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?m:y,messageKey:e.messageKey||"msg",onChild:e.onChild||p};function j(t,r,s){if(!r)throw Error("missing bindings for child Pino");s=s||{},b&&r.serializers&&(s.serializers=r.serializers);let n=s.serializers;if(b&&n){var o=Object.assign({},h,n),l=!0===e.browser.serialize?Object.keys(o):b;delete r.serializers,f([r],l,o,this._stdErrSerialize)}function a(e){this._childLevel=(0|e._childLevel)+1,this.bindings=r,o&&(this.serializers=o,this._serialize=l),i&&(this._logEvent=d([].concat(e._logEvent.bindings,r)))}a.prototype=this;let g=new a(this);return c(this,g),g.child=function(...e){return j.call(this,t,...e)},g.level=s.level||this.level,t.onChild(g),g}return _.levels=function(e){let t=e.customLevels||{};return{values:Object.assign({},g.levels.values,t),labels:Object.assign({},g.levels.labels,function(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}(t))}}(e),_.level=L,_.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=p,_.serializers=h,_._serialize=b,_._stdErrSerialize=v,_.child=function(...e){return j.call(this,S,...e)},i&&(_._logEvent=d()),_}function u(e,t,r,a){var c,g,u,h,b,v,m;if(Object.defineProperty(e,a,{value:n(e.level,r)>n(a,r)?p:r[o][a],writable:!0,enumerable:!0,configurable:!0}),e[a]===p){if(!t.transmit)return;let i=n(t.transmit.level||e.level,r);if(n(a,r)<i)return}e[a]=(c=e,g=t,u=r,h=a,b=c[o][h],function(){let e=g.timestamp(),t=Array(arguments.length),r=Object.getPrototypeOf&&Object.getPrototypeOf(this)===s?s:this;for(var o=0;o<t.length;o++)t[o]=arguments[o];var l=!1;if(g.serialize&&(f(t,this._serialize,this.serializers,this._stdErrSerialize),l=!0),g.asObject||g.formatters?b.call(r,...function(e,t,r,s,n){let{level:o,log:l=e=>e}=n.formatters||{},a=r.slice(),c=a[0],g={},u=(0|e._childLevel)+1;if(u<1&&(u=1),s&&(g.time=s),o?Object.assign(g,o(t,e.levels.values[t])):g.level=e.levels.values[t],n.asObjectBindingsOnly){if(null!==c&&"object"==typeof c)for(;u--&&"object"==typeof a[0];)Object.assign(g,a.shift());return[l(g),...a]}if(null!==c&&"object"==typeof c){for(;u--&&"object"==typeof a[0];)Object.assign(g,a.shift());c=a.length?i(a.shift(),a):void 0}else"string"==typeof c&&(c=i(a.shift(),a));return void 0!==c&&(g[n.messageKey]=c),[l(g)]}(this,h,t,e,g)):b.apply(r,t),g.transmit){let r=g.transmit.level||c._level,i=n(r,u),s=n(h,u);if(s<i)return;!function(e,t,r,i=!1){let s=t.send,n=t.ts,o=t.methodLevel,l=t.methodValue,a=t.val,c=e._logEvent.bindings;i||f(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===c.indexOf(e)}),e._logEvent.level.label=o,e._logEvent.level.value=l,s(o,e._logEvent,a),e._logEvent=d(c)}(this,{ts:e,methodLevel:h,methodValue:s,transmitLevel:r,transmitValue:u.levels.values[g.transmit.level||c._level],send:g.transmit.send,val:n(c._level,u)},t,l)}});let y=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[l];for(;r.parent;)(r=r.parent).logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==y.length&&(e[a]=(v=y,m=e[a],function(){return m.apply(this,[...v,...arguments])}))}function f(e,t,r,i){for(let s in e)if(i&&e[s]instanceof Error)e[s]=g.stdSerializers.err(e[s]);else if("object"==typeof e[s]&&!Array.isArray(e[s])&&t)for(let i in e[s])t.indexOf(i)>-1&&i in r&&(e[s][i]=r[i](e[s][i]))}function d(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function b(){return{}}function v(e){return e}function p(){}function m(){return!1}function y(){return Date.now()}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:b,res:b,err:h,errWithCause:h},g.stdTimeFunctions=Object.assign({},{nullTime:m,epochTime:y,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),e.exports.default=g,e.exports.pino=g}}]);
//# sourceMappingURL=6961-2ffc57a98aa6ab00.js.map