//15.158.2-es2019 2025-12-11T09:05:40.067Z (54bf2a1e82c35)
var CS_CONF={"collectionEnabled":true,"projectId":2097,"status":1,"hostnames":["gucci.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":50,"validationRate":10,"lastTrackingDraw":1759047633,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":1,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":"\\https://www.gucci.com|gucciclub","dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"(.*\\/(web\\/waitlist)\\/.*)|(.*\\/checkout\\/single.*)|(https:\\/\\/www\\.gucci\\.com\\/(us|ca|mx)\\/(en|es_mx)?\\/st\\/contact-us)","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":{"experimentalMutationObserver":{"maxProcessingTime":30,"waitDuration":0}},"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":1,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[{"bodyAttributePaths":[{"path":"errors[0].message","encrypted":0,"primary":0,"type":"response"}],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[],"url":"graphql","statusCode":200,"bodyContent":"errors\":"},{"bodyAttributePaths":[],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[{"headerName":"cf-cache-status","encrypted":0,"type":"request"},{"headerName":"cf-ray","encrypted":0,"type":"request"},{"headerName":"x-cache-enabled","encrypted":0,"type":"request"},{"headerName":"x-cache","encrypted":0,"type":"request"},{"headerName":"x-amz-cf-id","encrypted":0,"type":"request"},{"headerName":"x-ray","encrypted":0,"type":"request"},{"headerName":"upgrade","encrypted":0,"type":"request"},{"headerName":"X-Request-Id","encrypted":0,"type":"request"},{"headerName":"x-wix-request-id","encrypted":0,"type":"request"},{"headerName":"X-Pass-Why","encrypted":0,"type":"request"},{"headerName":"x-nginx-cache-status","encrypted":0,"type":"request"},{"headerName":"trace-id","encrypted":0,"type":"request"},{"headerName":"traceparent","encrypted":0,"type":"request"},{"headerName":"X-NewRelic-Transaction","encrypted":0,"type":"request"},{"headerName":"X-Datadog-Trace-ID","encrypted":0,"type":"request"}]}]},"customErrors":{"consoleMessageLogLevels":["Error"]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aeu1.contentsquare.net","malkaRecordingDomain":"k-aeu1.contentsquare.net","staticResourceManagerDomain":"srm.ba.contentsquare.net","voc":{"siteId":null,"enabled":0},"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com"};
var CS_INTEGRATIONS_CONF = {"optimizely":{},"datadog":{"settings":[],"vendorSettings":{"domain":"app.datadoghq.com"}},"usertesting":{"settings":[]},"brightcove":{"settings":["enableAdLoaded","enableAdStarted","enableAdPlay","enableAdPaused","enableAdPlayViewDuration","enableAdCompleted","enableAdClicked","enableVideoStarted","enableVideoPaused","enableVideoCompleted","enableVideoBuffering","enableVolumeChanged","enableVideoMuted","enableVideoUnmuted","enableFullscreen","enableVideoSeeked","enableVideoPlayDuration","enableVideoError"]},"myfeelback":{"settings":["sendArtificialPageviews","setReplayLinkToFirstPV"]}};
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
/* integration-datadog 3.2.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Datadog","dvarPrefix":"APM_DD_","replayKey":"dd"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-datadog-contentsquare","version":"3.2.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,i,r;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";r=new RegExp(u+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=c.parameterName,f=c.snippetBuildName,l=c.snippetVersion;o((function(){const e=u.displayName,n=u.dvarPrefix,t=u.replayKey;var c,d;c=e,d=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+d);const p=i(s,"settings");var w;const g=(w=p,Array.isArray(w)?p:[]).includes("setReplayLinkToCurrentPV");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(f,`Dynamic variable with ${e} and value ${t} sent`)}function y(){setTimeout((function(){o((function(){if("function"==typeof DD_RUM.getInternalContext&&"object"==typeof DD_RUM.getInternalContext()){const n=DD_RUM.getInternalContext().session_id;if(n){const t=i(s,"vendorSettings");let o=("object"==typeof(e=t)&&null!==e?t:{}).domain;if(o){o=o.trim(),o=o.replace("http://",""),o=o.replace("https://",""),o=o.replace("/","");let e=new Date;e.setHours(e.getHours()-2),e=Date.parse(e);let t=new Date;t.setHours(t.getHours()+1),t=Date.parse(t);_("Session Link","https://"+o+"/rum/explorer?query=@session.id:"+n+"&tab=session&from_ts="+e+"&to_ts="+t+"&live=true")}_("SessionID",n)}(function(e,n,t,o){return new Promise((function(i,r){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(o){if(o&&o.replayLink&&o.isRecording){let r="https://"+o.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}i(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),o?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))})(t,g).then((function(e){o((function(){if(e){const n={ContentsquareReplay:e};"function"==typeof DD_RUM.addUserAction?DD_RUM.addUserAction("Contentsquare",n):"function"==typeof DD_RUM.addAction&&DD_RUM.addAction("Contentsquare",n)}}),f)}))}var e}),f)}),500)}!function(e,n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(o){n?t||(e(o),t=!0):e(o)}])}((function(e){o((function(){e&&1===e.pageNumber&&function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}("DD_RUM",y)}),f)}),!0)}),f)}]);
/* integration-usertesting 3.2.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"UserTesting","dvarPrefix":"UGC_UT_","apvPrefix":"cs_usertesting","replayKey":"ut"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-usertesting-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function o(e,n){n||(n="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&=]"+e+n+"([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}t.r(n);function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,r,o;if(i((function(){const i=e.name;n=e.version;const a=i.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";o=new RegExp(u+"$").test(a),r=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(u="-cap",o=new RegExp(u+"$").test(a),r=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),s=c.parameterName,p=c.snippetBuildName,d=c.snippetVersion;i((function(){const e=u.displayName,n=u.dvarPrefix,t=(u.apvPrefix,u.replayKey);var c,l;c=e,l=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+l);const f=r(s,"settings"),w=(g=f,Array.isArray(g)?f:[]);var g;const _=w.includes("sendArtificialPageviews"),m=w.includes("setReplayLinkToCurrentPV");let x=!1;const y=document.location.search;if(y.indexOf("utm_source=UserTesting")>-1&&y.indexOf("utm_campaign=")>-1&&y.indexOf("utm_content=")>-1){const e=o("utm_campaign"),r=o("utm_content");r&&function(e,n,t,i){return new Promise((function(r,o){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(i){if(i&&i.replayLink&&i.isRecording){let o="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(o);e.set("pvid",1);const n=e.toString();o=decodeURIComponent(n)}r(o)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))}(t,m).then((function(e){i((function(){if(x=!0,e){!function(e,n){const t=new XMLHttpRequest;t.open("POST",e),t.setRequestHeader("Content-Type","application/json"),t.send(n)}("https://cloudhub-prod.usertesting.com/usertesting/api/v1/partner-analytics",JSON.stringify({usertesting_eid:r,external_link:e,partner_name:"Contentsquare"}))}}),p)})),e&&(O="etr",S="cs_usertesting=study_id_"+e,function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(b=n+(b="Study ID"),v=e),x&&"etr"===O&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(b),S&&_&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+S),a(p,`Dynamic variable with ${b} and value ${v} sent`))}var b,v,O,S}),p)}]);
/* integration-brightcove 2.7.0 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Brightcove Player","dvarPrefix":"VA_BCP_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-brightcove-contentsquare","version":"2.7.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function d(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function u(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var a=t(0);const c=function(e){let n,t,i,d;if(o((function(){const o=e.name;n=e.version;const u=o.replace("@contentsquare/integration-","");t=u+"-"+n;let a="-contentsquare";d=new RegExp(a+"$").test(u),i=u.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),d||(a="-cap",d=new RegExp(a+"$").test(u),i=u.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),d)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),r=c.parameterName,s=c.snippetBuildName,l=c.snippetVersion;o((function(){const e=a.displayName,n=a.dvarPrefix;var t,c;t=e,c=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+c);const f=i(r,"settings"),p=(g=f,Array.isArray(g)?f:[]);var g;const b=p.includes("enableAdLoaded"),h=p.includes("enableAdStarted"),_=p.includes("enableAdPlay"),V=p.includes("enableAdCompleted"),m=p.includes("enableAdPaused"),O=p.includes("enableAdPlayViewDuration"),y=p.includes("enableAdClicked"),w=p.includes("enableVideoStarted"),x=p.includes("enableVideoPaused"),I=p.includes("enableVideoCompleted"),D=p.includes("enableVideoBuffering"),v=p.includes("enableVolumeChanged"),A=p.includes("enableVideoMuted"),N=p.includes("enableVideoUnmuted"),S=p.includes("enableFullscreen"),C=p.includes("enableVideoSeeked"),P=p.includes("enableVideoPlayDuration"),E=p.includes("enableVideoError");function T(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),u(s,`Dynamic variable with ${e} and value ${t} sent`)}!function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)d(e,n,t);else{let e=t,i=0;const u=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?d(o[i-1],n,e):d(o[i-1],u,e)};u()}}("videojs",(function(){setTimeout((function(){o((function(){const e=[];if("function"==typeof videojs.getAllPlayers){videojs.getAllPlayers().forEach((function(t){!function(t){w&&t.on("play",(function(t){o((function(){const o=n(t),i="play_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video started","Video ID : "+o))}),s)}));x&&t.on("pause",(function(t){o((function(){const o=n(t),i="pause_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video paused","Video ID : "+o))}),s)}));I&&t.on("ended",(function(t){o((function(){const o=n(t),i="ended_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video completed","Video ID : "+o))}),s)}));D&&t.on("waiting",(function(t){o((function(){const o=n(t),i="waiting_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video buffered","Video ID : "+o))}),s)}));v&&t.on("volumechange",(function(t){o((function(){const o=n(t),i="volumechange_"+o;-1===e.indexOf(i)&&(e.push(i),T("Volume changed","Video ID : "+o))}),s)}));A&&t.on("mute",(function(t){o((function(){const o=n(t),i="mute_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video muted","Video ID : "+o))}),s)}));N&&t.on("unmute",(function(t){o((function(){const o=n(t),i="unmute_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video unmuted","Video ID : "+o))}),s)}));S&&t.on("fullscreenchange",(function(t){o((function(){const o=n(t),i="fullscreenchange_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video fullscreen","Video ID : "+o))}),s)}));C&&t.on("seek",(function(t){o((function(){const o=n(t),i="seek_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video seeked","Video ID : "+o))}),s)}));P&&t.on("timeupdate",(function(t){o((function(){if(!t.target.player.cache_||!t.target.player.cache_.currentTime)return;const o=t.target.player.cache_.currentTime/t.target.player.cache_.duration*100,i=Math.floor(o);let d;if(i>=25&&(d="25"),i>=50&&(d="50"),i>=75&&(d="75"),100===i&&(d="100"),d){const o=n(t),i="timeupdate_"+d+"_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video Play Duration","Video ID : "+o+" : "+d+"%"))}}),s)}));b&&t.on("ads-load",(function(t){o((function(){const o=n(t),i="ads-load_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad loaded","Video ID : "+o))}),s)}));h&&t.on("ads-ad-started",(function(t){o((function(){const o=n(t),i="ads-ad-started_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad started","Video ID : "+o))}),s)}));_&&t.on("ads-play",(function(t){o((function(){const o=n(t),i="ads-play_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad play","Video ID : "+o))}),s)}));V&&t.on("ads-ad-ended",(function(t){o((function(){const o=n(t),i="ads-ad-ended_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad completed","Video ID : "+o))}),s)}));m&&t.on("ads-pause",(function(t){o((function(){const o=n(t),i="ads-pause_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad paused","Video ID : "+o))}),s)}));O&&(t.on("ads-first-quartile",(function(t){o((function(){const o=n(t),i="ads-first-quartile_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad play view duration","Video ID : "+o+" : 25%"))}),s)})),t.on("ads-midpoint",(function(t){o((function(){const o=n(t),i="ads-midpoint_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad play view duration","Video ID : "+o+" : 50%"))}),s)})),t.on("ads-third-quartile",(function(t){o((function(){const o=n(t),i="ads-third-quartile_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad play view duration","Video ID : "+o+" : 75%"))}),s)})));y&&t.on("ads-click",(function(t){o((function(){const o=n(t),i="ads-click_"+o;-1===e.indexOf(i)&&(e.push(i),T("Ad clicked","Video ID : "+o))}),s)}));E&&t.on("error",(function(t){o((function(){const o=n(t),i="error_"+o;-1===e.indexOf(i)&&(e.push(i),T("Video error","Video ID : "+o))}),s)}))}(t)}))}function n(e){return e&&e.target&&e.target.player&&e.target.player.id_||"No ID"}}),s)}),500)}))}),s)}]);
/* integration-myfeelback 3.2.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"MyFeelBack","dvarPrefix":"FB_MFB_","apvPrefix":"cs_myfeelback","replayKey":"mfb"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-myfeelback-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var o=t(0);const u=function(e){let n,t,r,a;if(i((function(){const i=e.name;n=e.version;const o=i.replace("@contentsquare/integration-","");t=o+"-"+n;let u="-contentsquare";a=new RegExp(u+"$").test(o),r=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(o),r=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),c=u.parameterName,s=u.snippetBuildName,d=u.snippetVersion;i((function(){const e=o.displayName,n=o.dvarPrefix,t=o.apvPrefix,u=o.replayKey;var l,f;l=e,f=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(l+" - v"+f);const p=r(c,"settings"),w=(g=p,Array.isArray(g)?p:[]);var g;const _=w.includes("sendArtificialPageviews"),m=w.includes("setReplayLinkToCurrentPV");let y=!1;function b(e,t,i,r){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),y&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),r&&_&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+r),a(s,`Dynamic variable with ${e} and value ${t} sent`)}let v=!1,x=!1;window.addEventListener("CS_MFB_Integration_TrackPage",(function(e){i((function(){if(e&&e.detail&&e.detail){const n=e.detail.surveyIdentifier,i=(e.detail.pageIdentifier,e.detail.eventName);v||"survey-page-view"!==i?x||"survey-page-submit"!==i||(x=!0,b("Feedback Submitted",n,"etr",t+"=feedback_submitted_"+n)):(v=!0,b("Feedback Displayed",n,0,t+"=feedback_displayed_"+n))}}),s)}));const S=[];window.addEventListener("CS_MFB_Integration_TrackVar",(function(e){i((function(){if(e&&e.detail&&e.detail){const n=e.detail.surveyIdentifier,t=(e.detail.pageIdentifier,e.detail.formFieldIdentifier);let i=e.detail.answer;-1===S.indexOf(t)&&(S.push(t),isNaN(i)||(i=parseInt(i)),b(n+" : "+t,i))}}),s)}));const N=new window.Event("CS_MFB_Integration_Listener");window.dispatchEvent(N),function(e,n,t,i){return new Promise((function(r,a){function o(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(i){if(i&&i.replayLink&&i.isRecording){let a="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(a);e.set("pvid",1);const n=e.toString();a=decodeURIComponent(n)}r(a)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?o():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&o()}]))}))}(u,m).then((function(e){i((function(){y=!0,e&&sessionStorage.setItem("ContentsquareReplay",e)}),s)}))}),s)}]);
(()=>{var Su=Object.defineProperty;var vu=(s,r,t)=>r in s?Su(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ve=(s,r,t)=>vu(s,typeof r!="symbol"?r+"":r,t);var fe={};fe.d=(s,r)=>{for(var t in r)fe.o(r,t)&&!fe.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};fe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();fe.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);fe.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var io={};fe.r(io);fe.d(io,{getRequestParameters:()=>Np});function Rs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var ht=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function te(s){return tt(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function vs(s){return s===parseInt(s,10)}function z(s){return tt(s)&&(typeof s=="string"||s instanceof csString)}function gr(s){return typeof s=="boolean"}function _s(s){return typeof s=="object"}function tt(s){return typeof s!="undefined"}function Mt(s){return tt(s)&&s!==null}function vc(s){return typeof s=="object"&&s!==null}function _u(s,r,t){return vs(s)&&s>=r&&s<=t}function In(s){for(let r in s)return!1;return!0}function pe(s){return typeof s=="function"}function Ri(s){return s instanceof Element}function Oe(s){return s instanceof Error}function Ir(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var qr={[ht.debug]:0,[ht.warn]:1,[ht.implementation]:1,[ht.error]:2,[ht.critical]:3},at={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function wu(s){at=s}var D=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return rs(n,o.bind(this))(...c)}}};function rs(s,r){return function(...t){try{let e=r.apply(this,t);return tt(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>at.error(Oe(i)?i:new Error(i),s)):e}catch(e){try{at.error(Oe(e)?e:new Error(e),s)}catch{}}}}function it(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function ro(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Zo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function _c(s){let r=self.atob(s);return ro(r)}function Pn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function ta(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){at.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?_c(e[1]):ro(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var wc=typeof performance!="undefined"&&!!performance.now,ea=wc?()=>performance.now():()=>csDate.now(),Au=(()=>{var s,r;return wc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),no=34164e6,O={now(){return Math.round(ea()+Au)},elapsed(){return ea()}};function sa(){return Math.floor(O.now()/1e3)}function Ac(){return typeof self.Promise=="function"}function Tu(){var s;return typeof crypto!="undefined"&&pe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function ia(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Dt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ci(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var bu=Number.MAX_SAFE_INTEGER||9007199254740991,ws={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=bu){return Math.floor(Math.random()*s)}},Ii=typeof window=="undefined";function Ru(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof fe.g!="undefined"?fe.g:typeof process!="undefined"?process:Function("return this")()}var nt=Ru();function mr(s,r){let t,e,i,n,o,c=null,l=u=>{let d=O.elapsed();if(!u&&c!==null){let E=r-(d-c);if(E>=1){i=nt.csSetTimeout(l,E);return}}let g=d-n;i=null,c=null,n=null,o=s.apply(t,[g,...e])},h=function(){if(t=this,e=arguments,n){c=O.elapsed();return}return n=O.elapsed(),i=nt.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(nt.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(nt.csClearTimeout(i),i=null)},h}var As=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=`${t===""?"":`${t}.`}${this.name}`,o=csArray.prototype.map.call(i,c=>({name:n,parameter:c,value:Math.round(e[c])}));return s.globalService.push(o),this.reset(),o.length>0}}return s.globalService=null,it([D()],s.prototype,"flush",null),s})(),Rt=(()=>{class s extends As{constructor(t,e=100){super(t),this.kE=e,this.values={},e&&(this.debouncedFlush=mr(()=>this.flush(),this.kE))}count(t,e=1){As.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),ra=(()=>{class s extends As{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){return this.count===0?!1:super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Vs=(()=>{class s extends As{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,u;let d=g=>this.values[`${t}.${g}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[u=`${t}.total`])!==null&&n!==void 0||(h[u]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=d("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),Cu=(()=>{class s extends As{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;As.globalService&&((i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),$={counters:{commandsFromIntegrations:new Rt("commands-from-integrations"),commandsFromCSTC:new Rt("commands-from-cstc"),commandsFromIframe:new Rt("commands-from-iframe"),commandApplied:new Rt("command-applied"),commandError:new Rt("command-error"),commandMisuse:new Rt("command-misuse"),CSTCSnippetUsed:new Rt("cstc-snippet-used"),redactedPII:new Rt("redacted-pii"),pageAnonymisation:new Rt("page-anonymisation"),patchedNativeFunctions:new Rt("patched-native-functions"),pureWindowState:new Rt("pure-window-state"),sensitiveElements:new Rt("sensitive-elements"),cspErrors:new Rt("csp-errors"),networkRequests:new Rt("network-requests"),webVitalsErrors:new Rt("web-vitals-errors"),trackedFeatures:new Rt("tracked-features"),longTasks:new ra("long-tasks"),errors:new Rt("errors"),methodPerformance:new Vs("perf"),downloadTime:new Vs("download-time",["max","average"]),transferSize:new Vs("transfer-size",["max","average"]),evalTime:new Vs("eval-time",["max","average"]),blockingTime:new ra("blocking-time"),inpContribution:new Vs("inp-contribution"),tasks:new Vs("tasks"),availableFeatures:new Cu("available-features")},setService(s){As.setGlobalService(s)}},Pi=(()=>{class s{constructor(){this.na=0}get length(){return this.na}get isEmpty(){return!this.Js}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.na++,this.Sn?this.Sn=this.Sn[1]=[t,void 0]:this.Sn=this.Js=[t,void 0]}pop(){if(!this.Js)return null;this.na--;let t=this.Js[0];return this.Js=this.Js[1],this.Js||(this.Sn=void 0),t}forEach(t){let e=this.Js;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.na=0,this.Js=this.Sn=void 0}}return s})(),On=0,oo=s=>{On++,csQueueMicrotask(()=>Is(()=>{try{s()}finally{On--}},[ge.MicroTask,"queueMicrotask"]))},yr=new Pi,Er=new Pi;function Lt(s,r="high"){yr.isEmpty&&Er.isEmpty&&Tc(Iu),r==="high"?Er.push(na(s)):yr.push(na(s))}function Tc(s,r=10){r===0?oo(s):csQueueMicrotask(()=>Tc(s,r-1))}function Iu(){for(;!Er.isEmpty;)Er.pop()();for(;!yr.isEmpty;)yr.pop()()}async function bc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Lt(t))}function na(s){return function(){try{s.apply(window,arguments)}catch(r){at.critical(r)}}}var hr="null",Ke=null,Rc=[],Pu=()=>{var s;return Ii||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ii&&Pu()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Ke=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Nn({type:"UXA_EVENT",event:s.detail})}),Ke.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===hr)return;hr=s.data.sessionId,csArray.prototype.forEach.call(Rc,r=>r()),Ke==null||Ke.postMessage({type:"CONNECTED",sessionId:hr})}}));function Ou(s){Ii||(hr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Rc,s)))}function Nn(s){Ke==null||Ke.postMessage(s)}function ns(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ie(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Nu(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Cc(s,r){let t=[];return Nu(s,r,e=>csArray.prototype.push.call(t,e)),t}function X(s,r){if(Mu(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Mu(s){return s.length>=0}function Xs(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Si(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Du(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function vi(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function ku(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function oa(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Cs(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function xu(s){return csArray.isArray(s)&&s.length>0}var Oi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),_e=(()=>{class s extends Oi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var aa=(()=>{class s extends Oi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),we=(()=>{class s extends Oi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=O.elapsed();t(),this.count++;let i=O.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=O.elapsed();return()=>{this.count++;let e=O.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Lu=(()=>{class s extends Oi{constructor(){super("INP","Value: {value}")}getData(){return{value:pt.tasks.eventListener.max}}}return s})(),pt={general:{category:"General",nbEvents:new _e("Nb of Events"),pendingTasks:new _e("Pending Tasks"),pendingEvents:new _e("Pending Tasks"),nbOfMutationObservers:new aa("Nb of Mutation Observers"),inp:new Lu},mutations:{category:"Mutations",initialDOM:new we("Initial DOM"),pendingMutations:new _e("Nb of Mutations scheduled"),serializedMutations:new we("Serialized Mutations"),count:new _e("Mutation Count"),elementMutationObserved:new aa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new we("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new _e("Nb of Hidden Elements "),nbElements:new _e("Nb of  Elements")},tasks:{category:"Tasks",tasks:new _e("Tasks"),errors:new _e("Errors"),timer:new we("Timers"),microtask:new we("Microtasks"),mutationObserver:new we("MutationObserver"),monkeyPatch:new we("MonkeyPatch"),eventListener:new we("EventListener"),intersectionObserver:new we("Intersection")}};function Vu(){let s=null;Ou(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(pt),n=>pt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Oi));Nn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Is(()=>{let n=Cc(Ie(e,o=>Ie(o,c=>c.getData())),o=>o);Nn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[ge.Timer,"performance-counter-interval"])},1e3))})}var ge=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Bt=null,Uu=["click","tap","keyup","keydown","pointerup","pointerdown"];async function Is(s,r,t=null){if(Bt&&r[0]!==ge.MicroTask)return s();t&&(Bt=t),Bt||(Bt={type:r[0],elapsed:0},pt.tasks.tasks.increase());try{Bt.elapsed+=ju(s)}catch(e){pt.tasks.errors.increase(),at.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{On<=0&&(pt.tasks[Bt.type].elapsed(Bt.elapsed),Bt.elapsed>50&&($.counters.longTasks.push(Bt.elapsed),$.counters.blockingTime.push(Bt.elapsed-50)),$.counters.tasks.add(r[0],Bt.elapsed),csArray.prototype.includes.call(Uu,r[1])&&$.counters.inpContribution.add(r[1],Bt.elapsed),Bt=null)}}function ju(s){let r=O.elapsed();return s(),O.elapsed()-r}var Wr,Hu="cs-native-frame";var Fe={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Ic(s,r){let t=Rs(window,s);return function(e,i){return t(()=>Is(e,[r,s]),i)}}window.csSetTimeout=Ic("setTimeout",ge.Timer);window.csSetInterval=Ic("setInterval",ge.Timer);window.csQueueMicrotask=(Wr=Rs(window,"queueMicrotask"))!==null&&Wr!==void 0?Wr:setTimeout;window.csClearTimeout=Rs(window,"clearTimeout");window.csClearInterval=Rs(window,"clearInterval");window.csFileReader=Rs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Bu(){let s=document.createElement("iframe");s.id=Hu,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Fu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function $u(s,r,t){let e=Fu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Pc(s){var r,t;Object.keys(Fe.constructors).forEach(i=>{window[Fe.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),qu(s);let e=s.MutationObserver;("Prototype"in window||zu())&&(e=(t=(r=Rs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=ca(window.IntersectionObserver,ge.IntersectionObserver),window.csMutationObserver=ca(e,ge.MutationObserver),Us("csNode",Fe.nodeProperties,s.Node.prototype,"get"),Us("csElement",Fe.elementProperties,s.Element.prototype,"get"),Us("csElement",Fe.elementPropertiesValues,s.Element.prototype,"value",!1),Us("csHTMLImageElement",Fe.imageProperties,s.HTMLImageElement.prototype,"set"),Us("csEvent",Fe.eventProperties,s.Event.prototype,"get"),Us("csNavigator",Fe.navigatorProperties,s.navigator,"value")}function Us(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=$u(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function ao(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Gu(){try{let s=Bu();return s?(window.CSPureWindow=s,Pc(window.CSPureWindow),!0):!1}catch(s){return ao("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Gu())try{Pc(nt)}catch(s){ao("Critical",`failed to copy references from window: ${s.message}`)}function zu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function qu(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function ca(s,r){try{let t=function(e,i){return new s((o,c)=>{Is(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return ao("Warning",`failed to extends ${s.name}`),s}}var et=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Mn(s){return et.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Wu(s){let r=s.getAttribute("id");return r&&et.escapeInvalidCharacters(r)}function ut(s){return csNodenodeType.apply(s)===1}function Sr(s){return csNodenodeType.apply(s)===3}function Yu(s){return csNodenodeType.apply(s)===8}function Oc(s){return ut(s)&&s.localName==="link"}function Xu(s){return ut(s)&&s.localName==="source"}function Nc(s){return ut(s)&&s.localName==="a"}function co(s){return Oc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Ku(s){return ut(s)&&s.localName==="img"}function Ni(s){return ut(s)&&s.localName==="style"}function Pr(s){return ut(s)&&s.localName==="input"}function Or(s){return ut(s)&&s.localName==="textarea"}function Mi(s){return ut(s)&&s.localName==="script"}function Ju(s){return ut(s)&&s.localName==="button"}function Ks(s){return ut(s)&&"ownerSVGElement"in s}function lo(s){return ut(s)&&s.localName==="select"}function Qu(s){return ut(s)&&s.localName==="details"}function Zu(s){return ut(s)&&s.localName==="summary"}function td(s){return Ks(s)&&s.localName==="image"}function ed(s){return Ks(s)&&s.localName==="use"}function sd(s){return Ks(s)&&s.localName==="feImage"}function id(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function rd(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function vr(s){return csNodenodeType.apply(s)===9}function _i(s){return id(s)&&"host"in s&&"mode"in s}function Mc(s){return ut(s)&&!!csElementshadowRoot.apply(s)&&_i(csElementshadowRoot.apply(s))}var nd=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function od(s){return ut(s)&&Mt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(nd,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Di="detached";function Dc(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return _r(r)&&csArray.prototype.push.call(t,Di),{ancestors:t,selectionRoot:r}}function ad(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Nc(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return _r(r)&&csArray.prototype.push.call(t,Di),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function _r(s){return Pe.isValidElement(s)}var ps=(()=>{var s,r;return(r=(s=nt.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),ce=ps.matches||ps.matchesSelector||ps.mozMatchesSelector||ps.msMatchesSelector||ps.oMatchesSelector||ps.webkitMatchesSelector,la=ps.closest,kc=9;function cd(s,r){return r?csArray.prototype.some.call(r,t=>ce.call(s,t)):!1}function ld(s,r,t){if(s===Di||csNodenodeType.apply(s)===kc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Mn(r),o=0,c=r.previousElementSibling;for(;c;)(Mn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!cd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function hd(s,r,t){if(s===Di||csNodenodeType.apply(s)===kc)return 0;let e=0,i=r.previousElementSibling;for(;i;)ce.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var ud=[/\d{4}/,/^ember\d+$/],dd="@",ho="data-cs-override-id",fd="data-cs-dynamic-id";function xc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=Mn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${dd}`)),md(s,t)){let g=uo(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${ho}="${g}"]`}}let c=Ad(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=pd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Wu(s);if(Ed(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let u=gd(s,e);if(u){let g=hd(r,s,u);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${u}](${g})`}}let d=ld(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function pd(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(ce.call(s,e)&&wd(e,r))return e}}function gd(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(ce.call(s,t))return t}}function md(s,r){let t=uo(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&fo(ho,t,r)}function yd(s){return uo(s)!==null}function uo(s){return s.getAttribute(ho)}function Ed(s,r,t,e){return r&&!yd(s)&&!Sd(s,r,e)&&_d(r,t)}function Sd(s,r,t){return s.hasAttribute(fd)||vd(r,t)}function vd(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(ud,e=>e.test(s))||t)}function _d(s,r){return s&&fo("id",s,r)}function fo(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function wd(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Ad(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&fo(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Dn=11;function wr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ha(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=xc(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ha(h,t)}${o}`}let l=wr(s,r,t);return`${l?`${l}>`:""}${o}`}function ha(s,r){if(s===Di)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Dc(s.host);return`${wr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===Dn?"|fragment|":""}var Lc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Td=(()=>{class s extends Lc{constructor(){super(...arguments),this.oa=!1,this.aa=!1,this.Jc=!1}xE(t,e){return this.oa&&!(e===null&&_r(t))&&csNodenodeType.apply(t)!==Dn&&!t.host}LE(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.xE(t,e))return;let o=!1;e===null&&_r(t)&&(o=!0,this.done=!0);let c=this.aa&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Jc=!0,this.oa=!1,this.aa=!1),!l&&e===null&&csNodenodeType.apply(t)===Dn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.LE(t))return;let h=e!=null?e:"detached",{elementSelector:u,hasUniqueIdentifier:d}=xc(t,h,i,this.options);d&&(this.aa=!0,this.oa=!this.options.fullPath);let g=`${o?`|detached|${c}`:""}${this.oa&&!d?"":u}`,S=!d&&this.aa&&!this.options.fullPath?"":this.path&&!this.Jc?">":"";this.Jc=!1,this.path=`${g}${S}${this.path}`}}return s})(),Et=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let d=window.csScreen.width;return vs(d)&&d>0?d:window.screen.width}r.screenWidth=o;function c(){let d=window.csScreen.height;return vs(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function u(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=u}(s||(s={})),s})();function qt(s,r=kt.SHOW_ALL){let t=r|kt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ua(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ua(c);if(r&kt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Xr[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){Xr[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((Xr[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ua(s){return s&&Mc(s)?s.shadowRoot:null}var Yr=(()=>{var s;return(s=nt.Node)!==null&&s!==void 0?s:{}})(),kt=(()=>{var s;return(s=nt.NodeFilter)!==null&&s!==void 0?s:{}})(),Xr={2:kt.SHOW_ATTRIBUTE,4:kt.SHOW_CDATA_SECTION,8:kt.SHOW_COMMENT,11:kt.SHOW_DOCUMENT_FRAGMENT,9:kt.SHOW_DOCUMENT,10:kt.SHOW_DOCUMENT_TYPE,1:kt.SHOW_ELEMENT,[Yr.ENTITY_NODE]:kt.SHOW_ENTITY,[Yr.ENTITY_REFERENCE_NODE]:kt.SHOW_ENTITY_REFERENCE,[Yr.NOTATION_NODE]:kt.SHOW_NOTATION,7:kt.SHOW_PROCESSING_INSTRUCTION,3:kt.SHOW_TEXT},Vc=!1,kn=5,er=50;function bd(s=5){Vc=at.isPerfLoggingActive(),kn=s}function Ps(s,r){return function(){if(!Vc)return s.apply(this,arguments);let t=O.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=O.elapsed()-t;i>=kn&&$.counters.methodPerformance.add(r,i),i>er&&$.counters.blockingTime.push(i-er)});else{let i=O.elapsed()-t;i>=kn&&$.counters.methodPerformance.add(r,i),i>er&&$.counters.blockingTime.push(i-er)}return e}}var wt=function(s){return function(r,t,e){let i=e.value;e.value=Ps(i,s)}},Es=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&Mc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return qt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Ps(i,"getAllShadowHosts")}(s||(s={})),s})(),Kr=(()=>{var s;return(s=nt.Node)!==null&&s!==void 0?s:Object})(),ot=(()=>{let s;return function(r){let t="isConnected"in Kr.prototype?v=>v.isConnected:v=>!v.ownerDocument||!(v.ownerDocument.compareDocumentPosition(v)&v.DOCUMENT_POSITION_DISCONNECTED);function e(v,L){for(let V=v;V;V=csNodenextSibling.apply(V))L(v)}r.forEachChild=e;function i(v){return t(v)}r.isConnected=i;function n(v,L){let V=[];for(let F of l(v,L))csArray.prototype.push.call(V,F);return V}r.getAncestors=n;let o=(v,L)=>{var V;return(V=csNodeparentNode.apply(v))!==null&&V!==void 0?V:L&&_i(v)?v.host:null};function c(v,L,V=!1){let F=v;for(;F;){if(L(F))return F;let dt=o(F,V);if(dt&&dt!==F)F=dt;else break}return null}r.findAncestor=c;function*l(v,L=!1){let V=v;for(;V;){yield V;let F=o(V,L);if(F&&F!==V)V=F;else break}}r.walkUp=l;function h(v,L){if(v===L||L.contains(v))return!0;let V=r.getParentElement(v);return V&&V!==v?h(V,L):!1}r.isDescendantOf=h;function u(v){var L;return v.parentElement?v.parentElement:r.getRootNode(v)?(L=r.getRootNode(v))===null||L===void 0?void 0:L.host:null}r.getParentElement=u;function d(v,L=document){let V=ns(window.csquerySelectorAll[L.nodeType].call(L,v)),F=Es.getAllShadowHosts(L);for(let dt of F){let At=Es.getShadowRoot(dt);if(!At)continue;let Se=ns(window.csquerySelectorAll[At.nodeType].call(At,v));csArray.prototype.push.call(V,...Se)}return V}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in Kr.prototype)return(V,F)=>V.getRootNode(F);function v(V){let F=L(V);return _i(F)?v(F.host):F}function L(V){return csNodeparentNode.apply(V)!=null?L(csNodeparentNode.apply(V)):V}return(V,F)=>typeof F=="object"&&!!F.composed?v(V):L(V)})();function g(v){return v==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(v)}function E(v){let L=v.getBoundingClientRect();return L.right+Et.windowOffsetX()<0||L.bottom+Et.windowOffsetY()<0}function S(v){var L,V;if(((L=v.checkVisibility)===null||L===void 0?void 0:L.call(v,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!v.offsetParent){if(!v.getBoundingClientRect)return at.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${v instanceof Kr} Ctor: ${(V=v==null?void 0:v.constructor)===null||V===void 0?void 0:V.name}`),!1;let At=v.getBoundingClientRect();if(At.width===0&&At.height===0)return!0}let F=window.getComputedStyle(v);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||g(F.color):!0}r.isHiddenByCSS=S;function P(v){if(S(v))return!0;let V=u(v);return V!=null&&P(V)}r.areAncestorsHiddenByCSS=P;function C(v){let L=null,V=v;do if(S(V))L=V;else break;while(V=u(V));return L}r.getTopAncestorHiddenByCSS=C;function A(v){let L=T(v);return L!==null&&!v.contains(L)&&!L.contains(v)}function T(v){let L=v.getBoundingClientRect(),V=L.left+.5*L.width,F=L.top+.5*L.height;return R(document,V,F)}r.getTopElement=T;function x(v){if(!v.getBoundingClientRect)return null;let L=v.getBoundingClientRect(),V=L.x+L.width/2,F=L.y+L.height/2;return r.getTopElementFromPoint(document,V,F)}r.getElementOnTop=x;function R(v,L,V){let F=v.elementFromPoint(L,V);if(!F)return null;let dt=Es.getShadowRoot(F);return dt&&dt!==r.getRootNode(document.body)&&dt!==v?R(dt,L,V):F}r.getTopElementFromPoint=R;function _(v){return!E(v)&&!S(v)&&!A(v)}r.isVisibleInDocument=_;function j(v){return S(v)?!1:U(v)}r.isVisibleInViewportInForeground=j;function U(v){let L=T(v);return L===null?!1:v===L?!0:jt(v)?v.textContent!==""&&L.contains(v):v.contains(L)}r.isInViewPort=U;function K(v,L,V){let F=v.getAttributeNS(L,V);return F===""?v.hasAttributeNS(L,V)?F:null:F}r.getAttributeNS=K;function gt(v){return!!(v.hasAttribute("tabIndex")||v.getAttribute("contentEditable")==="true"||Nc(v)&&v.hasAttribute("href")||(lo(v)||Or(v)||Pr(v)||Ju(v))&&!v.hasAttribute("disabled")||Qu(v)||Zu(v))}r.isElementFocusable=gt;function jt(v){return v.localName==="span"||v.localName==="a"||v.localName==="b"||v.localName==="i"||v.localName==="button"||v.localName==="input"||v.localName==="label"||v.localName==="cite"||v.localName==="small"||v.localName==="strong"||v.localName==="code"||v.localName==="abbr"||v.localName==="em"||v.localName==="dfn"||v.localName==="time"||v.localName==="output"||v.localName==="object"||v.localName==="sub"}r.isInlineElement=jt;function Yt(v){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>v(),{once:!0}):csSetTimeout(v)}r.onDocumentLoaded=Yt}(s||(s={})),s})(),Rd=(()=>{class s{constructor(t){this.VE=t}run(t){let e=[...this.VE],i=ot.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.UE(e,o,c,n),this.jE(e),e.length===0)break;i.length===0&&o.host&&(i=ot.getAncestors(o.host,!1),n=i[i.length-1])}}UE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}jE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Cd=(()=>{class s extends Lc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.HE(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}HE(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.BE(t.id),t.classList&&(e+=this.FE(csArray.from(t.classList))),t.attributes&&(e+=this.$E(t)),e}BE(t){return t?`#${t};`:""}FE(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}GE(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ks(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Pr(t)&&e==="value"}zE(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}qE(t){let e={};for(let i of csArray.from(t.attributes))this.GE(t,i.name)||(e[i.name]=i.value);return e}$E(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.qE(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.zE(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),Pe=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return{path:"",hierarchy:""};if(!t(u))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new Td(h),g=new Cd(l);return new Rd([d,g]).run(u),{path:d.getPath(),hierarchy:g.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:u,selectionRoot:d}=Dc(h);return wr(u,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:u,ancestors:d,selectionRoot:g}=ad(h);return{path:wr(d,g,l),firstAnchorParent:u}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Pe;var Uc=["t.contentsquare.net","clicktale"],Id=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Uc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,G.critical(t)}};window.addEventListener("error",Id);var G=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Uc,t)}static setStrategy(t){s.fr=t}static computeIsActive(t){s.Ge=ws.boolean(t),s.Ge?s.Qc=ws.boolean(10):s.Qc=!1}static isLoggingActive(){return s.Ge}static getStrategy(){return s.fr}static debug(t,e=""){s.Ge&&this.fr.send(t,e,ht.debug)}static warn(t,e=!0,i=""){var n;$.counters.errors.count("warning"),s.Ge&&e&&this.fr.send(t,i,ht.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){$.counters.errors.count("implementation"),s.Ge&&this.fr.send(t,e,ht.implementation)}static error(t,e=""){var i;$.counters.errors.count("error"),s.Ge&&this.fr.send(t,e,ht.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){$.counters.errors.count("critical"),this.fr.send(t,e,ht.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return tt(nt.Promise)&&n instanceof nt.Promise?n.then(o=>o,o=>s.error(Oe(o)?o:new Error(o),t)):n}catch(n){try{s.error(Oe(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.Qc}}return s.Ge=!1,s.Qc=!1,s})();var xn=!1;function Pd(){xn=!0}function Pt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&xn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&xn||e.call(this,i,n)}}}}function Od(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var Nd=(()=>{class s{constructor(t,e){this.ca=t,this.Jd=e}init(){this.Qd=this.ca!==this.ca.top,this.Zd=this.Jd.isWebView&&this.ca===this.ca.top,this.Jd.iframesTracking&&this.Qd||this.Zd?this.tf=!1:this.tf=!0}isInIframeContext(){return this.Qd}isTopWindowTracker(){return this.tf}isInWebViewContext(){return this.Zd}}return s})(),It=!Ii&&document.createElement("a"),Md=/(:443|:80)$/;function ae(s){return It?(It.href=s,It.href):""}function Dd(s,r){return new csURL(s,r).href}function jc(s){let r=go(s);return r===null?"":decodeURIComponent(r.hostname)}function po(s,r){return csArray.prototype.some.call(r,t=>Ci(s,`.${t}`)||s===t||t==="")}function kd(s){return s[0]==="/"?s:`/${s}`}function da(s){return csString.prototype.replace.call(s,Md,"")}function go(s){return!It||!Dt(s,"http://")&&!Dt(s,"https://")?null:(It.href=s,{hash:It.hash,host:da(It.host),hostname:It.hostname,href:It.href,origin:It.origin?It.origin:da(`${It.protocol}//${It.host}`),pathname:kd(It.pathname),port:It.port,protocol:It.protocol,search:It.search})}var Ct=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var xd=(()=>{class s{setContext(t,e){this.N=t,this.R=e}getVisitorService(){return this.N}getSessionService(){return this.R}}return s})();function fa(){}function Ar(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ld(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Jr=csSymbol("cachedJson");function Vd(s){if(s[Jr])return s[Jr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ts(s[0]);for(let t=1;t<s.length;t++)r+=","+Ts(s[t]);return r+="]"}return s[Jr]=csJSON.stringify(s)}var Ts=typeof window.Symbol!="undefined"?Vd:csJSON.stringify;var wi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Hc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),qs=(()=>{class s extends Hc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Zc(t);let e=wi.toQuery(t);this.WE(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}WE(t){let e=new window.Image(1,1);e.onload=fa,e.onerror=fa,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Zc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Ud=(()=>{class s{constructor(t,e){this.Ts=t,this.YE=e}init(){this.bs=new qs(this.Ts.getLoggerUri()),this.bs.setRequestParametersProviders(this,this.YE)}send(t){this.ha=t,this.bs.send()}getRequestParameters(){return{a:this.ha.app,l:this.ha.level,m:this.ha.message,s:this.ha.stacktrace}}}return s})(),jd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Hd=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Bd="CS_ANONYMIZED_EMAIL",Qr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Fd=new csRegExp(`(ey${Qr}\\.ey${Qr}\\.${Qr})`,"g"),$d="CS_ANONYMIZED_JWT",Gd=/[0-9]{4}/,zd=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,qd="CS_ANONYMIZED_PII",Wd="\u2022",Yd=/\d/g,Xd=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Kd=/(?:\d{1,3}\.){3}\d{1,3}/,Jd=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,$e=(()=>{let s;return function(r){function t(u){return csString.prototype.replace.call(u,jd,Bd)}r.replaceEmail=t;function e(u){return csString.prototype.replace.call(u,Fd,$d)}r.replaceJWT=e;function i(u,d){return csString.prototype.replace.call(u,zd,d)}r.replaceCreditCardNumber=i;function n(u){return csString.prototype.replace.call(u,Yd,Wd)}r.replaceDigits=n;function o(u){return Kd.test(u)||Jd.test(u)}r.mayHaveIPAddress=o;function c(u){return Xd.test(u)}r.mayHaveNumberSequence=c;function l(u){return Gd.test(u)}r.mayHaveCreditCardNumber=l;function h(u){return Hd.test(u)}r.mayHaveEmail=h}(s||(s={})),s})(),Js=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.XE(this.tl(t));return e===!0?i=this.KE(i):e===!1&&(i=this.JE(i)),i}anonymizePII(t){return this.tl(t)}anonymizeJwt(t){return $e.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.tl(t[i])}),t}tl(t){if($e.mayHaveEmail(t)){let e=$e.replaceEmail(t);return e!==t&&$.counters.redactedPII.count("email"),e}return t}KE(t){return $e.replaceDigits(t)}JE(t){return $e.mayHaveNumberSequence(t)?$e.replaceDigits(t):t}XE(t){return $e.mayHaveCreditCardNumber(t)?$e.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.QE(h))return e;$.counters.redactedPII.count("cc")}else $.counters.redactedPII.count("cc-partial");return`${i}${qd}${c}`}):t}QE(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Bc="15.158.2";function mo(){return{v:Bc}}var Qd=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return{d:`${O.now()}`,p:this.D.anonymizePII(window.location.href),...this.E.getRequestParameters(),...mo()}}}return s})(),Zd="uxa",pa=5,tf="No stacktrace",Fc="snippet-",$c="implementation-snippet-",ga=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),ef=(()=>{class s{constructor(t,e,i){this.pr=e,this.D=new Js,this.ef=qr[ht.warn],this.ef=qr[t.minLogLevel||ht.warn],this.bs=i||new Ud(t,new Qd(t,this.D)),this.sf={[ht.debug]:[],[ht.warn]:[],[ht.implementation]:[],[ht.error]:[],[ht.critical]:[]},this.ua={implementation:{},dynamic:{}},this.bs.init()}send(t,e="",i=ht.warn){if(!this.ZE(i,e))return;csArray.prototype.push.call(this.sf[i],e||"");let n={message:this.tS(t,e),stacktrace:this.eS(t),app:Zd,level:i};this.bs.send(n)}tS(t,e){let i=Oe(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}eS(t){return Oe(t)?`${t.stack||tf} ${this.rf()}`:this.rf()}rf(){let t=this.pr.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.pr.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}ZE(t,e){if(qr[t]<this.ef)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,$c,0))===0)return this.nf(e,ga.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Fc,0))===0)return this.nf(e,ga.DYNAMIC);let i=this.sf[t];return i.length>=pa?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}nf(t,e){return t in this.ua[e]?this.ua[e][t]>=pa?!1:(this.ua[e][t]+=1,!0):(this.ua[e][t]=1,!0)}}return s})();var sf=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let U=window.CSJavascriptBridge.getVersion();if(te(U))return U}catch{G.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(U,K){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(U,csJSON.stringify(K))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(U){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(U))}r.addUserProperties=c;function l(U){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify(U))}r.addEventProperties=l;function h(U){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty(U)}r.removeEventProperty=h;function u(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=u;function d(U){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify(U))}r.addPageviewProperties=d;function g(U){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty(U)}r.removePageviewProperty=g;function E(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=E;function S(U){window.CSJavascriptBridge.sendEvent(csJSON.stringify(U))}r.sendAnalysisEvent=S;function P(U){if(window.CSJavascriptBridge.sendSREvent)for(let K of U.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(K))}r.sendSREvent=P;function C(U){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(U))}r.sendLog=C;function A(){window.CSJavascriptBridge.optIn()}r.sendOptIn=A;function T(){window.CSJavascriptBridge.optOut()}r.sendOptOut=T;function x(U,K){window.CSJavascriptBridge.sendDynamicVar(U,K)}r.sendDynamicVariable=x;function R(U,K,gt){window.CSJavascriptBridge.sendTransaction(U,K,gt)}r.sendTransaction=R;function _(U,K){if(window.CSJavascriptBridge.sendAssets){let gt=csJSON.stringify(U);window.CSJavascriptBridge.sendAssets(gt,K||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(U,gt=>gt.assetId))}r.sendAssets=_;function j(U){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(U))}r.sendNativeSREvent=j}(s||(s={})),s})(),rf=(()=>{class s{constructor(){}send(t,e,i=ht.warn){let n={message:t,errorCode:e,level:i};sf.sendLog(n)}}return s})();function Jt(s){return Dt(s,"data:")}function nf(s){return Dt(s,"#")}function of(s){return!!s&&(Ci(s,".css")||Dt(s,"https://fonts.googleapis.com/css"))}var ma=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function af(s){ma.lastIndex=0;let r,t=0,e=[];for(;(r=ma.exec(s))!==null;){let i=r.index,n=r.index+r[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,n);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=n}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var cf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],yo=s=>{let r=new Set(cf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},lf=["svg","slot"],hf=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(lf,s)>-1,Gc={href:new Set(["a"]),src:new Set(["iframe"])},uf=s=>Gc.hasOwnProperty(s),df=(s,r,t)=>{var e;return((e=Gc[r])===null||e===void 0?void 0:e.has(s))&&!Jt(t)},ff=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Zr(s){return s?pf(s):null}function pf(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var gf=/^\d+\.\d+(?:\.\d+)?$/,mf=s=>{if(!gf.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},yf=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,Ef=(s,r)=>yf(s,r)>=0,Sf=1,Ln=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Tr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),vf=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,d,g,E,S,P;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||no,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors={enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0,...t.apiErrors},this.customErrors={enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Zr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Zr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Zr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((u=t.uxaDomain)===null||u===void 0?void 0:u.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(d=t.anonymizeDigits)!==null&&d!==void 0?d:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(g=t.recordTargetingRules)!==null&&g!==void 0?g:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(E=t.collectTargetText)!==null&&E!==void 0?E:Ln.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(S=t.quotas)!==null&&S!==void 0?S:null,this.startMode=(P=t.startMode)!==null&&P!==void 0?P:Tr.Automatic,this.eventEnricher=t.eventEnricher||null}getTrackerUri(){return`${this.Qs()}://${this.trackerDomain}`}getRecordingUri(){return`${this.Qs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Qs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Qs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Qs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.Qs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Qs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.Qs()}://${this.paProxyDomainUri}`}Qs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Sf}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.sS(n,o)}})}sS(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&vs(e)&&csArray.prototype.includes.call(Object.values(Tr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.of()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.of())return!0;let t=mf(this.getHeapVersion()||"");if(t&&t.major===4&&Ef(t,{major:4,minor:23,patch:5}))return!0}return!1}of(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Ln.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function H(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function _f(){let s=new MutationObserver(r=>{r.forEach(t=>{X(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&($.counters.pureWindowState.count("iframe-deletion"),at.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function ya(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function wf(){(!ya(MutationObserver)||!ya(MutationObserver.prototype.observe))&&$.counters.patchedNativeFunctions.count("MutationObserver")}function Af(){try{window.CSPureWindow&&_f(),wf()}catch{}}var mt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let u=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return u?decodeURIComponent(u[2]):null}r.get=t;function e(l,h,u,d,g,E){let S=encodeURIComponent(`${h}`),P=u===r.CURRENT_DOMAIN?void 0:u,C=i(d),A=C?`;expires=${C.toUTCString()}`:"",T=";path=/",x=Mt(P)?`;domain=${P}`:"",R=`${l}=${S}${A}${T}${x}`;return tt(g)&&g!==Je.NotSet&&(R=`${R};SameSite=${g}`),tt(E)&&E===de.Yes&&(R=`${R};Secure`),document.cookie=R,!0}r.set=e;function i(l){return te(l)?new csDate(O.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Je.None,de.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let u="_cs_root-domain",d=t(u);if(d!==null&&d!=="1")return d;let g=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(g);for(;g.length&&(d===null||d==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(g),E],"."),e(u,E,E,void 0,l,h),d=t(u);return n(u,E),E}r.getRootDomain=c}(s||(s={})),s})(),Tf=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Je=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),de=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Nr=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.Oi=i,this.sl=!1,this.af=Je.NotSet,this.il=de.No}getSameSiteFlag(){return this.af}getSecureFlag(){return this.il}getDomain(){return this.rl}getRootDomain(){return this.cf}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.iS(),e=this.rS();this.sl=this.nS(t,e),this.sl?(this.af=t,this.il=e):this.E.secureCookiesEnabled&&this.C.getUrlProtocol()==="https:"&&(this.il=de.Yes),this.cf=this.oS(),this.rl=this.aS(this.cf)}nS(t,e){return Tf.browserIsSafariV12()?!1:(mt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),mt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(mt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}iS(){return this.C.getUrlProtocol()==="http:"?Je.Lax:this.Oi.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?Je.None:Je.Lax}rS(){return this.C.getUrlProtocol()==="http:"?de.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Oi.isSameSiteNoneSecureNeeded()?de.Yes:de.No}isSameSiteSupported(){return this.sl}set(t,e,i,n){let o=mt.toExpireDate(i),c=n?de.Yes:this.getSecureFlag();mt.set(t,e,this.rl,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.rl;mt.remove(t,i)}oS(){let t=this.Oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Je.None:void 0,i=t?de.Yes:void 0;return mt.getRootDomain(e,i)}aS(t){return this.E.allowSubdomains?t:mt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),js="_cs_t",Ea="1",bf=(()=>{class s{constructor(t,e){this.Rt=t,this.E=e,this.da=!1,this.fa=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Rt.isTopWindowTracker()&&"cookie"in document){if(!this.Rt.isInIframeContext()&&mt.isCookiePresent()){this.da=!0,this.fa=!1;return}if(mt.set(js,Ea,mt.CURRENT_DOMAIN),mt.get(js)!==null){this.da=!0,this.fa=!1,mt.remove(js,mt.CURRENT_DOMAIN);return}mt.set(js,Ea,mt.CURRENT_DOMAIN,void 0,Je.None,de.Yes),mt.get(js)!==null&&(this.da=!0,this.fa=!0,mt.remove(js,mt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.da}isSameSiteNoneSecureNeeded(){return this.fa}}return s})();function Rf(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Cf=(()=>{class s{constructor(t,e){this.E=t,this.Oi=e}canTrack(){return this.E.isProjectActive()&&this.cS()&&this.lf()&&this.lS()}canTrackInChild(){return this.E.isProjectActive()&&this.hS()&&(this.lf()||this.uS())}lS(){return this.E.cookielessTrackingEnabled?Rf():this.Oi.areCookiesEnabled()}lf(){return po(window.location.hostname,this.E.hostnames)}cS(){return!this.hf()&&this.dS()}hS(){return!this.hf()&&this.fS()}uS(){return window.location.protocol==="about:"&&window.location.hostname===""}hf(){return"visibilityState"in document&&document.visibilityState==="prerender"}dS(){return this.uf()&&this.pS()}fS(){return this.uf()}pS(){try{return!!window.localStorage}catch{return!1}}uf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),zc=":";function Sa(s){let r=[],t=If(s),e=csString.prototype.split.call(t,"/");for(let i of e)Dt(i,zc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function If(s){let r=s;return Dt(s,"/")&&(r=csString.prototype.substring.call(r,1)),Ci(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Pf=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,Of="$1CS_ANONYMIZED_NAME",Nf=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this._n(o),o!==h&&($.counters.redactedPII.count("name"),$.counters.redactedPII.count("name-in-url"))}let c=this.gS(o,i);if(c!==o)return $.counters.redactedPII.count("url"),c;let l=this.mS(o,n);return l!==o&&$.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.nl(t);return i!==""?`${e}?`:e}nl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}gS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.yS(o,c);if(l!==null)return`${l}${n}`}return t}yS(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.df(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}mS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.ES(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}ES(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],u=e[n].key;if(this.df(u)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,h.length>0?d:""),n++,n===e.length&&(n=0);continue}if(h===u){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let g=l-n+d;i[g]=t[g]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}df(t){return Dt(t,zc)}_n(t){return csString.prototype.replace.call(t,Pf,Of)}}return s})(),Mf="spki",va="RSA-OAEP",Df="SHA-256",_a="AES-CTR",kf="SHA-1",wa=190,fi=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=nt.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function u(){var R,_;return((_=(R=nt.self.crypto)===null||R===void 0?void 0:R.subtle)===null||_===void 0?void 0:_.encrypt)!=null&&nt.self.CryptoKey!=null}r.isSupported=u;async function d(R){n=r.crypto.importKey(Mf,_c(R),{name:va,hash:Df},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||at.warn(`Fail to import public key '${R}'`)}r.importKey=d;async function g(R){if(!u()||e)return null;await n;let _=ro(R);_.byteLength>wa&&(_=_.slice(0,wa));try{let j=await r.crypto.encrypt({name:va},i,_);return Zo(j)}catch{return null}}r.asymmetricEncrypt=g;async function E(R,_){if(!u()||e)return null;let j={counter:_.initializationVector,name:_a,length:64},U=o.encode(R);try{let K=await r.crypto.encrypt(j,_.cryptoKey,U);return Zo(K)}catch{return null}}r.symmetricEncrypt=E;async function S(R){let _=await P(R);if(!_)throw new Error("Export secret failed");let j=await g(_);if(!j)throw new Error("Encrypt secret failed");return j}r.encryptSecret=S;async function P(R){var _;if(!u())return null;try{return(_=(await r.crypto.exportKey("jwk",R)).k)!==null&&_!==void 0?_:null}catch{return null}}async function C(){if(!u()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:_a,length:128},!0,["encrypt","decrypt"]),initializationVector:nt.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=C;function A(R){c=R}r.setDigestSalt=A;async function T(R){R=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(R)),c&&(R=`${R}:${c}`);let _=o.encode(R);try{let j=await r.crypto.digest(kf,_);return Pn(j)}catch{return null}}r.digest=T;function x(){return nt.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=x}(s||(s={})),s})(),Ae=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ge=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ds=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),Eo=(()=>{class s{constructor(){this.ol=[]}setRegexRules(t){this.ol=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.SS(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.ol,e=>this.ff(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.ol,e=>this.ff(t,e)),e=>e.ruleInput)}ff(t,e){var i,n;let o=this.vS(t,e);return!this._S(e)||!this.wS(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}_S(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}wS(t){let e=t.samplingRate!==100,i=e&&ws.boolean(t.samplingRate);return!e||i}pa(t){return!Dt(t,"http://")&&!Dt(t,"https://")?`https://${t}`:t}vS(t,e){let i=go(this.pa(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}ga(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}SS(t){let e=null,i=!1;switch(t.operator){case Ge.NOT_START:case Ae.NOT_START:i=!0;case Ge.START:case Ae.START:e=new csRegExp(`^${t.value}`,this.ga(t));break;case Ge.NOT_END:case Ae.NOT_END:i=!0;case Ge.END:case Ae.END:e=new csRegExp(`${t.value}$`,this.ga(t));break;case Ge.NOT_CONTAIN:case Ae.NOT_CONTAIN:i=!0;case Ge.CONTAIN:case Ae.CONTAIN:case Ae.REGEX:e=new csRegExp(`${t.value}`,this.ga(t));break;case Ge.NOT_EXACT:case Ae.NOT_EXACT:i=!0;case Ge.EXACT:case Ae.EXACT:e=new csRegExp(`^${t.value}$`,this.ga(t));break;default:at.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.pf(t.startDate):void 0,o=t.endDate?this.pf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}pf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),W=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),tn=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),Qe=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function xf(s){return s.tgtHM!==void 0}function qc(s){return s.tgt!==void 0}function Lf(s){return s.tgtLk!==void 0}function Vf(s){return s.x!==void 0&&s.y!==void 0}function Uf(s){return s===tn.SUCCESS||s===tn.FAILURE||s===tn.ATTEMPT}function jf(s){return s===Qe.APPCUES||s===Qe.CHAMELEON||s===Qe.CONTENTSQUARE||s===Qe.SEGMENT||s===Qe.WEB}var Hf=Math.pow(2,31);function Bf(s,r=0){let l=r>>>0,h=s.length;for(let E=0;E<h-3;E+=4){let S=(csString.prototype.charCodeAt.call(s,E)&255|(csString.prototype.charCodeAt.call(s,E+1)&255)<<8|(csString.prototype.charCodeAt.call(s,E+2)&255)<<16|(csString.prototype.charCodeAt.call(s,E+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let u=0,d=h&3,g=h-d;switch(d){case 3:u^=(csString.prototype.charCodeAt.call(s,g+2)&255)<<16;case 2:u^=(csString.prototype.charCodeAt.call(s,g+1)&255)<<8;case 1:u^=csString.prototype.charCodeAt.call(s,g)&255,u=Math.imul(u,3432918353),u=u<<15|u>>>17,u=Math.imul(u,461845907),l^=u}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Wc(s){return Bf(s)+Hf>>>0}var So=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),pi="|iframe|",Ff=(()=>{class s extends So{constructor(t,e,i,n){super(),this.AS=t,this.TS=e,this.bS=i,this.RS=n}emitIframeEvent(t,e,i){if(this.CS(e)&&t===null){G.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Ct.ChildLogMessage:this.IS(i);break;case Ct.AnalysisEvent:{let n=i,o=this.AS.transformEvent(t,n);o.isUserEvent?this.PS(o.event):this.OS(o.event);break}case Ct.RecordingEvent:{let n=i,o=this.RS.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.NS(o.events):this.MS(o.events);break}case Ct.JavascriptError:this.DS(i);break;case Ct.ApiError:this.kS(i);break;case Ct.DetailedApiError:this.xS(i);break;case Ct.CustomError:this.LS(i);break;case Ct.EmerchandisingMessage:{let n=this.bS.transformEvent(t,i);this.VS(n);break}case Ct.Commands:{let n=this.TS.transformEvent(t,i);this.US(n);break}case Ct.IntegrationCallback:this.jS(i);break;case Ct.StaticResource:this.HS(i);break;case Ct.TrackingContextRequestMessage:this.BS(i);break;default:G.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}CS(t){let e=[Ct.AnalysisEvent,Ct.RecordingEvent,Ct.EmerchandisingMessage,Ct.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}IS(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ht.debug:G.debug(e,i);break;case ht.warn:G.warn(e,!0,i);break;case ht.implementation:G.implementation(e,i);break;case ht.error:G.error(e,i);break;case ht.critical:G.critical(e,i);break}}PS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}OS(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}NS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}MS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}DS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}kS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}xS(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}VS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}US(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}jS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}HS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}BS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}LS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),$f=(()=>{class s{constructor(t,e,i){this.Q=t,this.gf=e,this.mf=i}transformEvent(t,e){this.FS(t,e.event);let i=this.Q.getElementPath(t);return this.$S(i,e.event),this.GS(e.event),e}FS(t,e){if(Vf(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Et.windowOffsetX()),e.y=Math.round(i.top+e.y+Et.windowOffsetY())}}$S(t,e){qc(e)&&(e.tgt=`${t}${pi}${e.tgt}`),xf(e)&&(e.tgtHM=`${t}${pi}${e.tgtHM}`,this.gf||(e.tgtHMH=Wc(e.tgtHM))),Lf(e)&&(e.tgtLk=`${t}${pi}${e.tgtLk}`)}GS(t){!this.gf&&this.mf&&this.mf.enhanceAnalysisEvent(null,t)}}return s})(),Gf=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${pi}${e.iframePath}`:i,commands:e.commands}}}return s})(),zf=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${pi}${o.targetPath}`}));return{...e,products:n}}}return s})(),qf=1,Aa=csSymbol("nodeIdentifier");function q(s){let r=s[Aa];return r!=null?r:s[Aa]=qf++}var k=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ai=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Wf=(()=>{class s{constructor(){this.zS={clientX:2,clientY:3},this.qS={clientX:1,clientY:2},this.WS=[k.POINTER_DOWN,k.POINTER_MOVE,k.POINTER_UP],this.YS=[k.TOUCH_START,k.TOUCH_MOVE,k.TOUCH_END]}transformEvents(t,e){if(!ot.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==k.VISIBILITY_CHANGE),e.events.length===0||(G.warn(`IframeRecordingEventsTransformer received event ${Ct.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=q(t),n=null;csArray.prototype.some.call(e.events,c=>this.yf(c)||this.Ef(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.yf(c)?this.XS(n,c):this.Ef(c)&&this.KS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}KS(t,e){this.Sf(this.qS,t,e)}XS(t,e){this.Sf(this.zS,t,e)}Sf(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}yf(t){return csArray.prototype.indexOf.call(this.WS,t.type)!==-1}Ef(t){return csArray.prototype.indexOf.call(this.YS,t.type)!==-1}}return s})(),_t=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),en;function gi(s){if(en||(en=document.createElement("div")),!(!!s&&z(s)))return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return ce.call(en,s),!0}catch{return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Vn(s,r){if(la)return la.call(s,r);let t=s;do{if(ce.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function Ze(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=Ze(s[t]);return r}default:return s}}function Yc(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function Xc(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?Ze(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=Xc(n,o);h!==void 0&&(t[i]=h)}else t[i]=Ze(o)}return Yc(t)?t:void 0}function Kc(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Kc(n,o):t[e]=o}return t}function Jc(s){let r=null;return t=>t?r=t:r||(r=s())}var Yf=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function Xf(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Yf.has(s)}var Hs=Jc(()=>new WeakMap),sn=Jc(()=>new Set),es=(()=>{let s;return function(r){function t(u){return Hs().get(u)}r.getAll=t;function e(u,d){var g;return(g=Hs().get(u))===null||g===void 0?void 0:g[d]}r.get=e;function i(u,d,g){let E=Hs().get(u);E||Hs().set(u,E={}),E[d]=g,c(u)}r.set=i;function n(u,d){let g=Hs().get(u);g&&(delete g[d],c(u))}r.remove=n;function o(){Hs(new WeakMap)}r.reset=o;function c(u){for(let d of sn())d(u)}function l(u){sn().add(u)}r.subscribe=l;function h(u){sn().delete(u)}r.unsubscribe=h}(s||(s={})),s})(),rt=(()=>{let s;return function(r){function t(l,h,u){var d;if(typeof Node!="undefined"&&l instanceof Node)es.set(l,h,u);else{let g=l;(d=g.props)!==null&&d!==void 0||(g.props={}),g.props[h]=u}}r.setProperty=t;function e(l,h){var u;return typeof Node!="undefined"&&l instanceof Node?es.get(l,h):(u=l.props)===null||u===void 0?void 0:u[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?es.getAll(l):l.props}r.getProperties=i;function n(l,h){let u=null;return o(l,(d,g,E)=>h(d)&&(u=d)&&!!E()),u}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,u){let d=!1;if(u(l,h,()=>d=!0),d)return;let E=l.shadowRoot;E&&c(E,l,u);let S=l.children;if(S!=null&&S.length){for(let P of S)if(P&&(c(P,l,u),d))break}}}(s||(s={})),s})(),M=(()=>{let s;return function(r){let t;(function(A){A[A.NotMasked=0]="NotMasked",A[A.Parent=1]="Parent",A[A.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(A){return _s(A)&&"Attributes"in A&&"PIISelectors"in A?A.Attributes instanceof Array&&A.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(A){if(!_s(A)||A===null)throw new _t("setPIISelectors");return"Attributes"in A||(A.Attributes=[]),"PIISelectors"in A||(A.PIISelectors=[]),A}r.sanitizeSelectorUserInput=i;function n(A){var T,x,R;return"nodeType"in A?(T=rt.getProperty(A,r.maskedProp))!==null&&T!==void 0?T:{state:t.NotMasked}:(R=(x=A.metadata)===null||x===void 0?void 0:x[r.maskedProp])!==null&&R!==void 0?R:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(A){var T,x,R;return"nodeType"in A?(T=rt.getProperty(A,r.maskedAttributeProp))!==null&&T!==void 0?T:{attributes:[]}:(R=(x=A.metadata)===null||x===void 0?void 0:x[r.maskedAttributeProp])!==null&&R!==void 0?R:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(A){let T=rt.getProperty(A,r.maskedProp);return(T==null?void 0:T.state)===t.Parent}r.isMaskedElement=c;function l(A){let T=rt.getProperty(A,r.maskedProp);return(T==null?void 0:T.state)===t.Child}r.isMaskedElementChild=l;function h(A,T){let x=rt.getProperty(A,r.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,T))>-1}r.isMaskedAttribute=h;function u(A,T){rt.setProperty(A,r.maskedProp,T)}r.setMaskedElementProperty=u;function d(A){rt.setProperty(A,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function g(A,T){rt.setProperty(A,r.maskedAttributeProp,T)}r.setMaskedAttributeProperty=g;function E(A,T){let x=csArray.prototype.filter.call(A.PIISelectors,j=>gi(j));T.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(T.elementSelector,","));let R=C([...x]),_={elementSelector:csArray.prototype.join.call(R,","),attrSelector:T.attrSelector,attrSelectors:T.attrSelectors};return csArray.prototype.forEach.call(A.Attributes,j=>{j!=null&&j.attrName&&(j!=null&&j.selector)&&gi(j.selector)&&!S(_.attrSelectors,j)&&csArray.prototype.push.call(_.attrSelectors,j)}),_.attrSelector=P(_.attrSelectors),_}r.getComputedSelectorSettings=E;function S(A,T){return csArray.prototype.some.call(A,x=>x.selector===T.selector&&x.attrName===T.attrName)}function P(A){let T="";return csArray.prototype.forEach.call(A,x=>{let R=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(R,_=>{gi(_)&&(T&&(T+=","),T+=_)})}),T}function C(A){if(A.length<=1)return A;let T=[];for(let x of A){let R=csString.prototype.split.call(x,",");for(let _ of R)csArray.prototype.indexOf.call(T,_)===-1&&csArray.prototype.push.call(T,_)}return T}}(s||(s={})),s})(),Kf=(()=>{class s{constructor(){this.ma={elementSelector:"",attrSelector:"",attrSelectors:[]},this.al={elementSelector:"",attrSelector:"",attrSelectors:[]},this.JS=window.top===window?"pii-migration":"pii-migration-iframe",this.vf=!1}onAfterNaturalPageView(){this._f()}onParentSensitiveStatusChange(t){t.started&&!this.vf&&(this.vf=!0,t.maskedElementSettings&&(this.ma=t.maskedElementSettings),this._f())}_f(){var t,e;let i=this.wf(this.ma),n=this.wf(this.al),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let u=i.attrSelectors[l]||[],d=csArray.prototype.filter.call(h,g=>csArray.prototype.indexOf.call(u,g)===-1);d.length>0&&(c[l]=d)}(o.length>0||Object.keys(c).length>0)&&(G.computeIsActive(100),G.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.JS),G.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}wf(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.al=M.getComputedSelectorSettings(t,this.al)}markPIIMaskingTemplateInUse(t){let e=M.sanitizeSelectorUserInput(t);this.ma=M.getComputedSelectorSettings(e,this.ma)}}return H([D()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),Jf=(()=>{class s{constructor(t,e){this.S=t,this.ft=e}init(){this.ft.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var Ot=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Qf=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Zf=(()=>{class s extends Ot{constructor(t,e){super(),this.cl=t,this.ll=e,this.cs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return $.counters.commandApplied.count(n),l}catch(l){l instanceof _t?($.counters.commandMisuse.count(n),G.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Oe(l)?l.stack:l}`)):($.counters.commandError.count(n),G.error(`Command Error - ${n}: ${Oe(l)?l.stack:l}`))}};this.cs[n]={callback:o,configuration:i},this.cs}}onStart(){this.QS(),this.ZS()}onStop(){for(let t of this.cl)window[t]=[]}applyFromIntegration(t,e,i){this.Af(t,e,`Commands.apply.from.integration: ${i}`),$.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.Af(t,e,`Commands.apply.from.implementation: ${i}`),$.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.ll)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.sv(e.name,e.params,t.iframePath),$.counters.commandsFromIframe.count(e.name)}Af(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}G.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}sv(t,e,i){G.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}QS(){for(let t of this.cl)window[t].forEach(([e,...i])=>this.Tf(e,i,!1))}ZS(){for(let t of this.cl)window[t]={push:([e,...i])=>this.Tf(e,i,!0)}}Tf(t,e,i){var n,o;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){G.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),tp=(()=>{class s extends So{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:W.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function ep(s){return csNodenodeType.apply(s)===1}function St(s){let r=csEventtarget.apply(s);return r&&ep(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function sp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function ip(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(St(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var rp=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],np=1024,op=1024,ap=(()=>{class s{constructor(t,e){this.Et=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=St(t),n={isNodeSensitive(o){return M.isMaskedElement(o)||M.isMaskedElementChild(o)},isAttributeSensitive(o,c){return M.isMaskedAttribute(o,c)},allWhitelistedAttributes:yo(this.E.whitelistedAttributes),attributeIgnoreTokens:rp,useAnonymization:e,attrMaxLength:op,hierarchyMaxLength:np};return this.Et.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=St(t);return this.Et.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=St(t),{path:i,firstAnchorParent:n}=this.Et.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.iv(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=St(t);return this.Et.isValidElement(e)}getElementPath(t){return this.Et.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}iv(t){var e;return t!==null&&t.hasAttribute("href")&&!Ar((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function Mr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=O.now(),o=null,l=s.apply(i,n),n=[],i=null},u=function(...d){if(i=this!==null&&this!==void 0?this:nt,n=[...d],e==="trailing")return o||(o=nt.csSetTimeout(h,t)),l;let g=O.now(),E=t-(g-c);return E<=0||E>t?(c=g,l=s.apply(i,n),o?(nt.csClearTimeout(o),o=null):n=[]):o||(o=nt.csSetTimeout(h,E)),l};return u.cancel=()=>{o&&(nt.csClearTimeout(o),c=0,o=null,n=[])},u.flushPending=()=>{o&&(nt.csClearTimeout(o),h())},u}var Qs=s=>(r,t,e)=>{e.value=Mr(e.value,s)};var br=".",vo="__DOT__",cp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Qc="x";function lp(s){let[r,t,e,i,n,o,c,l,h]=pp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Qc?null:h}}function hp(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Qc],csString),dp),br)}function up(s){return cp.test(s)}function dp(s){return csString.prototype.replace.call(s,/\./g,vo)}function fp(s){return csString.prototype.replace.call(s,new csRegExp(vo,"g"),br)}function pp(s){return csString.prototype.indexOf.call(s,vo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,br),fp):csString.prototype.split.call(s,br)}var N=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function gp(s){return s===N.RECORDING_TEMPORARILY||s===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function Zc(s){return s===N.RECORDING_GLOBAL_SAMPLING||s===N.RECORDING_RULES_TARGETING||s===N.RECORDING_URL_SAMPLING||s===N.RECORDING_ETR_SAMPLING}var mp={[N.RECORDING_RULES_TARGETING]:N.RECORDING_GLOBAL_SAMPLING},ee=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),ss=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),zt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Un=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),tl=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,el=".";function yp(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],el)}function Ep(s){if(!_o(s))return null;let r=jn(s);return r!==null?sl(r):null}function sl(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,el);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Un.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:zt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function _o(s){return tl.test(s)}function jn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,tl))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Te="_cs_ex",Ta=2592e6,Sp=/^[0-9]+$/,vp=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?Number(this.K.getItem(Te)):Number(this.M.get(Te))}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Te,t):(this.M.set(Te,t,Ta),(e=this.Ni)===null||e===void 0||e.call(this,Te,t,Ta))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Te):(this.M.delete(Te),(t=this.Mi)===null||t===void 0||t.call(this,Te))}static isValidExclusionString(t){return Sp.test(t)}}return s})(),ze="_cs_cvars",_p=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?this.K.getItem(ze):this.M.get(ze)}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(ze,t):(this.M.set(ze,t),(e=this.Ni)===null||e===void 0||e.call(this,ze,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(ze):(this.M.delete(ze),(t=this.Mi)===null||t===void 0||t.call(this,ze))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var wp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.yl=i,this.El=n,this.ls=o,this.lv=c,this.An=l}start(){this.w.addListener(this.lv),this.w.addListener(this.An),this.w.addListener(this.yl),this.An.init(),this.El.init(),this.ls.init(),!this.ls.isActive()&&this.S.start()}}return s})(),Ap=(()=>{class s{constructor(t){this.Rs=t}onOptout(){this.Rs.removeExclusion()}}return s})(),Tp=(()=>{class s{constructor(t,e){this.xt=t,this.pt=e}exclude(t){this.pt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.pt.remove()}isExcluded(){return this.hv()||this.uv()}hv(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.pt.get()}uv(){return csString.prototype.indexOf.call(this.xt.href,Te)>0}}return s})(),bp=["excludeURLforReplay"],Rp=(()=>{class s{constructor(t,e){this.Rs=t,this.S=e}init(){this.S.register(bp,t=>{if(z(t))this.Rs.setExcludeUrlForSessionReplay(t);else throw new _t("excludeURLforReplay")})}}return s})(),rn=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),Cp=".^",Ip=".*",Pp=(()=>{class s{constructor(t){this.C=t,this.Sl=new csRegExp(`${Cp}`)}setExcludeUrlForSessionReplay(t){try{this.Sl=new csRegExp(t)}catch{G.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Sl=new csRegExp(`${Ip}`)}}kf(){return this.Sl.test(this.C.getAnonymizedUrl())?rn.SessionReplay:rn.None}isUrlExcludedForSessionReplay(){return this.kf()===rn.SessionReplay}getRequestParameters(){return{ex:this.kf()}}}return s})();var{toString:A_}=Object.prototype;function il(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(il.Cache||Map),t}il.Cache=Map;var{hasOwnProperty:T_}=Object.prototype;var Ai=(()=>{class s{constructor(...t){this.Uf=t}addProvider(t){csArray.prototype.push.call(this.Uf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Uf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Op=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Np(){return{la:Op}}var gs=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),ys=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),Mp=(()=>{class s extends Ot{constructor(t,e,i,n,o,c){super(),this.E=t,this.w=e,this.J=i,this.Il=n,this.C=o,this.hs=c,this.Sa=null}init(){this.wv()}onStart(t=ys.Natural){switch(t){case ys.Natural:this.Av();break;case ys.Artificial:this.Tv();break;case ys.Renewal:this.bv();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Pl(t,e)):(Mt(t)&&this.C.overridePath(t,e),this.J.emitTargetingRulesArtificialPageview(this.C.getUrl()),this.E.hasTargetingRules()&&this.C.cleanupOverrideLifespan())}Av(){this.hs.setPageViewType(gs.Natural);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Il.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(gs.Natural),this.Sa=t}bv(){this.hs.setPageViewType(gs.Renewal);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Il.send(),this.w.emitAfterNaturalPageView(gs.Renewal),this.Sa=t}Pl(t,e,i=!1){Mt(t)&&this.C.overridePath(t,e);let n=this.C.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.Sa,n),this.hs.setPageViewType(gs.Artificial),this.Il.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.Sa=n}Tv(){this.Pl(null,void 0,!0)}wv(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Pl())})}}return s})(),Dp=(()=>{class s{constructor(){this.Ol=gs.Natural}setPageViewType(t){this.Ol=t}getPageViewType(){return this.Ol}getRequestParameters(){return{pvt:this.Ol}}}return s})();var kp=99999,xp=(()=>{class s{constructor(t){this.R=t,this.Rv=this.Cv()&&window.CSCurrentScript}Iv(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Pv(e)?null:Math.round(e.responseEnd-e.fetchStart)}Pv(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Rv||this.Ov()!==1)return{};let t=this.Iv();return t===null?{}:{dt:`${Math.min(t,kp)}`}}Ov(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Cv(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Lp=["trackPageview"],ba=["setPath"],Ra=["setQuery"],Ca=["referrer:maskUrl"],Vp=["referrer:removeQueryString"],Up=["referrer:keepQueryString"],nn=s=>_s(s)&&s!==null,jp=(s,r,t,e)=>{s.register(Lp,(i,n)=>{if(!z(i)){r.triggerArtificialPageView();return}nn(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(ba,(i,n)=>{if(!z(i))throw new _t(ba[0]);nn(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(Ra,(i,n)=>{if(!z(i))throw new _t(Ra[0]);nn(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Ca,i=>{if(!z(i))throw new _t(Ca[0]);e.addUrlMaskingPattern(i)}),s.register(Vp,()=>e.enableRemoveQueryString()),s.register(Up,()=>e.disableRemoveQueryString()))};var Hp=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P,C){this.E=t,this.S=e,this.w=i,this.Ue=n,this.N=o,this.R=c,this.Ps=l,this.Ct=h,this.Tt=u,this.C=d,this.Wt=g,this.hs=E,this.J=S,this.ze=P,this.gr=C}init(){let t=new qs(this.E.getTrackerUri(),"pageview");this.Is=new Mp(this.E,this.w,this.J,t,this.C,this.hs),this.Is.init();let e=new Ai(this.Ue,this.N,Et,this.Ps,this.C,this.Ct,io,this.Tt,this.hs,new xp(this.R),this.Wt);this.ze&&e.addProvider(this.ze),this.gr&&e.addProvider(this.gr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),jp(this.S,this.Is,this.C,this.Ps)}start(t){this.Is.start(t)}stop(){this.Is.stop()}onBeforeSessionRenewal(){this.Is.stop()}}return s})();var wo=["trackError"];var rl=["setCustomVariable"],Bp=(()=>{class s{constructor(t,e){this.S=t,this.Tt=e}init(){this.S.register(rl,(t,e,i,n)=>{this.Tt.set(t,e,i,n)})}onAfterArtificialPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onOptout(){this.Tt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.Tt.removeCustomVariablesSession(),this.Tt.removeCustomVariablesPage()}}return s})();var Fp=["setEncryptionSelectors"],nl=["setPIISelectors"],$p=["setCapturedElementsSelector"],Gp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.lt=i,this.re=n,this.Yt=o,this.ht=c,this.mr=l}init(){var t,e;this.mr&&this.ht&&((t=this.mr)===null||t===void 0||t.addSelector((e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut()}onStartTracking(t){this.re.start(),this.w.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.re.stop(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.re.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.re.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.re.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ut(){this.S.register(nl,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register($p,t=>{this.Yt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(Fp,t=>{var e,i;(e=this.ht)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.mr)===null||i===void 0||i.addSelector(t)})}}return s})();var zp=512,qp=255,on=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,zp),this.value=z(e)?csString.prototype.slice.call(e,0,qp):e}static isKeyValid(t){return z(t)}static isValueValid(t){return z(t)||vs(t)}}return s})(),Wp=(()=>{class s extends Ot{constructor(t,e){super(),this.Xt=t,this.D=e,this.Nl=[]}onStart(){csArray.prototype.forEach.call(this.Nl,t=>this.jf(t.key,t.value)),this.Nl=[]}onStop(){}jf(t,e){let i=this.D.anonymizePII(t),n=vs(e)?e:this.D.anonymizePII(e);this.Xt.add(new on(i,n))}trackDynamicVariable(t,e){if(on.isKeyValid(t)&&on.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Nl,{key:t,value:e});return}this.jf(t,e)}else throw new _t(ol[0])}}return s})(),Yp=(()=>{class s{constructor(t){this.fe=t,this.Xt=[]}add(t){csArray.prototype.push.call(this.Xt,t),this.setBatchReadyCall()}clear(){this.Xt=[]}onBatchReady(t){this.Nv=t}getRequestParameters(){let t={};for(let e of this.Xt)t[e.key]=e.value;return{dv:this.fe.compressSync(csJSON.stringify(t),"base64"),ct:this.fe.algorithm}}setBatchReadyCall(){this.Nv()}}return H([Qs({wait:0,mode:"trailing"}),D("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Xp="dvar",ol=["trackDynamicVariable"],Kp=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.R=e,this.E=i,this.Ue=n,this.fe=o,this.D=c,this.bs=new qs(this.E.getTrackerUri(),Xp),this.Xt=new Yp(this.fe),this.Rs=new Wp(this.Xt,this.D)}init(){this.bs.setRequestParametersProviders(this.Ue,this.Xt),this.R.setDynamicVariablesService(this.Rs),this.Xt.onBatchReady(()=>this.bs.send()),this.bs.after(()=>this.Xt.clear()),this.S.register(ol,({key:t,value:e}={})=>{this.Rs.trackDynamicVariable(t,e)})}onStartTracking(){this.Rs.start()}onArtificialPageViewEnd(t){t&&this.Rs.stop()}onAfterArtificialPageView(t){t&&this.Rs.start()}}return s})();var al=100,Jp=100,Qp=(()=>{class s extends Ot{constructor(t,e){super(),this.Dv=t,this.L=e,this.Ie=null,this.Ml=[]}onStart(){csArray.prototype.forEach.call(this.Ml,t=>{this.Ie=t,this.Hf()}),this.Ml=[]}onStop(){}addToCart(t){let e={};z(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Jp)),z(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,al)),(e.sku||e.merchant)&&(this.Ie=e,this.Hf())}getCartItem(){return this.Ie}Hf(){if(!this.isStarted&&this.Ie!==null){csArray.prototype.push.call(this.Ml,this.Ie),this.clear();return}this.L.refreshSession(),this.L.isSessionValid()&&this.Dv.send()}clear(){this.Ie=null}getRequestParameters(){if(!this.Ie)return{};let t={};return z(this.Ie.sku)&&this.Ie.sku.length>0&&(t.sku=this.Ie.sku),z(this.Ie.merchant)&&this.Ie.merchant.length>0&&(t.me=this.Ie.merchant),t}}return s})(),Ia=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),z(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Mt(t)&&te(t.revenue)&&z(t.currency)&&t.currency.length<=10&&(!Mt(t.id)||z(t.id))}}return s})(),Zp=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Dl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return tt(t.sku)&&(e.sku=t.sku),tt(t.category)&&(e.category=t.category),tt(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,al)),e}static Dl(t){return Mt(t)&&z(t.id)&&z(t.name)&&te(parseFloat(t.price))&&vs(parseInt(t.quantity,10))&&(!tt(t.sku)||z(t.sku))&&(!tt(t.category)||z(t.category))&&(!tt(t.merchant)||z(t.merchant))}}return s})(),tg=(()=>{class s extends Ot{constructor(t,e,i){super(),this.D=t,this.Bf=e,this.L=i,this.kl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.kl,t=>{this.pe=t.transaction,this.bn=t.transactionItems,this.sendTransaction()}),this.kl=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.pe=Ia.from(e)}getTransaction(){return this.pe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.kl,{transaction:this.pe,transactionItems:[...this.bn]}),this.clear();return}if(!(this.Bf===null||this.L===null)&&(this.L.refreshSession(),!!this.L.isSessionValid())){if(!this.pe.hasValidRevenue()){G.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Bf.send()}}addItem(t){if(pe(t))throw new _t(cl[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Zp.from(e);i!==null&&csArray.prototype.push.call(this.bn,i)}getItems(){return this.bn}clear(){this.pe=Ia.from({revenue:NaN}),this.bn=[]}getRequestParameters(){let t={id:this.pe.id?`${this.pe.id}`:"",revenue:`${this.pe.revenue}`};return tt(this.pe.tax)&&(t.tax=`${this.pe.tax}`),tt(this.pe.shipping)&&(t.shipping=`${this.pe.shipping}`),tt(this.pe.currency)&&(t.cu=`${this.pe.currency}`),t.items=window.csJSON.stringify(this.bn),t}}return s})(),eg=["ecommerce:addToCart","ec:cart:add"],sg=["ecommerce:addTransaction","ec:transaction:create"],cl=["ecommerce:addItem","ec:transaction:items:add"],ig=["ecommerce:send","ec:transaction:send"],rg=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.St=e,this.N=i,this.S=n,this.D=o,this.L=c,this.C=l}init(){let t=new qs(this.E.getTrackerUri(),"transaction"),e=new qs(this.E.getTrackerUri(),"addtocart");this.je=new tg(this.D,t,this.L),this.yr=new Qp(e,this.L);let i=new Ai(this.St,this.N,this.C,this.je);t.setRequestParametersProviders(i),t.after(()=>{this.je.clear()});let n=new Ai(this.St,this.N,this.C,this.yr);e.setRequestParametersProviders(n),e.after(()=>{this.yr.clear()}),this.S.register(sg,o=>{this.je.addTransaction(o)}),this.S.register(cl,o=>this.je.addItem(o)),this.S.register(ig,()=>this.je.sendTransaction()),this.S.register(eg,o=>{this.yr.addToCart(o)})}onStartTracking(){this.je.start(),this.yr.start()}onArtificialPageViewEnd(t){t&&(this.je.stop(),this.yr.stop())}onAfterArtificialPageView(t){t&&(this.je.start(),this.yr.start())}}return s})();var bs;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(bs||(bs={}));var Pa=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function Hn(s){return s.tagDeploymentMode===bs.DualCollectionReview||s.tagDeploymentMode===bs.DualCollection}function ng(s){return Hn(s)||s.tagDeploymentMode===bs.LoadClicktalePtc}var og="@ETP@",Oa="@user-identifier@",ag=(()=>{class s extends Ot{constructor(t,e,i,n){super(),this.E=t,this.Lv=e,this.fe=i,this.J=n,this.xl=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.xl,t=>this.Ff(t)),this.xl=[],csArray.prototype.forEach.call(this.Di,t=>this.$f(t)),this.Di=[]}onStop(){}Ff(t){this.Uv(t)?fi.isSupported()&&this.jv(t):this.Hv(t)}trackPageEvent(t){if(!s.Gf(t))throw new _t(ll[0]);this.isStarted?this.Ff(t):csArray.prototype.push.call(this.xl,t)}Uv(t){return Ar(t,Oa)}async jv(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Oa.length);if(e.length>fi.MAX_DIGEST_INPUT_SIZE){G.warn("UserIdentifier event: invalid user identifier");return}let i=await fi.digest(e);i?(this.Er={eventName:i,isETR:!1,isCustomHashId:!0},this._a()):G.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}Hv(t){this.J.emitPageEvent(t),this.Er={eventName:t,isETR:!1,isCustomHashId:!1},this._a(),this.E.tagDeploymentMode===bs.LoadClicktalePtc&&Pa.sendPageEvent(t)}$f(t){this.E.malkaEtrEnabled?this.Bv(t):this.Fv(t)}trackEventTriggerRecording(t){if(!s.Gf(t))throw new _t(hl[0]);this.isStarted?this.$f(t):csArray.prototype.push.call(this.Di,t)}Bv(t){Ar(t,og)?this.J.emitEventTriggerRecording(t,ss.ETR_PAGE):this.J.emitEventTriggerRecording(t,ss.ETR_SESSION),this.Er={eventName:t,isETR:!0,isCustomHashId:!1},this._a()}Fv(t){ng(this.E)&&(this.J.emitEventTriggerRecording(t,ss.ETR_LEGACY),this.Er={eventName:t,isETR:!0,isCustomHashId:!1},this._a(),this.E.tagDeploymentMode===bs.LoadClicktalePtc&&Pa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.fe.compressSync(this.Er.eventName,"base64"),ct:this.fe.algorithm,isETR:`${this.Er.isETR}`,isCustomHashId:`${this.Er.isCustomHashId}`}}_a(){this.Lv.send()}static Gf(t){return z(t)&&!!csString.prototype.trim.call(t)}}return s})(),ll=["trackPageEvent"],hl=["trackEventTriggerRecording"],cg=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.fe=i,this.Ue=n,this.J=o}init(){let t=new qs(this.E.getTrackerUri(),"pageEvent");this.Sr=new ag(this.E,t,this.fe,this.J),t.setRequestParametersProviders(this.Sr,this.Ue),this.S.register(ll,e=>{this.Sr.trackPageEvent(e)}),this.S.register(hl,e=>{this.Sr.trackEventTriggerRecording(e)})}onStartTracking(){this.Sr.start()}onArtificialPageViewEnd(t){t&&this.Sr.stop()}onAfterArtificialPageView(t){t&&this.Sr.start()}}return s})();function se(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var ui=s=>s instanceof HTMLFormElement?"form":s.localName,Na=new Map,an=!Ii&&document.implementation.createHTMLDocument("");function ul(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function lg(s){if(!Ni(s))return null;let r=dl(s);if(r===null||r.length===0)return null;let t="";if(Ir(s.textContent))X(r,e=>t+=e.cssText);else{let e=hg(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];X(i,n=>t+=n.cssText)}return t}function hg(s){if(!an)return 0;let r=Na.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,an.head.appendChild(t);let e=dl(t);return r=e?e.length:0,Na.set(s.textContent,r),an.head.removeChild(t),r}function dl(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var is={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Os=(()=>{class s{constructor(t){this.csId=q(t),this.props=es.getAll(t)}}return s})(),fl=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Ce=(()=>{class s extends Os{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=is.ELEMENT_NODE,this.localName=ui(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=lg(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new fl(c);csArray.prototype.push.call(this.children,l)}(Ni(t)||co(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===is.ELEMENT_NODE}static getAttribute(t,e){return Xs(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function ug(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function dg(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=pg(r);return t===""||(r=gg(r,t),r.length===0)?"":pl(r[0])}function fg(s){return csString.prototype.indexOf.call(s,"@")!==-1}function pg(s){return s.length>0?pl(s[0]):""}function gg(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function pl(s){let r="",t;fg(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var mg=s=>s;function yg(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let u=c[l],d=Reflect.set(c,l,h);return e.forEach(g=>g(this,h,u,"subproperty")),d}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){at.error(h)}return l}})}function Eg(s,r,t){let e=Sg(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Sg(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,yg(s,r,i,e),e):(at.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(at.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function vg(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return at.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Cs(i),u=>u(c))}catch(u){at.critical(u)}let h=n.apply(this,c);return Is(()=>{let u={result:h,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(u))},[ge.MonkeyPatch,`${csString(r)}`]),h};wg(o,n),s[r]=o}return i}function Qt({target:s,methodName:r,hook:t,hookPrepareArgs:e=mg,options:i}){let n=vg(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:dg()}:{};return u=>t({...u,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function _g(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);if(!i)return e;if(!i.configurable)return at.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[t]=e;let n=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var o;let c=this[r],l=arguments;return Is(()=>{e.forEach(h=>h(this,l[0],c,"property"))},[ge.MonkeyPatch,n]),(o=i.set)===null||o===void 0?void 0:o.apply(this,l)}}),e}function Rr(s,r,t){let e=_g(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function wg(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var ki=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Cs(this.set)}get count(){return this.set.size}}return s})(),Ag=(()=>{class s extends ki{constructor(t="high"){super(),this.$v=t}add(t){this.set.add(t),this.set.size===1&&Lt(()=>{this.set.clear()},this.$v)}}return s})();function Dr(s,r=!1){let t=new ki;return{push(e){t.count===0&&(r?Lt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var be=csSymbol(),Ao=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,d,g,E,S,P;this.A=t,this.Ll=null,this.Vl=null,this.Ul=null,this.jl=null,this.Hl=null,this.Gv=Dr(C=>this.processUpdateRulesInATick(C)),this.Bl=null,this.Fl=null,this.$l=null,this.A=C=>Lt(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Ll=Qt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,args:A})=>{this.processInsertRule(C,A)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Vl=Qt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:A})=>{this.processDeleteRule(C,A)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Ul=Qt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:C})=>this.processUpdateRule(C)})),typeof((u=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||u===void 0?void 0:u.deleteRule)=="function"&&(this.jl=Qt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Hl=Rr(window.StyleSheet.prototype,"disabled",(C,A,T)=>{A!==T&&this.zv(C,A)})),typeof((E=(g=window.CSSStyleDeclaration)===null||g===void 0?void 0:g.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Bl=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let A=C.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),typeof((P=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||P===void 0?void 0:P.removeProperty)=="function"&&(this.Fl=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:C})=>{let A=C.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.$l=Eg(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Ll)===null||t===void 0||t.activate(),(e=this.Vl)===null||e===void 0||e.activate(),(i=this.Ul)===null||i===void 0||i.activate(),(n=this.jl)===null||n===void 0||n.activate(),(o=this.Hl)===null||o===void 0||o.activate(),(c=this.Bl)===null||c===void 0||c.activate(),(l=this.Fl)===null||l===void 0||l.activate(),(h=this.$l)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Ll)===null||t===void 0||t.deactivate(),(e=this.Vl)===null||e===void 0||e.deactivate(),(i=this.Ul)===null||i===void 0||i.deactivate(),(n=this.jl)===null||n===void 0||n.deactivate(),(o=this.Hl)===null||o===void 0||o.deactivate(),(c=this.Bl)===null||c===void 0||c.deactivate(),(l=this.Fl)===null||l===void 0||l.deactivate(),(h=this.$l)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[be]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Gv.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(ns(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}zv(t,e){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return it([D()],s.prototype,"observe",null),it([D()],s.prototype,"disconnect",null),it([D()],s.prototype,"processInsertRule",null),it([D()],s.prototype,"processUpdateRule",null),it([D()],s.prototype,"processUpdateRulesInATick",null),it([D()],s.prototype,"processDeleteRule",null),s})(),Zs=(()=>{var s;class r{static qv(e){this.si.forEach(i=>{e(i,"initial")})}static Rn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&X(n.addedNodes,this.Wv),X(n.removedNodes,this.Yv)})),csArray.prototype.push.call(this.Pe,e),!this.Y){this.Y=!0,this.U.observe(document,this.Cn);for(let i of Es.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.si.add(n),this.U.observe(n,this.Cn)}this.Gl||(this.Gl=Qt({target:Element.prototype,methodName:"attachShadow",hook:i=>this.vr(i.result)&&this.zf(i.result)})),this.Gl.activate()}this.qv(e)}static vr(e){return e.isConnected&&e.ownerDocument===document}static In(e){var i,n;this.Pe=csArray.prototype.filter.call(this.Pe,o=>o!==e),this.Pe.length===0&&(this.Pe=[],this.Y=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.Gl)===null||n===void 0||n.deactivate(),this.si.clear())}constructor(e){this.A=e,this.A=rs("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Cs(s.si)}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Es.isSupported()&&s.Rn(this.A)}disconnect(){Es.isSupported()&&s.In(this.A)}}return s=r,r.Pe=[],r.si=new Set,r.Y=!1,r.Cn={childList:!0,subtree:!0},r.zf=t=>{s.si.has(t)||(s.U.observe(t,s.Cn),s.si.add(t),X(s.Pe,e=>e(t,"added")))},r.Wv=t=>{qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.zf)},r.Yv=t=>{t.isConnected||qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.si.has(e)&&(s.si.delete(e),X(s.Pe,i=>i(e,"removed")))})},it([D()],r.prototype,"observe",null),it([D()],r.prototype,"disconnect",null),r})(),Tg=(()=>{class s{constructor(t){this.Xv=1,this.wa=new Set,this.zl=null,this.ql=null,this.Wl=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Kv=e=>{let i=e.sheet;if(this.wa.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[be],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[be],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[be],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[be],disabled:e.disabled};this.A(n)}}},this.A=e=>Lt(async()=>{await bc(2),t(e)}),this.ge=new Zs(this.Wl),"adoptedStyleSheets"in Document.prototype&&(this.zl=Rr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.ql=Rr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.qf=new Ao(this.Kv)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ge.observe(),(t=this.zl)===null||t===void 0||t.activate(),(e=this.ql)===null||e===void 0||e.activate(),this.qf.observe()}disconnect(){var t,e;this.wa.clear(),this.ge.disconnect(),(t=this.zl)===null||t===void 0||t.deactivate(),(e=this.ql)===null||e===void 0||e.deactivate(),this.qf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Jv(e);let i=Ie(e,o=>o[be]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}Jv(t){X(t,e=>{if(this.wa.has(e))return;let i=this.Xv++;e[be]=i,this.wa.add(e);let n=this.Qv(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}Qv(t){let e=[];try{e=Ie(t.cssRules,i=>i.cssText)}catch{}return e}}return it([D()],s.prototype,"observe",null),it([D()],s.prototype,"disconnect",null),it([D()],s.prototype,"setStyleSheets",null),s})(),bg=Ps(Pg,"optimizeMutations"),Rg=csSymbol.for("ignoreNextSerialization");function Cg(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,u=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){u.delete(d),s.add(d)},isDetachedMove(d){return!!ot.findAncestor(d,g=>u.has(g),!0)},isAddedNode(d){let g=ot.findAncestor(d,E=>r.has(E)||l.has(E)||s.has(E),!0);return!!g&&!s.has(g)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!ot.findAncestor(d,g=>r.has(g)||l.has(g),!0)},markAsAddedNode(d){u.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!ot.findAncestor(d,g=>t.has(g),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,g){let E=g==="previous"?n:i;return d&&E.has(d)?E.get(d)||null:d},getSiblings(d){let g=d.addedNodes.length,E=this.getPlaceholder(d.previousSibling,"previous"),S=this.getPlaceholder(d.nextSibling,"next");if(g){let P=E,C=S,A=d.previousSibling!==E,T=d.nextSibling!==S;for(let x=0;x<g;x++){let R=d.addedNodes[x],_=d.addedNodes[g-x-1];this.isLatestNodeMutation(R,d)?(n.delete(R),d.previousSibling&&A&&(i.set(d.previousSibling,R),A=!1),P=R):n.set(R,P),this.isLatestNodeMutation(_,d)?(i.delete(_),d.nextSibling&&T&&(n.set(d.nextSibling,_),T=!1),C=_):i.set(_,C)}}else d.previousSibling&&d.previousSibling!==E&&i.set(d.previousSibling,S),d.nextSibling&&d.nextSibling!==S&&n.set(d.nextSibling,E);return{previousSibling:E,nextSibling:S}},setAttributeMutation(d,g){let E=o.get(d)||new Set;E.add(g),o.set(d,E)},isAttributeMutated(d,g){var E;return!!(!((E=o.get(d))===null||E===void 0)&&E.has(g))},setLatestNodeMutation(d,g){h.set(d,g)},isLatestNodeMutation(d,g){return h.get(d)===g},markAsFutureAddedNode(d){h.has(d)||u.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function Ig(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Pg(s){let r=Cg(),t=[];for(let e of s)e.type==="childList"&&Ig(e,r);for(let e of s)switch(e.type){case"attributes":Ng(e,r,t);break;case"characterData":Og(e,r,t);break;case"childList":kg(e,r,t);break}return t}function Og(s,r,t=[]){let e=s.target;return ot.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!Dg(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Ng(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ot.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Mg=30;function Dg(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=O.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Mg,!1)}function kg(s,r,t=[]){let e=ot.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,u=()=>{if(h){let{childListType:E,movedNodes:S,...P}=h;csArray.prototype.push.call(t,E==="added"?P:{...P,movedNodes:S}),h=null}},d=E=>E===(h==null?void 0:h.childListType)?h:(u(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let S=s.addedNodes[E];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,S)):(r.markAsAddedNode(S),n||(h=d("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):ot.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}u()}let g=vi(s.removedNodes,E=>{if(ot.isConnected(E)){if(!i&&!r.isPendingInsert(E)){if(r.isDetachedMove(E))return!0;r.markAsMovedNode(E),r.isMovedNodeIntoAddedNode(E)&&(E[Rg]=!0)}return!1}return r.isUselessNode(E)?!1:(r.markAsRemovedNode(E),!0)});return g.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:g,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Ma={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Ee=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Yl(e){if(s.shadowRootFilters.length>0&&_i(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Ma)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Lt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,Ma)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Es.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Yl(document),this.shadowRootObserver=new Zs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,X(this.shadowRootObserver.shadowRoots,n=>{this.Yl(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Wf=i;let n=Dr(o=>e(o,this),!0);this.A=rs("DocumentMutationObserver:callback",o=>{X(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?ku(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Wf)}disconnect(){s.disconnect(this.A,this.Wf)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{pt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{X(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Yl(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,it([D()],r.prototype,"observe",null),it([D()],r.prototype,"disconnect",null),r})(),xg=(()=>{class s{constructor(t){this.A=t,this.Xl=!1,this.Zv=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Lt(()=>t(e)),this.Yf=new Ao(e=>Lt(async()=>{await bc(),this.Zv(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Xf=new Tg(t))}observe(){var t;this.Xl=!1,this.U=new Ee(e=>this.t_(e),(e,i)=>{i==="added"&&this.e_(e)}),this.U.observe(),this.Yf.observe(),(t=this.Xf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.Yf.disconnect(),(e=this.Xf)===null||e===void 0||e.disconnect(),this.Xl=!0}t_(t){if(this.Xl)return;let e=bg(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){at.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:at.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ot.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ns(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Ie(t.removedNodes,c=>c)};this.A(o)}}e_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return it([D()],s.prototype,"processAttributeChanged",null),it([D()],s.prototype,"processCharacterDataChanged",null),it([D()],s.prototype,"processChildListChanged",null),s})(),Lg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Vg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Ug=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),jg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Hg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Bg=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&co(t)&&(i[n].value=ul(t))}return i}}return s})(),Da={workTime:40,async:!0,initialDOM:!0};var mi=csSymbol("InitialDom"),ka=csSymbol.for("ignoreNextSerialization");function gl(s){return s[ka]?(delete s[ka],!0):!1}function Fg(s=Da){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Da.workTime);let n=rs("serialize:callback",g=>e(g)),o=new Pi,c=(g,E)=>{g.hasChildNodes()&&o.push({node:g,serializedNode:E});let S=g instanceof Element&&csElementshadowRoot.apply(g);if(S){let P=E.shadowRoot=yi(S);s.async&&s.initialDOM&&rt.setProperty(S,mi,!0),c(S,P)}},l,h=!0,u=8,d=rs("work",()=>{var g;if(h)l=yi(t),s.async&&s.initialDOM&&rt.setProperty(t,mi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let E=zg(100);for(;!o.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--u<=0&&csSetTimeout(d);return}let{node:S,serializedNode:P}=o.pop(),C=(g=P.children)!==null&&g!==void 0?g:[];if(Mi(S))continue;let A=0;for(let T=csNodefirstChild.apply(S);T;T=csNodenextSibling.apply(T)){if(gl(T))continue;let x=yi(T);s.async&&s.initialDOM&&rt.setProperty(T,mi,!0),C[A++]=x,c(T,x)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let g=0;g<u;g++)csSetTimeout(d,1)}}function $g(s){let r=yi(s),t=r;if(Mi(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))gl(n)||(t.children[e++]=Bn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Bn(i)),r}var Bn=Ps($g,"serializeSync");function yi(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Ce(s),r.attributes=qg(s);break;case 3:t=new fl(s);break;case 4:t=new Lg(s);break;case 8:t=new Vg(s);break;case 10:t=new Ug(s);break;case 9:t=new jg(s);break;case 11:t=new Hg(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Gg(){mi=csSymbol("InitialDom")}function zg(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=O.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=O.elapsed()),t-this.started}}}function qg(s){return Mi(s)?[]:Bg.create(s)}var To=(()=>{class s{constructor(t){this.type="asyncEvent",this.Kl=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Kl)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.ii=t,this.Kl=!0,this.A&&this.A(this.ii)}complete(t){this.Kl&&t(this.ii),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),Wt=(()=>{class s{constructor(){this.It=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:O.now(),t.timestamp==null&&(t.timestamp=O.now()),csArray.prototype.forEach.call(this.It,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.It=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{let e=csArray.prototype.indexOf.call(this.It,t);csArray.prototype.splice.call(this.It,e,1)}}}return s})(),Wg=Fg(),Yg=(()=>{class s extends Wt{constructor(){super(...arguments),this.Aa=!1}onStart(){this.Aa=!0,this.A=ug(this.s_,this),this.z=new xg(this.A),this.z.observe();let t=pt.mutations.initialDOM.asyncMeasure(),e=()=>{this.Aa=!1,Gg(),t()};this.produceEvent(new To(i=>Wg(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.Aa=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}Kt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=q(e.target),i.targetProps=rt.getProperties(e.target)),[e,i]}s_(t){if(!this.i_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Kt(t.type,t);i.attribute=e.attribute,i.isSvg=Ks(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=ui(e.target),i.linkRel=Oc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?ui(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Kt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?ui(e.target.parentElement):null,i.parentProps=e.target.parentElement?rt.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Kt(t.type,t);i.targetLocalName=ut(e.target)?ui(e.target):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.previousSibling=e.previousSibling?q(e.previousSibling):null,pt.mutations.serializedMutations.measure(()=>{i.nodes=Ie(e.nodes,Bn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Kt(t.type,t);i.previousSibling=e.previousSibling?q(e.previousSibling):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.nodesIds=Ie(e.nodes,q),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Kt(t.type,t);i.nodesIds=Ie(e.nodes,q),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Kt(t.type,t);i.shadowRoot=yi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Kt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Kt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Kt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Kt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Kt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Kt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Kt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Kt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Kt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Kt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Ta(t){return this.Aa&&!rt.getProperty(t,mi)}i_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Ta(t.target)||M.isMaskedElement(t.target)||M.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Ta(e)||M.isMaskedElement(e)||M.isMaskedElementChild(e))}case"attributeChanged":return this.Ta(t.target)||M.isMaskedElementChild(t.target)||M.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Ta(t.target)||M.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ws=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),Ns=(()=>{class s{constructor(){this.It=[]}start(){}stop(){this.It.length=0,this.It=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.It;csSetTimeout(()=>{let n=rs("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.It,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{this.It=csArray.prototype.filter.call(this.It,e=>e!==t)}}emitEvent(t){Lt(()=>csArray.prototype.forEach.call(this.It,e=>e(t)))}}return s.pendingEvents=0,s})(),Xg=(()=>{class s extends Ns{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ws.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Ce){let c=M.getMaskedAttributeDetails(n);n.attributes=this.ba(n,c)}if(M.getMaskedElementDetails(n).state===M.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}rt.traverse(n,c=>{if(c instanceof Ce){let l=M.getMaskedAttributeDetails(c);c.attributes=this.ba(c,l);let h=M.getMaskedElementDetails(c);h.state===M.MaskedElementState.Parent&&(this.Ra(c,h),e++)}})}return e>0&&$.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=M,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],u=M.getMaskedElementDetails(h);if(u.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let d=M.getMaskedAttributeDetails(h);for(let g of(e=d.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[g];u.state===i.Parent&&this.Ra(l,u)}}ba(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ra(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Ce.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return se([wt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),oe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return rt.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){rt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){rt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Kg=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Jg="\uFF41",Qg=/[^\s]/g,Zg="a";function cn(s){let r=csString.prototype.replace.call(s,Kg,Jg);return csString.prototype.replace.call(r,Qg,Zg)}function tm(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var em=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.us=t,this.Pn=e,this.D=i,this.Ca=n,this.r_=o,this.On=yo(this.Pn)}sanitize(t,e){return rt.traverse(t,(i,n)=>{if(i.anonymized=this.us,i.nodeType===is.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?rt.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Ce.isElement(i))return this.n_(i);if(i.nodeType===is.CDATA_SECTION_NODE){let o=i;o.data=this.us?cn(o.data):this.D.checkAndAnonymizePII(o.data,this.Ca);return}}),t}setAnonymization(t){this.us=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[oe.ANONYMIZED_TEXT_STATUS_PROP])===oe.WHITELISTED_STATUS;return this.us&&!n?{anonymizedValue:cn(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.Ca),withAnonymization:!1}}n_(t){let e=Xs(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.us,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.o_(e,i,o))return n;if(uf(i))return df(e,i,n)?this.D.anonymizePII(n):n;let c=this.r_&&i==="placeholder";return this.us&&(ff(e,i,o)||c)?cn(n):this.us?"":this.D.checkAndAnonymizePII(n,null)}o_(t,e,i){return hf(t,e,i)||this.On.has(e)}}return s})(),xa=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.a_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static a_(t){return(e,i)=>t(Ie(e,sm),i)}}return s})();function sm(s){return s.isVisible||!ot.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Fn=()=>(s,r,t)=>{t.value=im(t.value)};function im(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,oo(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Fn.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var rm=(()=>{class s{constructor(t){this.A=t,this.ni=new Map,this.Kf=e=>{let i=e.target;if(this.ni.has(i))return!0;let n=!1;return this.ni.forEach((o,c)=>{n||!this.ni.get(c).subtree||(n=c.contains(i))}),n},pt.general.nbOfMutationObservers.increase(),this.U=new csMutationObserver(e=>{Fn.isScheduled(this,this.garbageCollect)&&(e=vi(e,this.Kf)),e.length&&Lt(()=>t(e,this))})}disconnect(){pt.general.nbOfMutationObservers.decrease(),this.U.disconnect(),this.ni=new Map}takeRecords(){return this.U.takeRecords()}observe(t,e){return pt.mutations.elementMutationObserved.increase(),this.ni.set(t,e),this.U.observe(t,e)}unobserve(t){this.ni.has(t)&&(pt.mutations.elementMutationObserved.decrease(),this.ni.delete(t),this.garbageCollect())}garbageCollect(){pt.mutations.unobserveGarbageCollection.measure(()=>{let t=vi(this.takeRecords(),this.Kf);t.length&&this.A(t,this),this.U.disconnect(),this.ni.forEach((e,i)=>this.U.observe(i,e))})}}return it([Fn()],s.prototype,"garbageCollect",null),s})(),nm=(()=>{class s{constructor(t){this.A=t,this.Os=new Set}onMutations(t){if(Si(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Os.values())ot.isConnected(e)||(this.Os.delete(e),this.A(e))}observe(t){this.z||(this.z=new Ee(e=>csSetTimeout(()=>this.onMutations(e))),this.z.observe()),this.Os.add(t)}disconnect(){var t;(t=this.z)===null||t===void 0||t.disconnect(),this.Os.clear(),this.z=void 0}}return it([D("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),om=300,ur=(()=>{class s{constructor(t){this.Ia=new Set,this.c_=new nm(e=>this.Jf(e)),this.Y=!1,this.Pt=t?{...La,...t}:La}stop(){var t,e;this.Y=!1,(t=this.Nn)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect()}start(t){if(this.Y)throw new Error("VisibilityObserver is already started");this.A=rs("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:om};this.Nn=xa.create(i=>this.handleIntersection(i),e),this.U=new rm(i=>csSetTimeout(()=>{X(i,n=>this.Jf(n.target))})),this.Jl(),this.Y=!0}observe(t){if(!this.Y)throw new Error("Observer is stopped.");this.Pt.reobserve===!1&&t[this.Ql]||(pt.visibilityObserver.nbElements.increase(),t[this.Ql]=!0,this.watchIntersection(t))}Jl(){this.Pa=csSymbol("isVisible"),this.Ql=csSymbol("ObservedElement"),this.Zl=csSymbol("LinkedElement"),this.Qf=csSymbol("Tracked")}Jf(t){this.Ia.add(t);for(let e of this.l_(t))this.Ia.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){X(this.Ia.keys(),t=>{!t.isConnected||ot.areAncestorsHiddenByCSS(t)||t[this.Ql]&&this.watchIntersection(t)}),this.Ia.clear()}watchIntersection(t){this.U.unobserve(t),this.Nn.unobserve(t);let e=ot.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Zf(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Nn.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Pa],this.Nn.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.U.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){ot.isVisibleInDocument(i)||this.h_(i);continue}let n=this.Pt.allowSameMatch||!e.target[this.Pa];e.target[this.Pa]=!0,n&&!this.Pt.delay&&this.onVisibilityChanged(e.target,dr.VisibleInViewPort)}this.Pt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Pa]&&i&&this.onVisibilityChanged(e.target,dr.VisibleInViewPort)}},this.Pt.delay)}h_(t){pt.visibilityObserver.hiddenElements.increase();let e=ot.getTopElement(t);this.watchMutation(t),e&&(this.c_.observe(e),this.Zf(e,t),this.watchMutation(e,!1))}Zf(t,e){var i;(t[this.Zl]=(i=t[this.Zl])!==null&&i!==void 0?i:new Set).add(e)}l_(t){var e,i;let n=[],o=(i=(e=t[this.Zl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return X(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===dr.VisibleInViewPort&&this.Pt.trackOnce){if(this.Nn.unobserve(t),this.U.unobserve(t),t[this.Qf])return;t[this.Qf]=!0}this.A(t,e)}static isSupported(){return xa.isSupported()}}return it([D()],s.prototype,"observe",null),it([Qs({wait:50}),D(),wt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),it([D()],s.prototype,"watchIntersection",null),it([D()],s.prototype,"watchMutation",null),it([D(),wt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),it([D()],s.prototype,"onVisibilityChanged",null),s})(),dr=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),La={delay:1e3,trackOnce:!0,reobserve:!1},am=(()=>{class s{constructor(t){this.A=t,this.Ns=new ki,this.u_=e=>{Lt(()=>{for(let i of e)i.type==="childList"&&X(i.addedNodes,n=>{qt(n,NodeFilter.SHOW_TEXT).visitAll(c=>{this.Ns.has(c)||(this.Ns.add(c),this.A(c))})})})},this.Mn=new Ee(this.u_)}observe(){this.Mn.observe(),qt(document,NodeFilter.SHOW_TEXT).visitAll(e=>{this.Ns.add(e),this.A(e)})}disconnect(){this.Ns.clear(),this.Mn.disconnect()}}return s})(),ml=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return rt.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){rt.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){rt.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),Re=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?rt.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){rt.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){rt.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),cm=(()=>{class s extends Wt{constructor(){super(),this.oi=new Set,this.th=new Set,this.eh=new Set,this.us=!1,this.Mt=new ur,this.tp=new am(t=>{let e=ot.getParentElement(t);!e||!e.isConnected||M.isMaskedElement(e)||M.isMaskedElementChild(e)||ml.shouldEncrypt(e)||Re.isEditableNode(e)||Ni(e)||Mi(e)||Or(e)||Ir(t.data)||(this.oi.add(e),this.watchElements())})}onStart(){ur.isSupported()&&(this.Mt.start((t,e)=>this.onVisibilityChanged(t,e)),this.tp.observe())}onStop(){ur.isSupported()&&(this.Mt.stop(),this.tp.disconnect(),this.oi.clear(),this.th.clear(),this.eh.clear())}setAnonymization(t){this.us=t}watchElements(){if(!this.isStarted)return;let t=this.oi;this.oi=new Set;for(let e of Cs(t))!e.isConnected||this.th.has(e)||(this.th.add(e),Si(csNodechildNodes.apply(e),i=>csNodenodeType.apply(i)===3)&&this.Mt.observe(e))}onVisibilityChanged(t,e){e!==dr.VisibleInViewPort||this.us&&!oe.isWhitelistedElement(t)||X(csNodechildNodes.apply(t),i=>{if(csNodenodeType.apply(i)!==3)return;let n=i.data;this.eh.has(n)||(this.eh.add(n),this.produceEvent({type:"TextVisibility",text:n,state:e}))})}}return se([D(),Qs({wait:50,mode:"trailing"})],s.prototype,"watchElements",null),se([D()],s.prototype,"onVisibilityChanged",null),s})(),Va=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function Ua(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var lm=(()=>{class s extends Ns{constructor(t,e,i=new Js,n=null,o=!1){super(),this.D=i,this.Ca=n,this.captureAnonymizedPlaceholders=o,this._r=new em(t,e,i,n,o)}setAnonymization(t){this._r.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Va.isTextVisibilityEvent(t)||Ws.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.d_(t);if(Va.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.Ca),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ih(t);break;case"attributeChanged":this.f_(t);break;case"characterDataChanged":this.p_(t);break}return t}d_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case is.TEXT_NODE:case is.COMMENT_NODE:{let u=n[c];if(tt(u.data)){if(h.localName==="script"){u.data="";continue}}else continue;let{anonymizedValue:d,withAnonymization:g}=this._r.getAnonymizedValue((e=u.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);u.anonymized=g,u.data=d;break}case is.ELEMENT_NODE:{let u=n[c];if(u.attributes)for(let d in u.attributes){let g=u.attributes[d],E=Ua(l);u.attributes[d]=this._r.getAnonymizedAttributeValue(l.namespaceURI,l.localName,d,g,E)}!((i=u.state)===null||i===void 0)&&i.value&&(u.state.value=tm(u.state.value,Ua(l)));break}}}return t}ih(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this._r.sanitize(n,i)}f_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this._r.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}p_(t){t.newValue=this._r.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return se([wt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Z=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function bo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=hm(r);return e?(Ci(t,",")||(e=um(e)),[ja(t),...bo(e)]):[ja(t)]}function hm(s){return csString.prototype.split.call(s,/\s(.+)/)}function ja(s){return csString.prototype.split.call(s,/,$/)[0]}function um(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var dm=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function fm(s,r){return csString.prototype.replace.call(s,dm,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=gm((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${pm(l)})`})}function pm(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ei(s){let r=new Set;return fm(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Cs(r)}function gm(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var Ha=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.y_(t);if(!n)return null;let o=await s.ip(n),c=Jt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.E_(t,n),c=ae(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(u=>{u&&csArray.prototype.push.call(h.nestedResources,{hash:u.hash,data:u.data})})),h}static async ip(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.rp,e);return Pn(i)}static async y_(t){let e;if(!Jt(t))e=await(await window.fetch(t)).blob();else{let i=ta(t);if(!i)return null;e=i}return e}static async E_(t,e){let i=new Map,n=ae(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Jt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=Ei(l.data));let d=!1,g=!1;for(let E of l.nestedResources){let S=Jt(E)?E:l.resourceAbsolutePath?Dd(E,l.resourceAbsolutePath):ae(E),P=i.get(S);if(P!==void 0){if(P!==null){let A=s.S_(P,E);l.data=et.stringReplaceAll(l.data,E,A)}continue}Xs(c,A=>A.resourceAbsolutePath===S)!==void 0||(d=!0,g||(csArray.prototype.push.call(c,l),g=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:S}))}if(!d){let E=await s.v_(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let d;if(!Jt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let E=ta(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}d=E}let g=await s.ip(d);i.set(l.resourceAbsolutePath,{hash:g,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static S_(t,e){let i=`cs://resources/${t.hash}`;return Jt(e)||(i+=`?${s.nh}=${e}`),i}static async v_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.rp,i);return{data:e,hash:Pn(n)}}}return s.rp="SHA-256",s.nh="original-resource-name",s})(),$n=(()=>{class s extends Ns{get busy(){return this.oh>0}constructor(){super(),this.__="cssrm://",this.w_=1,this.ds=!1,this.oh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!Ws.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.A_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.T_(t);break;case"attributeChanged":this.b_(t);break;case"characterDataChanged":this.R_(t);break}return t}disableOnlineAssets(){this.ds=!1}enableOnlineAssets(){this.ds=!0}isOnlineAssetsActivated(){return this.ds}A_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case Z.TEXT_NODE:this.np(o,l==null?void 0:l.localName);break;case Z.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let u=o.cssRules[h],d=this.wr(u);d!==null&&(o.cssRules[h]=d)}break}case Z.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.wr(h.style)),(this.op(c.localName)||this.ap(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.ah(h.src)),"srcset"in h&&(h.srcset=this.ch(h.srcset))),this.ds&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let u=this.ki(ae(h.href),!0);h["data-cs-original-href"]=h.href,h.href=u}}}}return t}T_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)rt.traverse(i,(n,o)=>{if(n.nodeType===is.TEXT_NODE&&o){this.np(n,o.localName);return}if(!Ce.isElement(n))return;let c=Ce.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.wr(c.value)),this.op(n.localName)||this.ap(n.localName,o==null?void 0:o.localName)){let l=Ce.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.ah(l.value));let h=Ce.getAttribute(n,"srcset");if(h){h.value=this.ch(h.value);return}}if(this.C_(n)&&this.ds){let l=Xs(n.attributes,u=>u.name==="href");if(!l||!l.value)return;let h=this.ki(ae(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}np(t,e){if(!t||e!=="style")return;let i=this.wr(t.data);i!==null&&(t.data=i)}R_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.wr(t.newValue);e!==null&&(t.newValue=e)}b_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.wr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.ah(t.newValue)),i&&(t.newValue=this.ch(t.newValue)))}ah(t){return Jt(t)||this.ds?this.ki(t,!1,O.now()):t}ch(t){if(!this.ds)return t;let e=t,i=bo(t);for(let n of i){let o=this.ki(ae(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}wr(t){let e=Ei(t),i=t,n=O.now();for(let o of e){let c=Jt(o);if(!(c||this.ds)||this.I_(o))continue;let l=of(o),h=o;c?h=this.ki(o,!1,n):this.ds&&(l?h=this.ki(o,!0,n):h=this.ki(ae(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}ki(t,e,i=O.now()){let n=this.w_++;this.oh++;let o=e?Ha.toCSSStaticResourceEvent:Ha.toStaticResourceEvent,c=new To(async l=>{try{let h=await o(t,n,i,this.ds);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.oh--}});return this.emitEvent(c),this.__+n}op(t){return t==="img"}ap(t,e){return t==="source"&&e==="picture"}C_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Ac()&&Tu()&&!!csArray.from}I_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return se([wt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),ci=console;var Ss={debug:(...s)=>ci.debug(...s),log:(...s)=>ci.log(...s),info:(...s)=>ci.info(...s),warn:(...s)=>ci.warn(...s),error:(...s)=>ci.error(...s)},Gn=(()=>{class s{push(t){let e={value:t};this.Ar?(this.lh.next=e,this.lh=e):(this.Ar=e,this.lh=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Ar)return;let t=this.Ar;return this.Ar=t.next,this.Ar||(this.lh=void 0),t.value}isEmpty(){return!this.Ar}}return s})(),Ti=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),Ro=(()=>{class s{constructor(){this.cp=new Gn,this.lp=new Gn,this.length=0}push(t,e=Ti.Low){return e===Ti.High?this.cp.push(t):this.lp.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.cp.shift()||this.lp.shift()}isEmpty(){return this.length===0}}return s})(),mm=(()=>{class s{get length(){return this.vt.length}constructor(){this.Dn=[],this.vt=new Ro,this.hh=new Set}P_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}O_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${q(t.target)}-${t.type}${this.P_(t)}`}N_(t){switch(t.type){case"state":return Ti.High;default:return Ti.Low}}M_(t){let e=this.O_(t);if(e){if(this.hh.has(e))return;this.hh.add(e)}return this.vt.push({mutation:t,key:e},this.N_(t))}D_(){this.Dn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Dn),t=>this.M_(t)),this.Dn=[])}push(t){csArray.prototype.push.call(this.Dn,t)}shift(){this.D_();let t=this.vt.shift();if(t)return t.key&&this.hh.delete(t.key),t.mutation}isEmpty(){return this.vt.isEmpty()&&this.Dn.length===0}}return s})(),ym=(()=>{class s{constructor(t){this.ye=t,this.Oa=!1,this.Os=new WeakSet,this.Na=e=>{let i=e.getRootNode();i&&this.Os.has(i)&&this.ye(e)}}observe(t){this.Os.has(t)||(this.Os.add(t),this.Oa||(es.subscribe(this.Na),this.Oa=!0))}disconnect(){this.Oa&&(es.unsubscribe(this.Na),this.Oa=!1),this.Os=new WeakSet}}return s})(),ln=new WeakMap,hn=new WeakMap;function Ba(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(ln.has(s))return ln.get(s);let t=r();return ln.set(s,t),t}function zn(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function Em(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return Ba(o,()=>{let c=new Proxy(o,{get(l,h){let u=Reflect.get(l,h);return typeof u!="function"?u:Ba(u,()=>i&2?zn(function(...d){let g=hn.get(this)||this,E=Reflect.apply(u,g,d);return e(g,[r,h],d,E),E},u):zn(function(...d){let g=hn.get(this)||this;return Reflect.apply(u,g,d)},u))},set:i&1?(l,h,u)=>{let d=Reflect.set(l,h,u);return e(l,[r,h],[u],d),d}:Reflect.set});return hn.set(c,o),c})}})}function Sm(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=zn(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function ft(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return Ss.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let u of o)try{u(...h)}catch(d){Ss.warn(`Error in spy hook for ${r} on target`,i,d)}};return e.mode?Em(i,r,c,l,e.mode):Sm(i,r,c,l),()=>o.delete(t)}function $t(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var vm=(()=>{class s{constructor(t){this.ye=t,this.It=new WeakMap,this.Ee=e=>this.ye({type:"state",target:e}),this.hp=e=>this.ye({type:"setAdoptedStyleSheets",target:e}),this.Tr=e=>this.ye({type:"styleSheetUpdated",target:e}),this.kn=e=>{var i;let n=(i=this.k_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.Tr(n)},this.x_=e=>this.ye({type:"styleSheetDisabledChanged",target:e}),this.up=e=>this.ye({type:"activeElementChanged",target:e.ownerDocument}),this.Na=e=>this.ye({type:"metadataChanged",target:e})}L_(t){return csNodenodeType.apply(t)===Z.DOCUMENT_NODE}V_(t){let e=[$t(t,"input",this.Ee),$t(t,"change",this.Ee),$t(t,"checked",this.Ee),$t(t,"scroll",this.Ee),$t(t,"toggle",this.Ee),$t(t,"focusin",this.up),$t(t,"focusout",this.up),$t(t,"pointerover",i=>{this.ye({type:"pointerOverElement",target:i.ownerDocument,element:i})}),$t(t,"pointerout",i=>{this.ye({type:"pointerOverElement",target:i.ownerDocument,element:null})}),$t(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.ye({type:"loaded",target:i});break}})];this.Ma(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}U_(t){let e=t.defaultView;if(!e)return;let i=[$t(e,"resize",()=>this.Ee(t)),$t(t,"visibilitychange",()=>this.Ee(t)),$t(t,"fullscreenchange",()=>this.Ee(t)),ft(e.Document,"adoptedStyleSheets",this.hp,{mode:2}),ft(e.ShadowRoot,"adoptedStyleSheets",this.hp,{mode:2}),ft(e.Element,"attachShadow",(n,o,c,l)=>{this.ye({type:"attachShadow",target:n,shadowRoot:l})}),ft(e.HTMLInputElement,"value",this.Ee),ft(e.HTMLInputElement,"checked",this.Ee),ft(e.HTMLSelectElement,"selectedIndex",this.Ee),ft(e.CSSStyleSheet,"insertRule",this.Tr),ft(e.CSSStyleSheet,"deleteRule",this.Tr),ft(e.CSSStyleSheet,"replace",this.Tr),ft(e.CSSStyleSheet,"replaceSync",this.Tr),ft(e.CSSStyleSheet,"addRule",this.Tr),ft(e.CSSStyleRule,"style",this.kn,{mode:1}),ft(e.CSSGroupingRule,"insertRule",this.kn),ft(e.CSSGroupingRule,"deleteRule",this.kn),ft(e.CSSStyleDeclaration,"setProperty",this.kn),ft(e.CSSStyleDeclaration,"removeProperty",this.kn),ft(e.StyleSheet,"disabled",this.x_),ft(e.HTMLDialogElement,"show",this.Ee),ft(e.HTMLDialogElement,"showModal",this.Ee),ft(e.HTMLDialogElement,"close",this.Ee),ft(e.CustomElementRegistry,"define",(n,o,c)=>{this.ye({type:"customElementRegistration",target:t,name:c[0]})})];this.Ma(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}k_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}j_(t){let e=new csMutationObserver(i=>{this.ye(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.Ma(t,()=>{e.disconnect()})}H_(t){let e=new ym(this.Na);e.observe(t),this.Ma(t,()=>{e.disconnect()})}Ma(t,e){this.It.get(t)==null||csArray.prototype.push.call(this.It.get(t),e)}observe(t){this.It.has(t)||(this.It.set(t,[]),this.V_(t),this.L_(t)&&this.U_(t),this.j_(t),this.H_(t))}disconnect(t){let e=this.It.get(t)||[];for(let i of e)try{i()}catch(n){Ss.warn(n)}this.It.delete(t)}}return s})(),yl=new Ro,lt,_m=40,wm=10;function Am(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%wm===0&&(t=performance.now(),i=t-e<_m),r++,i}})},0)}function Fa(){var s;let r=(s=lt==null?void 0:lt.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=lt==null?void 0:lt.subTasks,r):yl.shift()}function El(){Am(s=>{for(lt||(lt=Fa());s.hasTimeLeft&&lt;){lt.isRunning=!0;try{lt.isEnded=lt.run(s)!==!0}catch(r){Ss.error("Error occurred while running task:",r),lt.isEnded=!0}lt.isRunning=!1,(lt.isEnded||lt.isAborted)&&(lt=Fa())}lt&&El()})}function li(s,r=Ti.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return lt!=null&&lt.isRunning?(lt.subTasks=lt.subTasks||new Ro,lt.subTasks.push(t,r)):yl.push(t,r)===1&&!lt&&El(),t}var Tm=40;function $a(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function un(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var dn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function fn(s,r){return!!s&&r in s&&!!s[r]}var Ga={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},qn=(()=>{class s{constructor(t){this.A=t,this.z=new vm(e=>{this.uh.push(e),this.B_()}),this.qe={},this.We=new Map,this.uh=new mm,this.xn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.dp=0,this.fp=Tm}disconnect(){for(let t of this.xn.values())this.z.disconnect(t);this.xn.clear()}observe(t){return this.disconnect(),this.Da(t),this}getState(t=!0){let e=this.qe;return this.qe={...e},t&&this.pp(),e}getChanges(){let t={};for(let[i,n]of this.We){let o=this.qe[i];if(!(n&&!o))if(o&&!n)t[i]=Ze(o);else{let c=Xc(n,o);c!==void 0&&(t[i]=c)}}return this.pp(),Yc(t)?t:void 0}setFrameRate(t){return this.fp=t/1e3,this}onChange(t){return this.A=t,()=>{this.A===t&&(this.A=void 0,this.Ln&&(csClearTimeout(this.Ln),this.Ln=void 0))}}async getStateAsync(t=!0){return await this.gp(),this.getState(t)}async getChangesAsync(){return await this.gp(),this.getChanges()}async gp(){return new Promise(t=>{li(()=>t())})}pp(){this.We.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=$a(e);return t?`${$a(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:un(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:un(n),name:un(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=g=>{c.has(g)?c.delete(g):o.add(g)},h=g=>{o.has(g)?o.delete(g):c.add(g)};function u(g,E){for(let S of dn)S in E&&(fn(g,S)&&l(g[S]),fn(E,S)&&h(E[S]))}for(let[g,E]of Object.entries(e)){if(E===null)continue;let S=g,P=n[S],C=P===void 0?E:Kc(P,E);u(P,E),n[S]=C}let d=g=>{if(c.has(g))return;let E=n[g];if(E){delete n[g],i==null||i(g);for(let{nodeId:S}of s.nodeRelationsEntries(E))d(S)}};for(let g of o)d(g);return n}static nodeRelationsEntries(t,e=!1){let i=e?dn.filter(o=>o!=="nextSibling"):dn,n=[];for(let o of i)fn(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}_t(t){if(t in this.qe&&!this.We.has(t)){let e=this.qe[t];this.We.set(t,Ze(e)),this.qe[t]=Ze(e)}return this.qe[t]}F_(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:Z.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:Z.CSS_STYLESHEET_NODE,cssRules:{}}}}$_(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}G_(t){let e=es.getAll(t);switch(csNodenodeType.apply(t)){case Z.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.$_(i);return{type:Z.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&q(n),hoveredId:o&&q(o),...this.mp(t),metadata:e}}case Z.DOCUMENT_FRAGMENT_NODE:return{type:Z.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case Z.COMMENT_NODE:return{type:Z.COMMENT_NODE,data:void 0,metadata:e};case Z.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:Z.ELEMENT_NODE,namespaceURI:n in Ga?Ga[n]:n,localName:i.localName,attributes:this.z_(i),state:this.yp(i),metadata:e}}case Z.TEXT_NODE:return{type:Z.TEXT_NODE,data:t.data||"",metadata:e};case Z.CDATA_SECTION_NODE:return{type:Z.CDATA_SECTION_NODE,data:t.data,metadata:e};case Z.DOCUMENT_TYPE_NODE:return{type:Z.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}z_(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}mp(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}yp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}B_(){var t;((t=this.q_)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.q_=li(e=>(this.br(e),this.Ep(),!this.uh.isEmpty())))}Ep(){if(!this.A||this.Ln)return;let t=performance.now()-this.dp,e=Math.max(0,this.fp-t);this.Ln=csSetTimeout(()=>{this.Ln=void 0;let i=this.getChanges();this.dp=performance.now(),i&&this.A(i,this.getState())},e)}W_(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.fs(e))return q(e)}Y_(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.fs(i))return q(i)}Da(t){let e=new Gn;e.pushMany(this.Sp(t,!1)),!e.isEmpty()&&li(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Sp(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}X_(t){switch(t){case Z.DOCUMENT_NODE:return"contentDocument";case Z.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Rr(t){li(()=>{let e=t.ownerNode;if(e&&(!this.vr(e)||!this.fs(e)))return!1;if(this.fs(t)||!e||e.localName==="style"?this.vp(t):this.fh(q(t),{type:Z.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.fs(e)){let i=q(e);this._t(i).sheetId=q(t)}return!1})}_p(t){let e=0,i=q(t),n=t.adoptedStyleSheets||[],o=n.length,c={};li(l=>{if(!this.fs(t)||!this.vr(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let u=n[e];c[e]=this.fs(u)?q(u):this.vp(u),e+=1}if(e<o)return!0;let h=this._t(i);return h&&(h.adoptedStyleSheets=c),!1})}vp(t){let e=q(t);return this.fh(e,this.F_(t)),e}fh(t,e){this.serializedNodeCount++,this.qe[t]=e,this.Ep(),this.We.has(t)||this.We.set(t,null)}fs(t){return q(t)in this.qe}wp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}Ap(t){let e=q(t),i=this.qe[e];if(!i){Ss.warn(`No serialized node id ${e}`);return}let n=this.Y_(t);if(!n){Ss.warn("No parent id for node",t);return}let o=this.X_(i.type);if(o==="childList"){let c=this.W_(t);this.ph(e,c,n,!0)}else{let c=this._t(n);c[o]=e,i.parent=n}}*Sp(t,e=!0){var i,n,o,c;if(!this.vr(t))return;if(this.fs(t)){e&&this.Ap(t);return}let l=q(t),h=this.G_(t);if(!h){Ss.warn("Node was not serialized",t);return}switch(this.fh(l,h),e&&this.Ap(t),h.type){case Z.DOCUMENT_NODE:case Z.DOCUMENT_FRAGMENT_NODE:{let d=t;this.xn.set(l,d),this.z.observe(d),!((i=d.adoptedStyleSheets)===null||i===void 0)&&i.length&&this._p(d);break}case Z.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case Z.ELEMENT_NODE:{let d=t;switch(h.localName){case"iframe":this.wp(d)&&(yield d.contentDocument);break;case"link":d.rel==="stylesheet"&&d.sheet&&this.Rr(d.sheet);break;case"style":{let g=d.sheet;g&&this.Rr(g);break}default:Xf(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Tp(q(t.ownerDocument),h.localName),csElementshadowRoot.apply(d)&&(yield csElementshadowRoot.apply(d));break}break}}let u=csNodefirstChild.apply(t);u&&(yield u)}Tp(t,e){let i=this._t(t),n=i.customElements||(i.customElements={});n[e]=1}gh(t){let e=this._t(t);if(e){switch(e.type){case Z.DOCUMENT_NODE:case Z.DOCUMENT_FRAGMENT_NODE:this.z.disconnect(this.xn.get(t)),this.xn.delete(t)}delete this.qe[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.gh(i)}}ph(t,e,i,n){let o;if(e){let c=this._t(e);o=c.nextSibling,c.nextSibling=t}else{let c=this._t(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this._t(t);if(c.nextSibling=o,o){let l=this._t(o);l.previousSibling=t}}if(t){let c=this._t(t);c.parent=i,c.previousSibling=e}}K_(t){var e;let i=this._t(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this._t(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}vr(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}J_(t){let e=this._t(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}br(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.uh.shift());){if(this.processedMutationsCount++,!this.fs(n.target)||!this.vr(n.target))continue;let o=q(n.target);switch(n.type){case"attachShadow":{this.Da(n.shadowRoot),this._t(o).shadowRoot=q(n.shadowRoot);break}case"childList":{let c,l=this.K_(o);for(let u=csNodefirstChild.apply(n.target);u;u=csNodenextSibling.apply(u)){this.fs(u)||this.Da(u);let d=q(u);l.delete(d),this.ph(d,c,o),c=d}this.ph(void 0,c,o);for(let u of l)this.J_(u),this.gh(u);let h=this._t(o);if(h.type===Z.ELEMENT_NODE&&h.localName==="style"){let u=n.target.sheet;u&&this.Rr(u)}break}case"characterData":{let c=this._t(o);if(c.type===Z.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Rr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this._t(o),u=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},u===null?delete h.attributes[c]:h.attributes[c]=u;break}case"state":{let c=this._t(o);c.type===Z.DOCUMENT_NODE?Object.assign(c,this.mp(n.target)):c.state=this.yp(n.target);break}case"setAdoptedStyleSheets":{this._p(n.target);break}case"styleSheetUpdated":{this.Rr(n.target);break}case"styleSheetDisabledChanged":{let c=this._t(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Rr(c.sheet);break}case"iframe":{let c=n.target,l=this._t(o),h=c.contentDocument,u=h&&q(h);l.contentDocument&&l.contentDocument!==u&&(this.gh(l.contentDocument),delete l.contentDocument),this.wp(c)&&this.Da(h);break}}break}case"activeElementChanged":{let c=this._t(o),l=n.target.activeElement||void 0;c.activeId=l&&q(l);break}case"pointerOverElement":{let c=this._t(o),l=n.element||void 0;c.hoveredId=l&&q(l);break}case"customElementRegistration":{this.Tp(o,n.name);break}case"metadataChanged":{let c=this._t(o);c&&(c.metadata=Ze(es.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=Ze,s})(),bm=(()=>{class s extends Ns{constructor(t){super(),this.Z=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||Ws.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(Ws.isDOMEvent(t))t.initialDOM.baseURI=this.Z.anonymizeUrl(t.initialDOM.baseURI);else for(let e of qn.findNodes(t.state,i=>i.type===Z.DOCUMENT_NODE))e&&e.type===Z.DOCUMENT_NODE&&(e.baseURI=this.Z.anonymizeUrl(e.baseURI));return t}}return se([wt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Rm="textarea",Cm=(()=>{class s extends Ns{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ws.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.Q_(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Z_(t);break;case"characterDataChanged":this.tw(t);break}return t}Q_(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.bp(o,c.metadata,l.localName)}}Z_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)rt.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.bp(n,h,l)})}bp(t,e,i){this.Rp(i,e)&&(t.data=this.Cp(t.data))}tw(t){this.Rp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Cp(t.newValue))}Cp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Rp(t,e){return t===Rm||(e==null?void 0:e[Re.EDITABLE_NODE_PROP])===!0}}return se([wt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Im=(()=>{class s extends Wt{async onStart(){this.Cr&&this.Cr.disconnect(),this.Cr=new qn().observe(document);let t=await this.Cr.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:qn.cloneDeep(t)}),this.Vn=this.Cr.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})}onStop(){var t;(t=this.Vn)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Cr)===null||t===void 0||t.disconnect(),this.Cr=void 0}}return s})(),Sl=!0,fr=csSymbol("safe"),za=csSymbol("task");function Vt(s,r=Sl){var t;(t=s[fr])!==null&&t!==void 0||(s[fr]=function(e){let i=arguments;Is(()=>(e[za]=Bt,s.listener.apply(s.boundElement,i)),[ge.EventListener,s.type],e[za])}),s.boundElement.addEventListener(s.type,s[fr],r)}function Ut(s,r=Sl){s.boundElement.removeEventListener(s.type,s[fr],r)}var Pm=(()=>{class s{constructor(t){this.A=t,this.Jt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){Vt(this.Jt),this.mh()}mh(){this.resizeListener()}disconnect(){Ut(this.Jt)}resizeListener(){let t={width:Et.windowWidth(),height:Et.windowHeight()};this.A(t)}}return it([D("resize")],s.prototype,"resizeListener",null),s})(),Xe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),sr=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),ir=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Om=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=nt.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in nt;function e(){return Xe.LANDSCAPE}function i(){var c;switch((c=nt.screen.orientation)===null||c===void 0?void 0:c.type){case sr.PORTRAIT_PRIMARY:case sr.PORTRAIT_SECONDARY:return Xe.PORTRAIT;case sr.LANDSCAPE_PRIMARY:case sr.LANDSCAPE_SECONDARY:return Xe.LANDSCAPE;default:return Xe.PORTRAIT}}function n(){switch(window.orientation){case ir.PORTRAIT:case ir.PORTRAIT_REVERSE:return Xe.PORTRAIT;case ir.LANDSCAPE:case ir.LANDSCAPE_REVERSE:return Xe.LANDSCAPE;default:return Xe.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),Nm=(()=>{class s extends Wt{constructor(){super(...arguments),this.yh=null,this.Eh=null,this.ai=new Pm(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Om.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.ew(t);if(e!==this.yh||i!==this.Eh){this.yh=e,this.Eh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}ew(t){let e,i,n=Et.screenWidth(),o=Et.screenHeight();return t===Xe.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ai.observe()}onStop(){this.yh=null,this.Eh=null,this.ai.disconnect()}}return s})();function Mm(s){let r=csEventtarget.apply(s);return r&&ut(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Ys=(()=>{class s{get selectors(){return this.Ye===""?null:this.Ye}constructor(t,e={closest:!1}){this.A=t,this.Pt=e,this.Ye="",this.Un=new ki,this.br=Ps(i=>{if(this.Ye==="")return;let n=[];for(let o of Cc(i,c=>c.addedNodes)){if(!(rd(o)||this.Pt.closest&&Sr(o)))continue;let c=this.Pt.closest?this.iw(o,this.Ye):this.findMatchingElements(o,this.Ye);oa(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.rw=(i,n)=>{if(this.Ye===""||n!=="added")return;let o=this.findMatchingElements(i,this.Ye);o.length&&this.A(o,"added")},this.z=new Ee(this.br,this.rw)}observe(t){this.Ye===""?this.z.observe():this.Ye+=",",this.Ye+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let n=this.findMatchingElements(i,t);oa(n,e)}e.length&&(X(e,i=>{this.Un.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.br(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.Un.clear(),this.Ye=""}iw(t,e){let i=[];if(Sr(t)){if(t.parentElement){let n=Vn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Un.has(n)===!1)}else{if(Ri(t)){let n=Vn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Un.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ns(window.csquerySelectorAll[t.nodeType].call(t,e));return ut(t)&&ce.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Un.has(n)===!1)}}return it([D()],s.prototype,"observe",null),it([D()],s.prototype,"disconnect",null),it([wt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),Dm=(()=>{class s extends Wt{constructor(){super(),this.Ip=t=>{let e=Mm(t);e&&this.Sh(e,t.type)},this.ge=new Zs((t,e)=>{switch(e){case"initial":case"added":this.Pp(t);break;case"removed":this.Op(t);break}}),this.W=new Ys((t,e)=>{(e==="initial"||e==="added")&&this.nw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ot.isConnected(t)&&!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Pp(document),this.ge.observe(),this.W.observe("video")}onStop(){this.Op(document),this.ge.disconnect(),this.W.disconnect()}Sh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=q(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),oo(()=>this.produceEvent(o))}}nw(t){for(let e of t)this.Sh(e,"seeked"),s.isPlaying(e)&&this.Sh(e,"play")}Pp(t){for(let e of["play","pause","seeked"])Vt({type:e,listener:this.Ip,boundElement:t})}Op(t){for(let e of["play","pause","seeked"])Ut({type:e,listener:this.Ip,boundElement:t})}}return s})();function km(s){return s.nodeName==="SELECT"}function Co(s){return s.nodeName==="INPUT"}function xm(s){return s.nodeName==="TEXTAREA"||Co(s)&&!vl(s)&&!_l(s)}function vl(s){return Co(s)&&s.type==="number"}function _l(s){return Co(s)&&(s.type==="checkbox"||s.type==="radio")}var Lm=(()=>{class s extends Wt{constructor(t){super(),this.ht=t,this.vh=new Ag("low"),this.Ir=e=>this.inputHandler(e),this.xi=[],this.ow(),this.aw(),this.W=new Ys(e=>{for(let i of e)this._h(i)&&Lt(()=>{this.Ah(i,q(i))},"low")}),this.ge=new Zs((e,i)=>{switch(i){case"initial":case"added":Vt({type:"change",listener:this.Ir,boundElement:e});break;case"removed":Ut({type:"change",boundElement:e,listener:this.Ir});break}})}onStart(){Vt({type:"keyup",boundElement:document,listener:this.Ir}),Vt({type:"change",boundElement:document,listener:this.Ir}),X(this.xi,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.lw,",")),this.ge.observe()}onStop(){Ut({type:"keyup",boundElement:document,listener:this.Ir}),Ut({type:"change",boundElement:document,listener:this.Ir}),X(this.xi,t=>t.deactivate()),this.W.disconnect(),this.ge.disconnect(),this.vh.clear()}Ah(t,e){var i,n,o;if(this.vh.has(t))return;if(this.vh.add(t),km(t)){let h={type:"InputEvent",inputType:"select",target:q(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(h);return}if(_l(t)){let h={type:"InputEvent",inputType:"checkable",target:q(t),checked:t.checked,timestamp:O.now()};this.produceEvent(h);return}let c=xm(t),l=vl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ht)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ht)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:O.now()});return}let u=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:q(t),value:csString.prototype.replace.call(h,/\S/g,u),timestamp:O.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=St(t),i=q(e);!i||!this._h(e)||ot.isConnected(e)&&Lt(()=>{this.Ah(e,i)},"low")}ow(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}aw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Rr(t.prototype,e,(o,c,l)=>{if(l!==c&&ot.isConnected(o)){let h=i?o.parentElement:o;this.hw(h)}});n&&csArray.prototype.push.call(this.xi,n)}_h(t){return!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)&&(Pr(t)||lo(t)||Or(t))}hw(t){if(this.isStarted&&ot.isConnected(t)){let e=q(t);e&&this._h(t)&&Lt(()=>{this.Ah(t,e)},"low")}}}return s.lw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],se([Pt()],s.prototype,"inputHandler",null),se([D()],s.prototype,"trackChanges",null),s})();var Vm=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.ci=[],this.ot=[],this.uw=t}next(t){this.ot.length===this.uw&&csArray.prototype.shift.call(this.ot),csArray.prototype.push.call(this.ot,t),this.ot.length===1&&csSetTimeout(()=>this.clear());for(let e of this.ci)e(t)}subscribe(t){if(Xs(this.ci,i=>t===i))return()=>{this.ci=csArray.prototype.filter.call(this.ci,i=>i!==t)};csArray.prototype.push.call(this.ci,t);for(let i of this.ot)t(i);return()=>{this.ci=csArray.prototype.filter.call(this.ci,i=>i!==t)}}clear(){this.ot=[]}hasObservers(){return this.ci.length>0}}return s})(),wl=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.fw=s.Hn.subscribe(e=>this.A(e)),s.ka||(s.ka=!0,s.Mn.observe(),qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ns.add(i),s.Hn.next(i)}))}disconnect(){s.ka&&(this.fw(),s.Hn.hasObservers()||(s.ka=!1,s.Mn.disconnect(),s.Hn.clear(),s.Ns.clear()))}}return s=r,r.Ns=new ki,r.Hn=new Vm,r.pw=Ps(t=>{Lt(()=>{for(let e of t)e.type==="childList"&&X(e.addedNodes,i=>{qt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ns.has(o)||(s.Ns.add(o),s.Hn.next(o))})})})},"ElementObserver.findAllElements"),r.ka=!1,r.Mn=new Ee(s.pw),it([D()],r.prototype,"observe",null),it([D()],r.prototype,"disconnect",null),r})(),Um=(()=>{class s extends Wt{constructor(){super(),this.Ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.gw=rs("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)M.isMaskedElement(i)||M.isMaskedElementChild(i)||od(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Dr(this.gw);this.Bn=new wl(e=>t.push(e)),this.oi=new Set}onStart(){this.Ms&&this.Bn.observe()}onStop(){this.oi.clear(),this.Bn.disconnect()}async register(t){this.oi.has(t)||(this.oi.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return se([D()],s.prototype,"register",null),s})(),qa=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Np(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.mw(t))}static mw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Li=i,s.Pr(i))}static Rn(t){this.yw(t),this.Li&&t(this.Li),this.He||this.Ew()}static yw(t){this.Lt.add(t)}static Sw(t){this.Lt.delete(t)}static Ew(){if(this.Fn||(this.Fn=this.Np()),!this.Fn){this.Li||(this.Li={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Pr(this.Li);return}this.Fn.observe({type:"navigation",buffered:!0}),this.He=!0}static Pr(t){this.Lt.forEach(e=>e(t))}static In(t){this.Sw(t),this.Lt.size===0&&this.$n()}static $n(){var t;this.He&&((t=this.Fn)===null||t===void 0||t.disconnect(),this.He=!1,this.Li=null,this.Fn=this.Np())}constructor(t){this.A=t}observe(){s.Rn(this.A)}disconnect(){s.In(this.A)}}return s.He=!1,s.Lt=new Set,s.Li=null,s})(),jm=(()=>{class s extends Wt{constructor(){super(...arguments),this.xa=null,this.Mp=new qa(t=>{if(this.xa)return;let e=this.vw(t);e&&(this.xa=e,this.produceEvent(e))})}onStart(){if(this.xa){this.produceEvent(this.xa);return}this.Mp.observe()}onStop(){this.Mp.disconnect()}vw(t){let e=qa.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),vt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),rr=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Hm=(()=>{class s{compute(t,e){let i=this.li(e.x)-this.li(t.x),n=this.li(e.y)-this.li(t.y),o=e.time-t.time;return{duration:o,distance:this.Dp(i,n),direction:this._w(i,n),velocity:this.Aw(i,n,o)}}computePinchMetrics(t,e){let i=this.li(e.x)-this.li(t.x),n=this.li(e.y)-this.li(t.y);return{duration:e.time-t.time,distance:this.Dp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}li(t){return t/window.devicePixelRatio}Dp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Aw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}_w(t,e){return Math.abs(t)>Math.abs(e)?t>0?rr.RIGHT:rr.LEFT:e>0?rr.DOWN:rr.UP}}return s})(),Al=typeof performance!="undefined"&&!!performance.now,Wa=Al?()=>performance.now():()=>csDate.now(),Bm=(()=>{var s;return Al?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),nr={now(){return Math.round(Wa()+Bm)},elapsed(){return Wa()}};function Ya(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Fm=1e3,$m=100,Gm=.1,Wn=(()=>{class s{constructor(){this.Qt={},this.Th=()=>{},this.La=new Hm,this.Oe()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Th=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.Tw(t))return;this.bw(t)&&this.Oe();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:nr.now()};if(t.touches.length===1)this.Qt.startPinchTime=e.time,this.Qt.firstTouch=e;else if(t.touches.length===2&&(this.Qt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:nr.now()},this.Qt.firstTouch&&this.Qt.secondTouch)){let i=this.La.computePinchMetrics(this.Qt.firstTouch,this.Qt.secondTouch);this.Or=i.distance}csArray.prototype.push.call(this.Gn,e),this.Va=St(t)}processActionMove(){this.bh=!0}processActionUp(t){if(this.Rw(t)){if(csArray.prototype.push.call(this.Gn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:nr.now()}),this.Cw(t)&&this.Qt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Qt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:nr.now()};this.Qt.firstTouch&&(this.Qt.firstTouch=e,this.Qt.secondTouch=i),this.Iw(t)}this.Or||this.Pw()&&this.Ow(t)}}Oe(){this.Gn=[],this.Va=null,this.bh=!1,this.Or=null,this.zn=!0}Ow(t){let e=this.La.compute(this.Gn[0],this.Gn[1]);this.zn=t.isTrusted;let i=this.bh?this.Nw(e):this.Mw(e);if(this.Dw(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Ya(n.pageX,1),i.pageY=Ya(n.pageY,1)}this.Th(i,t)}Iw(t){if(!(this.Qt.firstTouch&&this.Qt.secondTouch))return;let e=this.La.computePinchMetrics(this.Qt.firstTouch,this.Qt.secondTouch);this.zn=t.isTrusted;let i=this.kw(e);i&&this.Th(i,t)}kw(t){return!this.Or||this.La.getScale(this.Or,t.distance)<Gm?void 0:{type:this.Or>t.distance?vt.PINCH_IN:vt.PINCH_OUT,target:this.Va,distance:t.distance,isTrusted:this.zn}}Nw(t){return{type:t.velocity<$m?vt.DRAG:vt.FLICK,target:this.Va,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.zn}}Mw(t){return{type:t.duration<Fm?vt.TAP:vt.LONG_PRESS,target:this.Va,isTrusted:this.zn}}Dw(t,e){return t===vt.TAP&&e&&e.length===1}bw(t){return t.touches.length===1}Pw(){return this.Gn.length===2}Tw(t){return t.touches.length>0}Rw(t){return t.changedTouches.length>0}Cw(t){return this.bh&&!!this.Or&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),zm="touchstart",qm="touchmove",Wm="touchend",Ym=(()=>{class s{constructor(t){this.A=t}observe(){s.kp&&s.Rh(this.A)}disconnect(){s.kp&&s.Vn(this.A)}static xw(t,e){csArray.prototype.forEach.call(Cs(s.Lt),i=>i(t,e))}static Rh(t){s.Lt.has(t)||(s.Lt.add(t),s.Lt.size===1&&(s.qn.onGesture(s.xw),csArray.prototype.forEach.call(s.hi,e=>Vt(e))))}static Vn(t){s.Lt.delete(t),s.Lt.size===0&&csArray.prototype.forEach.call(s.hi,e=>Ut(e))}static Ch(t){if(s.qn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.qn.processActionDown(t);break;case"touchmove":s.qn.processActionMove();break;case"touchend":s.qn.processActionUp(t);break}}}return s.hi=[{boundElement:nt.document,type:zm,listener:r=>s.Ch(r)},{boundElement:nt.document,type:qm,listener:r=>s.Ch(r)},{boundElement:nt.document,type:Wm,listener:r=>s.Ch(r)}],s.kp=Wn.isGestureDetectionSupported(),s.Lt=new Set,s.qn=new Wn,s})(),Xm=(()=>{class s extends Wt{constructor(){super(),this.Wn=new Ym(this.Ih.bind(this))}onStart(){this.Wn.observe()}onStop(){this.Wn.disconnect()}Ih(t){let e=this.Lw(t);e&&this.produceEvent(e)}Lw(t){return this.Vw(t)?{type:"Gesture",targetId:q(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Vw(t){return t.target!==null&&!(ut(t.target)&&M.isMaskedElementChild(t.target))}}return s})(),Tl=(()=>{class s{constructor(t){this.A=t,this.fi=!1,this.Jt={boundElement:nt,type:"error",listener:e=>this.Uw(e)}}observe(){Vt(this.Jt,this.fi)}disconnect(){Ut(this.Jt,this.fi)}Uw(t){this.A(t)}}return s})(),Km=(()=>{class s extends Wt{constructor(){super(...arguments),this.xp=new Tl(t=>this.jw(t))}jw({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Jt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.xp.observe()}onStop(){this.xp.disconnect()}}return s})(),Jm=(()=>{class s extends Ns{constructor(t){super(),this.Hw=t,this.Ph=1024,this.Oh=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=et.truncate(t.message,this.Ph,et.ELLIPSIS),t.filename=et.truncate(t.filename,this.Oh,et.ELLIPSIS),this.Hw(t)}}return s})(),pn=(()=>{let s;return function(r){r.Info="info",r.Log="log",r.Debug="debug",r.Warning="warn",r.Error="error"}(s||(s={})),s})(),bl=(()=>{class s{static observe(t,e){for(let i of e.levels){let n=s.addConsoleMessageInterceptor(t,i);(n==null?void 0:n.callbacks.size)===1&&n.interceptor.activate()}}static addConsoleMessageInterceptor(t,e){if(s.interceptors.has(e)){let i=s.interceptors.get(e);return i.callbacks.add(t),i}if(s.isTrackedLogLevel(e)&&pn[e]in window.console){let i=Qt({target:window.console,methodName:pn[e],hook:({args:o,callerName:c})=>{s.onConsoleMessage(o,e,c)},options:{withCallerName:!0}});if(i===null)return null;let n={interceptor:i,callbacks:new Set([t])};return s.interceptors.set(e,n),n}return null}static disconnect(t,e){for(let i of e.levels){let n=s.interceptors.get(i);n&&(n.callbacks.delete(t),n.callbacks.size===0&&n.interceptor.deactivate())}}static isTrackedLogLevel(t){return t in pn}static onConsoleMessage(t,e,i){if(!s.Nh)try{let n=s.interceptors.get(e);s.Nh=!0,n==null||n.callbacks.forEach(o=>{o({level:e,logs:t,origin:i})})}finally{s.Nh=!1}}constructor(t,e){this.A=t,this.Pt=e}observe(){s.observe(this.A,this.Pt)}disconnect(){s.disconnect(this.A,this.Pt)}}return s.interceptors=new Map,s.Nh=!1,s})();function Qm(s=300){let r=null,t=0,e="[Object]";return function(i,n){var o;if(!(t>=s))return r||(r=n),t+=i.length,typeof n=="object"&&n!==null&&this===r?(t+=e.length,e):(t+=n===null?4:n===void 0?0:typeof(n==null?void 0:n.toString)=="function"&&((o=n.toString())===null||o===void 0?void 0:o.length)||0,n)}}function pr(s){switch(typeof s){case"string":return s;case"object":try{return csJSON.stringify(s)}catch{return csJSON.stringify(s,Qm())}default:return csString(s)}}function Zm(s,r){let t="";for(;s<r.length;)t=t+" "+pr(r[s]),s++;return t}function Rl(s,...r){if(r.length===0)return pr(s);let t=0;if(typeof s=="string"){let e=/(%?)(%([oOdisf]))/g;s=csString.prototype.replace.call(s,e,i=>{let n;if(t>=r.length)return i;switch(i){case"%i":case"%d":n=parseInt(r[t],10);break;case"%s":n=csString(r[t]);break;case"%f":n=parseFloat(r[t]);break;case"%o":case"%O":n=pr(r[t]);break;default:n=r[t]}return t++,n})}else s=pr(s);return t<r.length&&(s+=Zm(t,r)),s}var ty=(()=>{class s extends Wt{constructor(t){super(),this.Pt=t,this.Lp=new bl(e=>{this.Bw(e)},{levels:this.Pt.consoleMessageLevels})}Bw(t){let e=this.Mh(t.logs);if(e.length===0||!this.Dh(t.origin,this.Pt.validHostnames))return;let i=ns(e),n=i[0],o=csArray.prototype.slice.call(i,1);this.produceEvent({type:"CustomError",message:Rl(n,...o),attributes:{csLogLevel:t.level}})}Mh(t){for(let e=0;e<t.length;e++)if(pe(t[e]))return[];return t}Dh(t,e){if(t===void 0||t==="")return!1;let i=jc(t);return!!po(i,e)}onStart(){this.Lp.observe()}onStop(){this.Lp.disconnect()}}return s})(),ey=(()=>{class s extends Ns{constructor(t){super(),this.Fw=t,this.$w=300}isListening(t){return t.type==="CustomError"}processEvent(t){return t.message=et.truncate(t.message,this.$w,et.ELLIPSIS),this.Fw(t)}}return se([wt("CustomErrorProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Fs=[],Yn=!1,Cl=Ps(iy,"executeTasks");function sy(s){if(csArray.prototype.push.call(Fs,s),!Yn){for(let r=0;r<3;r++)csSetTimeout(Cl);Yn=!0}}function iy(){let s=csDate.now();for(let r=0;r<Fs.length;r++)if(Fs[r](),csDate.now()-s>=35){Fs=csArray.prototype.slice.call(Fs,r+1),csSetTimeout(Cl);return}Fs=[],Yn=!1}var qe=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),Il=(()=>{class s{constructor(){this.vt=new Pi,this.Dt=qe.Stopped,this.A=null,this.Vp=t=>{this.Dt===qe.Stopped||!t||(this.A(t),this.Up())}}get queueLength(){return this.vt.length}start(t){if(this.A)throw new Error("callback already set");this.Dt=qe.Started,this.A=t}push(t){this.vt.push(t),this.Gw()}stop(){this.A=null,this.Dt=qe.Stopped,this.vt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),X(i,h=>h.subscribe(u=>l.push(u))),i=[c]}let o=new ry(n);return X(i,c=>c.subscribe(l=>o.push(l))),o}jp(){return this.Dt===qe.Stopped}ps(){return this.Dt===qe.Processing}Up(){if(!this.jp()){if(this.vt.isEmpty){this.Dt=qe.Completed;return}this.Dt=qe.Processing,sy(()=>{let t=this.vt.pop();t instanceof To?t.complete(this.Vp):this.Vp(t)})}}Gw(){this.jp()||this.ps()||this.Up()}}return s})(),ry=(()=>{class s extends Il{constructor(t){super(),this.Hp=t}get queueLength(){return csArray.prototype.reduce.call(this.Hp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),X(this.Hp,t=>t.stop())}}return s})(),ny=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Y=!1,this.Lt=[]}get pendingEvents(){var t,e;return(e=(t=this.vt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Y)throw new Error("Recording is already started.");let t=this.Lt;this.vt=Il.pipe(this.producers,this.processors),this.vt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),X(this.producers,e=>e.start()),X(this.processors,e=>e.start()),this.Y=!0}stop(){this.vt.stop(),this.Lt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Y=!1,this.Lt=[]}subscribe(t){if(this.Y)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Lt,t),()=>this.Lt=csArray.prototype.filter.call(this.Lt,e=>e!==t)}}return s})(),oy=2,Io=(()=>{class s{constructor(t){this.zw=t,this.Ua=0}addString(t){this.Ua+=t.length*oy}addArrayBuffer(t){this.Ua+=t.byteLength}isThresholdReached(){return this.Ua>this.zw}reset(){this.Ua=0}}return s})(),ay=(()=>{class s{constructor(t){this.ja={},this.Ne=new Io(t)}save({key:t,metadata:e,events:i}){this.Ne.isThresholdReached()||(this.Ne.addString(t),typeof i=="string"?this.Ne.addString(i):this.Ne.addArrayBuffer(i),!this.Ne.isThresholdReached()&&(this.ja[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.qw(),i=>{let n=this.ja[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.Ww(i))}),e.length!==0&&(t(e),this.Ne.reset())}qw(){return Object.keys(this.ja)}Ww(t){delete this.ja[t]}}return s})(),We=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),cy=(()=>{class s{constructor(t,e,i){this.Nr=t,this.Yw=i,this.Vi=We.NOT_STARTED,this.Ha=[],this.kh=0,this.Xw=self.origin,this.Me=typeof window=="object"?"":"worker-",this.Ne=new Io(e),this.Jl()}async Jl(){await this.Bp(),this.Vi===We.READY?this.Kw():this.Yw(this.Ha)}Kw(){csArray.prototype.forEach.call(this.Ha,t=>{this.save(t)}),this.Ha=[]}async save(t){try{if(this.Vi===We.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ha,t);return}if(this.Vi!==We.READY||this.Ne.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ne.addString(e),typeof n=="string"?this.Ne.addString(n):this.Ne.addArrayBuffer(n),this.Ne.isThresholdReached())return;await this.ne.put(`${this.Xw}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ne&&(await this.Bp(),this.Vi!==We.READY)||this.Jw(t)}async Bp(){try{this.Vi=We.OPEN_IN_PROGRESS,this.ne=await self.caches.open(`${this.Me}${this.Nr}`),this.Vi=We.READY}catch{this.Vi=We.OPEN_FAILED}}async Jw(t){try{if(this.kh++,this.kh>1)return;let e=await this.ne.keys();if(e.length===0)return;let i=await this.ne.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((u,d)=>{l[d]=u}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(u=>({metadata:l,events:u})):c.arrayBuffer().then(u=>({metadata:l,events:u}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ne.delete(c))),t(o),this.Ne.reset()}catch{}finally{this.kh--}}}return s})(),ly=(()=>{class s{constructor(t){try{this.Qw(t)}catch{this.xh()}}Qw(t){self.caches?this.Zw(t):this.xh()}save(t){this.Ba.save(t)}recover(t){this.Ba.recover(t)}Zw(t){this.Ba=new cy(t,s.Fp,e=>{this.xh(e)})}xh(t){this.Ba=new ay(s.Fp),t&&csArray.prototype.forEach.call(t,e=>{this.Ba.save(e)})}}return s.Fp=1024*1024*16,s})(),kr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Pl=(()=>{class s{}return s})(),Ol=(()=>{class s{constructor(t){this.$p=[],this.Gp=[],this.Xe={},this.Fa=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xe[e]}):this.Xe={}}onBeaconSuccess(t){csArray.prototype.push.call(this.$p,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Gp,t)}send(t){let e=wi.toQuery({...this.Xe,ct:kr.UNCOMPRESSED}),i=this.tA(e,t);return i?csArray.prototype.forEach.call(this.$p,n=>n()):csArray.prototype.forEach.call(this.Gp,n=>n(this.Xe)),i}tA(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Fa}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Fa}?${t}`,e||"")}}return s})(),hy=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.Yn=zt.ETR_DISABLED,this.$a=zt.ETR_PENDING,this.Lh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.zp()&&e===zt.ETR_SAVED_SESSION?e:this.Yn}onEventTriggerRecording(t,e){switch(e){case ss.ETR_PAGE:this.qp(zt.ETR_SAVED_PAGE);break;case ss.ETR_LEGACY:case ss.ETR_SESSION:this.qp(zt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===N.RECORDING_TEMPORARILY?this.Lh=!0:this.Lh=!1,t===N.ANALYTICS_ONLY&&e===ee.ETR_ON?this.Wp(this.$a):this.Wp(zt.ETR_DISABLED)}Wp(t){this.Yn=t,this.$a=zt.ETR_PENDING,this.Yp(t),this.w.emitRecordingContextChange()}qp(t){this.Lh?Number(t)>Number(this.$a)&&(this.$a=t):this.zp()&&Number(t)>Number(this.Yn)&&(this.Yn=t,this.Yp(t),this.w.emitRecordingContextChange())}Yp(t){let e=this.R.getSession();e!==null&&e.etrStatus===zt.ETR_NOT_SAVED_SESSION&&t===zt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}zp(){return this.Yn!==zt.ETR_DISABLED}}return s})(),uy=(()=>{class s{constructor(t=100){this.eA=t,this.Ga={},this.Xn=null,this.nh="original-resource-name"}onEvent(t){this.sA=t}processEvent(t){this.iA(t.resourceId,t.resource.hash,t.originalResourceName),this.rA(t)}flushEvents(){this.Xn&&csClearTimeout(this.Xn),this.Xp()}onSendStaticResource(t){this.rA=t}Xp(){if(!Object.keys(this.Ga).length)return;let t={type:k.RESOURCE_HASHES,date:O.now(),args:[this.Ga]};this.Xn=null,this.Ga={},this.sA(t)}iA(t,e,i){let n=e;i&&(n+=`?${this.nh}=${i}`),this.Ga[t]=n,!this.Xn&&(this.Xn=window.csSetTimeout(()=>this.Xp(),this.eA))}}return s})();function dy(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:k.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:k.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:k.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:k.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:k.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:k.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=tt(o)?[i,n,o]:[i,n];r({type:k.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:k.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:k.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:k.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:k.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:k.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:k.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=tt(o)?[i,n,o]:[i,n];r({type:k.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:k.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:k.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:k.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:G.error("translateDOMEvent: DOMEvent not supported");break}}function fy(s){let r=py(s.data);return{type:k.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function py(s){let r={type:gy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function gy(s){switch(s){case vt.DRAG:case vt.FLICK:return ai.SWIPE;case vt.LONG_PRESS:return ai.LONG_PRESS;case vt.TAP:return ai.TAP;case vt.PINCH_IN:return ai.PINCH_IN;case vt.PINCH_OUT:return ai.PINCH_OUT}}function my(s){switch(s.inputType){case"text":return{type:k.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:k.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:k.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var gn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function yy(s){return{type:k.PERFORMANCE_TIMINGS,args:[{performanceTiming:gn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:gn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:gn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var Ey=500,mn=0;function Sy(){return{processEvent(s,r){if(s.originalEvent.type===k.PERFORMANCE_RESOURCE_TIMING)return mn>=Ey?null:(mn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){mn=0}}}function vy(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var _y=20;function wy(s){return vy(r=>{let t={visibleInViewPort:r},e={type:k.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:_y,autoFlushDelay:1e3})}function Ay(s){switch(s.videoEventType){case"play":return{type:k.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:k.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:k.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Ty=(()=>{class s{get pendingEvents(){return this.za.pendingEvents}constructor(t,e,i,n,o){this.za=t,this.w=e,this.De=i,this.gs=n,this.ms=o,this.Zt=()=>{},this.Kn=()=>{},this.Kp=wy(c=>this.Zt(c))}start(){var t,e;this.Jp=Sy(),this.za.subscribe(i=>{var n,o,c,l,h,u,d;let g=i,{timestamp:E}=g;switch(g.type){case"Legacy":{let S=g.eventType==="user"?(n=this.Kn)!==null&&n!==void 0?n:()=>{}:this.Zt;this.Jp.processEvent(g,S)}break;case"CustomElementRegistration":{this.Zt({type:k.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[g.tagName]});break}case"DomEvent":{dy(g,this.Zt,this.w);break}case"InputEvent":{let S=my(g);(o=this.Kn)===null||o===void 0||o.call(this,S);break}case"inputEncryptedText":{let{target:S,value:P,encryptedData:C,encryptionMetadata:A}=g;(c=this.Kn)===null||c===void 0||c.call(this,{type:k.INPUT_ENCRYPTED_TEXT,date:E,args:[S,P,C,A]});break}case"encryptedCharacterDataChanged":{let{target:S,rawData:P,encryptedData:C,encryptionMetadata:A}=g;this.Zt({type:k.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[S,P,C,A]});break}case"StaticResource":{let{url:S}=g;this.Zt({type:k.STATIC_RESOURCE_URL,date:E,args:[S]});break}case"ResizeMaskedElement":{let{target:S,width:P,height:C}=g;this.Zt({type:k.MUTATION_ATTRIBUTE,date:E,args:[S,"","style",`width:${P}px !important;height:${C}px !important;`]});break}case"Gesture":{let S=fy(i);(l=this.Kn)===null||l===void 0||l.call(this,S);break}case"TextVisibility":{this.Kp.push(g.text);break}case"StaticResourceManagerEvent":{(h=this.De)===null||h===void 0||h.processEvent(g);break}case"screenResize":{let{width:S,height:P}=g,C={type:k.SCREEN_RESIZE,date:E,args:[S,P]};this.Zt(C);break}case"viewportResize":{let{width:S,height:P}=g,C={type:k.RESIZE,date:E,args:[S,P]};this.Zt(C);break}case"PerformanceTiming":{this.Zt(yy(g));break}case"CustomError":{let S=(u=this.ms)===null||u===void 0?void 0:u.translate(g);S&&this.Zt(S);break}case"JSError":{let S=(d=this.gs)===null||d===void 0?void 0:d.translate(g);S&&this.Zt(S);break}case"VideoEvent":{let S=Ay(g);S&&this.Zt(S);break}case"DOM_INITIAL_STATE":{let S={type:k.DOM_INITIAL_STATE,date:E,args:[g.state]};this.w.emitInitialDomDone(S);break}case"DOM_PATCH":{let S={type:k.DOM_PATCH_STATE,date:E,args:[g.diff]};this.Zt(S);break}case"warning":{G.warn(g.message);break}default:G.error(`WebRecorderEventTranslator: Event not supported (${g.type})`);break}}),this.w.emitInitialDomStart(),(t=this.gs)===null||t===void 0||t.start(),(e=this.ms)===null||e===void 0||e.start(),this.za.start()}stop(){var t,e,i;this.reset(),this.flush(),this.za.stop(),(t=this.De)===null||t===void 0||t.flushEvents(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.ms)===null||i===void 0||i.stop()}flush(){this.Kp.flush()}onEvent(t,e){var i;this.Zt=t,this.Kn=e,(i=this.De)===null||i===void 0||i.onEvent(n=>this.Zt(n))}reset(){this.Jp.reset()}}return s})(),by=(()=>{class s{constructor(){this.Jn=20,this.Ui=0,this.B=!1}translate(t){if(this.Ui>=this.Jn)return null;this.Ui+=1;let{message:e,attributes:i,timestamp:n}=t;return{type:k.CUSTOM_ERROR,date:n,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.B||(this.Ui=0,this.B=!0)}stop(){this.B=!1}}return s})(),Ry=(()=>{class s{constructor(t){this.qa=t,this.Jn=20,this.ji=0,this.B=!1}translate(t){if(this.ji>=this.Jn)return this.qa.stop(),null;this.ji+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:k.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.B||(this.ji=0,this.B=!0)}stop(){this.B=!1}}return s})(),Cy=(()=>{class s extends Wt{constructor(t){super(),this.Be=t}subscribe(t){return super.subscribe(t)}onStart(){X(this.Be,t=>{t.onEvent(e=>{var i;return this.Mr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),X(this.Be,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){X(this.Be,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Mr(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Nl=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.nA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.oA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static oA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.nA="cs.tracking.",s})(),Zt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Ml=(()=>{class s{constructor(){this.B=!1,this.pi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.oe(Zt.Hidden):this.oe(Zt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.oe(Zt.PagehideHidden):this.oe(Zt.PagehideVisible);case"blur":return this.oe(Zt.Blur);case"navigate":return this.aA(t)?this.oe(Zt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.B||(this.B=!0,this.Vh(),this.cA(),this.lA(),ia()&&this.hA())}stop(){this.B&&(this.B=!1,this.Uh(),this.uA(),this.dA(),ia()&&this.fA())}onEvent(t){this.oe=t}hA(){window.navigation.addEventListener("navigate",this.pi)}fA(){window.navigation.removeEventListener("navigate",this.pi)}Vh(){document.addEventListener("visibilitychange",this.pi)}Uh(){document.removeEventListener("visibilitychange",this.pi)}cA(){window.addEventListener("pagehide",this.pi)}uA(){window.removeEventListener("pagehide",this.pi)}lA(){window.addEventListener("blur",this.pi)}dA(){window.removeEventListener("blur",this.pi)}aA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),Nt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),Iy=(()=>{class s{constructor(t,e,i=[]){this.Mr=t,this.jh=e,this.pA=i,this.Wa=null,this.Dt=Nt.Active,this.ot=[]}reset(){this.Wa=null,this.ot=[],this.Dt=Nt.Active}disconnect(){this.Dt=Nt.Stopped}gA(){this.jh(Nt.Paused),this.Dt=Nt.Paused,csSetTimeout(()=>{this.Dt===Nt.Paused&&this.Hh()},s.STOP_TIMEOUT)}mA(){this.jh(Nt.Active),this.Dt=Nt.Active,X(this.ot,this.Mr),this.ot=[]}Hh(){this.ot=[],this.jh(Nt.Stopped),this.Dt=Nt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Wa=t.date,this.Dt!==Nt.Active)){this.mA(),this.Mr(t);return}if(this.yA(t)){this.Mr(t);return}switch(this.Dt){case Nt.Active:if(this.EA(t,e)){this.gA(),csArray.prototype.push.call(this.ot,t);return}this.Mr(t);break;case Nt.Paused:csArray.prototype.push.call(this.ot,t);break;case Nt.Stopped:break}}EA(t,e){return!e.isUserEvent&&this.Wa!==null&&t.date-this.Wa>s.INACTIVITY_TIMEOUT}yA(t){return csArray.prototype.indexOf.call(this.pA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Py=2e3,Oy=(()=>{class s extends Ot{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P=[],C,A,T,x,R){super(),this.E=t,this.G=e,this.SA=i,this.L=n,this.R=o,this.Se=c,this.gt=l,this.ve=h,this.ht=u,this.X=d,this.Vt=g,this.Ot=E,this.Fe=S,this.Be=P,this.Qp=C,this.te=A,this.Dr=T,this.gs=x,this.ms=R,this.gi=0,this.mi=new Nl,this.kr={allowFromQuotaService:!0,allowFromSerialization:!0},this.Zp=Mr(()=>{this.G.eventsCount()>0&&this.tg()},Py),this.Ds=_=>this.processBrowserEvent(_),this.Qn=_=>this.Ut(_),this.Ya=0,this.Zn=0,this.Ke=new Ml,this.Bh=!1,this.eg=50*1024,this.Hi=!1,this.to=!1,this.Di=[],this.Xa=new Iy(_=>this.tt(_),_=>{switch(_){case Nt.Active:this.vA();break;case Nt.Stopped:this._A();break}},[k.RESOURCE_HASHES,k.TEXT_VISIBILITY,k.API_ERROR,k.JAVASCRIPT_ERROR]),this.sg=_=>{this.Vt.removeBatchInProgress(`${_.params.sn}.${_.params.pn}.${_.params.ri}`)}}init(){this.Fh(),this.X.onLoad(this.sg),this.X.onError(this.sg)}vA(){csArray.prototype.forEach.call(this.Qp,t=>t.start())}_A(){csArray.prototype.forEach.call(this.Qp,t=>t.stopForInactivity())}Fh(){var t,e,i;this.Fe.onEvent(this.Ds,this.Qn),(t=this.ht)===null||t===void 0||t.onInputNodeToEncrypt(this.Qn),(e=this.ht)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.ig(n)}),(i=this.ht)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Ds),this.Ke.onEvent(n=>{if(csSetTimeout(()=>this.Bi("page-state",n)),n!==Zt.Visible){if(n===Zt.Blur)return this.rg();if(!this.Bh)return this.Bh=!0,csSetTimeout(()=>{this.Bh=!1}),n===Zt.Hidden?this.rg():this.wA()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}rg(){if(!this.canSendEvents())return;this.Fe.flush(),this.Vt.saveBatchesInProgress(),X(this.Be,c=>{var l,h;return X((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],u=>this.G.addEvent(u))});let t=this.G.getEvents();if(t.length===0)return;this.Bi("pending-events",this.Fe.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Zn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.G.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Ot.removeQueryParams(),this.Ot.setQueryParams(e);let o=this.G.stringifyEvents();if(o.length>this.eg){let c=this.ng();if(c.length>0){let l=Ts(c);this.Ot.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.G.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Ot.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Ot.removeQueryParams(),this.G.clearEvents()}wA(){if(!this.canSendEvents())return;this.Fe.flush();let t=this.X.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ot.removeQueryParams(),X(this.Be,n=>{var o,c;return X((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.G.addEvent(l))});let e=this.G.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();return}this.Bi("pending-events",this.Fe.pendingEvents),this.Zn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ot.setQueryParams(t);let i=this.G.stringifyEvents();if(i.length>this.eg){let n=this.ng();if(n.length>0){let o=Ts(n);this.Ot.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Ot.removeQueryParams(),this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();if(this.G.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.G.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Ot.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.G.getCurrentRequestIndex().increment());this.Ot.removeQueryParams(),this.G.clearEvents()}blockSendingEventsFromQuotaService(){this.kr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.kr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.kr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.kr.allowFromSerialization=!0}canSendEvents(){return this.kr.allowFromQuotaService&&this.kr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Se&&this.gs){(e=this.Se)===null||e===void 0||e.anonymize(t);let i=this.gs.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.Ds(i)}}onIframeCustomError(t){if(this.ms){let e=this.ms.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.Ds(e)}}onIframeDetailedApiError(t){this.og(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Ut(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.L.isCurrentPageviewValid()&&this.Xa.pushEvent(t,{isUserEvent:!1})}Ut(t){this.L.refreshSession(),this.L.isSessionValid()&&this.Xa.pushEvent(t,{isUserEvent:!0})}tt(t){pt.general.nbEvents.increase(),this.G.addEvent(t),this.G.isThresholdReached()?this.pushEvents():this.G.isFull()&&this.Zp(),this.ag(t)}ag(t){this.E.emitDebugEvents&&this.mi.emit("recordingEvent",{...t,typeName:k[t.type]})}onStart(){var t;this.Bi("tag-version","15.158.2"),this.Bi("page-state",document.visibilityState),this.Xa.reset(),this.Ke.start(),this.initStates(),this.Fe.start(),this.gt&&this.ve&&this.gt.subscribe(s.jt,e=>this.og(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.mi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.cg(e)),this.Di=[],this.Hi&&((t=this.te)===null||t===void 0||t.enableOnlineAssets(),this.Hi=!1)}onStop(){var t;this.Ke.stop(),this.gt&&this.gt.unsubscribe(s.jt),this.Fe.stop(),this.Xa.disconnect(),(t=this.te)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Fe.flush(),this.Zp.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.Ya=O.now(),this.G.getCurrentRequestIndex().reset(),this.gi=0,this.X.setQueryParams(this.SA.getRequestParameters())}pushEvents(){X(this.Be,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.G.eventsCount()>0&&(this.isStarted?this.tg():this.G.clearEvents())}tg(){if(!this.canSendEvents())return;let t=this.G.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Zn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.Ya>this.Zn?i[0].date:this.Ya;this.X.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.X.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.X.getQueryParams()},i),this.X.send(i),n.increment(),e.batch.clearEvents(),this.lg&&this.lg()}this.G.clearEmptyBatchSlots()}addInitialDom(t){this.G.addEventByTimestamp(t),this.ag(t)}og(t){if(this.Dr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Dr.truncate(t),this.ht){this.ht.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.ig(t)}ig(t){if(this.gi<s.AA){let e={type:k.API_ERROR,date:O.now(),args:[this.ve.anonymize(t)]};this.Ds(e),this.gi=this.gi+1,$.counters.networkRequests.count("collected")}}TA(t){t===ss.ETR_SESSION?this.X.setQueryParams({[s.bA]:s.hg}):t===ss.ETR_PAGE&&this.X.setQueryParams({[s.RA]:s.hg})}clearEvents(){this.G.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.gs)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Ds(i)}onCustomErrorEvent(t){var e;let i=(e=this.ms)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.Ds(i)}onPageEvent(t){this.ug(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ht)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.cg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}cg(t){this.TA(t.eventType),this.ug(t.eventName),this.pushEvents()}ug(t){let e={type:k.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.CA)}]};this.G.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:k.UNANONYMIZED_CONSENT_GRANTED};this.G.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:k.UNANONYMIZED_CONSENT_WITHDRAWN};this.G.addEvent(t)}triggerRecordingForSessionGranted(){this.Bi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Bi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.to=!0}getStaticResourceManagerStatus(){return this.te?{isStarted:this.E.useStaticResourceManager&&$n.isSupported(),onlineAssets:{activated:this.te.isOnlineAssetsActivated(),enabledOnNextPageview:this.to}}:null}resetOnlineAssetsOnPageview(){this.Hi=!1,this.to=!1}updateOnlineAssetsOnPageview(){this.te&&this.to&&(this.Hi=!0,this.to=!1)}onRecordingRequestSent(t){this.lg=t}getRecordingStartTimestamp(){return this.Ya.toString()}getRecordingLastEventTimestamp(){return this.Zn.toString()}onOptOut(){X(this.Be,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Bi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:O.now(),type:k.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.G.addEvent(i)}ng(){return this.G.extractEvents(k.API_ERROR,k.JAVASCRIPT_ERROR,k.CUSTOM_ERROR,k.TEXT_VISIBILITY,k.POINTER_DOWN)}}return s.jt="RecordingService",s.CA=255,s.AA=20,s.RA="etrp",s.bA="etrs",s.hg="1",H([wt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Ny=(()=>{class s extends Ot{constructor(t,e,i){super(),this.ae=t,this.Ot=e,this.X=i,this.$h=!1,this.eo={},this.IA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.PA(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.eo={}}onStop(){}recover(){this.ae.recover(this.IA)}addBatchInProgress(t,e,i){this.eo[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.eo[t]}blockSendingLastMessage(){this.$h=!1}allowSendingLastMessage(){this.$h=!0}sendLastMessageBeacon(){if(this.$h){let{ri:t,rst:e,let:i,...n}=this.X.getQueryParams();n.hlm="true",this.Ot.setQueryParams(n),this.Ot.send()}}PA(t){return!!t&&csString.prototype.indexOf.call(t,N.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.eo),t=>{let{metadata:e,events:i}=this.eo[t];this.ae.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.ae.save(t)}}return H([D("RecordingRecovery")],s.prototype,"recover",null),s})(),My=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Dy=8*1024*1024,ky=(()=>{class s extends Ot{constructor(t,e,i){super(),this.De=t,this.dg=e,this.St=i,this.Gh={},this.fg=new Set,this.ps=!1}initState(){Ac()&&(this.Ue=this.St.getRequestParameters(),this.OA=`${this.dg}/exist?${wi.toQuery(this.Ue)}`,this.NA=`${this.dg}/putTag?${wi.toQuery(this.Ue)}`,this.pg=mr(async()=>{if(this.ps){this.pg();return}this.ps=!0;try{await this.MA()}finally{this.ps=!1}},300),this.De.onSendStaticResource(t=>{this.gg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.gg(t)}gg(t){this.mg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.mg(e.hash,e.data)})}mg(t,e){this.fg.has(t)||(this.fg.add(t),this.Gh[t]=e,this.pg())}async MA(){let t=this.Gh;this.Gh={};let e=await this.DA(t);if(!e.length)return;let i=this.kA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.NA,{method:"POST",body:n})))}async xA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ue.pid,filter:My.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.OA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async DA(t){let e=[],i=await this.xA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):G.warn("SRM: received unknown hash: "+n)}),e}kA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<Dy)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Dl=2*1e3*1024,xy=200,Xa=(()=>{class s{constructor(t=Dl){this.Ht=[],this.zh=new Io(t)}addEvent(t){this.zh.addString(Ts(t)),csArray.prototype.push.call(this.Ht,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ht.length&&!(this.Ht[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ht,e,0,t)}eventsCount(){return this.Ht.length}clearEvents(){this.zh.reset(),this.Ht=[]}isFull(){return this.eventsCount()>=xy}isThresholdReached(){return this.zh.isThresholdReached()}getEvents(){return this.Ht}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ht,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ht=i,e}stringifyEvents(){return Ts(this.Ht)}_O(t){t.type===k.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return H([wt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function Ly(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Ka=(()=>{class s{constructor(){this.Ka=1}getCurrentIndex(){return this.Ka}increment(){this.Ka+=1}reset(){this.Ka=1}getRequestParameters(){return{ri:`${this.Ka}`}}}return s})(),Vy=3,Uy=8,jy=(()=>{class s{constructor(t,e=Dl,i=Vy){this.LA=t,this.yg=e,this.qh=i,this.Ja={}}addEvent(t){this.Eg().addEvent(t)}addEventByTimestamp(t){this.Eg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Fi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Fi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Fi();return t.length>=this.qh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ts(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Fi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ja[t[e].metadata.pageNumber]}Fi(){return Ly(this.Ja)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Fi(),Hy)}Sg(){let t=this.LA();if(t<=0)return{batch:new Xa(this.yg),metadata:{pageNumber:0,requestIndex:new Ka}};let e=this.Ja[t];if(e)return e;let i={batch:new Xa(this.yg),metadata:{pageNumber:t,requestIndex:new Ka}};return this.Ja[t]=i,this.Fi().length>Math.max(this.qh,Uy)&&G.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Fi().length}/${this.qh})`),i}Eg(){return this.Sg().batch}getCurrentRequestIndex(){return this.Sg().metadata.requestIndex}}return s})();function Hy(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function Ht(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var By=(()=>{class s{constructor(t,e){this.xt=t,this.D=e,this.hi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.j=t}start(){this.$i(),this.triggerInitialEvents()}stop(){this.Gi()}$i(){csArray.prototype.forEach.call(this.hi,t=>Vt(t))}Gi(){csArray.prototype.forEach.call(this.hi,t=>Ut(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:k.HASH_CHANGE,args:[this.D.anonymizePII(this.xt.href)],date:O.now()};this.j(t)}visibilityChangeListener(){let t={type:k.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.j(t)}}return H([D("hashChange")],s.prototype,"hashChangeListener",null),H([D("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Gs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),Y=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function Fy(s){if(!z(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Ja="data-cs-scroll-container";function $y(s){try{if(Mt(csEventtarget.apply(s)))return!0}catch{}return!1}var zs=(()=>{let s;return function(r){function t(i){return!!(Mt(i)&&$y(i)&&Ri(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ja)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ja}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Gy=33,zy=(()=>{class s{constructor(){this.eventType="user",this.Yh=[],this.GA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.zA=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Xh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Fy(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Xh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ge=new Zs((e,i)=>{switch(i){case"initial":case"added":this.$i(e);break;case"removed":this.Gi(e);break}})}init(){this.qA(),this.WA(),this.Kh()}onEvent(t){csArray.prototype.push.call(this.Yh,t)}ce(t,e=!1){csArray.prototype.forEach.call(this.Yh,i=>i(t,e))}start(){this.mh(),this.$i(document),this.ge.observe()}stop(){this.Gi(document),this.ge.disconnect(),this.Yh=[]}WA(){this.YA()&&csArray.prototype.push.call(this.Za,...this.GA)}qA(){this.KA()&&csArray.prototype.push.call(this.Za,...this.zA)}$i(t){vr(t)?csArray.prototype.forEach.call(this.Za,e=>Vt(e)):csArray.prototype.forEach.call(this.Xh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Vt(i)})}Gi(t){vr(t)?csArray.prototype.forEach.call(this.Za,e=>Ut(e)):csArray.prototype.forEach.call(this.Xh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ut(i)})}YA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}KA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}mh(){this.JA()}JA(){let t=zs.getScrollContainer()||document,e=q(t),i=this.vg(t);if(i.top!==0||i.left!==0){let n={type:k.SCROLL,args:[e,i.left,i.top],date:O.now()};this.ce(n,!0)}}vg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(M.isMaskedElement(t)||M.isMaskedElementChild(t))return;let e=q(t),i=this.vg(t),n={type:k.SCROLL,args:[e,i.left,i.top],date:O.now()};this.ce(n)}mouseOverListener(t){if(M.isMaskedElementChild(t.target))return;let e=q(t.target),i={type:k.MOUSE_OVER,args:[e],date:O.now()};this.ce(i)}clickListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.CLICK,args:[i],date:O.now()};this.ce(n)}keyUpListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:k.KEY_UP,args:[i,n],date:O.now()};this.ce(o)}keyDownListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:k.KEY_DOWN,args:[i,n],date:O.now()};this.ce(o)}copyListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.CLIPBOARD_COMMAND,args:[i,Gs.COPY],date:O.now()};this.ce(n)}cutListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.CLIPBOARD_COMMAND,args:[i,Gs.CUT],date:O.now()};this.ce(n)}pasteListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.CLIPBOARD_COMMAND,args:[i,Gs.PASTE],date:O.now()};this.ce(n)}pointerUpListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.POINTER_UP,args:[t.pointerId,t.pointerType,Ht(t.clientX,1),Ht(t.clientY,1),i,t.button],date:O.now()};this.ce(n)}pointerMoveListener(t){let e={type:k.POINTER_MOVE,args:[t.pointerId,t.pointerType,Ht(t.clientX,1),Ht(t.clientY,1)],date:O.now()};this.ce(e)}pointerDownListener(t){let e=St(t);if(M.isMaskedElementChild(e))return;let i=q(e),n={type:k.POINTER_DOWN,args:[t.pointerId,t.pointerType,Ht(t.clientX,1),Ht(t.clientY,1),i,t.button,{pageX:Ht(t.pageX,1),pageY:Ht(t.pageY,1)}],date:O.now()};this.ce(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:k.TOUCH_START,args:[n.identifier,Ht(n.clientX,1),Ht(n.clientY,1)],date:O.now()};this.ce(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:k.TOUCH_MOVE,args:[n.identifier,Ht(n.clientX,1),Ht(n.clientY,1)],date:O.now()};this.ce(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?k.TOUCH_END:k.TOUCH_CANCEL,args:[n.identifier,Ht(n.clientX,1),Ht(n.clientY,1)],date:O.now()};this.ce(o)}}Kh(){this.F={},this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Backspace=Y.BACKSPACE,this.F.Enter=Y.ENTER,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB,this.F.Escape=Y.ESCAPE,this.F.Esc=Y.ESCAPE,this.F.End=Y.END,this.F.Alt=Y.ALT,this.F.Control=Y.CTRL,this.F.Meta=Y.META}}return H([wt("RecordingPageEvents.start")],s.prototype,"start",null),H([D("scroll")],s.prototype,"scrollListener",null),H([D("mouseOver"),Pt(),ip()],s.prototype,"mouseOverListener",null),H([D("click"),Pt()],s.prototype,"clickListener",null),H([D("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([D("Event handler type: keydown")],s.prototype,"keyDownListener",null),H([D("Event handler type: copy")],s.prototype,"copyListener",null),H([D("Event handler type: cut")],s.prototype,"cutListener",null),H([D("Event handler type: paste")],s.prototype,"pasteListener",null),H([D("Event handler type: pointerup"),Pt()],s.prototype,"pointerUpListener",null),H([D("Event handler type: pointermove"),Pt(),Qs({wait:Gy})],s.prototype,"pointerMoveListener",null),H([D("Event handler type: pointerdown"),Pt()],s.prototype,"pointerDownListener",null),H([D("Event handler type: touchstart"),Pt()],s.prototype,"touchStartListener",null),H([D("Event handler type: touchmove"),Pt()],s.prototype,"touchMoveListener",null),H([D("Event handler type: touchend-cancel"),Pt()],s.prototype,"touchEndCancelListener",null),s})(),qy=(()=>{class s{constructor(){}onScannedAsset(t){this.tc=t}sc(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.Jh(Ei(t))}scanElement(t,e){M.getMaskedElementDetails(t).state!==M.MaskedElementState.NotMasked||e&&M.isMaskedAttribute(t,e)||(Ni(t)?this.QA(t):co(t)?this.ZA(t,e):(this.tT(t,e),this.eT(t,e),this.sT(t,e)))}ZA(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.sc(),assetRawPath:ul(t)};this.tc({type:"stylesheet",asset:o})}}QA(t){var e;let i=new Set;if(t.textContent)for(let o of Ei(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||G.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ei(c))i.add(l)}this.Jh(Cs(i))}Qh(t){return!this.iT(t)&&!Jt(t)&&!nf(t)}tT(t,e){if(Ku(t)||Xu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Qh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.rT(t.srcset)}}eT(t,e){if(csNodenodeType.apply(t)!==1){at.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}rT(t){this.Jh(bo(t))}sT(t,e){if((td(t)||ed(t)||sd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Qh(i)){let n={assetId:ae(i),assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}}Jh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Qh(e)),e=>({rawUrl:e,absoluteUrl:ae(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.sc(),assetRawPath:e.rawUrl};this.tc({type:"asset",asset:i})})}iT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Wy=30,Yy=0,kl=(()=>{class s{constructor(t,e=Wy,i=Yy){this.nT=t,this.oT=e,this.aT=i,this.Qe=new Pi,this.Ge=!1,this.Zh=0,this._g=()=>{for(this.Zh=0;this.Qe.length;){if(this.Zh>=this.oT){csSetTimeout(this._g,this.aT);return}let n=O.elapsed(),o=this.Qe.pop();if(!o)break;this.runTask(o);let c=O.elapsed()-n;this.Zh+=c}this.Ge=!1}}schedule(t,e=!1){if(!this.nT||e){t();return}pt.general.pendingTasks.increase(),this.Qe.push(t),this.cT()}cT(){this.Ge||(this.Ge=!0,csSetTimeout(()=>{this._g()}))}runTask(t){pt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Qe.forEach(t=>{this.runTask(t)}),this.Qe.clear()}clearQueue(){pt.general.pendingTasks.clear(),pt.mutations.pendingMutations.clear(),this.Qe.clear()}isEmpty(){return this.Qe.length===0}}return H([D("TaskScheduler"),wt("runTask")],s.prototype,"runTask",null),H([wt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Xy=(()=>{class s{constructor(){this.Y=!1,this.wg=new Ao(t=>t.type==="cssRuleInserted"&&this.lT(t)),this.hT=Dr(t=>{this.Y&&t.length>0&&this.O.schedule(()=>X(t,e=>this.ro.scanElement(e)))}),this.uT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.dT)===null||i===void 0||i.call(this,e)),(n=this.fT)===null||n===void 0||n.call(this,e);let c={date:O.now(),type:k.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.j)===null||o===void 0||o.call(this,c)},this.O=new kl(!0,30,0),this.Bn=new wl(t=>this.pT(t)),this.U=new Ee(t=>this.br(t)),this.ro=new qy,this.ro.onScannedAsset(this.uT)}onEvent(t){this.j=t}onAsset(t){this.fT=t}onStyleSheetFound(t){this.dT=t}start(){this.Y||(this.Y=!0,this.wg.observe(),this.Bn.observe(),this.U.observe())}stop(){this.Y&&(this.wg.disconnect(),this.Bn.disconnect(),this.U.disconnect(),this.Y=!1)}lT(t){!t.rule||!this.Y||this.ro.scanCssString(t.rule)}pT(t){this.Y&&M.getMaskedElementDetails(t).state===M.MaskedElementState.NotMasked&&this.hT.push(t)}br(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.ro.scanElement(e.target,e.attributeName);break;case"characterData":this.gT(e.target);break;case"childList":}})}gT(t){Sr(t)&&csNodeparentNode.apply(t)&&Ni(csNodeparentNode.apply(t))&&this.ro.scanCssString(t.data)}}return s})(),Ky="csPersisted",Qa="v2/recording",Jy=["isRecording"],Qy=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Zy=["replay:resourceManager:getStatus","cssrm:getStatus"],tE=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P,C,A,T,x,R,_,j,U){this.yi=t,this.R=e,this.E=i,this.Ue=n,this.S=o,this.D=c,this.L=l,this._e=h,this.Se=u,this.gt=d,this.ve=g,this.mt=E,this.w=S,this.Ei=P,this.Ag=C,this.Wt=A,this.Bt=T,this.Z=x,this.Dr=R,this.it=_,this.mT=j,this.ht=U}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new Xg),this.no=new lm(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.zi();let o=new ly(Ky);this.yT(o),this.G=new jy(()=>{var R;return((R=this.R.getSession())===null||R===void 0?void 0:R.pageNumber)||0});let c=new Xy;csArray.prototype.push.call(i,c),this.E.useStaticResourceManager&&$n.isSupported()&&(this.te=new $n,this.De=new uy,this.Tg=new ky(this.De,this.E.getStaticResourceManagerUri(),this.Ue),this.Ag.addListener(this.Tg),csArray.prototype.push.call(n,this.te));let l=new Ai(this.Ue,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")})}),h=new Ol(`${this.E.getRecordingUri()}/${Qa}`);csArray.prototype.push.call(n,this.no),csArray.prototype.push.call(n,new bm(this.Z)),csArray.prototype.push.call(n,new Cm),this.qi=new zy,this.qi.init(),csArray.prototype.push.call(i,this.qi),this.Vt=new Ny(o,h,this.X),csArray.prototype.push.call(i,new By(window.location,this.D));let u=!1,d=u?new Im:new Yg,g=u?null:new Nm,E=u?null:new Dm,S=u?null:new Lm(this.ht),P=u?null:new Um,C=csArray.prototype.filter.call([g,this._e,d,new Cy(csArray.prototype.filter.call(i,R=>R)),P,new jm,new Xm,S,E],Boolean);this.E.textVisibilityEnabled&&ur.isSupported()&&(this.oo=new cm,csArray.prototype.push.call(C,this.oo)),this.E.jsErrorsEnabled&&(this.qa=new Km,this.ET=new Jm(R=>this.Se.anonymize(R)),this.gs=new Ry(this.qa),csArray.prototype.push.call(C,this.qa),csArray.prototype.push.call(n,this.ET)),!((e=this.E.customErrors)===null||e===void 0)&&e.enabled&&(this.E.customErrors.consoleMessageLogLevels&&this.E.customErrors.consoleMessageLogLevels.length>0&&(this.ST=new ty({consoleMessageLevels:this.E.customErrors.consoleMessageLogLevels,validHostnames:this.E.hostnames}),this.vT=new ey(R=>(R.message=this.mT.anonymize(R.message),R)),csArray.prototype.push.call(C,this.ST),csArray.prototype.push.call(n,this.vT)),this.ms=new by);let A=new ny(C,n),T=new Ty(A,this.w,this.De,this.gs,this.ms),x=csArray.prototype.filter.call([d,g,E,S,P],Boolean);this.recordingService=new Oy(this.E,this.G,l,this.L,this.R,this.Se,this.gt,this.ve,this.ht,this.X,this.Vt,h,T,i,x,this.te,this.Dr,this.gs,this.ms),this.Ei.addListener(this.recordingService),this.Ag.addListener(this.recordingService),this.recordingService.init(),this.S.register(Jy,()=>this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()),this.S.register(Qy,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(Zy,()=>this.recordingService.getStaticResourceManagerStatus()),this.ao=new hy(this.w,this.R),this.Ei.addListener(this.ao),this.yi.enableRecordingContext(this.recordingService,this.R,this.ao),this.tu()}onAfterNaturalPageView(){var t;this.Wt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Tg)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.zi(),this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.co()}onAfterArtificialPageView(){this.zi(),this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.ic()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.co()}onOptout(){this.co(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.zi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.zi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===N.QUOTA_REACHED||t===N.ANALYTICS_ONLY&&e===ee.ETR_OFF?(this.recordingService.clearEvents(),this.co()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.ao.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.ic()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.qi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.Wt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.co())}tu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;X(l,h=>{gi(h)&&Ee.setShadowRootFilter(u=>{try{return ce.call(u.host,h)}catch{return!1}})})}}ic(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}co(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}yT(t){let e="byteArray";this.X=this.Bt.create(`${this.E.getRecordingUri()}/${Qa}`,e,t)}zi(){var t;let e=this.it.shouldUseAnonymization();this.no.setAnonymization(e),(t=this.oo)===null||t===void 0||t.setAnonymization(e)}}return H([wt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),H([wt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})();var eE=1024,sE=512,yn=1024,En="||",iE=(()=>{let s;return function(r){function t(c,l){return z(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),Qe.CHAMELEON)!==-1?Qe.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let u=i(h);return{type:W.CUSTOM_EVENT,ts:0,customEventName:et.truncate(c,eE,et.ELLIPSIS),sourceLibrary:jf(l)?l:Qe.WEB,...In(u)?{}:{properties:u}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>sE)continue;let u=c[h];if(te(u)||gr(u))l[h]=csString(u);else if(o(u))l[h]=et.truncate(u,yn,et.ELLIPSIS);else if(xu(u)){let d=n(u);d!==""&&(l[h]=d)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let u=c[h];if(!te(u)&&!gr(u)&&!o(u))continue;let d=csString(u);if(l==="")l=et.truncate(d,yn,et.ELLIPSIS);else if(l.length+En.length+d.length<=yn)l+=En+d;else break}return l}function o(c){return z(c)&&!Ir(c)&&!csString.prototype.includes.call(c,En)}}(s||(s={})),s})(),xt=(()=>{class s{static buildFromCustomEvent(t,e){return this.bg(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.bg(t,e,i)}static bg(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var rE=(()=>{class s extends Ot{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P,C,A,T,x,R,_,j,U){super(),this.E=t,this.Si=e,this.Ft=i,this.xr=n,this.eu=o,this.Ze=c,this.ke=l,this.su=h,this.L=u,this.ae=d,this.Q=g,this.iu=E,this.Ke=S,this.X=P,this.$t=C,this.rc=A,this.ks=T,this.xs=x,this.ru=R,this.Wi=_,this.Yi=j,this.Xi=U,this.mi=new Nl,this.nc=!1,this.Ki=[]}init(){var t,e,i,n,o,c,l;this.Si.onEvent(h=>this.Ut(h)),this.Ft.onEvent(h=>this.Ut(h)),this.xr.onEvent(()=>{let h=this.xr.getRequestParameters();this.X.setQueryParams(h),this.ke.setQueryParams(h)}),this.iu.onEvent(h=>this.le(h)),this.nu(),(t=this.rc)===null||t===void 0||t.onEvent(h=>this.Ut(h)),(e=this.Wi)===null||e===void 0||e.onEvent(h=>this.Ut(h)),(i=this.ks)===null||i===void 0||i.onEvent(h=>this.Ut(h)),(n=this.xs)===null||n===void 0||n.onEvent(h=>this.Ut(h)),this._T(),(o=this.ru)===null||o===void 0||o.onEvent(h=>this.le(h)),(c=this.Yi)===null||c===void 0||c.onEvent(h=>this.le(h)),(l=this.Xi)===null||l===void 0||l.onEvent(h=>this.le(h))}_T(){this.ke.onBeaconSuccess(()=>{this.Ze.clearEvents()}),this.ke.onBeaconFailure(t=>{this.wT(t)})}initStates(){let t=this.su.getRequestParameters(),e=this.eu.getRequestParameters(),i=this.xr.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.ke.setQueryParams(t),this.ke.setQueryParams(e),this.ke.setQueryParams(i),this.ou()}clearStates(t){var e,i;this.Si.flushPendingDebouncedListeners(),(e=this.ks)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.au(),this.sendLastMessageBeacon()):this.sendEvents(),this.xr.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.ru)===null||e===void 0||e.start(),this.Ke.start(),this.Si.start(),this.xr.start(),this.Ft.start(),(i=this.rc)===null||i===void 0||i.start(),(n=this.xs)===null||n===void 0||n.start(),t||this.iu.start(),(o=this.ks)===null||o===void 0||o.start(),(c=this.Wi)===null||c===void 0||c.start(),(l=this.Yi)===null||l===void 0||l.start(),(h=this.Xi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Ki,u=>{this.le(u)}),this.Ki=[]}collectInitialEvents(){var t;(t=this.rc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.le(t)}onIframeAnalysisUserEvent(t){this.Ut(t)}onExternalEvent(t){this.tt(t)}le(t){this.isStarted&&this.L.isCurrentPageviewValid()&&this.tt(t)}Ut(t){this.isStarted&&(this.L.refreshSession(),this.L.isSessionValid()&&this.tt(t))}tt(t){this.Ze.addEvent(this.AT(t)),this.Ze.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.mi.emit("analysisEvent",{...t,typeName:W[t.type]})}AT(t){return t.ts=this.Ji(),t}au(){this.ke.setQueryParams({hlm:"true"}),this.nc=!0}sendLastMessageBeacon(){this.ke.removeQueryParams(["i"]),this.ke.setQueryParams(this.su.getRequestParameters()),this.ke.setQueryParams(this.eu.getRequestParameters()),this.ke.send(this.Ze.stringifyEvents()),this.ke.removeQueryParams(["hlm"]),this.nc=!1}sendEvents(){this.Ze.isEmpty()||(this.ke.removeQueryParams(["i"]),this.X.setQueryParams(this.su.getRequestParameters()),this.X.setQueryParams(this.eu.getRequestParameters()),this.X.send(this.Ze.getEvents()),this.Ze.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ke.stop(),this.Si.stop(),this.xr.stop(),this.Ft.stop(),this.iu.stop(),(t=this.rc)===null||t===void 0||t.stop(),(e=this.ks)===null||e===void 0||e.stop(),(i=this.xs)===null||i===void 0||i.stop(),(n=this.Wi)===null||n===void 0||n.stop(),this.Ze.empty(),(o=this.ru)===null||o===void 0||o.stop(),(c=this.Yi)===null||c===void 0||c.stop(),(l=this.Xi)===null||l===void 0||l.stop()}ou(){this.ys=O.now()}Ji(){return O.now()-this.ys}nu(){this.Ke.onEvent(t=>{var e,i;t!==Zt.Visible&&((e=this.ks)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Zt.PagehideVisible?this.au():t===Zt.PagehideHidden?(this.au(),this.sendLastMessageBeacon()):(!this.Ze.isEmpty()||this.nc)&&this.sendLastMessageBeacon())})}wT(t){try{(!this.Ze.isEmpty()||this.nc)&&this.ae.save({requestParameters:t,events:this.Ze.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Uf(t)||!Ri(e))throw new _t($l[0]);let i={status:t,type:W.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==Pe.INVALID_ELEMENT&&this.le(i)}pushCustomEvent(t,e,i){if(!(z(t)&&!Ir(t))||i!==void 0&&!vc(i))throw new _t(to[0]);let n=iE.buildCustomEvent(t,e,i),o=xt.buildFromCustomEvent(n,this.$t);this.isStarted?this.le(o):csArray.prototype.push.call(this.Ki,o)}}return s})(),xi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),nE=(()=>{class s extends xi{constructor(){super(...arguments),this.supportedEventTypes=[W.CHANGE],this.TT=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=St(t);return Pr(i)&&csArray.prototype.indexOf.call(this.TT,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Gt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var xl=(()=>{class s extends xi{constructor(t){super(),this.Et=t,this.supportedEventTypes=[W.MOUSEDOWN,W.MOUSEUP,W.CLICK,W.MOUSEOVER,W.TAP,W.DRAG,W.FLICK,W.SUBMIT,W.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.Et.getEventTargetPath(t)),e}}return s})(),Za=65535,oE=(()=>{let s;return function(r){function t(e){let i=St(e);if(!i||!ut(i)||!pe(i.getBoundingClientRect)||!Mt(e.pageX)||!Mt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-Et.windowOffsetX(),c=e.pageY-n.top-Et.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),u=Math.round(o/l*Za),d=Math.round(c/h*Za);return{xRel:u,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),aE=(()=>{class s extends xi{constructor(t,e){super(),this.Ts=t,this.Et=e,this.supportedEventTypes=[W.MOUSEMOVE,W.CLICK],this.du=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=oE.getRelativePosition(t);if(i){let c=this.Et.getEventTargetPath(t);c!==Pe.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===W.MOUSEMOVE&&(c!==this.du||this.Ts.iframesTracking?(this.du=c,e.tgtHM=c,this.Ts.isChild||(e.tgtHMH=Wc(e.tgtHM))):e.tgtHM=""))}else e.type===W.MOUSEMOVE&&(this.du="");return e}}return s})(),Ll=(()=>{class s extends xi{constructor(t,e){super(),this.Et=t,this.Gt=e,this.supportedEventTypes=[W.CLICK,W.SUBMIT,W.CHANGE,W.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.Gt.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.Et.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),tc=100,Vl=(()=>{class s extends xi{constructor(t,e,i){super(),this.E=t,this.Gt=e,this.D=i,this.supportedEventTypes=[W.TAP,W.CLICK,W.SUBMIT]}UT(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,lo(n.parentElement)||Or(n.parentElement)||this.Gt.getElementSensitiveStatus(n.parentElement)!==Gt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=tc)break;n=i.nextNode()}return!1}jT(t){let e=Vn(t,"button,a");return e||(this.E.collectTargetText===Ln.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Ri(csEventtarget.apply(t))){let i=this.jT(csEventtarget.apply(t));if(i&&z(i.textContent)&&!this.UT(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=et.truncate(csString.prototype.trim.call(i.textContent),tc);n.length>0&&(e.text=n)}}return e}}return s})();function cE(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new aE(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Vl(s,t,new Js)),s.collectHierarchy&&csArray.prototype.push.call(n,new Ll(r,t)),csArray.prototype.push.call(n,new nE,new xl(r)),n}function lE(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Vl(s,t,new Js)),s.collectHierarchy&&csArray.prototype.push.call(n,new Ll(r,t)),csArray.prototype.push.call(n,new xl(r)),n}var hE=(()=>{class s extends Ot{constructor(t,e){super(),this.ae=t,this.X=e,this.Og=()=>{document.visibilityState==="visible"&&this.Ng()}}onStart(){this.Ng(),this.Vh()}onStop(){this.Uh()}getRecoveryStorage(){return this.ae}Ng(){let t=this.ae.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}Vh(){document.addEventListener("visibilitychange",this.Og)}Uh(){document.removeEventListener("visibilitychange",this.Og)}}return s})(),uE=(()=>{class s{constructor(t){this.Nr=t}save(t){localStorage.setItem(this.Nr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Nr)}recover(){let t=localStorage.getItem(this.Nr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{G.error(`Invalid item in localStorage.
         (key:${this.Nr}; value:${t})`)}finally{this.clear()}return e}}return s})(),dE=50,fE=(()=>{class s{constructor(t=[]){this.Ht=t}stringifyEvents(){return csJSON.stringify(this.Ht)}addEvent(t){csArray.prototype.push.call(this.Ht,t)}eventsCount(){return this.Ht.length}clearEvents(){this.Ht=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=dE}isEmpty(){return this.Ht.length===0}getEvents(){return this.Ht}}return s})(),pE=(()=>{class s{constructor(t,e,i,n=["submit"]){this.$t=t,this.Et=e,this.zt=i,this.HT=n,this.Mg="select, select *, input, textarea",this.BT="select, select *, input, textarea",this.Dg="a, a *, button, button *, select, select *, input, textarea",this.ho="input, select, textarea",this.FT="form",this.cc=150,this.$T=400,this.kg=!1,this.uo=mr((o,c)=>this.scrollListener(o,c),this.cc),this.xg=mr(o=>this.resizeListener(o),this.cc),this.GT=Mr(o=>this.mouseMoveListener(o),this.$T),this.zT=[{boundElement:window,type:"resize",listener:()=>this.xg()},{boundElement:document,type:"scroll",listener:o=>this.uo(o)},{boundElement:window,type:"mousemove",listener:o=>{this.GT(sp(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Lg=[{type:"change",listener:this.zt.on(this.BT,o=>this.changeListener(o))},{type:"submit",listener:this.zt.on(this.FT,o=>this.submitListener(o))}],this.qT=[{boundElement:document,type:"mouseover",listener:this.zt.on(this.Dg,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.zt.on(this.Dg,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.zt.on(this.Mg,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.zt.on(this.Mg,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.zt.on(this.ho,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.zt.on(this.ho,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.zt.on(this.ho,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.zt.on(this.ho,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.zt.on(this.ho,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Lg,o=>({...o,boundElement:document}))],this.F={},this.Wl=(o,c)=>{switch(c){case"initial":case"added":this.$i(o);break;case"removed":this.Gi(o);break}},this.ge=new Zs(this.Wl),this.Kh()}$i(t){if(vr(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>Vt(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{Vt({...i,boundElement:t})})}}Gi(t){if(vr(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>Ut(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{Ut({...i,boundElement:t})})}}onEvent(t){this.j=t}start(){this.ge.observe(),this.$i(document),this.resizeListener()}stop(){this.Gi(document),this.ge.disconnect()}flushPendingDebouncedListeners(){this.uo.flushPending(),this.xg.flushPending()}jg(t){return csArray.prototype.some.call(this.HT,e=>e===t)}Ug(){return this.zt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Lg,t=>!this.jg(t.type)):(G.warn("Element.matches is not implemented yet"),[])}Vg(){let t=[];return csArray.prototype.push.call(t,...this.zT),this.zt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.qT):G.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.jg(e.type))}resizeListener(t){let e=zs.getScrollContainer(),i=Ri(e);i&&(this.kg=!0);let n={type:W.RESIZE,ts:0,x:i?e.clientWidth:Et.windowWidth(),y:i?e.clientHeight:Et.windowHeight()};t!==void 0&&(n.d=t),this.j(n)}scrollListener(t,e){let i=zs.isEventOnScrollContainer(e);!this.kg&&i&&this.resizeListener();let n={type:W.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Et.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Et.windowOffsetY(),d:t},o=xt.buildFromAnalysisEvent(e,n,this.$t);this.j(o)}mouseMoveListener(t){let e={type:W.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.j(i)}mouseDownListener(t){let e={type:W.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}mouseUpListener(t){let e={type:W.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}clickListener(t){let e={type:W.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}mouseOverListener(t){let e={type:W.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}mouseOutListener(t){let e={type:W.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Et.getEventTargetPath(t)},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}focusInListener(t){let e={type:W.FOCUSIN,ts:0,tgt:this.Et.getEventTargetPath(t)},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}focusOutListener(t){let e={type:W.FOCUSOUT,ts:0,tgt:this.Et.getEventTargetPath(t)},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}changeListener(t){let e={type:W.CHANGE,ts:0,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}submitListener(t){let e={type:W.SUBMIT,ts:0,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);this.we(i)}copyListener(t){let e={type:W.COMMAND,ts:0,tgt:this.Et.getEventTargetPath(t),key:Gs.COPY};this.we(e)}cutListener(t){let e={type:W.COMMAND,ts:0,tgt:this.Et.getEventTargetPath(t),key:Gs.CUT};this.we(e)}pasteListener(t){let e={type:W.COMMAND,ts:0,tgt:this.Et.getEventTargetPath(t),key:Gs.PASTE};this.we(e)}keyUpListener(t){let e={type:W.KEYUP,ts:0,tgt:this.Et.getEventTargetPath(t),key:this.Hg(t)};this.we(e)}keyDownListener(t){let e={type:W.KEYDOWN,ts:0,tgt:this.Et.getEventTargetPath(t),key:this.Hg(t)};this.we(e)}Hg(t){let e=this.F[t.key];return e===void 0?Y.ALPHANUMERICAL:e}we(t){qc(t)&&t.tgt!==Pe.INVALID_ELEMENT&&this.j(t)}Kh(){this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Enter=Y.ENTER,this.F.Backspace=Y.BACKSPACE,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB}}return H([D("Event handler type: resize")],s.prototype,"resizeListener",null),H([D("Event handler type: scroll")],s.prototype,"scrollListener",null),H([D("Event handler type: mouseMove"),Pt()],s.prototype,"mouseMoveListener",null),H([D("Event handler type: mouseDown"),Pt()],s.prototype,"mouseDownListener",null),H([D("Event handler type: mouseUp"),Pt()],s.prototype,"mouseUpListener",null),H([D("Event handler type: click"),Pt()],s.prototype,"clickListener",null),H([D("Event handler type: mouseOver"),Pt()],s.prototype,"mouseOverListener",null),H([D("Event handler type: mouseOut"),Pt()],s.prototype,"mouseOutListener",null),H([D("Event handler type: focusIn")],s.prototype,"focusInListener",null),H([D("Event handler type: focusOut")],s.prototype,"focusOutListener",null),H([D("Event handler type: change")],s.prototype,"changeListener",null),H([D("Event handler type: submit"),Pt()],s.prototype,"submitListener",null),H([D("Event handler type: copy")],s.prototype,"copyListener",null),H([D("Event handler type: cut")],s.prototype,"cutListener",null),H([D("Event handler type: paste")],s.prototype,"pasteListener",null),H([D("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([D("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),gE=(()=>{class s{constructor(t,e,i){this.$t=t,this.Ft=e,this.Pt=i}processGesture(t,e){switch(t.type){case vt.TAP:this.WT(e);break;case vt.FLICK:this.YT(t,e);break;case vt.DRAG:this.XT(t,e);break;default:break}}WT(t){let e={type:W.TAP,ts:0,x:0,y:0,tgt:""},i=xt.buildFromAnalysisEvent(t,e,this.$t);i.tgt!==Pe.INVALID_ELEMENT&&this.j(i)}XT(t,e){var i,n;let o={type:W.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=xt.buildFromAnalysisEvent(e,o,this.$t);c.tgt!==Pe.INVALID_ELEMENT&&this.j(c)}YT(t,e){var i,n;let o={type:W.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=xt.buildFromAnalysisEvent(e,o,this.$t);c.tgt!==Pe.INVALID_ELEMENT&&this.j(c)}onEvent(t){this.j=t}start(){this.Ft.subscribe(s.Bg,(t,e)=>this.processGesture(t,e))}stop(){this.Ft.unsubscribe(s.Bg)}}return s.Bg="AnalysisGestureTracker",H([Pt()],s.prototype,"processGesture",null),s})();var mE=(()=>{class s{constructor(){this.Jg=100,this.go=0,this.mo=Et.documentHeight(),this.Qg={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.go=this.Su(zs.getScrollContainer()).maxScrollRate}onEvent(t){this.j=t}start(){Vt(this.Qg)}stop(){Ut(this.Qg)}reset(){let t=zs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Su(t);this.mo=i,this.go=e,this.j()}Su(t){let e=0,i=0;if(t===null)i=Et.documentHeight(),e=this.ab(i);else{let n=this.cb(t);i=this.Zg(t,n),e=this.lb(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;zs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Su(e);(i>this.go||n>this.mo)&&(this.go=i,n>this.mo&&(this.mo=n),this.j())}ab(t){let e=Math.round(this.hb()/t*100);return Math.min(e,this.Jg)}hb(){let t=Et.windowHeight();return Et.windowOffsetY()+t}lb(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Zg(t,e),o=Math.round(i/n*100);return Math.min(o,this.Jg)}cb(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Zg(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.go}`,mdh:`${this.mo}`}}}return H([D("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),yE=(()=>{class s{constructor(t){this.yo=t,this.Eo=e=>this.processMetric(e),this.B=!1}onEvent(t){this.j=t}start(){this.B||(this.B=!0,this.yo.onFCP(this.Eo),this.yo.onCLS(this.Eo),this.yo.onLCP(this.Eo),this.yo.onTTFB(this.Eo),this.yo.onINP(this.Eo))}stop(){this.B=!1}processMetric(t){if(!this.B)return;let e={type:W.PERFORMANCE,name:t.name,val:t.value,ts:0};this.j(e)}}return H([D("Performance metric handler")],s.prototype,"processMetric",null),s})(),EE=(()=>{class s{constructor(t){this.pc=t.performance}getRequestParameters(){if(this.db())return{};let t=this.fb();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}fb(){let t=this.pc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}db(){return!(this.pc&&this.pc.timing&&this.pc.timing.loadEventEnd>0)}}return s})();var Ul=-1,ti=s=>{addEventListener("pageshow",r=>{r.persisted&&(Ul=r.timeStamp,s(r))},!0)},me=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},Po=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},Oo=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Li=()=>{var r;let s=Oo();return(r=s==null?void 0:s.activationStart)!=null?r:0},ye=(s,r=-1)=>{let t=Oo(),e="navigate";return Ul>=0?e="back-forward-cache":t&&(document.prerendering||Li()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Sn=new WeakMap;function No(s,r){return Sn.get(s)||Sn.set(s,new r),Sn.get(s)}var Xn=class{constructor(){ve(this,"t");ve(this,"i",0);ve(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Vi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},Mo=s=>{let r=!1;return()=>{r||(s(),r=!0)}},$s=-1,ec=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Cr=s=>{document.visibilityState==="hidden"&&$s>-1&&($s=s.type==="visibilitychange"?s.timeStamp:0,SE())},sc=()=>{addEventListener("visibilitychange",Cr,!0),addEventListener("prerenderingchange",Cr,!0)},SE=()=>{removeEventListener("visibilitychange",Cr,!0),removeEventListener("prerenderingchange",Cr,!0)},jl=()=>{var s;if($s<0){let r=Li(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;$s=t!=null?t:ec(),sc(),ti(()=>{setTimeout(()=>{$s=ec(),sc()})})}return{get firstHiddenTime(){return $s}}},xr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},ic=[1800,3e3],Hl=(s,r={})=>{xr(()=>{let t=jl(),e,i=ye("FCP"),n=Vi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Li(),0),i.entries.push(c),e(!0)))});n&&(e=me(s,i,ic,r.reportAllChanges),ti(o=>{i=ye("FCP"),e=me(s,i,ic,r.reportAllChanges),Po(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},rc=[.1,.25],vE=(s,r={})=>{Hl(Mo(()=>{let t,e=ye("CLS",0),i=No(r,Xn),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Vi("layout-shift",n);o&&(t=me(s,e,rc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ti(()=>{i.i=0,e=ye("CLS",0),t=me(s,e,rc,r.reportAllChanges),Po(()=>t())}),setTimeout(t))}))},Bl=0,vn=1/0,or=0,_E=s=>{for(let r of s)r.interactionId&&(vn=Math.min(vn,r.interactionId),or=Math.max(or,r.interactionId),Bl=or?(or-vn)/7+1:0)},Kn,nc=()=>{var s;return Kn?Bl:(s=performance.interactionCount)!=null?s:0},wE=()=>{"interactionCount"in performance||Kn||(Kn=Vi("event",_E,{type:"event",buffered:!0,durationThreshold:0}))},oc=0,Jn=class{constructor(){ve(this,"u",[]);ve(this,"l",new Map);ve(this,"m");ve(this,"p")}v(){oc=nc(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((nc()-oc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Fl=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=Mo(s)),document.addEventListener("visibilitychange",s,{once:!0}))},ac=[200,500],AE=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&xr(()=>{var c;wE();let t,e=ye("INP"),i=No(r,Jn),n=l=>{Fl(()=>{for(let u of l)i.h(u);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Vi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=me(s,e,ac,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ti(()=>{i.v(),e=ye("INP"),t=me(s,e,ac,r.reportAllChanges)}))})},Qn=class{constructor(){ve(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},cc=[2500,4e3],TE=(s,r={})=>{xr(()=>{let t=jl(),e,i=ye("LCP"),n=No(r,Qn),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Li(),0),i.entries=[h],e())},c=Vi("largest-contentful-paint",o);if(c){e=me(s,i,cc,r.reportAllChanges);let l=Mo(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Fl(l),{capture:!0,once:!0});ti(h=>{i=ye("LCP"),e=me(s,i,cc,r.reportAllChanges),Po(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},lc=[800,1800],Zn=s=>{document.prerendering?xr(()=>Zn(s)):document.readyState!=="complete"?addEventListener("load",()=>Zn(s),!0):setTimeout(s)},bE=(s,r={})=>{let t=ye("TTFB"),e=me(s,t,lc,r.reportAllChanges);Zn(()=>{let i=Oo();i&&(t.value=Math.max(i.responseStart-Li(),0),t.entries=[i],e(!0),ti(()=>{t=ye("TTFB",0),e=me(s,t,lc,r.reportAllChanges),e(!0)}))})},RE=(()=>{class s{onFCP(t){try{Hl(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{vE(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{TE(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{bE(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{AE(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("INP")}}}return s})();var CE="csAnalysisEventsPersisted",hc="v2/events",$l=["submit"],to=["trackEvent"];var IE=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P,C){this.E=t,this.St=e,this.N=i,this.Q=n,this.zt=o,this.S=c,this.L=l,this.Ft=h,this.ft=u,this.Bt=d,this.J=g,this.Gt=E,this.wt=S,this.es=P,this.ss=C}init(){let t=new fE,e=this.Bt.create(`${this.E.getTrackerUri()}/${hc}`,"base64");this.jr=this.Rb(e),this.ue=this.Cb(t,this.jr.getRecoveryStorage(),e),this.ue.init(),this.J.addListener(this.ue),this.ft.addListener(this.ue),this.S.register($l,(i,n)=>{this.ue.pushSubmitCommandEvent(i,n)}),this.S.register(to,i=>{if(!vc(i))throw new _t(to[0]);this.ue.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.jr.start(),this.ue.start(t)}onAfterNaturalPageView(){this.ue.initStates()}onArtificialPageViewEnd(t){this.ue.clearStates(!0),t&&(this.ue.stop(),this.jr.stop())}onAfterArtificialPageView(t){this.ue.initStates(),t&&(this.ue.start(),this.jr.start()),this.ue.collectInitialEvents()}onBeforeSessionRenewal(){this.ue.clearStates(),this.ue.stop(),this.jr.stop()}onOptout(){this.ue.stop(),this.jr.stop()}Cb(t,e,i){var n,o;let c=new EE(window),l=new mE,h=cE(this.E,this.Q,this.Gt,this.es,this.ss),u=[];this.E.collectSubmit||csArray.prototype.push.call(u,"submit");let d=new pE(h,this.Q,this.zt,u),g=lE(this.E,this.Q,this.Gt,this.es,this.ss),E=new gE(g,this.Ft),S=new yE(new RE),P=new Ml,C,A,T,x=new Ol(`${this.E.getTrackerUri()}/${hc}`),R=new Ai(this.St,this.N),_,j,U,K;return new rE(this.E,d,E,l,c,t,x,R,this.L,e,this.Q,S,P,i,h,C,A,T,_,j,U,K)}Rb(t){return new hE(new uE(CE),t)}}return s})();var ts=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),ar=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),PE=(()=>{class s{constructor(t,e,i,n){this.N=t,this.R=e,this.E=i,this.hs=n,this.mm=!1}isNaturalPageViewSent(){return this.mm}setNaturalPageViewSent(t){this.mm=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.hs.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Mb(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Mb(t){return ts.isReplayConsentNeeded(this.E)?t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?ar.NOT_EXPRESSED:t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?ar.WITHDRAWN:ar.GRANTED:ar.NOT_NEEDED}}return s})(),OE=(()=>{class s{constructor(t){this.kt=t,this.de=[]}handleCommand(t){if(pe(t)&&(this.vo(t),this.kt.isNaturalPageViewSent())){let e=this.kt.getTrackingContext();e!==null&&this.qt(t,e)}}vo(t){csArray.prototype.push.call(this.de,t)}executeRegisteredCallbacks(){let t=this.kt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.de,e=>this.qt(e,t))}qt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),NE=(()=>{class s{constructor(t){this.kt=t,this.Zi=[]}handleCommand(t){if(this.kt.isNaturalPageViewSent())return this.Db(t);this._o(t)}Db(t){let e=this.kt.getSessionKey();return this.ym(t)&&e!==null&&this.qt(t.callback,e),e}_o(t){this.ym(t)&&csArray.prototype.push.call(this.Zi,t.callback)}flushPendingCallbacks(){let t=this.kt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Zi,e=>{this.qt(e,t)}),this.Zi=[]}ym(t){return t&&typeof t.callback=="function"}qt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function ME(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,u,d]=l;n?h=`${c}/sites/${n}/player?uu=${u}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${u}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${O.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var DE=(()=>{class s{constructor(t){this.kt=t}handleCommand(t,e){_s(t)&&pe(e)&&this.qt(t,e)}qt(t,e){csSetTimeout(()=>{let i=this.kt.getTrackingContext();if(i){let n=ME(i,t);e(n)}})}}return s})(),kE=(()=>{class s{constructor(){this.de=new Set}handleCommand(t,e){return!pe(t)||this.de.has(t)?null:(this.de.add(t),e&&(this.Me=e,this.Em(t,e)),()=>this.de.delete(t))}executeCallbacks(t){this.kb(t)&&(this.Me=t,this.de.forEach(e=>this.Em(e,t)))}Em(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}kb(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Me&&(this.Me.isRecording!==e||this.Me.recordingStartTimestamp!==i||this.Me.etrState!==n||this.Me.etrStatus!==o||this.Me.collectState!==c)}}return s})(),xE=["afterPageView"],LE=["getSessionKey"],VE=["onRecordingContextChange","onRecordingStateChange"],UE=["replay:link:generate"],jE=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.N=t,this.R=e,this.S=i,this.ft=n,this.et=o,this.E=c,this.hs=l,this.yi=h,this.Sm=null}init(){this.kt=new PE(this.N,this.R,this.E,this.hs),this.Au=new OE(this.kt),this.vm=new NE(this.kt),this.wo=new kE,this.xb=new DE(this.kt),this.S.register(LE,t=>this.vm.handleCommand(t)),this.S.register(xE,t=>this.Au.handleCommand(t)),this.S.register(VE,t=>this.wo.handleCommand(t,this.yi.getRecordingContext())),this.S.register(UE,(t,e)=>{this.Hr&&this.xb.handleCommand({...t,recordingStartTimestamp:this.yi.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.kt.setNaturalPageViewSent(!0),this.vm.flushPendingCallbacks(),this.Au.executeRegisteredCallbacks(),(t=this.Sm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Au.executeRegisteredCallbacks(),(t=this.Sm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.wo.executeCallbacks(this.yi.getRecordingContext())}setRecordingService(t){this.Hr=t}}return H([Qs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})();var HE=(()=>{class s extends Ot{constructor(t,e,i,n,o){super(),this.gt=t,this.Iu=e,this.St=i,this.ve=n,this.L=o,this.Ec=[],this.gi=0}init(){this.gt.init()}initStates(){this.Pu(),this.Ec=[],this.gi=0,this.ou()}ou(){this.ys=O.now()}Ji(){return O.now()-this.ys}onStart(){this.gt.subscribe(s.jt,t=>this.tt(t))}onStop(){this.gt.unsubscribe(s.jt)}onIframeApiError(t){this.tt(t)}tt(t){this.isStarted&&this.gi<s.Jn&&this.L.isSessionValid()&&(t.relativeTime=this.Ji(),csArray.prototype.push.call(this.Ec,this.ve.anonymize(t)),this.bo(),$.counters.networkRequests.count("collected"))}Pu(){this.Iu.removeQueryParams(),this.Iu.setQueryParams(this.St.getRequestParameters())}bo(){this.Iu.send({errors:this.Ec}),this.Ec=[],this.gi+=1}}return s.jt="ApiErrorsService",s.Jn=20,s})(),BE="api-errors",uc=["api-errors:maskUrl"],FE=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.gt=t,this.ve=e,this.E=i,this.St=n,this.ft=o,this.S=c,this.Bt=l,this.L=h}init(){let t=this.Bt.create(`${this.E.getTrackerUri()}/${BE}`);this.js=new HE(this.gt,t,this.St,this.ve,this.L),this.js.init(),this.ft.addListener(this.js),this.ut()}ut(){this.S.register(uc,t=>{if(!z(t))throw new _t(uc[0]);this.ve.addUrlMaskingPattern(t)})}onStartTracking(){this.js.start()}onAfterNaturalPageView(){this.js.initStates()}onArtificialPageViewEnd(t){t&&this.js.stop()}onAfterArtificialPageView(t){this.js.initStates(),t&&this.js.start()}onBeforeSessionRenewal(){this.js.stop()}onOptout(){this.js.stop()}}return s})();var $E=["networkRequest:maskUrls"],GE=["networkRequest:maskUrls:reset"],zE=(()=>{class s{constructor(t,e){this.Im=t,this.mt=e}init(){this.Im.register($E,t=>{if(z(t)){this.mt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)z(e)&&this.mt.addPartialUrlMaskingPattern(e)}),this.Im.register(GE,()=>this.mt.resetPartialUrlMaskingPatterns())}}return s})();var qE=["optout"];var WE=(()=>{class s{constructor(t,e){this.S=t,this.ls=e}init(){this.S.register(qE,()=>{this.ls.activate()})}}return s})(),di="_cs_optout",YE=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.Nt=i}get(){return this.E.cookielessTrackingEnabled?this.Nt.getItem(di):this.M.get(di)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(di,t):this.M.set(di,t,no)}}return s})(),dc="1",XE=(()=>{class s{constructor(t,e,i){this.w=t,this.xt=e,this.pt=i}init(){!this.isActive()&&this.Xb()&&this.activate()}isActive(){return this.pt.get()===dc}activate(){this.w.emitOptout(),this.pt.set(dc)}Xb(){return csString.prototype.indexOf.call(this.xt.href,di)>0}}return s})(),KE=(()=>{class s{constructor(){this.Sc=null,this.Kb=1}startInterval(){this.Sc=window.csSetInterval(()=>{let t=this.Kb++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){$.counters.tasks.flush(t),$.counters.longTasks.flush(t)}clear(){$.counters.tasks.reset(),$.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.Sc&&(csClearInterval(this.Sc),this.Sc=null)}}return s})(),JE=(()=>{class s{constructor(){this.Jb=["clicktale.net","contentsquare.net","hotjar.com","heap-api.com"],this.Ro=!1,this.Co=null,this.Bs=new KE}onStartTracking(){this.Qb()}Qb(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{if(e.initiatorType!=="script")return!1;let i=csString.prototype.split.call(e.name,"/")[2]||"";return csArray.prototype.some.call(this.Jb,n=>csString.prototype.endsWith.call(i,n))});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize,c=e.duration-i,l=csString.prototype.split.call(e.name,"/")[2];i>=0&&$.counters.downloadTime.add(l,i),n>=0&&$.counters.transferSize.add(l,n),c>=0&&$.counters.evalTime.add(l,c)}),t.length>0&&($.counters.downloadTime.flush(),$.counters.transferSize.flush(),$.counters.evalTime.flush())}Pm(){$.counters.blockingTime.flush(),$.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.Pm(),this.Co&&csClearTimeout(this.Co),this.Bs.stopInterval(),this.Ro=!0}onBeforeNaturalPageView(){this.Pm()}onAfterNaturalPageView(t){t===gs.Natural?(this.Bs.flush("boot"),this.Bs.startInterval()):(this.Co&&csClearTimeout(this.Co),this.Bs.stopInterval(),this.Ro=!0)}onInitialDomStart(){this.Ro||this.Bs.stopInterval()}onInitialDomDone(){this.Ro||(this.Ro=!0,this.Bs.flush("initial-dom"),this.Co=window.csSetTimeout(()=>{this.Bs.flush("post-initial-dom"),this.Bs.startInterval()},5e3))}onOptout(){this.Bs.clear()}}return s})(),QE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),ZE=(()=>{class s{constructor(){}static init(t){(!this.Du||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Du=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Du.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Du)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(QE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;tS(s.getString("debugLog"),t)&&(n.value=function(...u){return console.log(l,...u),h.bind(this)(...u)})}}}return s})();function tS(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var eS=(()=>{class s{constructor(t){this.Zb=t,this.Om=[],this.ku={},this.t0=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.Fr().catch(o=>{at.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.Ae:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.Nm(c,l):n?Promise.resolve(n[c]):i.Nm(c,[])}})}Nm(t,e){let i=++this.t0;return new Promise((n,o)=>{this.ku[i]=(c,l)=>{delete this.ku[i],c?o(c):n(l)},this.Ae.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.Om,t.toString())}Fr(){try{let t=fc.toString()+`
`+csArray.prototype.join.call(this.Om,`
`)+`

const klass = (${this.Zb.toString()});

${fc.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.Ae=new Worker(i),this.Ae.addEventListener("message",n=>{var o,c,l,h,u;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){at.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(u=(h=this.ku)[n.data.id])===null||u===void 0||u.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.Ae.onerror=i=>e(new Error(i.message)),this.Ae.onmessage=()=>{this.Ae.onmessage=this.Ae.onerror=null,t()}})}}return s})();function fc(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function eo(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,u=29,d=256,g=d+1+u,E=30,S=19,P=2*g+1,C=15,A=16,T=7,x=256,R=16,_=17,j=18,U=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),K=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yt=512,v=new Array((g+2)*2);i(v);let L=new Array(E*2);i(L);let V=new Array(Yt);i(V);let F=new Array(h-l+1);i(F);let dt=new Array(u);i(dt);let At=new Array(E);i(At);function Se(a,p,m,y,f){this.static_tree=a,this.extra_bits=p,this.extra_base=m,this.elems=y,this.max_length=f,this.has_stree=a&&a.length}let os,Ms,Ds;function Ne(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Me=a=>a<256?V[a]:V[256+(a>>>7)],ie=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Tt=(a,p,m)=>{a.bi_valid>A-m?(a.bi_buf|=p<<a.bi_valid&65535,ie(a,a.bi_buf),a.bi_buf=p>>A-a.bi_valid,a.bi_valid+=m-A):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=m)},Xt=(a,p,m)=>{Tt(a,m[p*2],m[p*2+1])},Ui=(a,p)=>{let m=0;do m|=a&1,a>>>=1,m<<=1;while(--p>0);return m>>>1},Lr=a=>{a.bi_valid===16?(ie(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Vr=(a,p)=>{let m=p.dyn_tree,y=p.max_code,f=p.stat_desc.static_tree,b=p.stat_desc.has_stree,w=p.stat_desc.extra_bits,I=p.stat_desc.extra_base,Q=p.stat_desc.max_length,B,Ft,Be,ct,us,Ls,tr=0;for(ct=0;ct<=C;ct++)a.bl_count[ct]=0;for(m[a.heap[a.heap_max]*2+1]=0,B=a.heap_max+1;B<P;B++)Ft=a.heap[B],ct=m[m[Ft*2+1]*2+1]+1,ct>Q&&(ct=Q,tr++),m[Ft*2+1]=ct,!(Ft>y)&&(a.bl_count[ct]++,us=0,Ft>=I&&(us=w[Ft-I]),Ls=m[Ft*2],a.opt_len+=Ls*(ct+us),b&&(a.static_len+=Ls*(f[Ft*2+1]+us)));if(tr!==0){do{for(ct=Q-1;a.bl_count[ct]===0;)ct--;a.bl_count[ct]--,a.bl_count[ct+1]+=2,a.bl_count[Q]--,tr-=2}while(tr>0);for(ct=Q;ct!==0;ct--)for(Ft=a.bl_count[ct];Ft!==0;)Be=a.heap[--B],!(Be>y)&&(m[Be*2+1]!==ct&&(a.opt_len+=(ct-m[Be*2+1])*m[Be*2],m[Be*2+1]=ct),Ft--)}},ji=(a,p,m)=>{let y=new Array(C+1),f=0,b,w;for(b=1;b<=C;b++)y[b]=f=f+m[b-1]<<1;for(w=0;w<=p;w++){let I=a[w*2+1];I!==0&&(a[w*2]=Ui(y[I]++,I))}},Ur=()=>{let a,p,m,y,f,b=new Array(C+1);for(m=0,y=0;y<u-1;y++)for(dt[y]=m,a=0;a<1<<U[y];a++)F[m++]=y;for(F[m-1]=y,f=0,y=0;y<16;y++)for(At[y]=f,a=0;a<1<<K[y];a++)V[f++]=y;for(f>>=7;y<E;y++)for(At[y]=f<<7,a=0;a<1<<K[y]-7;a++)V[256+f++]=y;for(p=0;p<=C;p++)b[p]=0;for(a=0;a<=143;)v[a*2+1]=8,a++,b[8]++;for(;a<=255;)v[a*2+1]=9,a++,b[9]++;for(;a<=279;)v[a*2+1]=7,a++,b[7]++;for(;a<=287;)v[a*2+1]=8,a++,b[8]++;for(ji(v,g+1,b),a=0;a<E;a++)L[a*2+1]=5,L[a*2]=Ui(a,5);os=new Se(v,U,d+1,g,C),Ms=new Se(L,K,0,E,C),Ds=new Se(new Array(0),gt,0,S,T)},Hi=a=>{let p;for(p=0;p<g;p++)a.dyn_ltree[p*2]=0;for(p=0;p<E;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[x*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Bi=a=>{a.bi_valid>8?ie(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Fi=(a,p,m,y)=>{Bi(a),y&&(ie(a,m),ie(a,~m)),a.pending_buf.set(a.window.subarray(p,p+m),a.pending),a.pending+=m},jr=(a,p,m,y)=>{let f=p*2,b=m*2;return a[f]<a[b]||a[f]===a[b]&&y[p]<=y[m]},$i=(a,p,m)=>{let y=a.heap[m],f=m<<1;for(;f<=a.heap_len&&(f<a.heap_len&&jr(p,a.heap[f+1],a.heap[f],a.depth)&&f++,!jr(p,y,a.heap[f],a.depth));)a.heap[m]=a.heap[f],m=f,f<<=1;a.heap[m]=y},Hr=(a,p,m)=>{let y,f,b=0,w,I;if(a.last_lit!==0)do y=a.pending_buf[a.d_buf+b*2]<<8|a.pending_buf[a.d_buf+b*2+1],f=a.pending_buf[a.l_buf+b],b++,y===0?Xt(a,f,p):(w=F[f],Xt(a,w+d+1,p),I=U[w],I!==0&&(f-=dt[w],Tt(a,f,I)),y--,w=Me(y),Xt(a,w,m),I=K[w],I!==0&&(y-=At[w],Tt(a,y,I)));while(b<a.last_lit);Xt(a,x,p)},Gi=(a,p)=>{let m=p.dyn_tree,y=p.stat_desc.static_tree,f=p.stat_desc.has_stree,b=p.stat_desc.elems,w,I,Q=-1,B;for(a.heap_len=0,a.heap_max=P,w=0;w<b;w++)m[w*2]!==0?(a.heap[++a.heap_len]=Q=w,a.depth[w]=0):m[w*2+1]=0;for(;a.heap_len<2;)B=a.heap[++a.heap_len]=Q<2?++Q:0,m[B*2]=1,a.depth[B]=0,a.opt_len--,f&&(a.static_len-=y[B*2+1]);for(p.max_code=Q,w=a.heap_len>>1;w>=1;w--)$i(a,m,w);B=b;do w=a.heap[1],a.heap[1]=a.heap[a.heap_len--],$i(a,m,1),I=a.heap[1],a.heap[--a.heap_max]=w,a.heap[--a.heap_max]=I,m[B*2]=m[w*2]+m[I*2],a.depth[B]=(a.depth[w]>=a.depth[I]?a.depth[w]:a.depth[I])+1,m[w*2+1]=m[I*2+1]=B,a.heap[1]=B++,$i(a,m,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Vr(a,p),ji(m,Q,a.bl_count)},Br=(a,p,m)=>{let y,f=-1,b,w=p[0*2+1],I=0,Q=7,B=4;for(w===0&&(Q=138,B=3),p[(m+1)*2+1]=65535,y=0;y<=m;y++)b=w,w=p[(y+1)*2+1],!(++I<Q&&b===w)&&(I<B?a.bl_tree[b*2]+=I:b!==0?(b!==f&&a.bl_tree[b*2]++,a.bl_tree[R*2]++):I<=10?a.bl_tree[_*2]++:a.bl_tree[j*2]++,I=0,f=b,w===0?(Q=138,B=3):b===w?(Q=6,B=3):(Q=7,B=4))},Lo=(a,p,m)=>{let y,f=-1,b,w=p[0*2+1],I=0,Q=7,B=4;for(w===0&&(Q=138,B=3),y=0;y<=m;y++)if(b=w,w=p[(y+1)*2+1],!(++I<Q&&b===w)){if(I<B)do Xt(a,b,a.bl_tree);while(--I!==0);else b!==0?(b!==f&&(Xt(a,b,a.bl_tree),I--),Xt(a,R,a.bl_tree),Tt(a,I-3,2)):I<=10?(Xt(a,_,a.bl_tree),Tt(a,I-3,3)):(Xt(a,j,a.bl_tree),Tt(a,I-11,7));I=0,f=b,w===0?(Q=138,B=3):b===w?(Q=6,B=3):(Q=7,B=4)}},Ql=a=>{let p;for(Br(a,a.dyn_ltree,a.l_desc.max_code),Br(a,a.dyn_dtree,a.d_desc.max_code),Gi(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[jt[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Zl=(a,p,m,y)=>{let f;for(Tt(a,p-257,5),Tt(a,m-1,5),Tt(a,y-4,4),f=0;f<y;f++)Tt(a,a.bl_tree[jt[f]*2+1],3);Lo(a,a.dyn_ltree,p-1),Lo(a,a.dyn_dtree,m-1)},th=a=>{let p=4093624447,m;for(m=0;m<=31;m++,p>>>=1)if(p&1&&a.dyn_ltree[m*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(m=32;m<d;m++)if(a.dyn_ltree[m*2]!==0)return 1;return 0},Vo=!1,eh=a=>{Vo||(Ur(),Vo=!0),a.l_desc=new Ne(a.dyn_ltree,os),a.d_desc=new Ne(a.dyn_dtree,Ms),a.bl_desc=new Ne(a.bl_tree,Ds),a.bi_buf=0,a.bi_valid=0,Hi(a)},Uo=(a,p,m,y)=>{Tt(a,(n<<1)+(y?1:0),3),Fi(a,p,m,!0)},sh=a=>{Tt(a,o<<1,3),Xt(a,x,v),Lr(a)},ih=(a,p,m,y)=>{let f,b,w=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=th(a)),Gi(a,a.l_desc),Gi(a,a.d_desc),w=Ql(a),f=a.opt_len+3+7>>>3,b=a.static_len+3+7>>>3,b<=f&&(f=b)):f=b=m+5,m+4<=f&&p!==-1?Uo(a,p,m,y):a.strategy===4||b===f?(Tt(a,(o<<1)+(y?1:0),3),Hr(a,v,L)):(Tt(a,(c<<1)+(y?1:0),3),Zl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,w+1),Hr(a,a.dyn_ltree,a.dyn_dtree)),Hi(a),y&&Bi(a)},rh=(a,p,m)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=m&255,a.last_lit++,p===0?a.dyn_ltree[m*2]++:(a.matches++,p--,a.dyn_ltree[(F[m]+d+1)*2]++,a.dyn_dtree[Me(p)*2]++),a.last_lit===a.lit_bufsize-1);var nh=eh,oh=Uo,ah=ih,ch=rh,lh=sh,hh={_tr_init:nh,_tr_stored_block:oh,_tr_flush_block:ah,_tr_tally:ch,_tr_align:lh},jo=(a,p,m,y)=>{let f=a&65535|0,b=a>>>16&65535|0,w=0;for(;m!==0;){w=m>2e3?2e3:m,m-=w;do f=f+p[y++]|0,b=b+f|0;while(--w);f%=65521,b%=65521}return f|b<<16|0};let uh=()=>{let a,p=[];for(var m=0;m<256;m++){a=m;for(var y=0;y<8;y++)a=a&1?3988292384^a>>>1:a>>>1;p[m]=a}return p},dh=new Uint32Array(uh());var De=(a,p,m,y)=>{let f=dh,b=y+m;a^=-1;for(let w=y;w<b;w++)a=a>>>8^f[(a^p[w])&255];return a^-1},zi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ho={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:fh,_tr_stored_block:ph,_tr_flush_block:gh,_tr_tally:ke,_tr_align:mh}=hh,{Z_NO_FLUSH:as,Z_PARTIAL_FLUSH:yh,Z_FULL_FLUSH:Eh,Z_FINISH:xe,Z_BLOCK:Bo,Z_OK:le,Z_STREAM_END:Fo,Z_STREAM_ERROR:Kt,Z_DATA_ERROR:Sh,Z_BUF_ERROR:Fr,Z_DEFAULT_COMPRESSION:vh,Z_FILTERED:_h,Z_HUFFMAN_ONLY:qi,Z_RLE:wh,Z_FIXED:Ah,Z_DEFAULT_STRATEGY:Th,Z_UNKNOWN:bh,Z_DEFLATED:Wi}=Ho,Rh=9,Ch=15,Ih=8,$r=256+1+29,Ph=30,Oh=19,Nh=2*$r+1,Mh=15,J=3,Le=258,re=Le+J+1,Dh=32,Yi=42,Gr=69,Xi=73,Ki=91,Ji=103,cs=113,ei=666,yt=1,si=2,ls=3,ks=4,kh=3,Ve=(a,p)=>(a.msg=zi[p],p),$o=a=>(a<<1)-(a>4?9:0),Ue=a=>{let p=a.length;for(;--p>=0;)a[p]=0},je=(a,p,m)=>(p<<a.hash_shift^m)&a.hash_mask,He=a=>{let p=a.state,m=p.pending;m>a.avail_out&&(m=a.avail_out),m!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+m),a.next_out),a.next_out+=m,p.pending_out+=m,a.total_out+=m,a.avail_out-=m,p.pending-=m,p.pending===0&&(p.pending_out=0))},bt=(a,p)=>{gh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,He(a.strm)},st=(a,p)=>{a.pending_buf[a.pending++]=p},ii=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},xh=(a,p,m,y)=>{let f=a.avail_in;return f>y&&(f=y),f===0?0:(a.avail_in-=f,p.set(a.input.subarray(a.next_in,a.next_in+f),m),a.state.wrap===1?a.adler=jo(a.adler,p,f,m):a.state.wrap===2&&(a.adler=De(a.adler,p,f,m)),a.next_in+=f,a.total_in+=f,f)},Go=(a,p)=>{let m=a.max_chain_length,y=a.strstart,f,b,w=a.prev_length,I=a.nice_match,Q=a.strstart>a.w_size-re?a.strstart-(a.w_size-re):0,B=a.window,Ft=a.w_mask,Be=a.prev,ct=a.strstart+Le,us=B[y+w-1],Ls=B[y+w];a.prev_length>=a.good_match&&(m>>=2),I>a.lookahead&&(I=a.lookahead);do if(f=p,!(B[f+w]!==Ls||B[f+w-1]!==us||B[f]!==B[y]||B[++f]!==B[y+1])){y+=2,f++;do;while(B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&B[++y]===B[++f]&&y<ct);if(b=Le-(ct-y),y=ct-Le,b>w){if(a.match_start=p,w=b,b>=I)break;us=B[y+w-1],Ls=B[y+w]}}while((p=Be[p&Ft])>Q&&--m!==0);return w<=a.lookahead?w:a.lookahead},hs=a=>{let p=a.w_size,m,y,f,b,w;do{if(b=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-re)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,y=a.hash_size,m=y;do f=a.head[--m],a.head[m]=f>=p?f-p:0;while(--y);y=p,m=y;do f=a.prev[--m],a.prev[m]=f>=p?f-p:0;while(--y);b+=p}if(a.strm.avail_in===0)break;if(y=xh(a.strm,a.window,a.strstart+a.lookahead,b),a.lookahead+=y,a.lookahead+a.insert>=J)for(w=a.strstart-a.insert,a.ins_h=a.window[w],a.ins_h=je(a,a.ins_h,a.window[w+1]);a.insert&&(a.ins_h=je(a,a.ins_h,a.window[w+J-1]),a.prev[w&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=w,w++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<re&&a.strm.avail_in!==0)},Lh=(a,p)=>{let m=65535;for(m>a.pending_buf_size-5&&(m=a.pending_buf_size-5);;){if(a.lookahead<=1){if(hs(a),a.lookahead===0&&p===as)return yt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let y=a.block_start+m;if((a.strstart===0||a.strstart>=y)&&(a.lookahead=a.strstart-y,a.strstart=y,bt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-re&&(bt(a,!1),a.strm.avail_out===0))return yt}return a.insert=0,p===xe?(bt(a,!0),a.strm.avail_out===0?ls:ks):(a.strstart>a.block_start&&(bt(a,!1),a.strm.avail_out===0),yt)},zr=(a,p)=>{let m,y;for(;;){if(a.lookahead<re){if(hs(a),a.lookahead<re&&p===as)return yt;if(a.lookahead===0)break}if(m=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),m=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),m!==0&&a.strstart-m<=a.w_size-re&&(a.match_length=Go(a,m)),a.match_length>=J)if(y=ke(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),m=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=je(a,a.ins_h,a.window[a.strstart+1]);else y=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(y&&(bt(a,!1),a.strm.avail_out===0))return yt}return a.insert=a.strstart<J-1?a.strstart:J-1,p===xe?(bt(a,!0),a.strm.avail_out===0?ls:ks):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?yt:si},xs=(a,p)=>{let m,y,f;for(;;){if(a.lookahead<re){if(hs(a),a.lookahead<re&&p===as)return yt;if(a.lookahead===0)break}if(m=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),m=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,m!==0&&a.prev_length<a.max_lazy_match&&a.strstart-m<=a.w_size-re&&(a.match_length=Go(a,m),a.match_length<=5&&(a.strategy===_h||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-J,y=ke(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),m=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,y&&(bt(a,!1),a.strm.avail_out===0))return yt}else if(a.match_available){if(y=ke(a,0,a.window[a.strstart-1]),y&&bt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return yt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(y=ke(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===xe?(bt(a,!0),a.strm.avail_out===0?ls:ks):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?yt:si},Vh=(a,p)=>{let m,y,f,b,w=a.window;for(;;){if(a.lookahead<=Le){if(hs(a),a.lookahead<=Le&&p===as)return yt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(f=a.strstart-1,y=w[f],y===w[++f]&&y===w[++f]&&y===w[++f])){b=a.strstart+Le;do;while(y===w[++f]&&y===w[++f]&&y===w[++f]&&y===w[++f]&&y===w[++f]&&y===w[++f]&&y===w[++f]&&y===w[++f]&&f<b);a.match_length=Le-(b-f),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(m=ke(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(m=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),m&&(bt(a,!1),a.strm.avail_out===0))return yt}return a.insert=0,p===xe?(bt(a,!0),a.strm.avail_out===0?ls:ks):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?yt:si},Uh=(a,p)=>{let m;for(;;){if(a.lookahead===0&&(hs(a),a.lookahead===0)){if(p===as)return yt;break}if(a.match_length=0,m=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,m&&(bt(a,!1),a.strm.avail_out===0))return yt}return a.insert=0,p===xe?(bt(a,!0),a.strm.avail_out===0?ls:ks):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?yt:si};function he(a,p,m,y,f){this.good_length=a,this.max_lazy=p,this.nice_length=m,this.max_chain=y,this.func=f}let ri=[new he(0,0,0,0,Lh),new he(4,4,8,4,zr),new he(4,5,16,8,zr),new he(4,6,32,32,zr),new he(4,4,16,16,xs),new he(8,16,32,32,xs),new he(8,16,128,128,xs),new he(8,32,128,256,xs),new he(32,128,258,1024,xs),new he(32,258,258,4096,xs)],jh=a=>{a.window_size=2*a.w_size,Ue(a.head),a.max_lazy_match=ri[a.level].max_lazy,a.good_match=ri[a.level].good_length,a.nice_match=ri[a.level].nice_length,a.max_chain_length=ri[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function Hh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Nh*2),this.dyn_dtree=new Uint16Array((2*Ph+1)*2),this.bl_tree=new Uint16Array((2*Oh+1)*2),Ue(this.dyn_ltree),Ue(this.dyn_dtree),Ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Mh+1),this.heap=new Uint16Array(2*$r+1),Ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*$r+1),Ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let zo=a=>{if(!a||!a.state)return Ve(a,Kt);a.total_in=a.total_out=0,a.data_type=bh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Yi:cs,a.adler=p.wrap===2?0:1,p.last_flush=as,fh(p),le},qo=a=>{let p=zo(a);return p===le&&jh(a.state),p},Bh=(a,p)=>!a||!a.state||a.state.wrap!==2?Kt:(a.state.gzhead=p,le),Wo=(a,p,m,y,f,b)=>{if(!a)return Kt;let w=1;if(p===vh&&(p=6),y<0?(w=0,y=-y):y>15&&(w=2,y-=16),f<1||f>Rh||m!==Wi||y<8||y>15||p<0||p>9||b<0||b>Ah)return Ve(a,Kt);y===8&&(y=9);let I=new Hh;return a.state=I,I.strm=a,I.wrap=w,I.gzhead=null,I.w_bits=y,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=f+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+J-1)/J),I.window=new Uint8Array(I.w_size*2),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<f+6,I.pending_buf_size=I.lit_bufsize*4,I.pending_buf=new Uint8Array(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=p,I.strategy=b,I.method=m,qo(a)},Fh=(a,p)=>Wo(a,p,Wi,Ch,Ih,Th),$h=(a,p)=>{let m,y;if(!a||!a.state||p>Bo||p<0)return a?Ve(a,Kt):Kt;let f=a.state;if(!a.output||!a.input&&a.avail_in!==0||f.status===ei&&p!==xe)return Ve(a,a.avail_out===0?Fr:Kt);f.strm=a;let b=f.last_flush;if(f.last_flush=p,f.status===Yi)if(f.wrap===2)a.adler=0,st(f,31),st(f,139),st(f,8),f.gzhead?(st(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),st(f,f.gzhead.time&255),st(f,f.gzhead.time>>8&255),st(f,f.gzhead.time>>16&255),st(f,f.gzhead.time>>24&255),st(f,f.level===9?2:f.strategy>=qi||f.level<2?4:0),st(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(st(f,f.gzhead.extra.length&255),st(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=De(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=Gr):(st(f,0),st(f,0),st(f,0),st(f,0),st(f,0),st(f,f.level===9?2:f.strategy>=qi||f.level<2?4:0),st(f,kh),f.status=cs);else{let w=Wi+(f.w_bits-8<<4)<<8,I=-1;f.strategy>=qi||f.level<2?I=0:f.level<6?I=1:f.level===6?I=2:I=3,w|=I<<6,f.strstart!==0&&(w|=Dh),w+=31-w%31,f.status=cs,ii(f,w),f.strstart!==0&&(ii(f,a.adler>>>16),ii(f,a.adler&65535)),a.adler=1}if(f.status===Gr)if(f.gzhead.extra){for(m=f.pending;f.gzindex<(f.gzhead.extra.length&65535)&&!(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),He(a),m=f.pending,f.pending===f.pending_buf_size));)st(f,f.gzhead.extra[f.gzindex]&255),f.gzindex++;f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=Xi)}else f.status=Xi;if(f.status===Xi)if(f.gzhead.name){m=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),He(a),m=f.pending,f.pending===f.pending_buf_size)){y=1;break}f.gzindex<f.gzhead.name.length?y=f.gzhead.name.charCodeAt(f.gzindex++)&255:y=0,st(f,y)}while(y!==0);f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),y===0&&(f.gzindex=0,f.status=Ki)}else f.status=Ki;if(f.status===Ki)if(f.gzhead.comment){m=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),He(a),m=f.pending,f.pending===f.pending_buf_size)){y=1;break}f.gzindex<f.gzhead.comment.length?y=f.gzhead.comment.charCodeAt(f.gzindex++)&255:y=0,st(f,y)}while(y!==0);f.gzhead.hcrc&&f.pending>m&&(a.adler=De(a.adler,f.pending_buf,f.pending-m,m)),y===0&&(f.status=Ji)}else f.status=Ji;if(f.status===Ji&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&He(a),f.pending+2<=f.pending_buf_size&&(st(f,a.adler&255),st(f,a.adler>>8&255),a.adler=0,f.status=cs)):f.status=cs),f.pending!==0){if(He(a),a.avail_out===0)return f.last_flush=-1,le}else if(a.avail_in===0&&$o(p)<=$o(b)&&p!==xe)return Ve(a,Fr);if(f.status===ei&&a.avail_in!==0)return Ve(a,Fr);if(a.avail_in!==0||f.lookahead!==0||p!==as&&f.status!==ei){let w=f.strategy===qi?Uh(f,p):f.strategy===wh?Vh(f,p):ri[f.level].func(f,p);if((w===ls||w===ks)&&(f.status=ei),w===yt||w===ls)return a.avail_out===0&&(f.last_flush=-1),le;if(w===si&&(p===yh?mh(f):p!==Bo&&(ph(f,0,0,!1),p===Eh&&(Ue(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),He(a),a.avail_out===0))return f.last_flush=-1,le}return p!==xe?le:f.wrap<=0?Fo:(f.wrap===2?(st(f,a.adler&255),st(f,a.adler>>8&255),st(f,a.adler>>16&255),st(f,a.adler>>24&255),st(f,a.total_in&255),st(f,a.total_in>>8&255),st(f,a.total_in>>16&255),st(f,a.total_in>>24&255)):(ii(f,a.adler>>>16),ii(f,a.adler&65535)),He(a),f.wrap>0&&(f.wrap=-f.wrap),f.pending!==0?le:Fo)},Gh=a=>{if(!a||!a.state)return Kt;let p=a.state.status;return p!==Yi&&p!==Gr&&p!==Xi&&p!==Ki&&p!==Ji&&p!==cs&&p!==ei?Ve(a,Kt):(a.state=null,p===cs?Ve(a,Sh):le)},zh=(a,p)=>{let m=p.length;if(!a||!a.state)return Kt;let y=a.state,f=y.wrap;if(f===2||f===1&&y.status!==Yi||y.lookahead)return Kt;if(f===1&&(a.adler=jo(a.adler,p,m,0)),y.wrap=0,m>=y.w_size){f===0&&(Ue(y.head),y.strstart=0,y.block_start=0,y.insert=0);let Q=new Uint8Array(y.w_size);Q.set(p.subarray(m-y.w_size,m),0),p=Q,m=y.w_size}let b=a.avail_in,w=a.next_in,I=a.input;for(a.avail_in=m,a.next_in=0,a.input=p,hs(y);y.lookahead>=J;){let Q=y.strstart,B=y.lookahead-(J-1);do y.ins_h=je(y,y.ins_h,y.window[Q+J-1]),y.prev[Q&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=Q,Q++;while(--B);y.strstart=Q,y.lookahead=J-1,hs(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=J-1,y.match_available=0,a.next_in=w,a.input=I,a.avail_in=b,y.wrap=f,le};var qh=Fh,Wh=Wo,Yh=qo,Xh=zo,Kh=Bh,Jh=$h,Qh=Gh,Zh=zh,tu="pako deflate (from Nodeca project)",ni={deflateInit:qh,deflateInit2:Wh,deflateReset:Yh,deflateResetKeep:Xh,deflateSetHeader:Kh,deflate:Jh,deflateEnd:Qh,deflateSetDictionary:Zh,deflateInfo:tu};let eu=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var su=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let m=p.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(let y in m)eu(m,y)&&(a[y]=m[y])}}return a},iu=a=>{let p=0;for(let y=0,f=a.length;y<f;y++)p+=a[y].length;let m=new Uint8Array(p);for(let y=0,f=0,b=a.length;y<b;y++){let w=a[y];m.set(w,f),f+=w.length}return m},Yo={assign:su,flattenChunks:iu};let Xo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xo=!1}let oi=new Uint8Array(256);for(let a=0;a<256;a++)oi[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;oi[254]=oi[254]=1;var ru=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,m,y,f,b,w=a.length,I=0;for(f=0;f<w;f++)m=a.charCodeAt(f),(m&64512)===55296&&f+1<w&&(y=a.charCodeAt(f+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),f++)),I+=m<128?1:m<2048?2:m<65536?3:4;for(p=new Uint8Array(I),b=0,f=0;b<I;f++)m=a.charCodeAt(f),(m&64512)===55296&&f+1<w&&(y=a.charCodeAt(f+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),f++)),m<128?p[b++]=m:m<2048?(p[b++]=192|m>>>6,p[b++]=128|m&63):m<65536?(p[b++]=224|m>>>12,p[b++]=128|m>>>6&63,p[b++]=128|m&63):(p[b++]=240|m>>>18,p[b++]=128|m>>>12&63,p[b++]=128|m>>>6&63,p[b++]=128|m&63);return p};let Ko=(a,p=a.length)=>{if(p<65534&&a.subarray&&Xo)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let m="";for(let y=0;y<p;y++)m+=String.fromCharCode(a[y]);return m};var nu=(a,p)=>{let m=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let y,f,b=new Array(m*2);for(f=0,y=0;y<m;){let w=a[y++];if(w<128){b[f++]=w;continue}let I=oi[w];if(I>4){b[f++]=65533,y+=I-1;continue}for(w&=I===2?31:I===3?15:7;I>1&&y<m;)w=w<<6|a[y++]&63,I--;if(I>1){b[f++]=65533;continue}w<65536?b[f++]=w:(w-=65536,b[f++]=55296|w>>10&1023,b[f++]=56320|w&1023)}return Ko(b,f)},ou=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let m=p-1;for(;m>=0&&(a[m]&192)===128;)m--;return m<0||m===0?p:m+oi[a[m]]>p?m:p},Jo={string2buf:ru,buf2string:nu,utf8border:ou};function au(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cu=au;let Qo=Object.prototype.toString,{Z_NO_FLUSH:lu,Z_SYNC_FLUSH:hu,Z_FULL_FLUSH:uu,Z_FINISH:du,Z_OK:Qi,Z_STREAM_END:fu,Z_DEFAULT_COMPRESSION:pu,Z_DEFAULT_STRATEGY:gu,Z_DEFLATED:mu}=Ho;function Zi(a){this.options=Yo.assign({level:pu,method:mu,chunkSize:16384,windowBits:15,memLevel:8,strategy:gu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cu,this.strm.avail_out=0;let m=ni.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(m!==Qi)throw new Error(zi[m]);if(p.header&&ni.deflateSetHeader(this.strm,p.header),p.dictionary){let y;if(typeof p.dictionary=="string"?y=Jo.string2buf(p.dictionary):Qo.call(p.dictionary)==="[object ArrayBuffer]"?y=new Uint8Array(p.dictionary):y=p.dictionary,m=ni.deflateSetDictionary(this.strm,y),m!==Qi)throw new Error(zi[m]);this._dict_set=!0}}Zi.prototype.push=function(a,p){let m=this.strm,y=this.options.chunkSize,f,b;if(this.ended)return!1;for(p===~~p?b=p:b=p===!0?du:lu,typeof a=="string"?m.input=Jo.string2buf(a):Qo.call(a)==="[object ArrayBuffer]"?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;;){if(m.avail_out===0&&(m.output=new Uint8Array(y),m.next_out=0,m.avail_out=y),(b===hu||b===uu)&&m.avail_out<=6){this.onData(m.output.subarray(0,m.next_out)),m.avail_out=0;continue}if(f=ni.deflate(m,b),f===fu)return m.next_out>0&&this.onData(m.output.subarray(0,m.next_out)),f=ni.deflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===Qi;if(m.avail_out===0){this.onData(m.output);continue}if(b>0&&m.next_out>0){this.onData(m.output.subarray(0,m.next_out)),m.avail_out=0;continue}if(m.avail_in===0)break}return!0},Zi.prototype.onData=function(a){this.chunks.push(a)},Zi.prototype.onEnd=function(a){a===Qi&&(this.result=Yo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function yu(a,p){p=p||{};let m=new Zi(p);if(m.push(a,!0),m.err)throw m.msg||zi[m.err];return m.result}function Eu(a,p){return p=p||{},p.gzip=!0,yu(a,p)}return(a,p,m)=>{let y=Eu(a);return p==="base64"?y=btoa(Ko(y)):y=y.buffer,m&&m(y),y}}var sS=(()=>{class s extends Pl{constructor(){super(),this.algorithm=kr.GZIP,this.e0=eo(),this.compress=(i,n,o)=>this.Mm.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?rS:iS;this.Mm=new e,eS.create(e,{getPakoCompressor:eo}).then(i=>{this.Mm=i})}compressSync(t,e){try{return this.e0(t,e)}catch(i){throw at.warn(i),i}}}return s})(),iS=(()=>{class s{constructor(){this.s0=eo()}compress(t,e){return Promise.resolve(this.s0(t,e))}}return s})(),rS=(()=>{class s{i0(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.i0(o)):n}}return s})(),nS=(()=>{class s extends Pl{constructor(){super(...arguments),this.algorithm=kr.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Gl=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!ZE.isCompressionEnabled()?new nS:this.instance=new sS}}return s})(),oS=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},aS=5e3,cS=(()=>{class s extends Hc{constructor(t,e,i){super(t,e),this.$r=null,this.r0=(i==null?void 0:i.type)||"json",this.Dm=i==null?void 0:i.cacheMinutes,this.Io=i==null?void 0:i.timeout}onLoad(t){this.Gr=t}onError(t){this.Po=t}onTimeout(t,e){this.tr=t,this.Io=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.Zc(t);let e=wi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.n0(i,this.r0)}abort(){this.$r&&(this.$r.abort(),this.$r=null)}isInProgress(){return this.$r!==null}n0(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Po)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.tr)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.Gr)===null||o===void 0||o.call(this,this.o0(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Po)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.$r=null},n.timeout=(i=this.Io)!==null&&i!==void 0?i:aS,this.$r=n,n.send()}o0(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Zc(t){let e;this.Dm?e=`${oS(this.Dm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),lS=(()=>{class s{constructor(t){var e;this.Xe={},this.xu={},this.km=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Fa=t.endpoint,this.Oo=t.compressionOpts,this.ae=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Lu=t.contentType,this.worker=!!t.worker,this.ae&&this.ae.recover(this.km)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xe[e]}):this.Xe={}}send(t,e){let i=e||{...this.Xe},n=!("ct"in i),o=this.Lu==="application/json"||typeof t!="string"&&!this.a0(t);"ct"in i||(!this.Oo||!n?i.ct=kr.UNCOMPRESSED:i.ct=this.Oo.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(i[u])}`).join("&"),h=`${this.Fa}?${l}`;if(Si(this.mandatoryParameters,u=>i[u]==null)){at.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Oo&&n&&typeof c=="string"?this.Oo.compressor(c,this.Oo.compressionOutputType,u=>this.xm(h,i,u)):this.xm(h,i,c)}onLoad(t){this.Gr=t}onError(t){this.Po=t}onTimeout(t,e){this.tr=t,this.Io=e}abort(){this.Lm&&this.Lm()}setRequestHeader(t,e){this.xu[t]=e}getQueryParams(){return this.Xe}a0(t){return t&&t.byteLength!==void 0}xm(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.Lu&&n.setRequestHeader("Content-Type",this.Lu),n.onload=()=>{if(this.ae&&this.ae.recover(this.km),this.Gr){let c={params:e,responseText:n.responseText,status:n.status};this.Gr(c)}},n.onerror=()=>{this.ae&&this.ae.save({key:o,metadata:e,events:i}),this.Po&&this.Po({params:e})},this.Io&&this.tr&&(n.timeout=this.Io,n.ontimeout=()=>{this.tr()}),this.Lm=()=>n.abort(),Object.keys(this.xu).forEach(c=>{n.setRequestHeader(c,this.xu[c])}),n.send(i)}}return s})(),zl=(()=>{class s{constructor(t){this.Vm=t}create(t,e,i){let n=e?{compressor:this.Vm.compress,compressionOutputType:e,compressionType:this.Vm.algorithm}:void 0;return new lS({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),hS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),uS=(()=>{class s{constructor(t){this.Vu=t}start(){this.Vu.onEvent(t=>this.tt(t)),this.Vu.start()}stop(){this.Vu.stop()}tt(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;G.warn(e)}}return s})(),dS=(()=>{class s{constructor(){this.Jt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Vt(this.Jt)}stop(){Ut(this.Jt)}onEvent(t){this.j=t}c0(t){if(!t)return!1;let e=t.disposition;return z(t.sourceFile)&&csArray.prototype.some.call(s.l0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.c0(t)&&this.j({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.l0=["contentsquare","cdnssl.clicktale.net"],H([D("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),fS=(()=>{class s{init(){this.vc=new uS(new dS),this.vc.start()}onOptout(){this.vc.stop()}onArtificialPageViewEnd(t){t&&this.vc.stop()}onAfterArtificialPageView(t){t&&this.vc.start()}}return s})(),pS=(()=>{class s{constructor(t,e,i){this.E=t,this.R=e,this.w=i}grantReplayConsent(){if(!ts.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}ts.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!ts.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}ts.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),gS=["replay:consent:unanonymized:granted","trackConsentGranted"],mS=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],yS=["replay:consent:startForSession:granted"],ES=["replay:consent:startForSession:withdrawn"],SS=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.Ct=i,this.R=n,this.w=o}init(){this.Um=new pS(this.E,this.R,this.w),this.Ct.setInitialConsent(),this.ut()}ut(){this.S.register(gS,()=>{this.Ct.grantReplayAnonymizationConsent()}),this.S.register(mS,()=>{this.Ct.withdrawReplayAnonymizationConsent()}),this.S.register(yS,()=>{this.Um.grantReplayConsent()}),this.S.register(ES,()=>{this.Um.withdrawReplayConsent()})}onOptout(){this.Ct.removeAllConsents()}onBeforeVisitorRenewal(){this.Ct.removeAllConsents()}onAfterVisitorRenewal(){this.Ct.setInitialConsent()}onAfterVisitorCleared(){this.Ct.setInitialConsent()}}return s})(),Ye="_cs_c",fs=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),vS=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.Nt=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.Nt.getItem(Ye):t=this.M.get(Ye),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(Ye,csString(t)):this.M.set(Ye,csString(t),no)}remove(){this.E.cookielessTrackingEnabled?this.Nt.removeItem(Ye):this.M.delete(Ye)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.M.delete(Ye,Nr.CURRENT_DOMAIN):this.M.delete(Ye,this.M.getRootDomain()))}}return s})(),_S=(()=>{class s{constructor(t,e,i){this.E=t,this.pt=e,this.w=i}setInitialConsent(){let t=this.pt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===fs.NOT_REQUIRED||!e&&t!==fs.NOT_REQUIRED}handleSubdomainChange(){this.pt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?fs.NOT_EXPRESSED:fs.NOT_REQUIRED;this.pt.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(fs.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(fs.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.pt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.pt.get()===fs.GRANTED}getRequestParameters(){return{uc:`${this.pt.get()}`}}}return s})();var wS=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var pc=512,gc=255,_n={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},AS=(()=>{class s{constructor(t,e){this.D=t,this.pt=e,this.ee={},this.$e={}}set(t,e,i,n){let o,c;if((te(t)||z(t))&&Number(t)>0&&Mt(e)&&Mt(i)&&!pe(e)&&!pe(i)&&this.d0(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,pc),csString.prototype.slice.call(h,0,gc)],c=i!=="",!tt(n)||csArray.prototype.indexOf.call(_n.SESSION,n)>=0){let u=this.getCustomVariablesSession();c?u[t]=o:delete u[t],this.setCustomVariableSession(u)}(!tt(n)||csArray.prototype.indexOf.call(_n.PAGE,n)>=0)&&(c?this.ee[t]=o:delete this.ee[t]),tt(n)&&csArray.prototype.indexOf.call(_n.NEXT_PAGE_ONLY,n)>=0&&(c?this.$e[t]=o:delete this.$e[t])}else throw new _t(rl[0])}getCustomVariablesSession(){let t=this.pt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&_s(e)?e:{}}setCustomVariableSession(t){this.pt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.pt.remove()}removeCustomVariablesPage(){this.ee={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.$e)this.$e.hasOwnProperty(i)&&(this.ee[i]=this.$e[i]);for(let i in this.ee)this.ee.hasOwnProperty(i)&&(t[i]=this.ee[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Hm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.$e).length>0)for(let t in this.$e)this.$e[t]===this.ee[t]&&(delete this.ee[t],delete this.$e[t])}hasCustomVariablesPage(){return this.ee&&!In(this.ee)}getCustomVariablesPage(){return this.Hm(this.ee)}Bm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!_u(i,1,20)||o.length>pc||c.length>gc)&&delete t[e]}}Hm(t){this.Bm(t);let e=In(t)?[]:t;return window.csJSON.stringify(e)}d0(t){return!tt(t)||z(t)||te(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.$e)this.$e.hasOwnProperty(e)&&(this.ee[e]=this.$e[e]);for(let e in this.ee)this.ee.hasOwnProperty(e)&&(t[e]=this.ee[e]);return this.Bm(t),t}}return s})(),TS=(()=>{class s{constructor(t,e,i,n){this.Te=t,this.Mo=e,this.Do=i,this.Ct=n}init(){this.f0()}shouldMaskNonTextElements(){if(this.Te.anonymisationMethod!==ds.replayRecordingMaskedUrlRegexRules)return!1;if(this.Te.isSMB)return this.shouldUseAnonymization();let t=this.Do.getMatchingRules(this.Mo.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Ct&&!this.Ct.isReplayUnanonymizedAllowedByConsent()){switch(this.Te.anonymisationMethod){case null:case ds.replayRecordingUnmaskedUrlRegex:return!(this.Te.replayRecordingUnmaskedUrlRegex&&this.Te.replayRecordingUnmaskedUrlRegex.test(this.Mo.getAnonymizedUrl()));case ds.replayRecordingUnmaskedUrlRegexRules:return!this.Do.evaluateUrl(this.Mo.getAnonymizedUrl())}return!0}else{switch(this.Te.anonymisationMethod){case null:case ds.replayRecordingMaskedUrlRegex:return!!(this.Te.replayRecordingMaskedUrlRegex&&this.Te.replayRecordingMaskedUrlRegex.test(this.Mo.getAnonymizedUrl()));case ds.replayRecordingMaskedUrlRegexRules:return this.Do.evaluateUrl(this.Mo.getAnonymizedUrl())}return!1}}f0(){this.Te.anonymisationMethod===ds.replayRecordingMaskedUrlRegexRules&&this.Te.replayRecordingMaskedUrlRegexRules?this.Do.setRegexRules(this.Te.replayRecordingMaskedUrlRegexRules):this.Te.anonymisationMethod===ds.replayRecordingUnmaskedUrlRegexRules&&this.Te.replayRecordingUnmaskedUrlRegexRules&&this.Do.setRegexRules(this.Te.replayRecordingUnmaskedUrlRegexRules)}}return s})();var bS=(()=>{class s extends Wt{constructor(t){super(),this.W=null,this._c=null,this.U=null,this.ai=null,this.Fm=["value","checked","src","data","alt"],this.wc={state:M.MaskedElementState.Child},this.g0=e=>{for(let i of e){if(M.isMaskedElement(i.target)||M.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];M.isMaskedElement(o)||M.isMaskedElementChild(o)||ut(o)&&this.$m(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];ot.isConnected(o)||this.Gm(o)}}},this.m0=t}setMaskedElementSettings(t){this.$s=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.$s||(at.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.$s;(t=this.ai)!==null&&t!==void 0||(this.ai=this.y0()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.E0()),this.W.observe(o)),c.length!==0&&((i=this._c)!==null&&i!==void 0||(this._c=this.S0(l)),this._c.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new Ee(this.g0,(h,u)=>u==="added"&&this.v0(h))),this.U.observe(),csSetTimeout(this.m0)}onStop(){var t,e,i;this.W&&(this.Gm(document),this.W.disconnect()),(t=this._c)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.ai)===null||i===void 0||i.disconnect()}y0(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}E0(){return new Ys(t=>{csArray.prototype.forEach.call(t,e=>{this._0(e)?this.$m(e):(this.w0(e),this.A0(e))})})}S0(t){return new Ys(e=>{csArray.prototype.forEach.call(e,i=>this.T0(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=M.getMaskedElementDetails(t.target);if(i.state!==M.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:q(t.target),width:e.width,height:e.height})}A0(t){!this.ai||!ut(t)||Mi(t)||this.ai.observe(t)}_0(t){let e=csNodeparentNode.apply(t);return e?M.isMaskedElement(e)||M.isMaskedElementChild(e):_i(t)?M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host):!1}v0(t){(M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host))&&M.setMaskedElementProperty(t,this.wc)}Gm(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{M.unsetMaskedElementProperty(i)})}w0(t){let e=t.getBoundingClientRect(),i={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t,i),this.b0(t),qt(t).visitAll(n=>n!==t&&M.setMaskedElementProperty(n,this.wc))}$m(t){M.setMaskedElementProperty(t,this.wc),qt(t).visitAll(e=>e!==t&&M.setMaskedElementProperty(e,this.wc))}b0(t){var e;let i=(e=rt.getProperty(t,M.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Fm.length;n+=1){let o=this.Fm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&M.setMaskedAttributeProperty(t,i)}T0(t,e){var i;let n=(i=rt.getProperty(t,M.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&ce.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&M.setMaskedAttributeProperty(t,n)}}return se([D()],s.prototype,"resizeObserverCallback",null),s})(),RS=(()=>{class s{constructor(){this.ju=0,this.B=!1,this.zm="data-cs-capture",this.wi=t=>{for(let e of t){if(oe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];oe.isWhitelistedElement(n)||ut(n)&&this.qm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ot.isConnected(n)||this.Wm(n)}}}}start(){this.ju++,!this.B&&(this.B=!0,this.R0())}R0(){this.W||(this.W=new Ys(e=>X(e,i=>this.qm(i))));let t=this.Hu?`[${this.zm}], ${this.Hu}`:`[${this.zm}]`;this.W.observe(t),this.U||(this.U=new Ee(this.wi,(e,i)=>i==="added"&&this.C0(e))),this.U.observe()}stop(){this.B&&(this.ju--,this.ju===0&&(this.B=!1,this.I0()))}I0(){this.W&&(this.Wm(document),this.W.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(gi(t))this.Hu=t;else if(e)throw new _t("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Hu}qm(t){qt(t).visitAll(e=>{oe.whitelistElement(e)})}C0(t){oe.isWhitelistedElement(t.host)&&oe.whitelistElement(t)}Wm(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{oe.removeWhitelistElement(i)})}}return s})();var CS=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var IS="csq:start-hotjar",Do=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),PS=(()=>{class s{static set(t,e){s.Xm[t]=e}static isEnabled(t){return s.Xm[t]===!0}}return s.Xm={[Do.HJ_DUAL_COLLECT]:!1},s})();function OS(s){return!window.hjSiteSettings||!((window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,Do.HJ_DUAL_COLLECT))>-1)?!1:s?!Zc(s)&&!gp(s):!0}var NS=(()=>{class s{constructor(t,e){this.Z=t,this.mt=e,this.Bu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.mt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Bu=!0}disableRemoveQueryString(){this.Bu=!1}get(){let t=this.Bu?this.Z.removeQueryString(this.Zm()):this.Zm();return this.Z.anonymizeUrl(t,{maskingPatterns:this.mt.getUrlMaskingPatterns()})}set(t){this.ty=t}Zm(){if(this.ty)return this.ty;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function mc(s,r,t){if(!tt(r)&&!tt(t))return s.href;let e=tt(r)?ql(r):s.pathname,i=tt(t)?Wl(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function ql(s){return Dt(s,"/")?s:`/${s}`}function Wl(s){return Dt(s,"?")||s===""?s:`?${s}`}var wn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),MS=(()=>{class s{constructor(t,e){this.xt=t,this.Z=e,this.F0=10}overridePath(t,e){if(t===""){this.zr=void 0;return}let i=this.ey(e);i&&(this.Fu=i),this.zr=e?this.sy(t,e):t}overrideQuery(t,e){let i=this.ey(e);i&&(this.$u=i),this.ko=e?this.sy(t,e):t}computeOverriddenUrl(t){return this.$0(t)?this.getAnonymizedUrl():t}G0(t){return(typeof t=="string"||typeof t=="number")&&t in wn}$0(t){let e=this.pa(this.xt.href);return this.pa(t)===e}pa(t){return Ld(t,"/")?csString.prototype.slice.call(t,0,-1):t}ey(t){return tt(t==null?void 0:t.lifespan)&&this.G0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}z0(){return this.Fu&&this.Fu in wn}q0(){return this.$u&&this.$u in wn}cleanupOverrideLifespan(){this.z0()&&(this.zr=void 0,this.Fu=void 0),this.q0()&&(this.ko=void 0,this.$u=void 0)}getAnonymizedUrl(){let t=mc(this.xt,this.zr,this.ko);return this.Z.anonymizeUrl(t)}getUrl(){return mc(this.xt,this.zr,this.ko)}getAnonymizedPathAndQuery(){let t=tt(this.zr)?ql(this.zr):this.xt.pathname,e=tt(this.ko)?Wl(this.ko):this.xt.search;return this.Z.anonymizeUrl(t+e)}getUrlProtocol(){return this.xt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}sy(t,e){return this.W0(e)?this.Y0(t):this.X0(e)?this.K0(t):t}X0(t){return!!t.decodeURI}K0(t){return this.iy(t,1,!1)}W0(t){return!!t.decodeURIDeep}Y0(t){return this.iy(t,this.F0,!0)}iy(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&G.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),DS=(()=>{class s{constructor(t,e){this.S=t,this.Ts=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ts.updateDynamicFields("emitDebugEvents",t)})}}return s})();var yc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.N=e,this.R=i,this.ry=n,this.Gs=o}getRequestParameters(){var t;let e={...mo(),...this.E.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.N.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.ry)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.ry.getSubProjectId()}`),this.J0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}J0(t){if(!this.Gs)return;let e=this.Gs.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function kS(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function xS(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var LS=(()=>{class s{constructor(t){this.ll=t,this.Q0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:kS(),Attributes:xS()};this.$s=M.getComputedSelectorSettings(e,this.$s)}init(){this.Z0()}setMaskedElementSettingsFromCommand(t){if(t=M.sanitizeSelectorUserInput(t),!M.isSelectorUserInput(t))throw new _t(nl[0]);this.Gu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Gu(e)}getMaskedElementSettings(t){return t?this.ny(this.Q0):this.$s}Z0(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{z(u.attr)&&z(u.rule)&&h.Attributes.push({selector:u.rule,attrName:u.attr})}),(l=this.ll)===null||l===void 0||l.markClicktalePIIInUse(h),this.Gu(h)}Gu(t){this.$s=this.ny(t)}ny(t){return M.getComputedSelectorSettings(t,this.$s)}}return s})(),VS=60*1e3,US=30*1e3,jS=(()=>{class s{constructor(t,e){this.R=t,this.N=e,this.zu=!1,this.tR=Mr(()=>this.R.refreshSession(),US)}onSessionExpired(t){this.eR=t}isSessionValid(){return this.zu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.tR():this.sR()&&(this.oy=O.now(),this.renewSession(!1))}renewSession(t){this.zu=!0,this.eR(t),this.zu=!1}sR(){return!document.hidden&&(!tt(this.oy)||O.now()-this.oy>VS)}}return s})(),HS=(()=>{class s{constructor(){this.W=null,this.U=null,this.B=!1,this.wi=t=>{for(let e of t)if(Re.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Re.isEditableNode(n)){if(Sr(n)||Yu(n)){Re.markEditableNode(n);continue}ut(n)&&this.ay(n)}}}}start(){this.B||(this.B=!0,this.W=new Ys(t=>X(t,e=>{this.ay(e)})),this.W.observe("[contenteditable]"),this.U=new Ee(this.wi,(t,e)=>e==="added"&&this.iR(t)),this.U.observe())}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}ay(t){qt(t).visitAll(e=>{Re.markEditableNode(e)})}iR(t){Re.isEditableNode(t.host)&&Re.markEditableNode(t)}}return s})();var ko=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),BS=(()=>{class s extends ko{constructor(t){super(),this.nR=t,this.hi=[{boundElement:document,type:"touchstart",listener:e=>this.tt(e)},{boundElement:document,type:"touchmove",listener:e=>this.tt(e)},{boundElement:document,type:"touchend",listener:e=>this.tt(e)}],this.xo=new Wn,this.xo.onGesture((e,i)=>this.Ih(e,i))}Ih(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.hi,t=>Vt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.hi,t=>Ut(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}tt(t){this.nR.tryToExecute("process gesture event",()=>{if(this.xo.isValidTouchEvent(t))switch(t.type){case"touchstart":this.xo.processActionDown(t);break;case"touchmove":this.xo.processActionMove();break;case"touchend":this.xo.processActionUp(t);break}})()}static isSwipe(t){return t.type===vt.FLICK||t.type===vt.DRAG}}return s})();var FS=(()=>{class s{constructor(t){this.Et=t}on(t,e){return i=>{this.Et.hasValidEventTarget(i)&&this.bR(i,t)&&e(i)}}bR(t,e){let i=St(t);return ce.call(i,e)}isMatchesSelectorSupported(){return!!ce}}return s})(),$S=(()=>{class s extends Ot{constructor(){super(),this.fy=0}onStart(){G.isPerfLoggingActive()&&(this.Lo=window.csSetInterval(()=>this.py(),s.RR))}onStop(){G.isPerfLoggingActive()&&(this.py(),csClearInterval(this.Lo))}py(){this.fy>=s.CR||$.counters.methodPerformance.flush()&&this.fy++}}return s.RR=5e3,s.CR=5,s})(),GS=(()=>{class s{constructor(){}init(){this.bc=new $S}onStartTracking(){this.bc.start()}onOptout(){this.bc.stop()}onArtificialPageViewEnd(t){t&&this.bc.stop()}onAfterArtificialPageView(t){t&&this.bc.start()}}return s})();var Yl=(()=>{class s{constructor(){this.$R=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.rd=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return Si(this.$R,n=>Ar(i,n))}canCollect(t,e){return this.GR(t,e)&&this.zR(e)}GR(t,e){return t>=400||t>=200&&t<300&&this.rd.statusCodes.has(t)&&this.qR(e)}qR(t){return Si(this.rd.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}zR(t){return Du(this.rd.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),zS=(()=>{class s extends Yl{constructor(){super(),this.B=!1,this.Xr=null,this.WR=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.j=t}start(){this.B||this.YR()&&(this.XR(),this.Xr&&this.Xr.activate(),this.B=!0)}stop(){this.B&&(this.Xr&&this.Xr.deactivate(),this.B=!1)}YR(){return!!window.fetch&&typeof window.fetch=="function"}KR(t){if(t[0]&&typeof t[0].clone=="function"){let e=ns(t);return e[0]=t[0].clone(),e}return t}XR(){this.Xr||(this.Xr=Qt({target:window,methodName:"fetch",hook:this.WR,hookPrepareArgs:this.KR,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],o=e[1],c=new Request(n,o);if(!z(c.url))return;let l=O.now(),h;try{h=await t}catch(E){if(this.JR(E)||this.Ay(E)||this.QR(E)||this.ZR(E))return;throw E}let[u,d]=csString.prototype.split.call(c.url,"?"),g=ae(u);if(h&&super.canCollect(h.status,g)){let E={library:i,method:c.method,url:g,queryParameters:d,requestTime:l,responseTime:O.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.Ty(c.headers),responseHeaders:this.Ty(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(E.responseHeaders))try{E.responseBody=await h.clone().text()}catch(S){if(this.Ay(S))return}super.isValidBodyType(E.requestHeaders)&&(E.requestBody=await c.text()),this.j(E)}}JR(t){return t instanceof TypeError}Ay(t){return t instanceof DOMException&&t.name==="AbortError"}ZR(t){return t instanceof DOMException&&t.name==="TimeoutError"}QR(t){return t instanceof DOMException&&csArray.prototype.some.call(s.tC,e=>e===t.name)}Ty(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.tC=["NoModificationAllowedError","InvalidStateError","OperationError"],H([D("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),qS=0,WS=(()=>{class s extends Yl{constructor(){super(),this.se=csSymbol("ApiCall"),this.B=!1,this.Kr=null,this.Jr=null,this.Ic=null,this.eC=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.sC=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.iC=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.j=t}start(){this.B||(this.bu(),this.Kr&&this.Kr.activate(),this.Jr&&this.Jr.activate(),this.Ic&&this.Ic.activate(),this.B=!0)}stop(){this.B&&(this.Kr&&this.Kr.deactivate(),this.Jr&&this.Jr.deactivate(),this.B=!1)}bu(){this.Kr||(this.Kr=Qt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.eC,options:{withCallerName:!0}})),this.Jr||(this.Jr=Qt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.sC})),this.Ic||(this.Ic=Qt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.iC}))}interceptOpen(t,e,i){if(!e[1]||!z(e[1]))return;let[n,o]=csString.prototype.split.call(e[1],"?");t[this.se]={library:i,requestTime:O.now(),method:e[0],url:ae(n),queryParameters:o,statusCode:qS,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.se]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.se].url)&&(t[this.se].responseTime=O.now(),t[this.se].statusCode=t.status,t[this.se].responseHeaders=this.rC(t.getAllResponseHeaders()),super.isValidBodyType(t[this.se].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.se].responseBody=t.responseText),this.j(t[this.se]))}interceptSetRequestHeader(t,e){if(!t[this.se])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.se].requestHeaders[i]?t[this.se].requestHeaders[i]+=`, ${n}`:t[this.se].requestHeaders[i]=n)}interceptSend(t,e){t[this.se]&&super.isValidBodyType(t[this.se].requestHeaders)&&typeof e[0]=="string"&&(t[this.se].requestBody=e[0])}rC(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(o))}),e}}return H([D("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),H([D("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),H([D("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),H([D("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),YS=["startDataCollection","data-collection:start"],XS=["data-collection:stop"],KS=(()=>{class s{constructor(t,e){this.ns=t,this.S=e}init(){this.S.register(YS,()=>{this.ns.startDataCollection()}),this.S.register(XS,()=>{this.ns.stopDataCollection()})}}return s})(),An={fromSessionRenewal:!1,isRenewedVisitor:!1},JS=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.ls=i,this.lt=n,this.ir=o,this.L=c,this.by=!1,this.Ry=0,this.nd=!0,this.Cy=!1,this.zs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=An)=>{l&&this.zs||!this.by?this.nC(l,h):this.oC()}}isDataCollectionStarted(){return this.zs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=An){this.aC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.nd=!1}allowStartDataCollection({fromSessionRenewal:t}=An){this.nd=!0,this.Cy&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.zs&&(this.zs=!1,this.w.emitArtificialPageViewEnd(!0),this.ir.stop())}oC(){this.zs||(this.zs=!0,this.L.isSessionValid()?(this.L.refreshSession(),this.ir.start(ys.Artificial)):this.L.renewSession(!1))}aC(t,e){return e&&!this.zs?!1:t?!0:this.E.startMode===Tr.Manual?!1:!Hn(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}nC(t,e){if(this.ls.isActive()||(this.Cy=!0,this.cC()&&(this.Ry++,this.Ry<2))||!this.nd||this.zs&&!t)return;this.by=!0,this.zs=!0,this.lt.init();let i=t?ys.Renewal:ys.Natural;this.ir.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};ot.onDocumentLoaded(n)}cC(){return Hn(this.E)&&this.E.isCsSideloadingHeap()}}return s})(),QS=(()=>{class s{constructor(t){this.od=t}buildApiErrors(t,e){let i=this.od.collectDataPoints(t,e);if(i===null)return null;let n=this.lC(t,i);if(e){let o=this.hC(t,i);return{apiError:n,detailedApiError:o}}return{apiError:n}}hC(t,e){let i=this.Iy(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Iy(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}lC(t,e){let i=this.Iy(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),ZS=(()=>{class s extends ko{constructor(t,e,i){super(),this.Pc=t,this.Oc=e,this.od=i,this.ad=0,this.uC=new QS(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.ad++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.ad--,super.unsubscribe(t)}init(){let t=this.od.computeApiErrorCollectionOptions();this.Pc.setCollectionOptions(t),this.Pc.onEvent(e=>this.Py(e)),this.Oc.setCollectionOptions(t),this.Oc.onEvent(e=>this.Py(e))}onStartTracking(){this.Pc.start(),this.Oc.start()}onStopTracking(){this.Pc.stop(),this.Oc.stop()}Py(t){let e=this.uC.buildApiErrors(t,this.ad!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),tv=(()=>{class s{constructor(t,e,i=!1){this.mt=t,this.Z=e,this._n=i}addUrlMaskingPattern(t){this.mt.addUrlMaskingPattern(t)}anonymize(t){let e=this.Z.removeQueryString(t.url),i={maskingPatterns:this.mt.getUrlMaskingPatterns(),partialMaskingPatterns:this.mt.getPartialUrlMaskingPatterns(),maskNames:this._n};return{...t,url:this.Z.anonymizeUrl(e,i),library:t.library?this.Z.anonymizeUrl(t.library,i):void 0}}}return s})(),ev=(()=>{class s{constructor(){this.dC=64e3,this.fC=5e3,this.pC=2e3,this.Oy=8e3,this.Ms=!!self.TextEncoder,this.Ms&&(this.gC=new TextEncoder)}jo(t){return this.gC.encode(t).byteLength}Ny(t,e,i){let n=0;t[e]&&(n+=this.jo(t[e]),n>this.Oy&&(n=0,t[e]=et.ELLIPSIS)),t[i]&&(n+=this.jo(csJSON.stringify(t[i])),n>this.Oy&&(t[i]=s.truncatedObjectMarker))}mC(t){t.queryParameters&&this.jo(t.queryParameters)>this.pC&&(t.queryParameters=et.ELLIPSIS)}yC(t){t.requestBody&&this.jo(t.requestBody)>this.dC&&(t.requestBody=et.ELLIPSIS),t.responseBody&&this.jo(t.responseBody)>this.fC&&(t.responseBody=et.ELLIPSIS)}truncate(t){this.Ms?(this.mC(t),this.yC(t),this.Ny(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Ny(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[et.ELLIPSIS]:et.ELLIPSIS},s})(),sv=(()=>{let s;return function(r){function t(n){let o="[",c="]",l=[];for(let h=0;h<n.length;++h)if(n[h]===o)csArray.prototype.push.call(l,n[h]);else if(n[h]===c)if(csString.prototype.indexOf.call(n,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let o=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let u=csString.prototype.split.call(c,".");return u[0].length===0&&csArray.prototype.shift.call(u),csArray.prototype.every.call(u,d=>{let g=/^\-?\d+$/.exec(d);return g?parseInt(g[0],10)>=0:d==="$"||/\w+/.test(d)})})}r.isValidJSONPath=e;function i(n,o){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,u=>{if(u[0]==="'"||u[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(u,1,u.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(u,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let u of l)if(h[u]!==void 0)h=h[u];else return;return h}r.getJSONPathValue=i}(s||(s={})),s})(),iv=(()=>{class s{constructor(){this.EC=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.EC.has(t)}}return s})(),rv=(()=>{class s{constructor(){this.SC=64e3,this.vC=100,this.nt={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.My=new iv}_C(t){return t.length<=this.SC}wC(t){let e=t["content-type"];return e!==void 0&&(Dt(e,"application/json")||Dt(e,"application/graphql"))}AC(t,e){return t&&this._C(t)&&this.wC(e)}Nc(t,e,i,n){let o=n==="request"?this.TC:this.bC;if(o!==void 0||this.AC(e,i)){if(o===void 0)try{o=csJSON.parse(e),n==="request"?this.TC=o:this.bC=o}catch{return}let c=sv.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!_s(c))){let l=z(c)?c:csJSON.stringify(c);return et.truncate(l,this.vC,et.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.Nc(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.Nc(e.path,t.requestBody,t.requestHeaders,"request")),tt(i)||tt(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.Nc(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.nt.responseBodyAttributes[e.path]=n:(n=i(n),this.nt.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.Nc(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.nt.requestBodyAttributes[e.path]=n):(n=i(n),this.nt.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.nt.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.nt.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.nt.customResponseHeaders[n]=t.responseHeaders[n]:this.nt.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.nt.customRequestHeaders[n]=t.requestHeaders[n]:this.nt.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.nt.standardRequestHeaders).length>0||Object.keys(this.nt.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.My.isValidStandardHeader(e)&&(this.nt.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.My.isValidStandardHeader(e)&&(this.nt.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.nt.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.nt.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.nt.collectRequestBody=!0)}getCollectedDataPoints(){return this.nt}}return s})(),hi=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr",r.HEAP_API="heap-api.com",r.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),nv=(()=>{class s{constructor(t,e){this.Mc=t,this.D=e}collectDataPoints(t,e){this.nt=new rv;let i=!1;if(this.Mc.collectionRules)for(let n of this.Mc.collectionRules)this.RC(n,t)&&this.CC(n,t)&&this.IC(n,t)&&(i=!0,this.PC(t,n,e));return i||(i=this.OC(t)),i&&e&&this.Mc.collectStandardHeaders&&this.nt.collectStandardHeaders(t),i?this.nt.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Mc.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let n=[hi.CONTENTSQUARE,hi.CLICKTALE,hi.HEAP_API,hi.HEAP_ANALYTICS];return csArray.prototype.push.call(n,hi.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}RC(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}CC(t,e){return t.bodyContent?this.nt.isBodyContentMatching(e,t.bodyContent):!0}IC(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.nt.isBodyAttributeValueFound(e,i)}OC(t){return t.statusCode>=400}PC(t,e,i){e.bodyContent&&this.nt.collectBodyContent(e.bodyContent);let n=Xs(e.bodyAttributePaths,o=>o.primary===1);if(n&&this.nt.collectBodyAttribute(t,n,o=>this.D.anonymizePII(o)),i){this.nt.setCollectQueryParam(e.collectQueryParam),this.nt.setCollectResponseBody(e.collectResponseBody),this.nt.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.nt.collectCustomHeaders(t,c,l=>this.D.anonymizePII(l));let o=vi(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.nt.collectBodyAttribute(t,c,l=>this.D.anonymizePII(l))}}}return s})(),Xl=(()=>{let s;return function(r){function o(h,u,d=!1){let E={message:et.truncate(h,300,et.ELLIPSIS),errorType:"customError"};return(d||l(u))&&(c(u),E.attributes=u),E}r.buildCustomErrorEvent=o;function c(h){for(let u in h){let d=h[u];if(typeof d=="string"&&d.length>30&&(d=et.truncate(d,30,et.ELLIPSIS),h[u]=d),u.length>30){let g=et.truncate(u,30,et.ELLIPSIS);delete h[u],h[g]=d}}}function l(h){let u=Object.keys(h).length;return u>0&&u<=5}}(s||(s={})),s})(),ov=(()=>{class s{constructor(t){var e;this.E=t,this.B=!1,this.z=new bl(i=>{this.onMessageConsole(i.logs,i.level,i.origin)},{levels:(e=t.customErrors.consoleMessageLogLevels)!==null&&e!==void 0?e:[]})}start(){this.B||(this.z.observe(),this.B=!0)}stop(){this.B&&(this.z.disconnect(),this.B=!1)}onEvent(t){this.NC=t}Mh(t){for(let e=0;e<t.length;e++)if(pe(t[e]))return[];return t}Dh(t){if(t===void 0||t==="")return!1;let e=jc(t);return!!po(e,this.E.hostnames)}onMessageConsole(t,e,i){let n=this.Mh(t);if(n.length===0||!this.Dh(i))return;let o=ns(n),c=o[0],l=csArray.prototype.slice.call(o,1),h=Xl.buildCustomErrorEvent(Rl(c,...l),{csLogLevel:e},!0);this.NC(h)}}return H([D("ConsoleMessageTracker: onMessageConsole")],s.prototype,"onMessageConsole",null),s})(),av=20,cv=(()=>{class s extends Ot{constructor(t,e,i,n,o,c){super(),this.cd=t,this.St=e,this.Ti=i,this.J=n,this.qs=o,this.L=c,this.Dc=[],this.Ui=0,this.rr=[]}initStates(){var t;this.Pu(),this.ys=O.now(),this.Dc=[],this.Ui=0,(t=this.qs)===null||t===void 0||t.onEvent(e=>this.tt(e))}trackCustomError(t,e={}){if(!(z(t)&&_s(e)&&Mt(e)))throw new _t(wo[0]);let i=Xl.buildCustomErrorEvent(t,e);this.Ho(i)}onIframeCustomError(t){this.tt(t)}onStart(){var t;this.ld(),(t=this.qs)===null||t===void 0||t.start()}onStop(){var t;(t=this.qs)===null||t===void 0||t.stop()}ld(){this.isStarted&&(csArray.prototype.forEach.call(this.rr,t=>this.Ho(t)),this.rr=[])}Ho(t){if(this.isStarted){let e=this.tt(t);e&&this.J.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.rr,t)}tt(t){if(this.isStarted&&this.Ui<av&&this.L.isSessionValid()){let e=this.MC(t);return csArray.prototype.push.call(this.Dc,e),this.bo(),e}return null}MC(t){let e={...t,rt:this.Ji()};return e.message=this.Ti.anonymize(t.message),e}Pu(){this.cd.removeQueryParams(),this.cd.setQueryParams(this.St.getRequestParameters())}Ji(){return O.now()-this.ys}bo(){this.cd.send({errors:this.Dc}),this.Dc=[],this.Ui+=1}}return s})(),lv="custom-errors",hv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u){this.Ti=t,this.E=e,this.St=i,this.S=n,this.Ei=o,this.Bt=c,this.ft=l,this.qs=h,this.L=u}init(){let t=this.Bt.create(`${this.E.getTrackerUri()}/${lv}`);this.Ws=new cv(t,this.St,this.Ti,this.Ei,this.qs,this.L),this.ft.addListener(this.Ws),this.ut()}ut(){this.S.register(wo,(t,e)=>{this.Ws.trackCustomError(t,e)})}onStartTracking(){this.Ws.start()}onAfterNaturalPageView(){this.Ws.initStates()}onArtificialPageViewEnd(t){t&&this.Ws.stop()}onAfterArtificialPageView(t){this.Ws.initStates(),t&&this.Ws.start()}onBeforeSessionRenewal(){this.Ws.stop()}onOptout(){this.Ws.stop()}}return s})(),uv=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,dv="$1$4CS_ANONYMIZED_NAME$3$6",fv=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,pv="CS_ANONYMIZED_PHONE",gv=(()=>{class s{constructor(t,e){this.D=t,this.Z=e}anonymize(t){return this.Z?csArray.prototype.join.call(csArray.prototype.map.call(af(t),({content:e,isUrl:i})=>{var n;return i?(n=this.Z)===null||n===void 0?void 0:n.anonymizeUrl(e,{maskNames:!0}):this.Dy(e)}),""):this.Dy(t)}Dy(t){t=this.D.anonymizePII(t);let e=t;t=this._n(t),t!==e&&($.counters.redactedPII.count("name"),$.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.DC(t),t!==i&&($.counters.redactedPII.count("phone"),$.counters.redactedPII.count("phone-in-custom-error")),t}_n(t){return csString.prototype.replace.call(t,uv,dv)}DC(t){return csString.prototype.replace.call(t,fv,pv)}}return s})(),mv=20,yv="Custom Error:",Ev="https://cserror.com/texterror.js",Sv=(()=>{class s extends Ot{constructor(t,e,i,n,o,c,l){super(),this.Ys=t,this.ud=e,this.St=i,this.Se=n,this.Ei=o,this.C=c,this.L=l,this.kc=[],this.ji=0,this.rr=[]}initStates(){this.ys=O.now(),this.ud.removeQueryParams(),this.ud.setQueryParams(this.St.getRequestParameters()),this.kc=[],this.ji=0}onStart(){this.Ys.subscribe(s.jt,t=>this.tt(t)),this.ld()}onStop(){this.Ys.unsubscribe(s.jt)}onIframeJavascriptError(t){this.tt(t)}trackCustomError(t){let e={errorType:"jsError",message:`${yv} ${t}`,lineno:1,colno:1,filename:Ev};this.Ho(e)}Ho(t){if(this.isStarted){let e=this.tt(t);e&&this.Ei.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.rr,t)}ld(){this.isStarted&&(csArray.prototype.forEach.call(this.rr,t=>this.Ho(t)),this.rr=[])}tt(t){if(this.isStarted&&this.ji<mv&&this.L.isSessionValid()){let e={...t,pageUrl:this.C.getAnonymizedUrl(),rt:this.Ji()};return this.Se.anonymize(e),csArray.prototype.push.call(this.kc,e),this.bo(),e}return null}Ji(){return O.now()-this.ys}bo(){this.ud.send({errors:this.kc}),this.kc=[],this.ji+=1}}return s.jt="JavaScriptErrorsService",s})(),vv="errors",_v=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d){this.Ys=t,this.Se=e,this.E=i,this.St=n,this.ft=o,this.S=c,this.Ei=l,this.C=h,this.Bt=u,this.L=d}init(){let t=this.Bt.create(`${this.E.getTrackerUri()}/${vv}`);this.Xs=new Sv(this.Ys,t,this.St,this.Se,this.Ei,this.C,this.L),this.ft.addListener(this.Xs),this.ut()}ut(){this.E.jsCustomErrorsEnabled&&!this.E.customErrors.enabled&&this.S.register(wo,t=>{this.Xs.trackCustomError(t)})}onStartTracking(){this.Xs.start()}onAfterNaturalPageView(){this.Xs.initStates()}onArtificialPageViewEnd(t){t&&this.Xs.stop()}onAfterArtificialPageView(t){this.Xs.initStates(),t&&this.Xs.start()}onBeforeSessionRenewal(){this.Xs.stop()}onOptout(){this.Xs.stop()}}return s})(),wv=(()=>{class s extends ko{constructor(){super(),this.z=new Tl(t=>this.errorListener(t))}onStartTracking(){this.z.observe()}onStopTracking(){this.z.disconnect()}errorListener(t){let e=this.kC(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}xC(t){return t=t!=null?t:"[NO ERROR MESSAGE]",et.truncate(t,s.Ph,et.ELLIPSIS)}LC(t){return!t||Jt(t)?"":et.truncate(t,s.Oh,et.ELLIPSIS)}kC(t){return{errorType:"jsError",message:this.xC(t.message),filename:this.LC(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Ph=1024,s.Oh=150,H([D("Event handler type: error")],s.prototype,"errorListener",null),s})(),Av="CS_ANONYMIZED_VALUE",Tv=(()=>{class s{constructor(t,e){this.D=t,this.C=e}anonymize(t){return z(t.message)&&(t.message=this.VC(t.message),t.message=this.D.anonymizePII(t.message)),z(t.filename)&&(t.filename=this.C.computeOverriddenUrl(t.filename)),t}VC(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Av}'`)}}return s})();var bv=(()=>{class s{constructor(t){this.S=t}init(){this.zy(s.mI,$c),this.zy(s.yI,Fc)}zy(t,e){this.S.register([t],(i,n)=>{!z(i)||!(z(n)||Oe(n))||G.error(n,`${e}${i}`)})}}return s.yI="logSnippetError",s.mI="logImplementationSnippetError",s})();var Rv=(()=>{class s{constructor(t,e){this.Gt=t,this.E=e,this.qy=!1}enableRecordingContext(t,e,i){this.qy=!0,this.Hr=t,this.R=e,this.ao=i}getRecordingContext(){var t,e,i;if(!this.qy)return{isRecording:!1,recordingStartTimestamp:0,etrState:ee.ETR_OFF,etrStatus:zt.ETR_DISABLED,collectState:N.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.Hr.isRecording(),useAnonymization:this.Gt.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Hr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Hr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Hr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?ee.ETR_ON:ee.ETR_OFF,etrStatus:this.ao.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:N.ANALYTICS_ONLY}}}return s})(),bi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var Cv=(()=>{class s extends Ot{constructor(t,e,i,n,o,c){super(),this._e=t,this.lt=e,this.Yt=i,this.mr=n,this.nn=o,this.it=c}onStart(){var t,e,i;this.Yt.start(),this._e.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this._e.startIdentifier(),(e=this.mr)===null||e===void 0||e.start(),(i=this.nn)===null||i===void 0||i.start()}onStop(){var t,e;this.Yt.stop(),this._e.stopIdentifier(),(t=this.mr)===null||t===void 0||t.stop(),(e=this.nn)===null||e===void 0||e.stop()}}return s})(),Iv=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.lt=e,this.re=i,this.Yt=n,this.Pn=o,this.ht=c,this.On=yo(this.Pn)}getSensitiveStatus(){var t,e;return{started:this.re.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Yt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.re.isStarted,i=this.it.shouldUseAnonymization();return e?M.isMaskedElement(t)||M.isMaskedElementChild(t)?Gt.MASKED:ml.shouldEncrypt(t)?Gt.ENCRYPTED:Re.isEditableNode(t)?Gt.ANONYMIZED:i?oe.isWhitelistedElement(t)?Gt.CAPTURED:Gt.ANONYMIZED:Gt.CAPTURED:Gt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.re.isStarted)return Gt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return M.isMaskedAttribute(t,e)?Gt.MASKED:i?Ks(t)||oe.isWhitelistedElement(t)||this.On.has(e)?Gt.CAPTURED:Gt.ANONYMIZED:Gt.CAPTURED}}return s})(),Pv=(()=>{class s{constructor(t){this.L=t}onAfterVisitorRenewal(){this.L.renewSession(!0)}}return s})(),Ov=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Ec=(()=>{let s;return function(r){function t(d,g){for(let E of d)if(i(E,g))return!0;return!1}r.isUrlMatching=t;function e(d,g){if(z(g)){for(let E of d)if(i(E,g))return!0}else if(gr(g)){for(let E of d)if(i(E,csString(g)))return!0}return!1}r.isMatching=e;function i(d,g){let E=n(d,g);return d.negate?!E:E}function n(d,g){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(g=(new csDate(g).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return z(d.pattern)?csString.prototype.toLowerCase.call(g)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return g===d.pattern||g===csString(d.pattern);case"number":return Mt(g)?Number(g)===Number(d.pattern):!1;default:return g===d.pattern}case"starts_with":return z(d.pattern)?csString.prototype.indexOf.call(g,d.pattern)===0:!1;case"ends_with":return z(d.pattern)?Ci(g,d.pattern):!1;case"contains":return z(d.pattern)?csString.prototype.indexOf.call(g,d.pattern)!==-1:!1;case"regex":if(!z(d.pattern))return!1;try{return new csRegExp(d.pattern).test(g)}catch(E){return G.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case"simple":return z(d.pattern)?u(g)===u(d.pattern):!1;case"greater_than":return Number(g)>Number(d.pattern);case"less_than":return Number(g)<Number(d.pattern);case"exact_date":{let E=Number(d.pattern);if(!te(E))return!1;let S=new csDate(E*1e3);return new csDate(g).toDateString()===S.toDateString()}case"exact_days_ago":return o(d,g);case"more_than_days_ago":return c(d,g);case"less_than_days_ago":return l(d,g);case"unknown":return h(g);default:return G.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function o(d,g){let E=new csDate,S=E.setDate(E.getDate()-Number(d.pattern)),P=new csDate(S);return new csDate(g).toDateString()===P.toDateString()}function c(d,g){let E=Number(d.pattern);if(!te(E))return!1;let S=Number(E)+1,P=new csDate,C=new csDate(P);return C.setDate(P.getDate()-S),new csDate(g).getTime()<=C.getTime()}function l(d,g){let E=Number(d.pattern);if(!te(E))return!1;if(E===0)return o(d,g);let S=new csDate,P=new csDate(S);return P.setDate(S.getDate()-E),new csDate(g).getTime()>=P.getTime()}function h(d){return Mt(d)?z(d)?csString.prototype.trim.call(d)==="":gr(d)?d===!0:te(d)?d!==0:!1:!0}function u(d){let g=Dt(d,"http://")||Dt(d,"https://")?d:`https://${d}`,E=go(g);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):d}}(s||(s={})),s})(),Tn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===Ov.URL},Nv=(()=>{class s{constructor(){this.Yy=new Eo,this.Xy=[],this.Ky=[]}setTargetingRules(t){this.Yy.setRegexRules(csArray.prototype.filter.call(t,Tn.isURL));for(let e of t)Tn.isLegacyURL(e)?csArray.prototype.push.call(this.Xy,e):Tn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Ky,e)}matchUrl(t){return Ec.isUrlMatching(this.Xy,t)||this.Yy.evaluateUrl(t)}matchTrigger(t){return Ec.isMatching(this.Ky,t)}}return s})(),Mv=(()=>{class s extends Ot{constructor(t,e,i){super(),this.Jy=t,this.yd=e,this.C=i}init(){this.Ed=new Nv,this.Jy&&this.Ed.setTargetingRules(this.Jy)}onStart(){}checkTargetingRules(){let t=this.C.getAnonymizedUrl();this.yd(this.Sd(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.yd(this.Sd(t,"url"))}onExternalEvent(t){this.isStarted&&this.yd(this.Sd(t.name,"trigger"))}Sd(t,e){var i,n;return e==="url"&&z(t)&&(!((i=this.Ed)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Ed)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),Dv={MATCHED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.RECORDING_RULES_TARGETING,[N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:N.RECORDING_RULES_TARGETING},MISSED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},kv=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.bt=i,this.J=n,this.C=o,this.R=c,this.ns=l,this.nr=!1,this.Wo=(h=!1)=>{this.nr&&this.E.isSMB&&this.ns.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===Tr.Automatic&&this.ns.startDataCollection({fromSessionRenewal:h})},this.AI=h=>{this.nr||(this.nr=h,this.Qy(),this.Wo())}}init(){this.E.isSMB&&this.ns.disableStartDataCollection(),this.an=new Mv(this.E.recordTargetingRules,this.AI,this.C),this.J.addListener(this.an),this.an.init()}start(){this.an.start()}stop(){this.an.stop()}maybeStartDataCollection(t){if(t){this.Wo(t);return}if(this.TI()){this.nr=!0,this.Wo(),this.stop();return}this.an.checkTargetingRules()}onAfterArtificialPageView(){this.an.checkTargetingRules()}onCollectStateChange(t){if(this.Zy(t)){this.stop();return}let e=t===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.nr&&e||csSetTimeout(()=>this.tE(t),0)}onStartTracking(){this.Qy()}TI(){let t=this.R.getSession();return!!(t&&this.Zy(t.collectState))}Zy(t){return t===N.RECORDING_RULES_TARGETING||t===N.ANALYTICS_ONLY_RULES_TARGETING}Qy(){var t;if(this.nr){let e=this.R.getSession(),i=this.bt.getInitialCollectState();this.tE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.ns.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}tE(t){let e=Dv[this.nr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,ee.ETR_OFF)}}return s})(),Kl=(()=>{class s{constructor(){this.eE=new Set,this.sE=[],this.vd=new Set,this._d=[]}addUrlMaskingPattern(t){if(this.eE.has(t))return;this.eE.add(t);let e=Sa(t);csArray.prototype.push.call(this.sE,e)}getUrlMaskingPatterns(){return this.sE}resetPartialUrlMaskingPatterns(){this.vd.clear(),this._d=[]}addPartialUrlMaskingPattern(t){if(this.vd.has(t))return;this.vd.add(t);let e=Sa(t);csArray.prototype.push.call(this._d,e)}getPartialUrlMaskingPatterns(){return this._d}}return s})(),xv=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.R=i,this.ys=O.now()}resetStartTime(){this.ys=O.now()}getSessionData(){let{projectId:t}=this.E,e=this.N.getVisitor();e==null&&G.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&G.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:O.now()-this.ys}}}return s})(),Lv=["clearSession"],Vv=["extendSession"];var Uv=["getSessionData"],jv=["session:start:newVisitor"],Hv=["session:clear:visitor"],Bv=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.R=i,this.S=n}init(){this.wd=new xv(this.E,this.N,this.R),this.S.register(Lv,()=>this.R.removeSession()),this.S.register(Vv,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(Uv,()=>this.wd.getSessionData(),{disableApplyPending:!0}),this.S.register(jv,()=>this.N.renewVisitor()),this.S.register(Hv,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.wd.resetStartTime()}onAfterArtificialPageView(){this.wd.resetStartTime()}onOptout(){this.N.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),Fv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,E,S,P,C,A,T,x,R,_,j,U,K,gt,jt,Yt,v,L,V,F,dt,At,Se,os,Ms,Ds,Ne){this.St=t,this.or=e,this.fe=i,this.N=n,this.R=o,this.L=c,this.Ps=l,this.w=h,this.S=u,this.yl=d,this.E=g,this.El=E,this.ls=S,this.An=P,this.Ct=C,this.D=A,this.Q=T,this.Z=x,this.C=R,this.bI=_,this.J=j,this.ft=U,this.Tt=K,this.iE=gt,this.Wt=jt,this.RI=Yt,this.O=v,this.Bt=L,this.M=V,this.Nt=F,this.K=dt,this.bt=At,this.lt=Se,this.ze=os,this.rs=Ms,this.es=Ds,this.ss=Ne,this.CI=Me=>{this.w.emitBeforeSessionRenewal(),this.cn(!0,Me),this.w.emitAfterSessionRenewal()},this.II=Me=>{this.w.emitBeforeSessionRenewal(),this.bt.refreshQuota(ie=>{ie!==N.QUOTA_REACHED&&(this.cn(!0,Me),this.w.emitAfterSessionRenewal())})}}start(){if(this.El.init(),this.ls.init(),this.ls.isActive())return;let t,e,i,n,o,c,l,h,u,d,g,E,S,P,C,A,T,x,R;this.O.schedule(()=>{C=new Pv(this.L),E=new FS(this.Q),S=new bS(()=>{}),A=new RS,R=new HS;let _=new Cv(S,this.lt,A,x,R,this.Ad());P=new Iv(this.Ad(),this.lt,_,A,this.E.whitelistedAttributes,T);let j=new Gp(this.w,this.S,this.lt,_,A,T,x);j.init(),this.w.addListener(j),t=new IE(this.E,this.or,this.N,this.Q,E,this.S,this.L,new BS(G),this.ft,this.Bt,this.J,P,this.wt,this.es,this.ss),e=new Kp(this.S,this.R,this.E,this.St,this.fe,this.D),g=new Rv(P,this.E);let U=null,K=new Dp;i=new jE(this.N,this.R,this.S,this.ft,U,this.E,K,g),n=new rg(this.E,this.or,this.N,this.S,this.D,this.L,this.C);let gt;this.ir=new Hp(this.E,this.S,this.w,this.or,this.N,this.R,this.Ps,this.Ct,this.Tt,this.C,this.Wt,K,this.J,this.ze,gt),this.rE=new Bv(this.E,this.N,this.R,this.S),this.ns=new JS(this.E,this.w,this.ls,this.lt,this.ir,this.L),new KS(this.ns,this.S).init(),l=new cg(this.E,this.S,this.fe,this.or,this.J),h=new bv(this.S),u=new GS}),this.E.apiErrors.enabled&&this.O.schedule(()=>{this.mt=new Kl,this.PI=new zE(this.S,this.mt),this.PI.init()}),this.E.apiErrors.enabled&&this.O.schedule(()=>{var _,j;let U=new nv(this.E.apiErrors,this.D);this.gt=new ZS(new WS,new zS,U),this.ve=new tv(this.mt,this.Z,!!(!((j=(_=this.E)===null||_===void 0?void 0:_.experimental)===null||j===void 0)&&j.anonymizeNameInUrls)),this.Dr=new ev;let K=new FE(this.gt,this.ve,this.E,this.or,this.ft,this.S,this.Bt,this.L);K.init(),this.w.addListener(K)}),this.E.customErrors.enabled&&this.O.schedule(()=>{var _,j,U;let K;!((_=this.E.customErrors.consoleMessageLogLevels)===null||_===void 0)&&_.length&&(K=new ov(this.E)),this.Ti=new gv(this.D,!((U=(j=this.E)===null||j===void 0?void 0:j.experimental)===null||U===void 0)&&U.anonymizeNameInUrls?this.Z:void 0);let gt=new hv(this.Ti,this.E,this.or,this.S,this.J,this.Bt,this.ft,K,this.L);gt.init(),this.w.addListener(gt)}),this.E.jsErrorsEnabled&&this.O.schedule(()=>{this.Ys=new wv,this.Se=new Tv(this.D,this.C);let _=new _v(this.Ys,this.Se,this.E,this.or,this.ft,this.S,this.J,this.C,this.Bt,this.L);_.init(),this.w.addListener(_)}),this.O.schedule(()=>{this.An.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{this.iE.init()}),this.O.schedule(()=>{this.ir.init()}),this.O.schedule(()=>{this.rE.init()}),this.O.schedule(()=>{l.init()}),this.O.schedule(()=>{this.bI.init()}),this.O.schedule(()=>{h.init()}),this.O.schedule(()=>{u.init()}),this.O.schedule(()=>{this.RI.init()}),this.O.schedule(()=>{this.w.addListener(this.rE),this.w.addListener(this.yl),this.w.addListener(t),this.w.addListener(this.An),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.iE),this.w.addListener(this.ir),this.w.addListener(l),this.w.addListener(e),this.w.addListener(u),this.w.addListener(C)}),bi.isRecordingSupported()&&this.O.schedule(()=>{let _=new tE(g,this.R,this.E,this.St,this.S,this.D,this.L,S,this.Se,this.gt,this.ve,this.mt,this.w,this.J,this.ft,this.Wt,this.Bt,this.Z,this.Dr,this.Ad(),this.Ti,T);_.init(),this.w.addListener(_),i.setRecordingService(_.recordingService)}),this.O.schedule(()=>{var _;let j,U}),this.O.schedule(()=>{t.init()}),this.O.schedule(()=>{this.E.isQuotaEnabled()?this.L.onSessionExpired(_=>{this.II(_)}):this.L.onSessionExpired(_=>{this.CI(_)}),this.cn()})}cn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Yo||(this.Yo=new kv(this.E,this.w,this.bt,this.J,this.C,this.R,this.ns),this.w.addListener(this.Yo),this.Yo.init(),this.Yo.start(),this.S.start(),(i=this.wt)===null||i===void 0||i.start()),this.Yo.maybeStartDataCollection(t);return}this.S.start(),(n=this.wt)===null||n===void 0||n.start(),this.ns.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}Ad(){if(this.it)return this.it;let t=new Eo;return this.it=new TS(this.E,this.C,t,this.Ct),this.it.init(),this.it.shouldUseAnonymization()&&$.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Jl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),$v=(()=>{class s extends Jl{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.Td=i,this.C=n,this.bd=o,this.Rd=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Rd=!0,this.bd.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===N.QUOTA_REACHED||t.collectState===N.RECORDING_RULES_TARGETING||t.collectState===N.RECORDING_TEMPORARILY)&&(t.collectState=N.ANALYTICS_ONLY),t}computeInitialCollectState(){return ts.isReplayConsentNeeded(this.configuration)?N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.jc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.jc()}jc(){if(!bi.isRecordingSupported())return N.ANALYTICS_ONLY;let t=N.ANALYTICS_ONLY,e=ee.ETR_OFF;return ws.percentage()<this.configuration.replayRecordingRate||this.Td.isForceReplayRecorded()?t=N.RECORDING_GLOBAL_SAMPLING:this.Rd&&this.bd.evaluateUrl(this.C.getAnonymizedUrl())&&(t=N.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=ee.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!bi.isRecordingSupported())return N.ANALYTICS_ONLY;if(ts.isRecordingBlockedByConsent(t))return t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===N.RECORDING_GLOBAL_SAMPLING)return N.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?ee.ETR_ON:ee.ETR_OFF;return this.Rd&&this.bd.evaluateUrl(this.C.getAnonymizedUrl())?(this.w.emitCollectStateChange(N.RECORDING_URL_SAMPLING,e),N.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(N.ANALYTICS_ONLY,e),N.ANALYTICS_ONLY)}isReplayRecorded(t){return ts.isRecordingBlockedByConsent(t)?!1:t.collectState===N.RECORDING_TEMPORARILY||t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return N.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),ne="_cs_s",so=18e5,bn=".",Gv=13,cr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),zv=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i,this.ne=null,this.Cd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?sl(e):null}getRawSession(t){if(t){let u=this.Id();return jn(u)}let{sessionString:e,status:i}=this.OI(),n=jn(e);if(i!==cr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Id();if(!o)return null;let c=csString.prototype.split.call(o,bn);if(!s.nE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.NI(h),n}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}set(t,e=so){var i;let n=O.now()+e,o=yp(t);o+=`${bn}${n}`,this.MI(o,n),this.E.cookielessTrackingEnabled?this.K.setItem(ne,o):(this.M.set(ne,o,e),(i=this.Ni)===null||i===void 0||i.call(this,ne,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(ne):(this.M.delete(ne),(t=this.Mi)===null||t===void 0||t.call(this,ne)),this.DI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.M.delete(ne,Nr.CURRENT_DOMAIN):this.M.delete(ne,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&_o(t)}MI(t,e){this.ne={sessionString:t,expires:e}}OI(){return this.ne?this.ne&&O.now()<=this.ne.expires?{sessionString:this.ne.sessionString,status:cr.FOUND}:{sessionString:this.ne.sessionString,status:cr.EXPIRED}:{sessionString:this.Id(),status:cr.NOT_FOUND}}DI(){this.ne=null}NI(t){this.ne&&(this.ne.expires=t,this.Cd=!0)}isCacheRefreshed(){return this.Cd}resetCacheRefreshed(){this.Cd=!1}Id(){if(this.E.cookielessTrackingEnabled){let e=this.K.getItem(ne);return!e||this.oE(e)?null:e}let t=this.M.get(ne);return!t||this.oE(t)?null:t}oE(t){let e=csString.prototype.split.call(t,bn);if(!s.nE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static nE(t){return t[t.length-1].length===Gv}}return s})(),qv=(()=>{class s extends Jl{constructor(t,e,i){super(t),this.configuration=t,this.Xo=e,this.w=i,this.kI=N.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.aE=t,this.Ko=void 0,this.xI()}init(t){this.LI();let e=mt.get(ne);if(e!==null&&_o(e)){let i=Ep(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==N.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==N.QUOTA_REACHED}computeInitialCollectState(t){return this.Ko?(this.w.emitCollectStateChange(this.Ko,this.configuration.malkaEtrEnabled?ee.ETR_ON:ee.ETR_OFF),this.Ko):(G.warn("Quota file error computeInitialCollectState() called before quota answered"),N.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===N.QUOTA_REACHED?N.QUOTA_REACHED:!bi.isRecordingSupported()&&this.isReplayRecorded(t)?N.ANALYTICS_ONLY:t.collectState===N.RECORDING_RULES_TARGETING?N.RECORDING_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RULES_TARGETING?N.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===N.RECORDING_GLOBAL_SAMPLING?N.RECORDING_GLOBAL_SAMPLING:N.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Ko||N.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return N.ANALYTICS_ONLY}Jo(t){this.Ko=t,this.aE&&this.aE(t)}LI(){this.Xo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Xo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Xo.onLoad(t=>this.quotaFileHandler(t))}xI(){this.Xo.isInProgress()||this.Xo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.VI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;G.warn(e),this.Jo(this.kI)}VI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&ws.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?bi.isRecordingSupported()?this.Jo(N.RECORDING_GLOBAL_SAMPLING):this.Jo(N.ANALYTICS_ONLY):e&&!i?this.Jo(N.ANALYTICS_ONLY):this.Jo(N.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return N.ANALYTICS_ONLY}}return H([D("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),H([D("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var Wv=(()=>{class s{constructor(t,e,i,n,o){this.N=t,this.R=e,this.ws=i,this.Tt=n,this.E=o}get(){return{exclusion:this.ws.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.R.getSession(),cvars:this.Tt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.ws.exclude(this.E),this.N.removeVisitor(),this.R.removeSession(),this.Tt.removeCustomVariablesSession()}include(t){this.ws.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.Tt.setCustomVariableSession(t.cvars):this.Tt.removeCustomVariablesSession()}}return s})();var xo=60*1e3,Yv=60*xo,Xv=4*Yv-xo,Bs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Kv=(()=>{class s{constructor(t,e,i,n,o){this.Re=t,this.bt=e,this.w=i,this.$I=n,this.GI=o,this.Qo=null,this.Od=0,this.Zo=Bs.NO}setDynamicVariablesService(t){this.zI=t}createOrUpdateSession(){this.Nd(),this.qI=O.now(),this.Od=0;let t=this.hE();t===null?(t=this.WI(),this.jc(t),this.w.emitSessionCreated()):(t=this.bt.sanitizeSessionCollectState(t),this.YI(t),t.collectState=this.bt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.bt.getInitialCollectState(),t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Zo=Bs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Zo=Bs.WITHDRAWN}jc(t){this.Zo===Bs.WITHDRAWN?(t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)):this.Zo===Bs.GRANTED?t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.bt.computeInitialCollectState(t),this.Zo=Bs.NO}WI(){return{pageNumber:1,collectState:this.bt.getInitialCollectState(),replayConsent:this.$I?Un.NOT_EXPRESSED:Un.UNNECESSARY,etrStatus:zt.ETR_NOT_SAVED_SESSION}}YI(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.bt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===N.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Re.get()}hE(){return this.Re.get(!0)}doesSessionExist(){return this.Re.get()!==null}setSession(t){this.Re.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.hE();t&&this.setSession(t)}removeSession(){this.Re.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.XI(t);return this.KI(e)}KI(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Zc(i)){let n=mp[i]||i;csArray.prototype.push.call(e,n)}}),e}XI(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.GI&&csArray.prototype.push.call(e,N.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Re.getRawSession();return this.Re.isValid(t)}handleSubdomainChange(){this.Re.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Re.isCacheRefreshed();return e&&t&&this.Re.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Qo||this.uE()}extendSession(){let t=this.getSession();return t===null?(G.warn("extendSession is trying to extend an expired session"),this.Nd(),!1):(this.setSession(t),!0)}uE(){if(this.JI()){this.Nd();return}this.extendSession()&&(this.QI(),this.ZI())}ZI(){this.Qo=window.csSetTimeout(()=>{this.uE()},so-xo)}JI(){return Xv-(O.now()+so-this.qI)<0}Nd(){this.Qo&&(window.csClearTimeout(this.Qo),this.Qo=null)}QI(){this.Od+=1,this.zI.trackDynamicVariable("session_expiry_update",this.Od)}}return s})();var Jv=(()=>{class s{constructor(t,e,i){this.N=t,this.R=e,this.sP=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.R.handleSubdomainChange(),this.sP.handleSubdomainChange())}}return s})(),Rn="_cs_inc",Qv=(()=>{class s{constructor(t,e){this.xt=t,this.M=e}isForceIncluded(){return this.iP()||this.rP()}isForceReplayRecorded(){return this.nP(N.RECORDING_GLOBAL_SAMPLING)}iP(){return this.M.get(Rn)!==null}nP(t){return this.M.get(Rn)===t}rP(){return csString.prototype.indexOf.call(this.xt.href,Rn)>0}}return s})(),Zv=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.ws=i}clear(){this.oP()&&(this.dE=this.N.getVisitor(),this.N.removeVisitor()),this.aP()&&this.ws.removeExclusion()}oP(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}aP(){return this.ws.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.dE&&this.N.setVisitor(this.dE)}}return s})(),t_=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.N=e,this.ws=i,this.fE=n,this.cP=o,this.lP=c,this.hP=l,this.Td=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.hP)===null||e===void 0||e.start(()=>this.xd(t)):(i=this.lP)===null||i===void 0||i.applyUpToDate(()=>this.xd(t)):this.xd(t)}xd(t){this.cP.handle(),this.fE.clear(),this.uP()?(this.fE.restoreClearedVisitor(),t(!0)):(this.ws.exclude(this.E),t(!1))}uP(){let t=ws.boolean(this.E.sampleRate);return this.Td.isForceIncluded()||!this.ws.isExcluded()&&this.N.doesVisitorExist()||!this.ws.isExcluded()&&t}}return s})(),e_=(()=>{class s{constructor(t,e,i,n){this.E=t,this.pt=e,this.w=i,this.R=n,this.dP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.fP(),(t=this.R)===null||t===void 0||t.removeSession()),this.pP(e),this.setVisitor(e)}fP(){return{id:CS.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:sa(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}pP(t){let e=sa();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.pE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.pt.get()}setVisitor(t){this.pt.set(t)}doesVisitorExist(){return this.pt.get()!==null}resetVisitor(){this.gE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.pt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.pt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.pE===void 0?!1:t.visitsCount!==this.pE}gP(){return!tt(this.mE)||O.now()-this.mE>this.dP}renewVisitor(){this.gP()?(this.mE=O.now(),this.gE(),this.w.emitAfterVisitorRenewal()):G.warn("session:start:newVisitor is trying to renew visitor under time limit")}gE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ue="_cs_id",s_=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.K.getItem(ue):t=this.M.get(ue),t?(up(t)||G.warn(`Invalid visitor string: ${t}`),lp(t)):null}set(t){var e;let i=hp(t);if(this.E.cookielessTrackingEnabled)this.K.setItem(ue,i);else{let n=new csDate(t.expires);this.M.set(ue,i,n),(e=this.Ni)===null||e===void 0||e.call(this,ue,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(ue):(this.M.delete(ue),(t=this.Mi)===null||t===void 0||t.call(this,ue))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.M.delete(ue,Nr.CURRENT_DOMAIN):this.M.delete(ue,this.M.getRootDomain()),this.set(t))}}return s})(),i_=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Oi=e,this.pr=i,this.O=n,this.w=o,this.K=c}initWithQuota(){if(!this.E.collectionEnabled){this.yE();return}let t=new cS(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.bt=new qv(this.E,t,this.w),this.bt.init((e,i)=>{e?this.init():this.yE(),OS(i)&&(PS.set(Do.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent(IS)))})}mP(){this.O.schedule(()=>{var t;this.D=new Js,this.Z=new Nf(this.D),this.C=new MS(window.location,this.Z),this.M=new Nr(this.E,this.C,this.Oi),this.M.init(),this.Nt=new hS;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new Kf,this.w.addListener(e)),this.S=new Zf([Qf.UXA],e),this.J=new tp,this.lt=new LS(e),this.Ct=new _S(this.E,new vS(this.E,this.M,this.Nt),this.w)})}yE(){}init(){fi.isSupported()&&fi.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,u,d,g,E,S,P,C,A,T,x,R,_,j,U,K,gt,jt,Yt,v,L,V;this.mP();let F=new JE;this.w.addListener(F),this.O.schedule(()=>{g=new Qv(window.location,this.M),new fS().init(),E=Gl.create(),d=new zl(E),this.bt===void 0&&(this.bt=new $v(this.E,this.w,g,this.C,new Eo),this.bt.init())}),this.O.schedule(()=>{t=new zv(this.E,this.M,this.K),e=new Kv(t,this.bt,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new s_(this.E,this.M,this.K),n=new e_(this.E,i,this.w,e),this.pr.setContext(n,e)}),this.O.schedule(()=>{c=new Jv(n,e,this.Ct),l=new vp(this.E,this.M,this.K),h=new Tp(window.location,l),u=new Ap(h),C=new Zv(this.E,n,h),jt=new ap(Pe,this.E);let dt;_=new $f(jt,this.E.isChild,dt),j=new Gf(jt),U=new zf(jt),K=new Wf,gt=new Ff(_,j,U,K),A=new Jf(this.S,gt),T=new Pp(this.C),x=new Rp(T,this.S);let At=new _p(this.E,this.M,this.K);Yt=new AS(this.D,At),R=new Bp(this.S,Yt);let Se=new Wv(n,e,h,Yt,this.E)}),this.O.schedule(()=>{new t_(this.E,n,h,C,c,S,o,g).compute(At=>{this.O.schedule(()=>{var Se,os,Ms,Ds;A.init();let Ne=new SS(this.E,this.S,this.Ct,e,this.w),Me=new YE(this.E,this.M,this.Nt),ie=new XE(this.w,window.location,Me),Tt=new WE(this.S,ie),Xt=new DS(this.S,this.E),Ui=new NS(this.Z,new Kl),Lr=new jS(e,n),Vr,ji,Ur,Hi=new yc(this.E,n,e,P),Bi=new yc(this.E,n,e,P,ji);At?(this.w.emitInitTracking(),new Fv(Hi,Bi,E,n,e,Lr,Ui,this.w,this.S,A,this.E,Tt,ie,Ne,this.Ct,this.D,jt,this.Z,this.C,Xt,this.J,gt,Yt,R,T,x,this.O,d,this.M,this.Nt,this.K,this.bt,this.lt,Ur,Vr,L,V).start()):new wp(this.w,this.S,A,Tt,ie,u,Ne).start()})})})}}return s})(),ms=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(T){let x=T.source,R=T.data;if(c(R)){let _=()=>{let j=n(t,R);g(j,()=>x.postMessage("csBundleLoaded",T.origin))};e=R.token,A(i.loadBundle),l(T.origin)&&_()}}};function n(T,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(T,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function o(){return e}r.getToken=o;function c(T){return T&&T.type==="csBundleInjection"&&l(T.domain)&&u(T.version)&&h(T.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(T){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(T)||r.hjDomainRegex.test(T)}r.isAuthorizedDomain=l;function h(T){return/^[a-zA-Z0-9]+$/.test(T)}r.isAuthorizedToken=h;function u(T){return/^[a-zA-Z0-9\.]+$/.test(T)}r.isAuthorizedTagVersion=u;function d(){let T=window.opener||window.parent;return window!==T&&window.addEventListener}r.isActivable=d;function g(T,x){let R=document.createElement("script");R.type="text/javascript",R.async=!0,R.src=T,R.onload=x,R.charset="utf-8",document.head.appendChild(R)}r.addScript=g;function E(T){let x=document.createElement("link");x.rel="stylesheet",x.href=T,document.head.appendChild(x)}r.addStyle=E;function S(T){return`${T}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function P(){C(i.loadBundle)}r.waitForBundleInjection=P;function C(T){window.addEventListener("message",T,!1)}r.listen=C;function A(T){window.removeEventListener("message",T,!1)}r.removeListener=A}(s||(s={})),s})(),Sc="_hp_ved",r_=18e5,n_="/js/ved.js",o_="/css/ved.css",a_="/js/ved.css",c_=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),l_=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Cn=(()=>{let s;return function(r){let t=!1,e;function i(g){return e+g}function n(){let g=[i(o_),i(a_)];csArray.prototype.forEach.call(g,E=>{ms.addStyle(E)})}function o(g){let E=new csRegExp("(^|;)[ ]*"+g+"=([^;]*)"),S=E.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(g,E,S){let P=encodeURIComponent(g)+"="+encodeURIComponent(E),C=new csDate;C.setTime(C.getTime()+S);let A=P+"; expires="+C.toUTCString()+"; path=/";document.cookie=A}function l(){c(Sc,"on",r_)}function h(){return o(Sc)==="on"}r.isVLCookieEnabled=h;function u(g){window.heapV=Object.assign({},window.heap,{source:g==null?void 0:g.source,uri:e,loadArgs:g==null?void 0:g.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=u;function d(g,E){var S;if(e=g,E){let P={type:c_.StatusUpdate,value:l_.ReceivedInitMessage},C={targetOrigin:E==null?void 0:E.origin};(S=E==null?void 0:E.source)===null||S===void 0||S.postMessage(P,C)}t||(t=!0,l(),u(E),window.heapV&&(ms.addScript(i(n_)),n()))}r.init=d}(s||(s={})),s})(),h_=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ms.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(_){var j;_.origin===l&&((j=_.data)===null||j===void 0?void 0:j.message)==="init"&&_.source&&(Cn.init(l,_),T(h.initHeapVisualLabeler))},ping(_){typeof _.data=="string"&&_.data==="ping"&&g(_.origin)&&(c=_.origin,o=ms.hjDomainRegex.test(_.origin)?i:_.origin,T(h.ping),A(h.insertMessageScript),E(ms.addCacheBusting("utils.js")))},insertMessageScript:x(_=>{typeof _.data=="string"&&_.data!=="ping"&&(T(h.insertMessageScript),E(_.data))})};function u(){return ms.getToken()}r.getToken=u;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function g(_){return csArray.prototype.some.call(n,j=>j.test(_))}r.isAuthorizedDomain=g;function E(_,j){let U=document.createElement("script");U.type="text/javascript",U.async=!0;let K=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");U.src=`${K}/${e}/${_}`,U.onload=j,U.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(U),S(_)}function S(_){csString.prototype.includes.call(_,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(_,"&mode=")[1])}function P(){A(h.ping),ms.waitForBundleInjection()}r.waitForConnection=P;function C(_){l=_,A(h.initHeapVisualLabeler),Cn.isVLCookieEnabled()&&Cn.init(l)}r.waitForHeapVisualLabeler=C;function A(_){window.addEventListener("message",_,!1)}r.listen=A;function T(_){window.removeEventListener("message",_,!1)}r.removeListener=T;function x(_){return function(j){j.origin===c&&_(j)}}r.secureListener=x;function R(_){c&&t.postMessage(_,c)}r.post=R}(s||(s={})),s})();var lr=window.CSFrameCommunication||h_,u_=(()=>{class s extends So{constructor(t){super(),this.O=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.O.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){G.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return H([wt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var d_=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.pr=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new wS,l=new kl(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new bf(this.Rt,this.E);h.init();let u=new Cf(this.E,h);if(this.Rt.isTopWindowTracker()&&u.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&G.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){G.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Af();let g=new u_(l),E=new i_(this.E,h,this.pr,l,g,c);this.E.isQuotaEnabled()?E.initWithQuota():E.init()}let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(g){return M.isMaskedElement(g)||M.isMaskedElementChild(g)},isAttributeSensitive(g,E){return M.isMaskedAttribute(g,E)},getSensitiveAttributes(g){return vi(g.attributes,E=>M.isMaskedAttribute(g,E.name))}},Console:{warn(g){d&&console.warn("cs.tracking.warning",g)},error(g){d&&console.error("cs.tracking.error",g)}},Version:Bc},window.CSFrameCommunication||(window.CSFrameCommunication=lr,lr.isActivable()&&lr.waitForConnection(),this.E.isCsCrosswritingHeap()&&lr.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return H([wt("main.start"),D("main.start")],s.prototype,"start",null),s})();function f_(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),$.counters.availableFeatures.set(s)})}var p_=(()=>{class s{constructor(t,e,i){this.X=t,this.D=e,this.SO=i,this.vt=[],this.vO=mo().v,f_()}flush(){this.vt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.vt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.SO,v:this.vO}),this.vt=[])}push(t){csArray.prototype.push.call(this.vt,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,H([Qs({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function g_(s,r){let t=s.validationRate/10,e=ws.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Gl.create(r.isTopWindowTracker()),l=new zl(o).create(s.getMetricsUri()),h=new Js,u=new p_(l,h,s.projectId);$.setService(u)}catch(o){G.warn(`Error initializing metrics: ${o.message}`)}}function m_(){var s;Vu();let r=new vf(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Nd(window,r);t.init();let e=new xd;if(wu(G),Pd(),G.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new ef(r,e);G.setStrategy(n)}else if(t.isInWebViewContext()){let n=new rf;G.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Rs(window,"MutationObserver")),bd(),g_(r,t),new d_(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Od(m_)}catch{}});})();

// signature-2256fc4cf550eeea2caa490a4cdd4062fb2565597b72c8d389a947be180ea10e